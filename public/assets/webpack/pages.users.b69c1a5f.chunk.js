(this.webpackJsonp=this.webpackJsonp||[]).push([[88],{160:function(t,e,i){"use strict";var a=i(0),n=i.n(a),r=i(11),s=i(5),o=i(21);e.a={init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.a.noop,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.a.noop;this.url=n()(".content_list").data("href")||Object(o.f)(["limit","offset"]),this.limit=t,this.offset=parseInt(Object(r.j)("offset"),10)||this.limit,this.disable=i,this.prepareData=a,this.callback=s,this.loading=n()(".loading").first(),e&&(this.offset=0,this.getOld()),this.initLoadMore()},getOld:function(){var t=this;this.loading.show(),s.a.get(this.url,{params:{limit:this.limit,offset:this.offset}}).then(function(e){var i=e.data;t.append(i.count,t.prepareData(i.html)),t.callback(),t.disable||t.isScrollable()?t.loading.hide():t.getOld()}).catch(function(){return t.loading.hide()})},append:function(t,e){n()(".content_list").append(e),t>0?this.offset+=t:this.disable=!0},isScrollable:function(){var t=n()(window);return n()(document).height()>t.height()+t.scrollTop()+400},initLoadMore:function(){var t=this;n()(document).off("scroll"),n()(document).endlessScroll({bottomPixels:400,fireDelay:1e3,fireOnce:!0,ceaseFire:function(){return!0===t.disable},callback:function(){t.loading.is(":visible")||(t.loading.show(),t.getOld())}})}}},232:function(t,e,i){"use strict";var a=i(0),n=i.n(a),r=i(39),s=i.n(r),o=i(160),c=i(38),l=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}();var u=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o.a.init(20,!0,!1,function(t){return t},this.updateTooltips),n()(".event-filter-link").on("click",function(t){t.preventDefault(),e.toggleFilter(t.currentTarget),e.reloadActivities()})}return l(t,[{key:"updateTooltips",value:function(){Object(c.e)(n()(".js-timeago",".content_list"))}},{key:"reloadActivities",value:function(){n()(".content_list").html(""),o.a.init(20,!0,!1,function(t){return t},this.updateTooltips)}},{key:"toggleFilter",value:function(t){var e=n()(t),i=e.attr("id").split("_")[0];n()(".event-filter .active").removeClass("active"),s.a.set("event_filter",i),e.closest("li").toggleClass("active")}}]),t}();e.a=u},348:function(t,e,i){"use strict";var a=i(0),n=i.n(a),r=i(39),s=i.n(r),o=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}();var c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e;var i=this.options.className||"user-callout";this.userCalloutBody=n()("."+i),this.cookieName=this.userCalloutBody.data("uid"),this.isCalloutDismissed=s.a.get(this.cookieName),this.init()}return o(t,[{key:"init",value:function(){var t=this;this.isCalloutDismissed&&"false"!==this.isCalloutDismissed||this.userCalloutBody.find(".js-close-callout").on("click",function(e){return t.dismissCallout(e)})}},{key:"dismissCallout",value:function(t){var e=n()(t.currentTarget);this.options.setCalloutPerProject?s.a.set(this.cookieName,"true",{expires:365,path:this.userCalloutBody.data("projectPath")}):s.a.set(this.cookieName,"true",{expires:365}),(e.hasClass("close")||e.hasClass("js-close"))&&this.userCalloutBody.remove()}}]),t}();e.a=c},852:function(t,e,i){"use strict";i.r(e);var a=i(0),n=i.n(a),r=i(348),s=i(39),o=i.n(s),c=i(5),l=i(232),u=i(38),h=i(1),d=i(7),f=i(3),v=i.n(f),p=i(269),y=i(55),g=i(111),m=i.n(g),b=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}();var k={select:y.f,scaleLinear:p.a,scaleThreshold:p.b};var w=function(){return k.scaleLinear().range(["#acd5f2","#254e77"]).domain([0,3])},S=function(){function t(e,i,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.calendarActivitiesPath=a,this.clickDay=this.clickDay.bind(this),this.currentSelectedDate="",this.daySpace=1,this.daySize=15,this.daySizeWithSpace=this.daySize+2*this.daySpace,this.monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.months=[],this.firstDayOfWeek=s,this.timestampsTmp=[];var o=0,c=function(t){var e=new Date,i=0-e.getTimezoneOffset(),a=t/60;return e.setMinutes(e.getMinutes()-i+a),e}(r);c.setHours(0,0,0,0,0);var l=new Date(c);l.setFullYear(c.getFullYear()-1);for(var h=Object(u.b)(l,c),d=0;d<=h;d+=1){var f=new Date(l);f.setDate(f.getDate()+d);var v=f.getDay(),p=i[m()(f,"yyyy-mm-dd")]||0;(v===this.firstDayOfWeek&&0!==d||0===d)&&(this.timestampsTmp.push([]),o+=1),this.timestampsTmp[o-1].push({count:p,date:f,day:v})}this.colorKey=w(),this.color=this.initColor(),this.svg=this.renderSvg(e,o),this.renderDays(),this.renderMonths(),this.renderDayTitles(),this.renderKey(),n()(e+" .js-tooltip").tooltip({html:!0})}return b(t,[{key:"getExtraWidthPadding",value:function(t){var e=0;return this.timestampsTmp[t-1][0].date.getMonth()!==this.timestampsTmp[t-2][0].date.getMonth()&&(e=6),e}},{key:"renderSvg",value:function(t,e){var i=(e+1)*this.daySizeWithSpace+this.getExtraWidthPadding(e);return k.select(t).append("svg").attr("width",i).attr("height",167).attr("class","contrib-calendar")}},{key:"dayYPos",value:function(t){return this.daySizeWithSpace*((t+7-this.firstDayOfWeek)%7)}},{key:"renderDays",value:function(){var t=this;this.svg.selectAll("g").data(this.timestampsTmp).enter().append("g").attr("transform",function(e,i){return v.a.each(e,function(e,a){if(0===a&&0===e.day){var n=e.date.getMonth(),r=t.daySizeWithSpace*i+1+t.daySizeWithSpace,s=v.a.last(t.months);(null==s||n!==s.month&&r-t.daySizeWithSpace!==s.x)&&t.months.push({month:n,x:r})}}),"translate("+(t.daySizeWithSpace*i+1+t.daySizeWithSpace)+", 18)"}).selectAll("rect").data(function(t){return t}).enter().append("rect").attr("x","0").attr("y",function(e){return t.dayYPos(e.day)}).attr("width",this.daySize).attr("height",this.daySize).attr("fill",function(e){return 0!==e.count?t.color(Math.min(e.count,40)):"#ededed"}).attr("title",function(t){return i=(e=t).date,a=e.count,n=new Date(i),r=Object(u.c)(n),s=m()(n,"mmm d, yyyy"),o="No contributions",a>0&&(o=a+" contribution"+(a>1?"s":"")),o+"<br />"+r+" "+s;var e,i,a,n,r,s,o}).attr("class","user-contrib-cell js-tooltip").attr("data-container","body").on("click",this.clickDay)}},{key:"renderDayTitles",value:function(){var t=[{text:"M",y:29+this.dayYPos(1)},{text:"W",y:29+this.dayYPos(3)},{text:"F",y:29+this.dayYPos(5)}];this.svg.append("g").selectAll("text").data(t).enter().append("text").attr("text-anchor","middle").attr("x",8).attr("y",function(t){return t.y}).text(function(t){return t.text}).attr("class","user-contrib-text")}},{key:"renderMonths",value:function(){var t=this;this.svg.append("g").attr("direction","ltr").selectAll("text").data(this.months).enter().append("text").attr("x",function(t){return t.x}).attr("y",10).attr("class","user-contrib-text").text(function(e){return t.monthNames[e.month]})}},{key:"renderKey",value:function(){var t=this,e=["no contributions","1-9 contributions","10-19 contributions","20-29 contributions","30+ contributions"],i=["#ededed",this.colorKey(0),this.colorKey(1),this.colorKey(2),this.colorKey(3)];this.svg.append("g").attr("transform","translate(18, "+(8*this.daySizeWithSpace+16)+")").selectAll("rect").data(i).enter().append("rect").attr("width",this.daySize).attr("height",this.daySize).attr("x",function(e,i){return t.daySizeWithSpace*i}).attr("y",0).attr("fill",function(t){return t}).attr("class","js-tooltip").attr("title",function(t,i){return e[i]}).attr("data-container","body")}},{key:"initColor",value:function(){var t=["#ededed",this.colorKey(0),this.colorKey(1),this.colorKey(2),this.colorKey(3)];return k.scaleThreshold().domain([0,10,20,30]).range(t)}},{key:"clickDay",value:function(t){if(this.currentSelectedDate!==t.date){this.currentSelectedDate=t.date;var e=[this.currentSelectedDate.getFullYear(),this.currentSelectedDate.getMonth()+1,this.currentSelectedDate.getDate()].join("-");n()(".user-calendar-activities").html('\n  <div class="text-center">\n    <i class="fa fa-spinner fa-spin user-calendar-activities-loading"></i>\n  </div>\n'),c.a.get(this.calendarActivitiesPath,{params:{date:e},responseType:"text"}).then(function(t){var e=t.data;return n()(".user-calendar-activities").html(e)}).catch(function(){return Object(d.a)(Object(h.a)("An error occurred while retrieving calendar activity"))})}else this.currentSelectedDate="",n()(".user-calendar-activities").html("")}}]),t}(),D=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}();var j=function(){function t(e){var i=this,a=e.defaultAction,r=e.action,s=e.parentEl;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.loaded={},this.defaultAction=a||"activity",this.action=r||this.defaultAction,this.$parentEl=n()(s)||n()(document),this.windowLocation=window.location,this.$parentEl.find(".nav-links a").each(function(t,e){i.loaded[n()(e).attr("data-action")]=!1}),this.actions=Object.keys(this.loaded),this.bindEvents(),"show"===this.action&&(this.action=this.defaultAction),this.activateTab(this.action)}return D(t,[{key:"bindEvents",value:function(){var t=this;this.$parentEl.off("shown.bs.tab",'.nav-links a[data-toggle="tab"]').on("shown.bs.tab",'.nav-links a[data-toggle="tab"]',function(e){return t.tabShown(e)}).on("click",".gl-pagination a",function(e){return t.changeProjectsPage(e)})}},{key:"changeProjectsPage",value:function(t){t.preventDefault(),n()(".tab-pane.active").empty();var e=n()(t.target).attr("href");this.loadTab(this.getCurrentAction(),e)}},{key:"tabShown",value:function(t){var e=n()(t.target),i=e.data("action"),a=e.attr("href"),r=e.data("endpoint");return this.setTab(i,r),this.setCurrentAction(a)}},{key:"activateTab",value:function(t){return this.$parentEl.find(".nav-links .js-"+t+"-tab a").tab("show")}},{key:"setTab",value:function(t,e){if(!this.loaded[t]){"activity"===t&&this.loadActivities();["groups","contributed","projects","snippets"].indexOf(t)>-1&&this.loadTab(t,e)}}},{key:"loadTab",value:function(t,e){var i=this;return this.toggleLoading(!0),c.a.get(e).then(function(e){var a=e.data,r="div#"+t;i.$parentEl.find(r).html(a.html),i.loaded[t]=!0,Object(u.e)(n()(".js-timeago",r)),i.toggleLoading(!1)}).catch(function(){i.toggleLoading(!1)})}},{key:"loadActivities",value:function(){if(!this.loaded.activity){var t=this.$parentEl.find(".user-calendar"),e=t.data("calendarPath"),i=t.data("calendarActivitiesPath"),a=t.data("utcOffset"),n="UTC";0!==a&&(n="UTC"+(a>0?"+":"")+a/3600),c.a.get(e).then(function(e){var r=e.data;t.html('\n  <div class="clearfix calendar">\n    <div class="js-contrib-calendar"></div>\n    <div class="calendar-hint">\n      Summary of issues, merge requests, push events, and comments\n    </div>\n  </div>\n'),t.find(".calendar-hint").append("(Timezone: "+n+")"),new S(".js-contrib-calendar",r,i,a)}).catch(function(){return Object(d.a)(Object(h.a)("There was an error loading users activity calendar."))}),new l.a,this.loaded.activity=!0}}},{key:"toggleLoading",value:function(t){return this.$parentEl.find(".loading-status .loading").toggleClass("hide",!t)}},{key:"setCurrentAction",value:function(t){var e=t;return e=e.replace(/\/+$/,""),e+=this.windowLocation.search+this.windowLocation.hash,window.history.replaceState({url:e},document.title,e),e}},{key:"getCurrentAction",value:function(){return this.$parentEl.find(".nav-links a.active").data("action")}}]),t}();document.addEventListener("DOMContentLoaded",function(){!function(t){var e=this;n()(".profile-groups-avatars").tooltip({placement:"top"}),new j({parentEl:".user-profile",action:t}),n()(".hide-project-limit-message").on("click",function(t){t.preventDefault(),o.a.set("hide_project_limit_message","false"),n()(e).parents(".project-limit-message").remove()})}(n()("body").attr("data-page").split(":")[1]),new r.a})},888:function(t,e,i){i(31),t.exports=i(852)}},[[888,0,1,13]]]);
//# sourceMappingURL=pages.users.b69c1a5f.chunk.js.map