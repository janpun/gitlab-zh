{"version":3,"sources":["webpack:///./pages/projects/compare/show/index.js","webpack:///./files_comment_button.js","webpack:///./single_file_diff.js","webpack:///./diff.js","webpack:///./lib/utils/sticky.js","webpack:////var/cache/omnibus/src/gitlab-rails/node_modules/stickyfilljs/dist/stickyfill.js","webpack:///./gpg_badges.js","webpack:///./init_changes_dropdown.js","webpack:///./compare_autocomplete.js","webpack:///./pages/projects/compare/index.js"],"names":["document","addEventListener","_diff__WEBPACK_IMPORTED_MODULE_0__","Object","_init_changes_dropdown__WEBPACK_IMPORTED_MODULE_1__","querySelector","offsetHeight","_gpg_badges__WEBPACK_IMPORTED_MODULE_2__","fetch","files_comment_button","init","$diffFile","_this","this","userCanCreateNote","closest","data","isParallelView","js_cookie_default","a","get","on","LINE_COLUMN_CLASSES","e","showButton","hideButton","buttonParentElement","getButtonParent","currentTarget","validateButtonParent","classList","add","nextElementSibling","remove","hoveredElement","contains","previousElementSibling","parentNode","WRAPPER","LOADING_HTML","COLLAPSED_HTML","SingleFileDiff","file","_classCallCheck","toggleDiff","bind","content","jquery_default","$toggleIcon","diffForPath","find","isOpen","collapsedContent","loadingContent","addClass","html","hide","after","target","$target","cb","hasClass","hasError","removeClass","getContentHTML","show","gl","diffNotesCompileComponents","axios_utils","then","_ref","syntax_highlight","$file","canCreateNote","is","helpers","initImageDiff","catch","flash","locale","isBound","diff_Diff","Diff","diff_classCallCheck","each","index","single_file_diff","tab","getElementById","dataset","isLocked","firstFile","first","hasAttribute","handleClickUnfold","handleClickLineNum","handleParallelLineDown","url_utility","highlightSelectedLine","openAnchoredDiff","_lineNumbers","lineNumbers","parent","_lineNumbers2","_slicedToArray","oldLineNumber","newLineNumber","offset","bottom","since","to","unfold","lineNumber","prevNewLine","prev","parents","link","params","view","replaceWith","locationHash","anchoredDiff","split","diffFile","$","length","clickTarget","hash","attr","preventDefault","window","history","pushState","location","line","table","lineClass","filter","name","children","toArray","map","elm","parseInt","$diffFiles","isSticky","el","scrollY","stickyTop","insertPlaceholder","top","Math","floor","offsetTop","placeholder","createElement","createPlaceholder","heightBefore","insertBefore","style","height","stickyMonitor","arguments","undefined","CSS","supports","passive","polyfillSticky","stickyfilljs__WEBPACK_IMPORTED_MODULE_0___default","_createClass","defineProperties","props","i","descriptor","enumerable","configurable","writable","defineProperty","key","Constructor","protoProps","staticProps","prototype","seppuku","getComputedStyle","testNode","some","prefix","position","shadowRootExists","ShadowRoot","scroll","left","stickies","extend","targetObj","sourceObject","hasOwnProperty","parseNumeric","val","parseFloat","getDocOffsetTop","node","docOffsetTop","offsetParent","Sticky","instance","TypeError","HTMLElement","Error","sticky","_node","_stickyMode","_active","push","refresh","value","_removed","_deactivate","nodeComputedStyle","nodeComputedProps","display","marginTop","marginBottom","marginLeft","marginRight","cssFloat","isNaN","referenceNode","host","nodeWinOffset","getBoundingClientRect","parentWinOffset","parentComputedStyle","_parent","styles","_offsetToWindow","right","documentElement","clientWidth","_offsetToParent","borderTopWidth","borderLeftWidth","borderRightWidth","_styles","width","nodeTopValue","_limits","start","pageYOffset","end","borderBottomWidth","parentPosition","_recalcPosition","clone","_clone","padding","border","borderSpacing","fontSize","stickyMode","abs","removeChild","_this2","splice","Stickyfill","addOne","nodeList","addedStickies","_loop","refreshAll","forEach","removeOne","_loop2","removeAll","checkScroll","pageXOffset","fastCheckTimer","startFastCheckTimer","setInterval","_fastCheck","docHiddenKey","visibilityChangeEventName","clearInterval","module","exports","GpgBadges","tag","jquery__WEBPACK_IMPORTED_MODULE_0___default","Promise","resolve","badges","displayError","_flash__WEBPACK_IMPORTED_MODULE_3__","_locale__WEBPACK_IMPORTED_MODULE_4__","endpoint","reject","_lib_utils_common_utils__WEBPACK_IMPORTED_MODULE_1__","serialize","_lib_utils_axios_utils__WEBPACK_IMPORTED_MODULE_2__","signatures","signature","commit_sha","__webpack_exports__","_lib_utils_sticky__WEBPACK_IMPORTED_MODULE_1__","glDropdown","filterable","remoteFilter","_lib_utils_text_utility__WEBPACK_IMPORTED_MODULE_4__","__webpack_require__","initCompareAutocomplete","limitTo","clickHandler","$dropdown","selected","$dropdownContainer","$fieldInput","$filterInput","term","callback","ref","search","_locale__WEBPACK_IMPORTED_MODULE_1__","selectable","filterRemote","fieldName","filterInput","renderRow","header","text","append","id","obj","$el","toggleLabel","trim","clicked","keyCode","which","prop","replace","tooltip","_compare_autocomplete__WEBPACK_IMPORTED_MODULE_0__"],"mappings":"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","file":"pages.projects.compare.show.fb0b7878.chunk.js","sourcesContent":["import Diff from '~/diff';\nimport initChangesDropdown from '~/init_changes_dropdown';\nimport GpgBadges from '~/gpg_badges';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  new Diff(); // eslint-disable-line no-new\n  const paddingTop = 16;\n  initChangesDropdown(document.querySelector('.navbar-gitlab').offsetHeight - paddingTop);\n  GpgBadges.fetch();\n});\n","/* Developer beware! Do not add logic to showButton or hideButton\n * that will force a reflow. Doing so will create a signficant performance\n * bottleneck for pages with large diffs. For a comprehensive list of what\n * causes reflows, visit https://gist.github.com/paulirish/5d52fb081b3570c81e3a\n */\n\nimport Cookies from 'js-cookie';\n\nconst LINE_NUMBER_CLASS = 'diff-line-num';\nconst UNFOLDABLE_LINE_CLASS = 'js-unfold';\nconst NO_COMMENT_CLASS = 'no-comment-btn';\nconst EMPTY_CELL_CLASS = 'empty-cell';\nconst OLD_LINE_CLASS = 'old_line';\nconst LINE_COLUMN_CLASSES = `.${LINE_NUMBER_CLASS}, .line_content`;\nconst DIFF_CONTAINER_SELECTOR = '.files';\nconst DIFF_EXPANDED_CLASS = 'diff-expanded';\n\nexport default {\n  init($diffFile) {\n    /* Caching is used only when the following members are *true*.\n     * This is because there are likely to be\n     * differently configured versions of diffs in the same session.\n     * However if these values are true, they\n     * will be true in all cases */\n\n    if (!this.userCanCreateNote) {\n      // data-can-create-note is an empty string when true, otherwise undefined\n      this.userCanCreateNote = $diffFile.closest(DIFF_CONTAINER_SELECTOR).data('canCreateNote') === '';\n    }\n\n    this.isParallelView = Cookies.get('diff_view') === 'parallel';\n\n    if (this.userCanCreateNote) {\n      $diffFile.on('mouseover', LINE_COLUMN_CLASSES, e => this.showButton(this.isParallelView, e))\n        .on('mouseleave', LINE_COLUMN_CLASSES, e => this.hideButton(this.isParallelView, e));\n    }\n  },\n\n  showButton(isParallelView, e) {\n    const buttonParentElement = this.getButtonParent(e.currentTarget, isParallelView);\n\n    if (!this.validateButtonParent(buttonParentElement)) return;\n\n    buttonParentElement.classList.add('is-over');\n    buttonParentElement.nextElementSibling.classList.add('is-over');\n  },\n\n  hideButton(isParallelView, e) {\n    const buttonParentElement = this.getButtonParent(e.currentTarget, isParallelView);\n\n    buttonParentElement.classList.remove('is-over');\n    buttonParentElement.nextElementSibling.classList.remove('is-over');\n  },\n\n  getButtonParent(hoveredElement, isParallelView) {\n    if (isParallelView) {\n      if (!hoveredElement.classList.contains(LINE_NUMBER_CLASS)) {\n        return hoveredElement.previousElementSibling;\n      }\n    } else if (!hoveredElement.classList.contains(OLD_LINE_CLASS)) {\n      return hoveredElement.parentNode.querySelector(`.${OLD_LINE_CLASS}`);\n    }\n    return hoveredElement;\n  },\n\n  validateButtonParent(buttonParentElement) {\n    return !buttonParentElement.classList.contains(EMPTY_CELL_CLASS) &&\n      !buttonParentElement.classList.contains(UNFOLDABLE_LINE_CLASS) &&\n      !buttonParentElement.classList.contains(NO_COMMENT_CLASS) &&\n      !buttonParentElement.parentNode.classList.contains(DIFF_EXPANDED_CLASS);\n  },\n};\n","/* eslint-disable func-names, prefer-arrow-callback, consistent-return, */\n\nimport $ from 'jquery';\nimport { __ } from './locale';\nimport axios from './lib/utils/axios_utils';\nimport createFlash from './flash';\nimport FilesCommentButton from './files_comment_button';\nimport imageDiffHelper from './image_diff/helpers/index';\nimport syntaxHighlight from './syntax_highlight';\n\nconst WRAPPER = '<div class=\"diff-content\"></div>';\nconst LOADING_HTML = '<i class=\"fa fa-spinner fa-spin\"></i>';\nconst ERROR_HTML = '<div class=\"nothing-here-block\"><i class=\"fa fa-warning\"></i> Could not load diff</div>';\nconst COLLAPSED_HTML = '<div class=\"nothing-here-block diff-collapsed\">This diff is collapsed. <button class=\"click-to-expand btn btn-link\">Click to expand it.</button></div>';\n\nexport default class SingleFileDiff {\n  constructor(file) {\n    this.file = file;\n    this.toggleDiff = this.toggleDiff.bind(this);\n    this.content = $('.diff-content', this.file);\n    this.$toggleIcon = $('.diff-toggle-caret', this.file);\n    this.diffForPath = this.content.find('[data-diff-for-path]').data('diffForPath');\n    this.isOpen = !this.diffForPath;\n    if (this.diffForPath) {\n      this.collapsedContent = this.content;\n      this.loadingContent = $(WRAPPER).addClass('loading').html(LOADING_HTML).hide();\n      this.content = null;\n      this.collapsedContent.after(this.loadingContent);\n      this.$toggleIcon.addClass('fa-caret-right');\n    } else {\n      this.collapsedContent = $(WRAPPER).html(COLLAPSED_HTML).hide();\n      this.content.after(this.collapsedContent);\n      this.$toggleIcon.addClass('fa-caret-down');\n    }\n\n    $('.js-file-title, .click-to-expand', this.file).on('click', (function (e) {\n      this.toggleDiff($(e.target));\n    }).bind(this));\n  }\n\n  toggleDiff($target, cb) {\n    if (!$target.hasClass('js-file-title') && !$target.hasClass('click-to-expand') && !$target.hasClass('diff-toggle-caret')) return;\n    this.isOpen = !this.isOpen;\n    if (!this.isOpen && !this.hasError) {\n      this.content.hide();\n      this.$toggleIcon.addClass('fa-caret-right').removeClass('fa-caret-down');\n      this.collapsedContent.show();\n      if (typeof gl.diffNotesCompileComponents !== 'undefined') {\n        gl.diffNotesCompileComponents();\n      }\n    } else if (this.content) {\n      this.collapsedContent.hide();\n      this.content.show();\n      this.$toggleIcon.addClass('fa-caret-down').removeClass('fa-caret-right');\n      if (typeof gl.diffNotesCompileComponents !== 'undefined') {\n        gl.diffNotesCompileComponents();\n      }\n    } else {\n      this.$toggleIcon.addClass('fa-caret-down').removeClass('fa-caret-right');\n      return this.getContentHTML(cb);\n    }\n  }\n\n  getContentHTML(cb) {\n    this.collapsedContent.hide();\n    this.loadingContent.show();\n\n    axios.get(this.diffForPath)\n      .then(({ data }) => {\n        this.loadingContent.hide();\n        if (data.html) {\n          this.content = $(data.html);\n          syntaxHighlight(this.content);\n        } else {\n          this.hasError = true;\n          this.content = $(ERROR_HTML);\n        }\n        this.collapsedContent.after(this.content);\n\n        if (typeof gl.diffNotesCompileComponents !== 'undefined') {\n          gl.diffNotesCompileComponents();\n        }\n\n        const $file = $(this.file);\n        FilesCommentButton.init($file);\n\n        const canCreateNote = $file.closest('.files').is('[data-can-create-note]');\n        imageDiffHelper.initImageDiff($file[0], canCreateNote);\n\n        if (cb) cb();\n      })\n      .catch(() => {\n        createFlash(__('An error occurred while retrieving diff'));\n      });\n  }\n}\n","import $ from 'jquery';\nimport axios from '~/lib/utils/axios_utils';\nimport flash from '~/flash';\nimport { __ } from '~/locale';\nimport { getLocationHash } from './lib/utils/url_utility';\nimport FilesCommentButton from './files_comment_button';\nimport SingleFileDiff from './single_file_diff';\nimport imageDiffHelper from './image_diff/helpers/index';\n\nconst UNFOLD_COUNT = 20;\nlet isBound = false;\n\nexport default class Diff {\n  constructor() {\n    const $diffFile = $('.files .diff-file');\n\n    $diffFile.each((index, file) => {\n      if (!$.data(file, 'singleFileDiff')) {\n        $.data(file, 'singleFileDiff', new SingleFileDiff(file));\n      }\n    });\n\n    const tab = document.getElementById('diffs');\n    if (!tab || (tab && tab.dataset && tab.dataset.isLocked !== '')) FilesCommentButton.init($diffFile);\n\n    const firstFile = $('.files').first().get(0);\n    const canCreateNote = firstFile && firstFile.hasAttribute('data-can-create-note');\n    $diffFile.each((index, file) => imageDiffHelper.initImageDiff(file, canCreateNote));\n\n    if (!isBound) {\n      $(document)\n        .on('click', '.js-unfold', this.handleClickUnfold.bind(this))\n        .on('click', '.diff-line-num a', this.handleClickLineNum.bind(this))\n        .on('mousedown', 'td.line_content.parallel', this.handleParallelLineDown.bind(this));\n      isBound = true;\n    }\n\n    if (getLocationHash()) {\n      this.highlightSelectedLine();\n    }\n\n    this.openAnchoredDiff();\n  }\n\n  handleClickUnfold(e) {\n    const $target = $(e.target);\n    const [oldLineNumber, newLineNumber] = this.lineNumbers($target.parent());\n    const offset = newLineNumber - oldLineNumber;\n    const bottom = $target.hasClass('js-unfold-bottom');\n    let since;\n    let to;\n    let unfold = true;\n\n    if (bottom) {\n      const lineNumber = newLineNumber + 1;\n      since = lineNumber;\n      to = lineNumber + UNFOLD_COUNT;\n    } else {\n      const lineNumber = newLineNumber - 1;\n      since = lineNumber - UNFOLD_COUNT;\n      to = lineNumber;\n\n      // make sure we aren't loading more than we need\n      const prevNewLine = this.lineNumbers($target.parent().prev())[1];\n      if (since <= prevNewLine + 1) {\n        since = prevNewLine + 1;\n        unfold = false;\n      }\n    }\n\n    const file = $target.parents('.diff-file');\n    const link = file.data('blobDiffPath');\n    const view = file.data('view');\n\n    const params = { since, to, bottom, offset, unfold, view };\n    axios.get(link, { params })\n    .then(({ data }) => $target.parent().replaceWith(data))\n    .catch(() => flash(__('An error occurred while loading diff')));\n  }\n\n  openAnchoredDiff(cb) {\n    const locationHash = getLocationHash();\n    const anchoredDiff = locationHash && locationHash.split('_')[0];\n\n    if (!anchoredDiff) return;\n\n    const diffTitle = $(`#${anchoredDiff}`);\n    const diffFile = diffTitle.closest('.diff-file');\n    const nothingHereBlock = $('.nothing-here-block:visible', diffFile);\n    if (nothingHereBlock.length) {\n      const clickTarget = $('.js-file-title, .click-to-expand', diffFile);\n      diffFile.data('singleFileDiff').toggleDiff(clickTarget, () => {\n        this.highlightSelectedLine();\n        if (cb) cb();\n      });\n    } else if (cb) {\n      cb();\n    }\n  }\n\n  handleClickLineNum(e) {\n    const hash = $(e.currentTarget).attr('href');\n    e.preventDefault();\n    if (window.history.pushState) {\n      window.history.pushState(null, null, hash);\n    } else {\n      window.location.hash = hash;\n    }\n    this.highlightSelectedLine();\n  }\n  // eslint-disable-next-line class-methods-use-this\n  handleParallelLineDown(e) {\n    const line = $(e.currentTarget);\n    const table = line.closest('table');\n\n    table.removeClass('left-side-selected right-side-selected');\n\n    const lineClass = ['left-side', 'right-side'].filter(name => line.hasClass(name))[0];\n    if (lineClass) {\n      table.addClass(`${lineClass}-selected`);\n    }\n  }\n  // eslint-disable-next-line class-methods-use-this\n  diffViewType() {\n    return $('.inline-parallel-buttons a.active').data('viewType');\n  }\n  // eslint-disable-next-line class-methods-use-this\n  lineNumbers(line) {\n    const children = line.find('.diff-line-num').toArray();\n    if (children.length !== 2) {\n      return [0, 0];\n    }\n    return children.map(elm => parseInt($(elm).data('linenumber'), 10) || 0);\n  }\n  // eslint-disable-next-line class-methods-use-this\n  highlightSelectedLine() {\n    const hash = getLocationHash();\n    const $diffFiles = $('.diff-file');\n    $diffFiles.find('.hll').removeClass('hll');\n\n    if (hash) {\n      $diffFiles\n        .find(`tr#${hash}:not(.match) td, td#${hash}, td[data-line-code=\"${hash}\"]`)\n        .addClass('hll');\n    }\n  }\n}\n","import StickyFill from 'stickyfilljs';\n\nexport const createPlaceholder = () => {\n  const placeholder = document.createElement('div');\n  placeholder.classList.add('sticky-placeholder');\n\n  return placeholder;\n};\n\nexport const isSticky = (el, scrollY, stickyTop, insertPlaceholder) => {\n  const top = Math.floor(el.offsetTop - scrollY);\n\n  if (top <= stickyTop && !el.classList.contains('is-stuck')) {\n    const placeholder = insertPlaceholder ? createPlaceholder() : null;\n    const heightBefore = el.offsetHeight;\n\n    el.classList.add('is-stuck');\n\n    if (insertPlaceholder) {\n      el.parentNode.insertBefore(placeholder, el.nextElementSibling);\n\n      placeholder.style.height = `${heightBefore - el.offsetHeight}px`;\n    }\n  } else if (top > stickyTop && el.classList.contains('is-stuck')) {\n    el.classList.remove('is-stuck');\n\n    if (insertPlaceholder && el.nextElementSibling && el.nextElementSibling.classList.contains('sticky-placeholder')) {\n      el.nextElementSibling.remove();\n    }\n  }\n};\n\n/**\n * Create a listener that will toggle a 'is-stuck' class, based on the current scroll position.\n *\n * - If the current environment does not support `position: sticky`, do nothing.\n *\n * @param {HTMLElement} el The `position: sticky` element.\n * @param {Number} stickyTop Used to determine when an element is stuck.\n * @param {Boolean} insertPlaceholder Should a placeholder element be created when element is stuck?\n */\nexport const stickyMonitor = (el, stickyTop, insertPlaceholder = true) => {\n  if (!el) return;\n\n  if (typeof CSS === 'undefined' || !(CSS.supports('(position: -webkit-sticky) or (position: sticky)'))) return;\n\n  document.addEventListener('scroll', () => isSticky(el, window.scrollY, stickyTop, insertPlaceholder), {\n    passive: true,\n  });\n};\n\n/**\n * Polyfill the `position: sticky` behavior.\n *\n * - If the current environment supports `position: sticky`, do nothing.\n * - Can receive an iterable element list (NodeList, jQuery collection, etc.) or single HTMLElement.\n */\nexport const polyfillSticky = (el) => {\n  StickyFill.add(el);\n};\n","/*!\r\n  * Stickyfill – `position: sticky` polyfill\r\n  * v. 2.0.5 | https://github.com/wilddeer/stickyfill\r\n  * MIT License\r\n  */\r\n\r\n;(function(window, document) {\r\n    'use strict';\r\n    \r\n    /*\r\n     * 1. Check if the browser supports `position: sticky` natively or is too old to run the polyfill.\r\n     *    If either of these is the case set `seppuku` flag. It will be checked later to disable key features\r\n     *    of the polyfill, but the API will remain functional to avoid breaking things.\r\n     */\r\n    \r\n    var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n    \r\n    function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n    \r\n    var seppuku = false;\r\n    \r\n    // The polyfill cant’t function properly without `getComputedStyle`.\r\n    if (!window.getComputedStyle) seppuku = true;\r\n    // Dont’t get in a way if the browser supports `position: sticky` natively.\r\n    else {\r\n            var testNode = document.createElement('div');\r\n    \r\n            if (['', '-webkit-', '-moz-', '-ms-'].some(function (prefix) {\r\n                try {\r\n                    testNode.style.position = prefix + 'sticky';\r\n                } catch (e) {}\r\n    \r\n                return testNode.style.position != '';\r\n            })) seppuku = true;\r\n        }\r\n    \r\n    /*\r\n     * 2. “Global” vars used across the polyfill\r\n     */\r\n    \r\n    // Check if Shadow Root constructor exists to make further checks simpler\r\n    var shadowRootExists = typeof ShadowRoot !== 'undefined';\r\n    \r\n    // Last saved scroll position\r\n    var scroll = {\r\n        top: null,\r\n        left: null\r\n    };\r\n    \r\n    // Array of created Sticky instances\r\n    var stickies = [];\r\n    \r\n    /*\r\n     * 3. Utility functions\r\n     */\r\n    function extend(targetObj, sourceObject) {\r\n        for (var key in sourceObject) {\r\n            if (sourceObject.hasOwnProperty(key)) {\r\n                targetObj[key] = sourceObject[key];\r\n            }\r\n        }\r\n    }\r\n    \r\n    function parseNumeric(val) {\r\n        return parseFloat(val) || 0;\r\n    }\r\n    \r\n    function getDocOffsetTop(node) {\r\n        var docOffsetTop = 0;\r\n    \r\n        while (node) {\r\n            docOffsetTop += node.offsetTop;\r\n            node = node.offsetParent;\r\n        }\r\n    \r\n        return docOffsetTop;\r\n    }\r\n    \r\n    /*\r\n     * 4. Sticky class\r\n     */\r\n    \r\n    var Sticky = function () {\r\n        function Sticky(node) {\r\n            _classCallCheck(this, Sticky);\r\n    \r\n            if (!(node instanceof HTMLElement)) throw new Error('First argument must be HTMLElement');\r\n            if (stickies.some(function (sticky) {\r\n                return sticky._node === node;\r\n            })) throw new Error('Stickyfill is already applied to this node');\r\n    \r\n            this._node = node;\r\n            this._stickyMode = null;\r\n            this._active = false;\r\n    \r\n            stickies.push(this);\r\n    \r\n            this.refresh();\r\n        }\r\n    \r\n        _createClass(Sticky, [{\r\n            key: 'refresh',\r\n            value: function refresh() {\r\n                if (seppuku || this._removed) return;\r\n                if (this._active) this._deactivate();\r\n    \r\n                var node = this._node;\r\n    \r\n                /*\r\n                 * 1. Save node computed props\r\n                 */\r\n                var nodeComputedStyle = getComputedStyle(node);\r\n                var nodeComputedProps = {\r\n                    top: nodeComputedStyle.top,\r\n                    display: nodeComputedStyle.display,\r\n                    marginTop: nodeComputedStyle.marginTop,\r\n                    marginBottom: nodeComputedStyle.marginBottom,\r\n                    marginLeft: nodeComputedStyle.marginLeft,\r\n                    marginRight: nodeComputedStyle.marginRight,\r\n                    cssFloat: nodeComputedStyle.cssFloat\r\n                };\r\n    \r\n                /*\r\n                 * 2. Check if the node can be activated\r\n                 */\r\n                if (isNaN(parseFloat(nodeComputedProps.top)) || nodeComputedProps.display == 'table-cell' || nodeComputedProps.display == 'none') return;\r\n    \r\n                this._active = true;\r\n    \r\n                /*\r\n                 * 3. Get necessary node parameters\r\n                 */\r\n                var referenceNode = node.parentNode;\r\n                var parentNode = shadowRootExists && referenceNode instanceof ShadowRoot ? referenceNode.host : referenceNode;\r\n                var nodeWinOffset = node.getBoundingClientRect();\r\n                var parentWinOffset = parentNode.getBoundingClientRect();\r\n                var parentComputedStyle = getComputedStyle(parentNode);\r\n    \r\n                this._parent = {\r\n                    node: parentNode,\r\n                    styles: {\r\n                        position: parentNode.style.position\r\n                    },\r\n                    offsetHeight: parentNode.offsetHeight\r\n                };\r\n                this._offsetToWindow = {\r\n                    left: nodeWinOffset.left,\r\n                    right: document.documentElement.clientWidth - nodeWinOffset.right\r\n                };\r\n                this._offsetToParent = {\r\n                    top: nodeWinOffset.top - parentWinOffset.top - parseNumeric(parentComputedStyle.borderTopWidth),\r\n                    left: nodeWinOffset.left - parentWinOffset.left - parseNumeric(parentComputedStyle.borderLeftWidth),\r\n                    right: -nodeWinOffset.right + parentWinOffset.right - parseNumeric(parentComputedStyle.borderRightWidth)\r\n                };\r\n                this._styles = {\r\n                    position: node.style.position,\r\n                    top: node.style.top,\r\n                    bottom: node.style.bottom,\r\n                    left: node.style.left,\r\n                    right: node.style.right,\r\n                    width: node.style.width,\r\n                    marginTop: node.style.marginTop,\r\n                    marginLeft: node.style.marginLeft,\r\n                    marginRight: node.style.marginRight\r\n                };\r\n    \r\n                var nodeTopValue = parseNumeric(nodeComputedProps.top);\r\n                this._limits = {\r\n                    start: nodeWinOffset.top + window.pageYOffset - nodeTopValue,\r\n                    end: parentWinOffset.top + window.pageYOffset + parentNode.offsetHeight - parseNumeric(parentComputedStyle.borderBottomWidth) - node.offsetHeight - nodeTopValue - parseNumeric(nodeComputedProps.marginBottom)\r\n                };\r\n    \r\n                /*\r\n                 * 4. Ensure that the node will be positioned relatively to the parent node\r\n                 */\r\n                var parentPosition = parentComputedStyle.position;\r\n    \r\n                if (parentPosition != 'absolute' && parentPosition != 'relative') {\r\n                    parentNode.style.position = 'relative';\r\n                }\r\n    \r\n                /*\r\n                 * 5. Recalc node position.\r\n                 *    It’s important to do this before clone injection to avoid scrolling bug in Chrome.\r\n                 */\r\n                this._recalcPosition();\r\n    \r\n                /*\r\n                 * 6. Create a clone\r\n                 */\r\n                var clone = this._clone = {};\r\n                clone.node = document.createElement('div');\r\n    \r\n                // Apply styles to the clone\r\n                extend(clone.node.style, {\r\n                    width: nodeWinOffset.right - nodeWinOffset.left + 'px',\r\n                    height: nodeWinOffset.bottom - nodeWinOffset.top + 'px',\r\n                    marginTop: nodeComputedProps.marginTop,\r\n                    marginBottom: nodeComputedProps.marginBottom,\r\n                    marginLeft: nodeComputedProps.marginLeft,\r\n                    marginRight: nodeComputedProps.marginRight,\r\n                    cssFloat: nodeComputedProps.cssFloat,\r\n                    padding: 0,\r\n                    border: 0,\r\n                    borderSpacing: 0,\r\n                    fontSize: '1em',\r\n                    position: 'static'\r\n                });\r\n    \r\n                referenceNode.insertBefore(clone.node, node);\r\n                clone.docOffsetTop = getDocOffsetTop(clone.node);\r\n            }\r\n        }, {\r\n            key: '_recalcPosition',\r\n            value: function _recalcPosition() {\r\n                if (!this._active || this._removed) return;\r\n    \r\n                var stickyMode = scroll.top <= this._limits.start ? 'start' : scroll.top >= this._limits.end ? 'end' : 'middle';\r\n    \r\n                if (this._stickyMode == stickyMode) return;\r\n    \r\n                switch (stickyMode) {\r\n                    case 'start':\r\n                        extend(this._node.style, {\r\n                            position: 'absolute',\r\n                            left: this._offsetToParent.left + 'px',\r\n                            right: this._offsetToParent.right + 'px',\r\n                            top: this._offsetToParent.top + 'px',\r\n                            bottom: 'auto',\r\n                            width: 'auto',\r\n                            marginLeft: 0,\r\n                            marginRight: 0,\r\n                            marginTop: 0\r\n                        });\r\n                        break;\r\n    \r\n                    case 'middle':\r\n                        extend(this._node.style, {\r\n                            position: 'fixed',\r\n                            left: this._offsetToWindow.left + 'px',\r\n                            right: this._offsetToWindow.right + 'px',\r\n                            top: this._styles.top,\r\n                            bottom: 'auto',\r\n                            width: 'auto',\r\n                            marginLeft: 0,\r\n                            marginRight: 0,\r\n                            marginTop: 0\r\n                        });\r\n                        break;\r\n    \r\n                    case 'end':\r\n                        extend(this._node.style, {\r\n                            position: 'absolute',\r\n                            left: this._offsetToParent.left + 'px',\r\n                            right: this._offsetToParent.right + 'px',\r\n                            top: 'auto',\r\n                            bottom: 0,\r\n                            width: 'auto',\r\n                            marginLeft: 0,\r\n                            marginRight: 0\r\n                        });\r\n                        break;\r\n                }\r\n    \r\n                this._stickyMode = stickyMode;\r\n            }\r\n        }, {\r\n            key: '_fastCheck',\r\n            value: function _fastCheck() {\r\n                if (!this._active || this._removed) return;\r\n    \r\n                if (Math.abs(getDocOffsetTop(this._clone.node) - this._clone.docOffsetTop) > 1 || Math.abs(this._parent.node.offsetHeight - this._parent.offsetHeight) > 1) this.refresh();\r\n            }\r\n        }, {\r\n            key: '_deactivate',\r\n            value: function _deactivate() {\r\n                var _this = this;\r\n    \r\n                if (!this._active || this._removed) return;\r\n    \r\n                this._clone.node.parentNode.removeChild(this._clone.node);\r\n                delete this._clone;\r\n    \r\n                extend(this._node.style, this._styles);\r\n                delete this._styles;\r\n    \r\n                // Check whether element’s parent node is used by other stickies.\r\n                // If not, restore parent node’s styles.\r\n                if (!stickies.some(function (sticky) {\r\n                    return sticky !== _this && sticky._parent && sticky._parent.node === _this._parent.node;\r\n                })) {\r\n                    extend(this._parent.node.style, this._parent.styles);\r\n                }\r\n                delete this._parent;\r\n    \r\n                this._stickyMode = null;\r\n                this._active = false;\r\n    \r\n                delete this._offsetToWindow;\r\n                delete this._offsetToParent;\r\n                delete this._limits;\r\n            }\r\n        }, {\r\n            key: 'remove',\r\n            value: function remove() {\r\n                var _this2 = this;\r\n    \r\n                this._deactivate();\r\n    \r\n                stickies.some(function (sticky, index) {\r\n                    if (sticky._node === _this2._node) {\r\n                        stickies.splice(index, 1);\r\n                        return true;\r\n                    }\r\n                });\r\n    \r\n                this._removed = true;\r\n            }\r\n        }]);\r\n    \r\n        return Sticky;\r\n    }();\r\n    \r\n    /*\r\n     * 5. Stickyfill API\r\n     */\r\n    \r\n    \r\n    var Stickyfill = {\r\n        stickies: stickies,\r\n        Sticky: Sticky,\r\n    \r\n        addOne: function addOne(node) {\r\n            // Check whether it’s a node\r\n            if (!(node instanceof HTMLElement)) {\r\n                // Maybe it’s a node list of some sort?\r\n                // Take first node from the list then\r\n                if (node.length && node[0]) node = node[0];else return;\r\n            }\r\n    \r\n            // Check if Stickyfill is already applied to the node\r\n            // and return existing sticky\r\n            for (var i = 0; i < stickies.length; i++) {\r\n                if (stickies[i]._node === node) return stickies[i];\r\n            }\r\n    \r\n            // Create and return new sticky\r\n            return new Sticky(node);\r\n        },\r\n        add: function add(nodeList) {\r\n            // If it’s a node make an array of one node\r\n            if (nodeList instanceof HTMLElement) nodeList = [nodeList];\r\n            // Check if the argument is an iterable of some sort\r\n            if (!nodeList.length) return;\r\n    \r\n            // Add every element as a sticky and return an array of created Sticky instances\r\n            var addedStickies = [];\r\n    \r\n            var _loop = function _loop(i) {\r\n                var node = nodeList[i];\r\n    \r\n                // If it’s not an HTMLElement – create an empty element to preserve 1-to-1\r\n                // correlation with input list\r\n                if (!(node instanceof HTMLElement)) {\r\n                    addedStickies.push(void 0);\r\n                    return 'continue';\r\n                }\r\n    \r\n                // If Stickyfill is already applied to the node\r\n                // add existing sticky\r\n                if (stickies.some(function (sticky) {\r\n                    if (sticky._node === node) {\r\n                        addedStickies.push(sticky);\r\n                        return true;\r\n                    }\r\n                })) return 'continue';\r\n    \r\n                // Create and add new sticky\r\n                addedStickies.push(new Sticky(node));\r\n            };\r\n    \r\n            for (var i = 0; i < nodeList.length; i++) {\r\n                var _ret = _loop(i);\r\n    \r\n                if (_ret === 'continue') continue;\r\n            }\r\n    \r\n            return addedStickies;\r\n        },\r\n        refreshAll: function refreshAll() {\r\n            stickies.forEach(function (sticky) {\r\n                return sticky.refresh();\r\n            });\r\n        },\r\n        removeOne: function removeOne(node) {\r\n            // Check whether it’s a node\r\n            if (!(node instanceof HTMLElement)) {\r\n                // Maybe it’s a node list of some sort?\r\n                // Take first node from the list then\r\n                if (node.length && node[0]) node = node[0];else return;\r\n            }\r\n    \r\n            // Remove the stickies bound to the nodes in the list\r\n            stickies.some(function (sticky) {\r\n                if (sticky._node === node) {\r\n                    sticky.remove();\r\n                    return true;\r\n                }\r\n            });\r\n        },\r\n        remove: function remove(nodeList) {\r\n            // If it’s a node make an array of one node\r\n            if (nodeList instanceof HTMLElement) nodeList = [nodeList];\r\n            // Check if the argument is an iterable of some sort\r\n            if (!nodeList.length) return;\r\n    \r\n            // Remove the stickies bound to the nodes in the list\r\n    \r\n            var _loop2 = function _loop2(i) {\r\n                var node = nodeList[i];\r\n    \r\n                stickies.some(function (sticky) {\r\n                    if (sticky._node === node) {\r\n                        sticky.remove();\r\n                        return true;\r\n                    }\r\n                });\r\n            };\r\n    \r\n            for (var i = 0; i < nodeList.length; i++) {\r\n                _loop2(i);\r\n            }\r\n        },\r\n        removeAll: function removeAll() {\r\n            while (stickies.length) {\r\n                stickies[0].remove();\r\n            }\r\n        }\r\n    };\r\n    \r\n    /*\r\n     * 6. Setup events (unless the polyfill was disabled)\r\n     */\r\n    function init() {\r\n        // Watch for scroll position changes and trigger recalc/refresh if needed\r\n        function checkScroll() {\r\n            if (window.pageXOffset != scroll.left) {\r\n                scroll.top = window.pageYOffset;\r\n                scroll.left = window.pageXOffset;\r\n    \r\n                Stickyfill.refreshAll();\r\n            } else if (window.pageYOffset != scroll.top) {\r\n                scroll.top = window.pageYOffset;\r\n                scroll.left = window.pageXOffset;\r\n    \r\n                // recalc position for all stickies\r\n                stickies.forEach(function (sticky) {\r\n                    return sticky._recalcPosition();\r\n                });\r\n            }\r\n        }\r\n    \r\n        checkScroll();\r\n        window.addEventListener('scroll', checkScroll);\r\n    \r\n        // Watch for window resizes and device orientation changes and trigger refresh\r\n        window.addEventListener('resize', Stickyfill.refreshAll);\r\n        window.addEventListener('orientationchange', Stickyfill.refreshAll);\r\n    \r\n        //Fast dirty check for layout changes every 500ms\r\n        var fastCheckTimer = void 0;\r\n    \r\n        function startFastCheckTimer() {\r\n            fastCheckTimer = setInterval(function () {\r\n                stickies.forEach(function (sticky) {\r\n                    return sticky._fastCheck();\r\n                });\r\n            }, 500);\r\n        }\r\n    \r\n        function stopFastCheckTimer() {\r\n            clearInterval(fastCheckTimer);\r\n        }\r\n    \r\n        var docHiddenKey = void 0;\r\n        var visibilityChangeEventName = void 0;\r\n    \r\n        if ('hidden' in document) {\r\n            docHiddenKey = 'hidden';\r\n            visibilityChangeEventName = 'visibilitychange';\r\n        } else if ('webkitHidden' in document) {\r\n            docHiddenKey = 'webkitHidden';\r\n            visibilityChangeEventName = 'webkitvisibilitychange';\r\n        }\r\n    \r\n        if (visibilityChangeEventName) {\r\n            if (!document[docHiddenKey]) startFastCheckTimer();\r\n    \r\n            document.addEventListener(visibilityChangeEventName, function () {\r\n                if (document[docHiddenKey]) {\r\n                    stopFastCheckTimer();\r\n                } else {\r\n                    startFastCheckTimer();\r\n                }\r\n            });\r\n        } else startFastCheckTimer();\r\n    }\r\n    \r\n    if (!seppuku) init();\r\n    \r\n    /*\r\n     * 7. Expose Stickyfill\r\n     */\r\n    if (typeof module != 'undefined' && module.exports) {\r\n        module.exports = Stickyfill;\r\n    } else {\r\n        window.Stickyfill = Stickyfill;\r\n    }\r\n    \r\n})(window, document);","import $ from 'jquery';\nimport { parseQueryStringIntoObject } from '~/lib/utils/common_utils';\nimport axios from '~/lib/utils/axios_utils';\nimport createFlash from '~/flash';\nimport { __ } from '~/locale';\n\nexport default class GpgBadges {\n  static fetch() {\n    const tag = $('.js-signature-container');\n    if (tag.length === 0) {\n      return Promise.resolve();\n    }\n\n    const badges = $('.js-loading-gpg-badge');\n\n    badges.html('<i class=\"fa fa-spinner fa-spin\"></i>');\n\n    const displayError = () => createFlash(__('An error occurred while loading commit signatures'));\n\n    const endpoint = tag.data('signaturesPath');\n    if (!endpoint) {\n      displayError();\n      return Promise.reject(new Error('Missing commit signatures endpoint!'));\n    }\n\n    const params = parseQueryStringIntoObject(tag.serialize());\n    return axios\n      .get(endpoint, { params })\n      .then(({ data }) => {\n        data.signatures.forEach(signature => {\n          badges.filter(`[data-commit-sha=\"${signature.commit_sha}\"]`).replaceWith(signature.html);\n        });\n      })\n      .catch(displayError);\n  }\n}\n","import $ from 'jquery';\nimport { stickyMonitor } from './lib/utils/sticky';\n\nexport default (stickyTop) => {\n  stickyMonitor(document.querySelector('.js-diff-files-changed'), stickyTop);\n\n  $('.js-diff-stats-dropdown').glDropdown({\n    filterable: true,\n    remoteFilter: false,\n  });\n};\n","/* eslint-disable func-names, one-var, no-var, one-var-declaration-per-line, object-shorthand, no-else-return, max-len */\n\nimport $ from 'jquery';\nimport { __ } from './locale';\nimport axios from './lib/utils/axios_utils';\nimport flash from './flash';\nimport { capitalizeFirstCharacter } from './lib/utils/text_utility';\n\nexport default function initCompareAutocomplete(limitTo = null, clickHandler = () => {}) {\n  $('.js-compare-dropdown').each(function() {\n    var $dropdown, selected;\n    $dropdown = $(this);\n    selected = $dropdown.data('selected');\n    const $dropdownContainer = $dropdown.closest('.dropdown');\n    const $fieldInput = $(`input[name=\"${$dropdown.data('fieldName')}\"]`, $dropdownContainer);\n    const $filterInput = $('input[type=\"search\"]', $dropdownContainer);\n    $dropdown.glDropdown({\n      data: function(term, callback) {\n        const params = {\n          ref: $dropdown.data('ref'),\n          search: term,\n        };\n\n        if (limitTo) {\n          params.find = limitTo;\n        }\n\n        axios\n          .get($dropdown.data('refsUrl'), {\n            params,\n          })\n          .then(({ data }) => {\n            if (limitTo) {\n              callback(data[capitalizeFirstCharacter(limitTo)] || []);\n            } else {\n              callback(data);\n            }\n          })\n          .catch(() => flash(__('Error fetching refs')));\n      },\n      selectable: true,\n      filterable: true,\n      filterRemote: true,\n      fieldName: $dropdown.data('fieldName'),\n      filterInput: 'input[type=\"search\"]',\n      renderRow: function(ref) {\n        var link;\n        if (ref.header != null) {\n          return $('<li />')\n            .addClass('dropdown-header')\n            .text(ref.header);\n        } else {\n          link = $('<a />')\n            .attr('href', '#')\n            .addClass(ref === selected ? 'is-active' : '')\n            .text(ref)\n            .attr('data-ref', ref);\n          return $('<li />').append(link);\n        }\n      },\n      id: function(obj, $el) {\n        return $el.attr('data-ref');\n      },\n      toggleLabel: function(obj, $el) {\n        return $el.text().trim();\n      },\n      clicked: () => clickHandler($dropdown),\n    });\n    $filterInput.on('keyup', e => {\n      const keyCode = e.keyCode || e.which;\n      if (keyCode !== 13) return;\n      const text = $filterInput.val();\n      $fieldInput.val(text);\n      $('.dropdown-toggle-text', $dropdown).text(text);\n      $dropdownContainer.removeClass('open');\n    });\n\n    $dropdownContainer.on('click', '.dropdown-content a', e => {\n      $dropdown.prop('title', e.target.text.replace(/_+?/g, '-'));\n      if ($dropdown.hasClass('has-tooltip')) {\n        $dropdown.tooltip('_fixTitle');\n      }\n    });\n  });\n}\n","import initCompareAutocomplete from '~/compare_autocomplete';\n\ndocument.addEventListener('DOMContentLoaded', () => initCompareAutocomplete());\n"],"sourceRoot":""}