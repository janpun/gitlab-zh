{"version":3,"sources":["webpack:///./pages/profiles/index/index.js","webpack:///./notifications_form.js","webpack:///./notifications_dropdown.js"],"names":["document","addEventListener","_notifications_form__WEBPACK_IMPORTED_MODULE_0__","Object","_notifications_dropdown__WEBPACK_IMPORTED_MODULE_1__","NotificationsForm","_classCallCheck","this","toggleCheckbox","bind","initEventListeners","jquery__WEBPACK_IMPORTED_MODULE_0___default","on","e","$checkbox","currentTarget","$parent","closest","saveEvent","addClass","find","removeClass","form","parents","showCheckboxLoadingSpinner","_lib_utils_axios_utils__WEBPACK_IMPORTED_MODULE_2__","attr","serialize","then","_ref","data","enable","saved","toggleClass","setTimeout","catch","_flash__WEBPACK_IMPORTED_MODULE_3__","_locale__WEBPACK_IMPORTED_MODULE_1__","notificationsDropdown","preventDefault","is","notificationLevel","val","submit","replaceWith","html","_flash__WEBPACK_IMPORTED_MODULE_1__"],"mappings":"sHAGAA,SAASC,iBAAiB,mBAAoB,WAC5C,IAAIC,EAAA,EACJC,OAAAC,EAAA,EAAAD,8XCAmBE,aACnB,SAAAA,iGAAcC,CAAAC,KAAAF,GACZE,KAAKC,eAAiBD,KAAKC,eAAeC,KAAKF,MAC/CA,KAAKG,4EAILC,IAAEX,UAAUY,GAAG,SAAU,gCAAiCL,KAAKC,uDAGlDK,GACb,IAAMC,EAAYH,IAAEE,EAAEE,eAChBC,EAAUF,EAAUG,QAAQ,eAElCV,KAAKW,UAAUJ,EAAWE,sDAIDA,GACzBA,EAAQG,SAAS,cACdC,KAAK,sCACLC,YAAY,YACZF,SAAS,sBACTE,YAAY,6CAGPP,EAAWE,GACnB,IAAMM,EAAON,EAAQO,QAAQ,cAE7BhB,KAAKiB,2BAA2BR,GAEhCS,EAAA,EAAMH,EAAKI,KAAK,WAAWJ,EAAKI,KAAK,UAAWJ,EAAKK,aAClDC,KAAK,SAAAC,GAAc,IAAXC,EAAWD,EAAXC,KACPhB,EAAUiB,SACND,EAAKE,QACPhB,EAAQI,KAAK,sCAAsCa,YAAY,uCAC/DC,WAAW,WACTlB,EAAQK,YAAY,cACjBD,KAAK,sCACLa,YAAY,wCACd,QAGNE,MAAM,kBAAMhC,OAAAiC,EAAA,EAAAjC,CAAMA,OAAAkC,EAAA,EAAAlC,CAAG,wKC7Cb,SAASmC,IACtB3B,IAAEX,UAAUY,GAAG,QAAS,uBAAwB,SAAoCC,GAElF,GADAA,EAAE0B,kBACE5B,IAAEJ,MAAMiC,GAAG,eAAuD,WAAtC7B,IAAEJ,MAAMuB,KAAK,qBAA7C,CAIA,IAAMW,EAAoB9B,IAAEJ,MAAMuB,KAAK,qBACjCR,EAAOX,IAAEJ,MAAMgB,QAAQ,4BAE7BD,EAAKF,KAAK,4BAA4Ba,YAAY,8BAClDX,EAAKF,KAAK,+BAA+BsB,IAAID,GAC7CnB,EAAKqB,YAGPhC,IAAEX,UAAUY,GAAG,eAAgB,qBAAsB,SAACC,EAAGiB,GACnDA,EAAKE,MACPrB,IAAEE,EAAEE,eAAeE,QAAQ,6BAA6B2B,YAAYd,EAAKe,MAEzE1C,OAAA2C,EAAA,EAAA3C,CAAM,8BAA+B","file":"pages.profiles.index.8d392c3c.chunk.js","sourcesContent":["import NotificationsForm from '../../../notifications_form';\nimport notificationsDropdown from '../../../notifications_dropdown';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  new NotificationsForm(); // eslint-disable-line no-new\n  notificationsDropdown();\n});\n","import $ from 'jquery';\nimport { __ } from './locale';\nimport axios from './lib/utils/axios_utils';\nimport flash from './flash';\n\nexport default class NotificationsForm {\n  constructor() {\n    this.toggleCheckbox = this.toggleCheckbox.bind(this);\n    this.initEventListeners();\n  }\n\n  initEventListeners() {\n    $(document).on('change', '.js-custom-notification-event', this.toggleCheckbox);\n  }\n\n  toggleCheckbox(e) {\n    const $checkbox = $(e.currentTarget);\n    const $parent = $checkbox.closest('.form-check');\n\n    this.saveEvent($checkbox, $parent);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  showCheckboxLoadingSpinner($parent) {\n    $parent.addClass('is-loading')\n      .find('.custom-notification-event-loading')\n      .removeClass('fa-check')\n      .addClass('fa-spin fa-spinner')\n      .removeClass('is-done');\n  }\n\n  saveEvent($checkbox, $parent) {\n    const form = $parent.parents('form:first');\n\n    this.showCheckboxLoadingSpinner($parent);\n\n    axios[form.attr('method')](form.attr('action'), form.serialize())\n      .then(({ data }) => {\n        $checkbox.enable();\n        if (data.saved) {\n          $parent.find('.custom-notification-event-loading').toggleClass('fa-spin fa-spinner fa-check is-done');\n          setTimeout(() => {\n            $parent.removeClass('is-loading')\n              .find('.custom-notification-event-loading')\n              .toggleClass('fa-spin fa-spinner fa-check is-done');\n          }, 2000);\n        }\n      })\n      .catch(() => flash(__('There was an error saving your notification settings.')));\n  }\n}\n","import $ from 'jquery';\nimport Flash from './flash';\n\nexport default function notificationsDropdown() {\n  $(document).on('click', '.update-notification', function updateNotificationCallback(e) {\n    e.preventDefault();\n    if ($(this).is('.is-active') && $(this).data('notificationLevel') === 'custom') {\n      return;\n    }\n\n    const notificationLevel = $(this).data('notificationLevel');\n    const form = $(this).parents('.notification-form:first');\n\n    form.find('.js-notification-loading').toggleClass('fa-bell fa-spin fa-spinner');\n    form.find('#notification_setting_level').val(notificationLevel);\n    form.submit();\n  });\n\n  $(document).on('ajax:success', '.notification-form', (e, data) => {\n    if (data.saved) {\n      $(e.currentTarget).closest('.js-notification-dropdown').replaceWith(data.html);\n    } else {\n      Flash('Failed to save new settings', 'alert');\n    }\n  });\n}\n"],"sourceRoot":""}