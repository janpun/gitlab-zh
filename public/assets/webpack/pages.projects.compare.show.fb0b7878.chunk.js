(this.webpackJsonp=this.webpackJsonp||[]).push([[155],{1023:function(t,e,n){"use strict";n.r(e);var i=n(176),o=n(276),a=n(229);document.addEventListener("DOMContentLoaded",function(){new i.a;Object(o.a)(document.querySelector(".navbar-gitlab").offsetHeight-16),a.a.fetch()})},1024:function(t,e,n){n(31),n(57),n(566),t.exports=n(1023)},176:function(t,e,n){"use strict";var i=n(0),o=n.n(i),a=n(5),r=n(7),s=n(1),l=n(21),f=n(39),c=n.n(f),d={init:function(t){var e=this;this.userCanCreateNote||(this.userCanCreateNote=""===t.closest(".files").data("canCreateNote")),this.isParallelView="parallel"===c.a.get("diff_view"),this.userCanCreateNote&&t.on("mouseover",".diff-line-num, .line_content",function(t){return e.showButton(e.isParallelView,t)}).on("mouseleave",".diff-line-num, .line_content",function(t){return e.hideButton(e.isParallelView,t)})},showButton:function(t,e){var n=this.getButtonParent(e.currentTarget,t);this.validateButtonParent(n)&&(n.classList.add("is-over"),n.nextElementSibling.classList.add("is-over"))},hideButton:function(t,e){var n=this.getButtonParent(e.currentTarget,t);n.classList.remove("is-over"),n.nextElementSibling.classList.remove("is-over")},getButtonParent:function(t,e){if(e){if(!t.classList.contains("diff-line-num"))return t.previousElementSibling}else if(!t.classList.contains("old_line"))return t.parentNode.querySelector(".old_line");return t},validateButtonParent:function(t){return!(t.classList.contains("empty-cell")||t.classList.contains("js-unfold")||t.classList.contains("no-comment-btn")||t.parentNode.classList.contains("diff-expanded"))}},h=n(93),u=n(129),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var g='<div class="diff-content"></div>',v='<i class="fa fa-spinner fa-spin"></i>',m='<div class="nothing-here-block diff-collapsed">This diff is collapsed. <button class="click-to-expand btn btn-link">Click to expand it.</button></div>',b=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.file=e,this.toggleDiff=this.toggleDiff.bind(this),this.content=o()(".diff-content",this.file),this.$toggleIcon=o()(".diff-toggle-caret",this.file),this.diffForPath=this.content.find("[data-diff-for-path]").data("diffForPath"),this.isOpen=!this.diffForPath,this.diffForPath?(this.collapsedContent=this.content,this.loadingContent=o()(g).addClass("loading").html(v).hide(),this.content=null,this.collapsedContent.after(this.loadingContent),this.$toggleIcon.addClass("fa-caret-right")):(this.collapsedContent=o()(g).html(m).hide(),this.content.after(this.collapsedContent),this.$toggleIcon.addClass("fa-caret-down")),o()(".js-file-title, .click-to-expand",this.file).on("click",function(t){this.toggleDiff(o()(t.target))}.bind(this))}return p(t,[{key:"toggleDiff",value:function(t,e){if(t.hasClass("js-file-title")||t.hasClass("click-to-expand")||t.hasClass("diff-toggle-caret"))if(this.isOpen=!this.isOpen,this.isOpen||this.hasError){if(!this.content)return this.$toggleIcon.addClass("fa-caret-down").removeClass("fa-caret-right"),this.getContentHTML(e);this.collapsedContent.hide(),this.content.show(),this.$toggleIcon.addClass("fa-caret-down").removeClass("fa-caret-right"),void 0!==gl.diffNotesCompileComponents&&gl.diffNotesCompileComponents()}else this.content.hide(),this.$toggleIcon.addClass("fa-caret-right").removeClass("fa-caret-down"),this.collapsedContent.show(),void 0!==gl.diffNotesCompileComponents&&gl.diffNotesCompileComponents()}},{key:"getContentHTML",value:function(t){var e=this;this.collapsedContent.hide(),this.loadingContent.show(),a.a.get(this.diffForPath).then(function(n){var i=n.data;e.loadingContent.hide(),i.html?(e.content=o()(i.html),Object(u.a)(e.content)):(e.hasError=!0,e.content=o()('<div class="nothing-here-block"><i class="fa fa-warning"></i> Could not load diff</div>')),e.collapsedContent.after(e.content),void 0!==gl.diffNotesCompileComponents&&gl.diffNotesCompileComponents();var a=o()(e.file);d.init(a);var r=a.closest(".files").is("[data-can-create-note]");h.a.initImageDiff(a[0],r),t&&t()}).catch(function(){Object(r.a)(Object(s.a)("An error occurred while retrieving diff"))})}}]),t}(),y=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,a=void 0;try{for(var r,s=t[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!e||n.length!==e);i=!0);}catch(t){o=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var _=!1,C=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=o()(".files .diff-file");e.each(function(t,e){o.a.data(e,"singleFileDiff")||o.a.data(e,"singleFileDiff",new b(e))});var n=document.getElementById("diffs");(!n||n&&n.dataset&&""!==n.dataset.isLocked)&&d.init(e);var i=o()(".files").first().get(0),a=i&&i.hasAttribute("data-can-create-note");e.each(function(t,e){return h.a.initImageDiff(e,a)}),_||(o()(document).on("click",".js-unfold",this.handleClickUnfold.bind(this)).on("click",".diff-line-num a",this.handleClickLineNum.bind(this)).on("mousedown","td.line_content.parallel",this.handleParallelLineDown.bind(this)),_=!0),Object(l.a)()&&this.highlightSelectedLine(),this.openAnchoredDiff()}return w(t,[{key:"handleClickUnfold",value:function(t){var e=o()(t.target),n=this.lineNumbers(e.parent()),i=y(n,2),l=i[0],f=i[1],c=f-l,d=e.hasClass("js-unfold-bottom"),h=void 0,u=void 0,p=!0;if(d){var g=f+1;h=g,u=g+20}else{var v=f-1;h=v-20,u=v;var m=this.lineNumbers(e.parent().prev())[1];h<=m+1&&(h=m+1,p=!1)}var b=e.parents(".diff-file"),w=b.data("blobDiffPath"),_={since:h,to:u,bottom:d,offset:c,unfold:p,view:b.data("view")};a.a.get(w,{params:_}).then(function(t){var n=t.data;return e.parent().replaceWith(n)}).catch(function(){return Object(r.a)(Object(s.a)("An error occurred while loading diff"))})}},{key:"openAnchoredDiff",value:function(t){var e=this,n=Object(l.a)(),i=n&&n.split("_")[0];if(i){var a=o()("#"+i).closest(".diff-file");if(o()(".nothing-here-block:visible",a).length){var r=o()(".js-file-title, .click-to-expand",a);a.data("singleFileDiff").toggleDiff(r,function(){e.highlightSelectedLine(),t&&t()})}else t&&t()}}},{key:"handleClickLineNum",value:function(t){var e=o()(t.currentTarget).attr("href");t.preventDefault(),window.history.pushState?window.history.pushState(null,null,e):window.location.hash=e,this.highlightSelectedLine()}},{key:"handleParallelLineDown",value:function(t){var e=o()(t.currentTarget),n=e.closest("table");n.removeClass("left-side-selected right-side-selected");var i=["left-side","right-side"].filter(function(t){return e.hasClass(t)})[0];i&&n.addClass(i+"-selected")}},{key:"diffViewType",value:function(){return o()(".inline-parallel-buttons a.active").data("viewType")}},{key:"lineNumbers",value:function(t){var e=t.find(".diff-line-num").toArray();return 2!==e.length?[0,0]:e.map(function(t){return parseInt(o()(t).data("linenumber"),10)||0})}},{key:"highlightSelectedLine",value:function(){var t=Object(l.a)(),e=o()(".diff-file");e.find(".hll").removeClass("hll"),t&&e.find("tr#"+t+":not(.match) td, td#"+t+', td[data-line-code="'+t+'"]').addClass("hll")}}]),t}();e.a=C},186:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return s});var i=n(228),o=n.n(i),a=function(t,e,n,i){var o=Math.floor(t.offsetTop-e);if(o<=n&&!t.classList.contains("is-stuck")){var a=i?function(){var t=document.createElement("div");return t.classList.add("sticky-placeholder"),t}():null,r=t.offsetHeight;t.classList.add("is-stuck"),i&&(t.parentNode.insertBefore(a,t.nextElementSibling),a.style.height=r-t.offsetHeight+"px")}else o>n&&t.classList.contains("is-stuck")&&(t.classList.remove("is-stuck"),i&&t.nextElementSibling&&t.nextElementSibling.classList.contains("sticky-placeholder")&&t.nextElementSibling.remove())},r=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t&&"undefined"!=typeof CSS&&CSS.supports("(position: -webkit-sticky) or (position: sticky)")&&document.addEventListener("scroll",function(){return a(t,window.scrollY,e,n)},{passive:!0})},s=function(t){o.a.add(t)}},228:function(t,e){!function(e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=!1;if(e.getComputedStyle){var a=n.createElement("div");["","-webkit-","-moz-","-ms-"].some(function(t){try{a.style.position=t+"sticky"}catch(t){}return""!=a.style.position})&&(o=!0)}else o=!0;var r="undefined"!=typeof ShadowRoot,s={top:null,left:null},l=[];function f(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function c(t){return parseFloat(t)||0}function d(t){for(var e=0;t;)e+=t.offsetTop,t=t.offsetParent;return e}var h=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!(e instanceof HTMLElement))throw new Error("First argument must be HTMLElement");if(l.some(function(t){return t._node===e}))throw new Error("Stickyfill is already applied to this node");this._node=e,this._stickyMode=null,this._active=!1,l.push(this),this.refresh()}return i(t,[{key:"refresh",value:function(){if(!o&&!this._removed){this._active&&this._deactivate();var t=this._node,i=getComputedStyle(t),a={top:i.top,display:i.display,marginTop:i.marginTop,marginBottom:i.marginBottom,marginLeft:i.marginLeft,marginRight:i.marginRight,cssFloat:i.cssFloat};if(!isNaN(parseFloat(a.top))&&"table-cell"!=a.display&&"none"!=a.display){this._active=!0;var s=t.parentNode,l=r&&s instanceof ShadowRoot?s.host:s,h=t.getBoundingClientRect(),u=l.getBoundingClientRect(),p=getComputedStyle(l);this._parent={node:l,styles:{position:l.style.position},offsetHeight:l.offsetHeight},this._offsetToWindow={left:h.left,right:n.documentElement.clientWidth-h.right},this._offsetToParent={top:h.top-u.top-c(p.borderTopWidth),left:h.left-u.left-c(p.borderLeftWidth),right:-h.right+u.right-c(p.borderRightWidth)},this._styles={position:t.style.position,top:t.style.top,bottom:t.style.bottom,left:t.style.left,right:t.style.right,width:t.style.width,marginTop:t.style.marginTop,marginLeft:t.style.marginLeft,marginRight:t.style.marginRight};var g=c(a.top);this._limits={start:h.top+e.pageYOffset-g,end:u.top+e.pageYOffset+l.offsetHeight-c(p.borderBottomWidth)-t.offsetHeight-g-c(a.marginBottom)};var v=p.position;"absolute"!=v&&"relative"!=v&&(l.style.position="relative"),this._recalcPosition();var m=this._clone={};m.node=n.createElement("div"),f(m.node.style,{width:h.right-h.left+"px",height:h.bottom-h.top+"px",marginTop:a.marginTop,marginBottom:a.marginBottom,marginLeft:a.marginLeft,marginRight:a.marginRight,cssFloat:a.cssFloat,padding:0,border:0,borderSpacing:0,fontSize:"1em",position:"static"}),s.insertBefore(m.node,t),m.docOffsetTop=d(m.node)}}}},{key:"_recalcPosition",value:function(){if(this._active&&!this._removed){var t=s.top<=this._limits.start?"start":s.top>=this._limits.end?"end":"middle";if(this._stickyMode!=t){switch(t){case"start":f(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:this._offsetToParent.top+"px",bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"middle":f(this._node.style,{position:"fixed",left:this._offsetToWindow.left+"px",right:this._offsetToWindow.right+"px",top:this._styles.top,bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"end":f(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:"auto",bottom:0,width:"auto",marginLeft:0,marginRight:0})}this._stickyMode=t}}}},{key:"_fastCheck",value:function(){this._active&&!this._removed&&(Math.abs(d(this._clone.node)-this._clone.docOffsetTop)>1||Math.abs(this._parent.node.offsetHeight-this._parent.offsetHeight)>1)&&this.refresh()}},{key:"_deactivate",value:function(){var t=this;this._active&&!this._removed&&(this._clone.node.parentNode.removeChild(this._clone.node),delete this._clone,f(this._node.style,this._styles),delete this._styles,l.some(function(e){return e!==t&&e._parent&&e._parent.node===t._parent.node})||f(this._parent.node.style,this._parent.styles),delete this._parent,this._stickyMode=null,this._active=!1,delete this._offsetToWindow,delete this._offsetToParent,delete this._limits)}},{key:"remove",value:function(){var t=this;this._deactivate(),l.some(function(e,n){if(e._node===t._node)return l.splice(n,1),!0}),this._removed=!0}}]),t}(),u={stickies:l,Sticky:h,addOne:function(t){if(!(t instanceof HTMLElement)){if(!t.length||!t[0])return;t=t[0]}for(var e=0;e<l.length;e++)if(l[e]._node===t)return l[e];return new h(t)},add:function(t){if(t instanceof HTMLElement&&(t=[t]),t.length){for(var e=[],n=function(n){var i=t[n];return i instanceof HTMLElement?l.some(function(t){if(t._node===i)return e.push(t),!0})?"continue":void e.push(new h(i)):(e.push(void 0),"continue")},i=0;i<t.length;i++)n(i);return e}},refreshAll:function(){l.forEach(function(t){return t.refresh()})},removeOne:function(t){if(!(t instanceof HTMLElement)){if(!t.length||!t[0])return;t=t[0]}l.some(function(e){if(e._node===t)return e.remove(),!0})},remove:function(t){if(t instanceof HTMLElement&&(t=[t]),t.length)for(var e=function(e){var n=t[e];l.some(function(t){if(t._node===n)return t.remove(),!0})},n=0;n<t.length;n++)e(n)},removeAll:function(){for(;l.length;)l[0].remove()}};o||function(){function t(){e.pageXOffset!=s.left?(s.top=e.pageYOffset,s.left=e.pageXOffset,u.refreshAll()):e.pageYOffset!=s.top&&(s.top=e.pageYOffset,s.left=e.pageXOffset,l.forEach(function(t){return t._recalcPosition()}))}t(),e.addEventListener("scroll",t),e.addEventListener("resize",u.refreshAll),e.addEventListener("orientationchange",u.refreshAll);var i=void 0;function o(){i=setInterval(function(){l.forEach(function(t){return t._fastCheck()})},500)}var a=void 0,r=void 0;"hidden"in n?(a="hidden",r="visibilitychange"):"webkitHidden"in n&&(a="webkitHidden",r="webkitvisibilitychange"),r?(n[a]||o(),n.addEventListener(r,function(){n[a]?clearInterval(i):o()})):o()}(),void 0!==t&&t.exports?t.exports=u:e.Stickyfill=u}(window,document)},229:function(t,e,n){"use strict";var i=n(0),o=n.n(i),a=n(11),r=n(5),s=n(7),l=n(1),f=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return f(t,null,[{key:"fetch",value:function(){var t=o()(".js-signature-container");if(0===t.length)return Promise.resolve();var e=o()(".js-loading-gpg-badge");e.html('<i class="fa fa-spinner fa-spin"></i>');var n=function(){return Object(s.a)(Object(l.a)("An error occurred while loading commit signatures"))},i=t.data("signaturesPath");if(!i)return n(),Promise.reject(new Error("Missing commit signatures endpoint!"));var f=Object(a.C)(t.serialize());return r.a.get(i,{params:f}).then(function(t){t.data.signatures.forEach(function(t){e.filter('[data-commit-sha="'+t.commit_sha+'"]').replaceWith(t.html)})}).catch(n)}}]),t}();e.a=c},276:function(t,e,n){"use strict";var i=n(0),o=n.n(i),a=n(186);e.a=function(t){Object(a.b)(document.querySelector(".js-diff-files-changed"),t),o()(".js-diff-stats-dropdown").glDropdown({filterable:!0,remoteFilter:!1})}},345:function(t,e,n){"use strict";n.d(e,"a",function(){return f});var i=n(0),o=n.n(i),a=n(1),r=n(5),s=n(7),l=n(45);function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};o()(".js-compare-dropdown").each(function(){var n,i;n=o()(this),i=n.data("selected");var f=n.closest(".dropdown"),c=o()('input[name="'+n.data("fieldName")+'"]',f),d=o()('input[type="search"]',f);n.glDropdown({data:function(e,i){var o={ref:n.data("ref"),search:e};t&&(o.find=t),r.a.get(n.data("refsUrl"),{params:o}).then(function(e){var n=e.data;i(t?n[Object(l.b)(t)]||[]:n)}).catch(function(){return Object(s.a)(Object(a.a)("Error fetching refs"))})},selectable:!0,filterable:!0,filterRemote:!0,fieldName:n.data("fieldName"),filterInput:'input[type="search"]',renderRow:function(t){var e;return null!=t.header?o()("<li />").addClass("dropdown-header").text(t.header):(e=o()("<a />").attr("href","#").addClass(t===i?"is-active":"").text(t).attr("data-ref",t),o()("<li />").append(e))},id:function(t,e){return e.attr("data-ref")},toggleLabel:function(t,e){return e.text().trim()},clicked:function(){return e(n)}}),d.on("keyup",function(t){if(13===(t.keyCode||t.which)){var e=d.val();c.val(e),o()(".dropdown-toggle-text",n).text(e),f.removeClass("open")}}),f.on("click",".dropdown-content a",function(t){n.prop("title",t.target.text.replace(/_+?/g,"-")),n.hasClass("has-tooltip")&&n.tooltip("_fixTitle")})})}},566:function(t,e,n){"use strict";n.r(e);var i=n(345);document.addEventListener("DOMContentLoaded",function(){return Object(i.a)()})}},[[1024,0,1,2,16]]]);
//# sourceMappingURL=pages.projects.compare.show.fb0b7878.chunk.js.map