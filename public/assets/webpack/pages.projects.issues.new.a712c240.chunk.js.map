{"version":3,"sources":["webpack:///./labels_select.js","webpack:///./create_label.js","webpack:///./blob/template_selector.js","webpack:///./templates/issuable_template_selector.js","webpack:///./templates/issuable_template_selectors.js","webpack:///./issuable/auto_width_dropdown_select.js","webpack:///./issuable_form.js","webpack:///./lib/utils/datefix.js","webpack:///./pages/projects/issues/form.js","webpack:///./dropzone_input.js","webpack:///./lib/utils/text_markdown.js","webpack:///./gl_form.js","webpack:///./zen_mode.js","webpack:////var/cache/omnibus/src/gitlab-rails/node_modules/pikaday/pikaday.js","webpack:///./issuable_bulk_update_actions.js","webpack:///./users_select.js","webpack:///./pages/projects/issues/new/index.js","webpack:///./autosave.js","webpack:////var/cache/omnibus/src/gitlab-rails/node_modules/mousetrap/plugins/pause/mousetrap-pause.js"],"names":["LabelsSelect","els","_this","$els","options","arguments","length","undefined","_classCallCheck","this","jquery__WEBPACK_IMPORTED_MODULE_0___default","each","i","dropdown","$block","$dropdown","$form","$loading","$selectbox","$sidebarCollapsedValue","$value","abilityName","defaultLabel","issueUpdateURL","labelUrl","namespacePath","projectPath","saveLabelData","selectedLabel","showAny","showNo","$sidebarLabelTooltip","initialSelected","fieldName","showMenuAbove","$dropdownContainer","closest","find","data","hasClass","split","fadeOut","is","map","value","get","handleClick","tooltip","_create_label__WEBPACK_IMPORTED_MODULE_6__","selected","underscore__WEBPACK_IMPORTED_MODULE_1___default","a","isEqual","label_ids","removeClass","fadeIn","trigger","_lib_utils_axios_utils__WEBPACK_IMPORTED_MODULE_3__","put","then","_ref","labelCount","template","labelTooltipTitle","labelTitles","hide","labels","getLabelTemplate","removeAttr","html","text","label","title","slice","push","join","Object","_locale__WEBPACK_IMPORTED_MODULE_2__","attr","container","catch","_flash__WEBPACK_IMPORTED_MODULE_7__","glDropdown","term","callback","res","chain","groupBy","color","dup","id","duplicate","extraData","unshift","isAny","concat","positionMenuAbove","renderRow","instance","$a","$li","colorEl","indeterminate","removesAll","selectedClass","marked","dropdownName","dropdownValue","indexOf","splice","toString","replace","_filtered_search_dropdown_utils__WEBPACK_IMPORTED_MODULE_5__","duplicateLabelColor","_slicedToArray","addClass","escape","prop","search","fields","selectable","filterable","toggleLabel","el","$dropdownParent","parent","$dropdownInputField","isSelected","selectedLabels","val","index","hidden","isIssueIndex","isMRIndex","page","Issuable","filterResults","submit","multiSelect","vue","clicked","clickEvent","boardsModel","$el","e","isMarking","selectedObj","fadeOutLoader","enableBulkLabelDropdown","setDropdownData","_boards_stores_modal_store__WEBPACK_IMPORTED_MODULE_8__","store","filter","preventDefault","gl","issueBoards","BoardsStore","detail","issue","ListLabel","textColor","update","opened","previousSelection","updateLabel","preserveContext","setOriginalDropdownData","bindEvents","on","onSelectCheckboxIssue","_issuable_bulk_update_actions__WEBPACK_IMPORTED_MODULE_4__","willUpdateLabels","markedIds","unmarkedIds","indeterminateIds","getOriginalIndeterminateIds","getOriginalCommonIds","$container","tplData","tpl","CreateLabelDropdown","$dropdownBack","$cancelButton","$newLabelField","$newColorField","$colorPreview","$newLabelError","$newLabelCreateButton","$colorSuggestions","disable","cleanBinding","addBinding","off","self","$this","addColorValue","enableLabelCreateButton","bind","resetForm","stopPropagation","saveLabel","css","enable","_api__WEBPACK_IMPORTED_MODULE_1__","newLabel","message","errors","keys","key","_lib_utils_text_utility__WEBPACK_IMPORTED_MODULE_2__","show","document","TemplateSelector","pattern","wrapper","editor","$input","$filenameInput","jquery_default","$dropdownIcon","initDropdown","listenForFilenameInput","renderMatchedDropdown","initAutosizeUpdateEvent","item","name","fetchFileTemplate","autosizeUpdateEvent","createEvent","initEvent","_this2","test","trim","requestFile","file","skipFocus","newValue","content","setValue","focus","dispatchEvent","IssuableTemplateSelector","issuable_template_selector_classCallCheck","_len","args","Array","_key","_possibleConstructorReturn","__proto__","getPrototypeOf","call","apply","issuableType","titleInput","$","initialQuery","setInputValueToTemplateContent","currentTemplate","template_selector","query","startLoadingSpinner","api","issueTemplate","err","stopLoadingSpinner","setEditorContent","issuable_template_selectors_IssuableTemplateSelectors","IssuableTemplateSelectors","$dropdowns","issuable_template_selectors_classCallCheck","initEditor","issuable_template_selector","getValue","instanceCount","auto_width_dropdown_select","AutoWidthDropdownSelect","selectElement","$selectElement","dropdownClass","select2","_extends","dropdownCssClass","selectOptions","dropdownCss","resultantWidth","offsetParentWidth","offsetParent","width","outerWidth","maxWidth","issuable_form_IssuableForm","IssuableForm","form","issuable_form_classCallCheck","toggleWip","renderWipExplanation","resetAutosave","handleSubmit","wipRegex","gfm_auto_complete","GfmAutoComplete","dataSources","setup","users_select","zen_mode","titleField","descriptionField","initAutosave","initWip","$issuableDueDate","calendar","pikaday_default","field","theme","format","parse","dateString","datefix","date","onSelect","dateText","setDate","$targetBranchSelect","initTargetBranchDropdown","autosave","location","pathname","reset","$wipExplanation","$noWipExplanation","workInProgress","event","removeWip","addWip","issuable_form_extends","ajax","url","dataType","quietMillis","results","initSelection","pad","len","parsePikadayDate","parts","year","parseInt","month","day","Date","pikadayToString","getDate","getMonth","getFullYear","_templates_issuable_template_selectors__WEBPACK_IMPORTED_MODULE_6__","__webpack_require__","__webpack_exports__","_shortcuts_navigation__WEBPACK_IMPORTED_MODULE_5__","_gl_form__WEBPACK_IMPORTED_MODULE_1__","_issuable_form__WEBPACK_IMPORTED_MODULE_2__","_labels_select__WEBPACK_IMPORTED_MODULE_3__","_milestone_select__WEBPACK_IMPORTED_MODULE_4__","dropzoneInput","$attachButton","$attachingFileMessage","$retryLink","$uploadProgress","$uploadingErrorContainer","$uploadingErrorMessage","$uploadingProgressContainer","uploadsPath","window","uploads_path","maxFileSize","gon","max_file_size","formTextarea","handlePaste","pasteText","addFileToForm","updateAttachingMessage","isImage","getFilename","uploadFile","wrap","$mdArea","setupMarkdownPreview","$formDropzone","append","dropzone","dictDefaultMessage","clickable","paramName","maxFilesize","uploadMultiple","headers","csrf","previewContainer","processing","alert","dragover","dragleave","drop","success","header","response","processingFileCount","getQueuedFiles","getUploadingFiles","shouldPad","link","markdown","error","errorMessage","xhr","responseText","totaluploadprogress","totalUploadProgress","files","Math","round","sending","removedfile","queuecomplete","remove","child","children","dropzone_default","forElement","removeAllFiles","dropzoneInstance","target","querySelector","failedFiles","failedFile","status","ERROR","accepted","addFile","pasteEvent","originalEvent","clipboardData","items","image","filename","getAsFile","type","formattedText","textarea","caretStart","selectionStart","caretEnd","selectionEnd","textEnd","beforeSelection","substring","afterSelection","setSelectionRange","style","height","scrollHeight","Event","path","underscore_default","getData","closeSpinner","formData","FormData","axios_utils","post","md","$child","insertToTextArea","messageContainer","attachingMessage","filesCount","click","autoDiscover","updateText","textArea","tag","blockTag","$textArea","selectedText","textToInsert","selectedSplit","startChar","removedLastNewLine","removedFirstNewLine","currentLineEmpty","lastNewLine","substr","lastIndexOf","before","lineBefore","after","lineAfter","blockTagText","common_utils","wrapped","pos","moveCursor","insertMarkdownText","gl_form_GLForm","GLForm","enableGFM","assign","forEach","destroy","setupForm","clearEventListeners","autoComplete","isNewForm","utils","disableButtonIfEmptyField","autosize_default","addEventListeners","isAutosizeable","setupAutosize","setHeightData","destroyAutosize","setTimeout","outerHeight","dropzone__WEBPACK_IMPORTED_MODULE_2___default","ZenMode","active_backdrop","active_textarea","currentTarget","enter","exit","keyCode","backdrop","mousetrap__WEBPACK_IMPORTED_MODULE_3___default","pause","unpause","scrollTo","$dropzone","zen_area","offset","root","factory","moment","Error","code","module","exports","hasMoment","hasEventListeners","addEventListener","sto","addEvent","capture","attachEvent","removeEvent","removeEventListener","detachEvent","cn","className","isArray","obj","prototype","isDate","isNaN","getTime","isWeekend","getDay","getDaysInMonth","isLeapYear","setToStartOfDay","setHours","compareDates","b","extend","to","from","overwrite","hasProp","nodeName","fireEvent","eventName","ev","createEventObject","adjustCalendar","ceil","abs","floor","defaults","bound","position","reposition","defaultDate","setDefaultDate","firstDay","formatStrict","minDate","maxDate","yearRange","showWeekNumber","pickWholeWeek","minYear","maxYear","minMonth","maxMonth","startRange","endRange","isRTL","yearSuffix","showMonthAfterYear","showDaysInNextAndPreviousMonths","enableSelectionDaysInNextAndPreviousMonths","numberOfMonths","mainCalendar","blurFieldOnSelect","i18n","previousMonth","nextMonth","months","weekdays","weekdaysShort","events","onOpen","onClose","onDraw","renderDayName","opts","abbr","renderDay","arr","ariaSelected","isEmpty","isDisabled","isToday","hasEvent","isInRange","isStartRange","isEndRange","days","isRowSelected","reverse","renderTitle","c","refYear","randId","j","monthHtml","yearHtml","_o","isMinYear","isMaxYear","prev","next","Pikaday","config","_onMouseDown","_v","srcElement","parentNode","prevMonth","getAttribute","blur","_c","returnValue","_onChange","gotoMonth","gotoYear","_onKeyChange","isVisible","adjustDate","_onInputChange","firedBy","isValid","toDate","_onInputFocus","_onInputClick","_onInputBlur","pEl","activeElement","_b","_onClick","onchange","setAttribute","createElement","appendChild","body","insertBefore","nextSibling","defDate","gotoDate","disableWeekends","disableDayFn","nom","setMinDate","setMaxDate","fallback","_d","toDateString","getMoment","setMoment","preventOnSelect","isMoment","draw","min","max","newCalendar","calendars","firstVisibleDate","lastVisibleDate","visibleDate","setMonth","adjustCalendars","sign","newDay","difference","valueOf","gotoToday","setStartRange","setEndRange","force","_y","_m","random","render","innerHTML","adjustPosition","viewportWidth","viewportHeight","scrollTop","left","top","clientRect","offsetWidth","offsetHeight","innerWidth","documentElement","clientWidth","innerHeight","clientHeight","pageYOffset","getBoundingClientRect","pageXOffset","bottom","offsetLeft","offsetTop","now","row","yearOfPreviousMonth","yearOfNextMonth","daysInPreviousMonth","cells","d","m","y","onejan","isWeekSelected","r","dayNumber","monthNumber","yearNumber","dayConfig","renderHead","renderTable","str","v","removeChild","_flash__WEBPACK_IMPORTED_MODULE_3__","init","issues","prefixId","getElement","$labelDropdown","onFormSubmit","_lib_utils_axios_utils__WEBPACK_IMPORTED_MODULE_2__","getFormDataAsObject","reload","onFormSubmitFailure","getSelectedIssues","has","getLabelsFromSelection","labelsData","labelId","getUnmarkedIndeterminedLabels","result","labelsToKeep","state_event","assignee_id","assignee_ids","milestone_id","issuable_ids","subscription_event","add_label_ids","remove_label_ids","$labelSelect","getOriginalMarkedIds","labelIds","dataset","intersection","_this3","_this4","uniqueIds","issuableLabels","selector","scopeEl","UsersSelect","currentUser","users","user","usersPath","userPath","_typeof","JSON","$collapsedSidebar","assignTo","assigneeTemplate","collapsedAssigneeTemplate","defaultNullUser","firstUser","issueURL","selectedId","selectedIdDefault","showAnyUser","showNullUser","projectId","groupId","showCurrentUser","todoFilter","todoStateFilter","authorId","assignYourself","unassignedSelected","input","currentUserInfo","meta","getSelectedUserInputs","getSelected","checkMaxSelect","maxSelect","firstSelectedId","emitSidebarEvent","getMultiSelectDropdownTitle","selectedUser","selectedUsers","u","otherSelected","s","current_user_id","current_user_fullname","tooltipTitle","assignee","username","avatar","avatar_url","_locale__WEBPACK_IMPORTED_MODULE_3__","processData","selectedInputs","uniq","userId","_input$dataset","avatarUrl","anyUser","showDivider","beforeDivider","sort","filterRemote","inputValue","filterInput","filteredFullData","parseData","inputMeta","isActive","previouslySelected","toLowerCase","element","addInput","isSelecting","_boards_stores_modal_store__WEBPACK_IMPORTED_MODULE_4__","highlightSelected","img","default_avatar_url","select","showEmailUser","skipLdap","skipUsers","placeholder","multiple","minimumInputLength","emailUser","nullUser","ref","match","trimmed","invite","formatResult","formatSelection","escapeMarkup","noop","user_id","buildUrl","_ref2","params","active","project_id","group_id","skip_ldap","todo_filter","todo_state_filter","current_user","author_id","skip_users","_ref3","relative_url_root","_form__WEBPACK_IMPORTED_MODULE_0__","Autosave","isLocalStorageAvailable","_lib_utils_accessor__WEBPACK_IMPORTED_MODULE_0__","isLocalStorageAccessSafe","restore","save","localStorage","getItem","bubbles","cancelable","setItem","removeItem","Mousetrap","_originalStopCallback","stopCallback","enabled","combo"],"mappings":"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","file":"pages.projects.issues.new.a712c240.chunk.js","sourcesContent":["/* eslint-disable no-useless-return, func-names, no-var, no-underscore-dangle, prefer-arrow-callback, max-len, one-var, no-unused-vars, one-var-declaration-per-line, prefer-template, no-new, consistent-return, object-shorthand, comma-dangle, no-shadow, no-param-reassign, brace-style, vars-on-top, quotes, no-lonely-if, no-else-return, dot-notation, no-empty */\n/* global Issuable */\n/* global ListLabel */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport { __ } from './locale';\nimport axios from './lib/utils/axios_utils';\nimport IssuableBulkUpdateActions from './issuable_bulk_update_actions';\nimport DropdownUtils from './filtered_search/dropdown_utils';\nimport CreateLabelDropdown from './create_label';\nimport flash from './flash';\nimport ModalStore from './boards/stores/modal_store';\n\nexport default class LabelsSelect {\n  constructor(els, options = {}) {\n    var _this, $els;\n    _this = this;\n\n    $els = $(els);\n\n    if (!els) {\n      $els = $('.js-label-select');\n    }\n\n    $els.each(function(i, dropdown) {\n      var $block, $colorPreview, $dropdown, $form, $loading, $selectbox, $sidebarCollapsedValue, $value, abilityName, defaultLabel, enableLabelCreateButton, issueURLSplit, issueUpdateURL, labelUrl, namespacePath, projectPath, saveLabelData, selectedLabel, showAny, showNo, $sidebarLabelTooltip, initialSelected, $toggleText, fieldName, useId, propertyName, showMenuAbove, $container, $dropdownContainer;\n      $dropdown = $(dropdown);\n      $dropdownContainer = $dropdown.closest('.labels-filter');\n      $toggleText = $dropdown.find('.dropdown-toggle-text');\n      namespacePath = $dropdown.data('namespacePath');\n      projectPath = $dropdown.data('projectPath');\n      labelUrl = $dropdown.data('labels');\n      issueUpdateURL = $dropdown.data('issueUpdate');\n      selectedLabel = $dropdown.data('selected');\n      if ((selectedLabel != null) && !$dropdown.hasClass('js-multiselect')) {\n        selectedLabel = selectedLabel.split(',');\n      }\n      showNo = $dropdown.data('showNo');\n      showAny = $dropdown.data('showAny');\n      showMenuAbove = $dropdown.data('showMenuAbove');\n      defaultLabel = $dropdown.data('defaultLabel') || 'Label';\n      abilityName = $dropdown.data('abilityName');\n      $selectbox = $dropdown.closest('.selectbox');\n      $block = $selectbox.closest('.block');\n      $form = $dropdown.closest('form, .js-issuable-update');\n      $sidebarCollapsedValue = $block.find('.sidebar-collapsed-icon span');\n      $sidebarLabelTooltip = $block.find('.js-sidebar-labels-tooltip');\n      $value = $block.find('.value');\n      $loading = $block.find('.block-loading').fadeOut();\n      fieldName = $dropdown.data('fieldName');\n      useId = $dropdown.is('.js-issuable-form-dropdown, .js-filter-bulk-update, .js-label-sidebar-dropdown');\n      propertyName = useId ? 'id' : 'title';\n      initialSelected = $selectbox\n        .find('input[name=\"' + $dropdown.data('fieldName') + '\"]')\n        .map(function () {\n          return this.value;\n        }).get();\n      const { handleClick } = options;\n\n      $sidebarLabelTooltip.tooltip();\n\n      if ($dropdown.closest('.dropdown').find('.dropdown-new-label').length) {\n        new CreateLabelDropdown($dropdown.closest('.dropdown').find('.dropdown-new-label'), namespacePath, projectPath);\n      }\n\n      saveLabelData = function() {\n        var data, selected;\n        selected = $dropdown.closest('.selectbox').find(\"input[name='\" + fieldName + \"']\").map(function() {\n          return this.value;\n        }).get();\n\n        if (_.isEqual(initialSelected, selected)) return;\n        initialSelected = selected;\n\n        data = {};\n        data[abilityName] = {};\n        data[abilityName].label_ids = selected;\n        if (!selected.length) {\n          data[abilityName].label_ids = [''];\n        }\n        $loading.removeClass('hidden').fadeIn();\n        $dropdown.trigger('loading.gl.dropdown');\n        axios.put(issueUpdateURL, data)\n          .then(({ data }) => {\n            var labelCount, template, labelTooltipTitle, labelTitles, formattedLabels;\n            $loading.fadeOut();\n            $dropdown.trigger('loaded.gl.dropdown');\n            $selectbox.hide();\n            data.issueUpdateURL = issueUpdateURL;\n            labelCount = 0;\n            if (data.labels.length && issueUpdateURL) {\n              template = LabelsSelect.getLabelTemplate({\n                labels: data.labels,\n                issueUpdateURL,\n              });\n              labelCount = data.labels.length;\n            }\n            else {\n              template = '<span class=\"no-value\">None</span>';\n            }\n            $value.removeAttr('style').html(template);\n            $sidebarCollapsedValue.text(labelCount);\n\n            if (data.labels.length) {\n              labelTitles = data.labels.map(function(label) {\n                return label.title;\n              });\n\n              if (labelTitles.length > 5) {\n                labelTitles = labelTitles.slice(0, 5);\n                labelTitles.push('and ' + (data.labels.length - 5) + ' more');\n              }\n\n              labelTooltipTitle = labelTitles.join(', ');\n            }\n            else {\n              labelTooltipTitle = __('Labels');\n            }\n\n            $sidebarLabelTooltip\n              .attr('title', labelTooltipTitle)\n              .tooltip('_fixTitle');\n\n            $('.has-tooltip', $value).tooltip({\n              container: 'body'\n            });\n          })\n          .catch(() => flash(__('Error saving label update.')));\n      };\n      $dropdown.glDropdown({\n        showMenuAbove: showMenuAbove,\n        data: function(term, callback) {\n          axios.get(labelUrl)\n            .then((res) => {\n              let data = _.chain(res.data).groupBy(function(label) {\n                return label.title;\n              }).map(function(label) {\n                var color;\n                color = _.map(label, function(dup) {\n                  return dup.color;\n                });\n                return {\n                  id: label[0].id,\n                  title: label[0].title,\n                  color: color,\n                  duplicate: color.length > 1\n                };\n              }).value();\n              if ($dropdown.hasClass('js-extra-options')) {\n                var extraData = [];\n                if (showNo) {\n                  extraData.unshift({\n                    id: 0,\n                    title: 'No Label'\n                  });\n                }\n                if (showAny) {\n                  extraData.unshift({\n                    isAny: true,\n                    title: 'Any Label'\n                  });\n                }\n                if (extraData.length) {\n                  extraData.push('divider');\n                  data = extraData.concat(data);\n                }\n              }\n\n              callback(data);\n              if (showMenuAbove) {\n                $dropdown.data('glDropdown').positionMenuAbove();\n              }\n            })\n            .catch(() => flash(__('Error fetching labels.')));\n        },\n        renderRow: function(label, instance) {\n          var $a, $li, color, colorEl, indeterminate, removesAll, selectedClass, spacing, i, marked, dropdownName, dropdownValue;\n          $li = $('<li>');\n          $a = $('<a href=\"#\">');\n          selectedClass = [];\n          removesAll = label.id <= 0 || (label.id == null);\n          if ($dropdown.hasClass('js-filter-bulk-update')) {\n            indeterminate = $dropdown.data('indeterminate') || [];\n            marked = $dropdown.data('marked') || [];\n\n            if (indeterminate.indexOf(label.id) !== -1) {\n              selectedClass.push('is-indeterminate');\n            }\n\n            if (marked.indexOf(label.id) !== -1) {\n              // Remove is-indeterminate class if the item will be marked as active\n              i = selectedClass.indexOf('is-indeterminate');\n              if (i !== -1) {\n                selectedClass.splice(i, 1);\n              }\n              selectedClass.push('is-active');\n            }\n          } else {\n            if (this.id(label)) {\n              dropdownName = $dropdown.data('fieldName');\n              dropdownValue = this.id(label).toString().replace(/'/g, '\\\\\\'');\n\n              if ($form.find(\"input[type='hidden'][name='\" + dropdownName + \"'][value='\" + dropdownValue + \"']\").length) {\n                selectedClass.push('is-active');\n              }\n            }\n\n            if ($dropdown.hasClass('js-multiselect') && removesAll) {\n              selectedClass.push('dropdown-clear-active');\n            }\n          }\n          if (label.duplicate) {\n            color = DropdownUtils.duplicateLabelColor(label.color);\n          }\n          else {\n            if (label.color != null) {\n              [color] = label.color;\n            }\n          }\n          if (color) {\n            colorEl = \"<span class='dropdown-label-box' style='background: \" + color + \"'></span>\";\n          }\n          else {\n            colorEl = '';\n          }\n          // We need to identify which items are actually labels\n          if (label.id) {\n            selectedClass.push('label-item');\n            $a.attr('data-label-id', label.id);\n          }\n          $a.addClass(selectedClass.join(' ')).html(`${colorEl} ${_.escape(label.title)}`);\n          // Return generated html\n          return $li.html($a).prop('outerHTML');\n        },\n        search: {\n          fields: ['title']\n        },\n        selectable: true,\n        filterable: true,\n        selected: $dropdown.data('selected') || [],\n        toggleLabel: function(selected, el) {\n          var $dropdownParent = $dropdown.parent();\n          var $dropdownInputField = $dropdownParent.find('.dropdown-input-field');\n          var isSelected = el !== null ? el.hasClass('is-active') : false;\n\n          var title = selected ? selected.title : null;\n          var selectedLabels = this.selected;\n\n          if ($dropdownInputField.length && $dropdownInputField.val().length) {\n            $dropdownParent.find('.dropdown-input-clear').trigger('click');\n          }\n\n          if (selected && selected.id === 0) {\n            this.selected = [];\n            return 'No Label';\n          }\n          else if (isSelected) {\n            this.selected.push(title);\n          }\n          else if (!isSelected && title) {\n            var index = this.selected.indexOf(title);\n            this.selected.splice(index, 1);\n          }\n\n          if (selectedLabels.length === 1) {\n            return selectedLabels;\n          }\n          else if (selectedLabels.length) {\n            return selectedLabels[0] + \" +\" + (selectedLabels.length - 1) + \" more\";\n          }\n          else {\n            return defaultLabel;\n          }\n        },\n        fieldName: $dropdown.data('fieldName'),\n        id: function(label) {\n          if (label.id <= 0) return label.title;\n\n          if ($dropdown.hasClass('js-issuable-form-dropdown')) {\n            return label.id;\n          }\n\n          if ($dropdown.hasClass(\"js-filter-submit\") && (label.isAny == null)) {\n            return label.title;\n          }\n          else {\n            return label.id;\n          }\n        },\n        hidden: function() {\n          var isIssueIndex, isMRIndex, page, selectedLabels;\n          page = $('body').attr('data-page');\n          isIssueIndex = page === 'projects:issues:index';\n          isMRIndex = page === 'projects:merge_requests:index';\n          $selectbox.hide();\n          // display:block overrides the hide-collapse rule\n          $value.removeAttr('style');\n\n          if ($dropdown.hasClass('js-issuable-form-dropdown')) {\n            return;\n          }\n\n          if ($('html').hasClass('issue-boards-page')) {\n            return;\n          }\n          if ($dropdown.hasClass('js-multiselect')) {\n            if ($dropdown.hasClass('js-filter-submit') && (isIssueIndex || isMRIndex)) {\n              selectedLabels = $dropdown.closest('form').find(\"input:hidden[name='\" + ($dropdown.data('fieldName')) + \"']\");\n              Issuable.filterResults($dropdown.closest('form'));\n            }\n            else if ($dropdown.hasClass('js-filter-submit')) {\n              $dropdown.closest('form').submit();\n            }\n            else {\n              if (!$dropdown.hasClass('js-filter-bulk-update')) {\n                saveLabelData();\n              }\n            }\n          }\n        },\n        multiSelect: $dropdown.hasClass('js-multiselect'),\n        vue: $dropdown.hasClass('js-issue-board-sidebar'),\n        clicked: function (clickEvent) {\n          const { $el, e, isMarking } = clickEvent;\n          const label = clickEvent.selectedObj;\n\n          var isIssueIndex, isMRIndex, page, boardsModel;\n          var fadeOutLoader = () => {\n            $loading.fadeOut();\n          };\n\n          page = $('body').attr('data-page');\n          isIssueIndex = page === 'projects:issues:index';\n          isMRIndex = page === 'projects:merge_requests:index';\n\n          if ($dropdown.parent().find('.is-active:not(.dropdown-clear-active)').length) {\n            $dropdown.parent()\n              .find('.dropdown-clear-active')\n              .removeClass('is-active');\n          }\n\n          if ($dropdown.hasClass('js-issuable-form-dropdown')) {\n            return;\n          }\n\n          if ($dropdown.hasClass('js-filter-bulk-update')) {\n            _this.enableBulkLabelDropdown();\n            _this.setDropdownData($dropdown, isMarking, label.id);\n            return;\n          }\n\n          if ($dropdown.closest('.add-issues-modal').length) {\n            boardsModel = ModalStore.store.filter;\n          }\n\n          if (boardsModel) {\n            if (label.isAny) {\n              boardsModel['label_name'] = [];\n            } else if ($el.hasClass('is-active')) {\n              boardsModel['label_name'].push(label.title);\n            }\n\n            e.preventDefault();\n            return;\n          }\n          else if ($dropdown.hasClass('js-filter-submit') && (isIssueIndex || isMRIndex)) {\n            if (!$dropdown.hasClass('js-multiselect')) {\n              selectedLabel = label.title;\n              return Issuable.filterResults($dropdown.closest('form'));\n            }\n          }\n          else if ($dropdown.hasClass('js-filter-submit')) {\n            return $dropdown.closest('form').submit();\n          }\n          else if ($dropdown.hasClass('js-issue-board-sidebar')) {\n            if ($el.hasClass('is-active')) {\n              gl.issueBoards.BoardsStore.detail.issue.labels.push(new ListLabel({\n                id: label.id,\n                title: label.title,\n                color: label.color[0],\n                textColor: '#fff'\n              }));\n            }\n            else {\n              var { labels } = gl.issueBoards.BoardsStore.detail.issue;\n              labels = labels.filter(function (selectedLabel) {\n                return selectedLabel.id !== label.id;\n              });\n              gl.issueBoards.BoardsStore.detail.issue.labels = labels;\n            }\n\n            $loading.fadeIn();\n\n            gl.issueBoards.BoardsStore.detail.issue.update($dropdown.attr('data-issue-update'))\n              .then(fadeOutLoader)\n              .catch(fadeOutLoader);\n          }\n          else if (handleClick) {\n            e.preventDefault();\n            handleClick(label);\n          }\n          else {\n            if ($dropdown.hasClass('js-multiselect')) {\n\n            }\n            else {\n              return saveLabelData();\n            }\n          }\n        },\n        opened: function(e) {\n          if ($dropdown.hasClass('js-issue-board-sidebar')) {\n            const previousSelection = $dropdown.attr('data-selected');\n            this.selected = previousSelection ? previousSelection.split(',') : [];\n            $dropdown.data('glDropdown').updateLabel();\n          }\n        },\n        preserveContext: true,\n      });\n\n      // Set dropdown data\n      _this.setOriginalDropdownData($dropdownContainer, $dropdown);\n    });\n    this.bindEvents();\n  }\n\n  static getLabelTemplate(tplData) {\n    // We could use ES6 template string here\n    // and properly indent markup for readability\n    // but that also introduces unintended white-space\n    // so best approach is to use traditional way of\n    // concatenation\n    // see: http://2ality.com/2016/05/template-literal-whitespace.html#joining-arrays\n    const tpl = _.template([\n      '<% _.each(labels, function(label){ %>',\n      '<a href=\"<%- issueUpdateURL.slice(0, issueUpdateURL.lastIndexOf(\"/\")) %>?label_name[]=<%- encodeURIComponent(label.title) %>\">',\n      '<span class=\"badge label has-tooltip color-label\" title=\"<%- label.description %>\" style=\"background-color: <%- label.color %>; color: <%- label.text_color %>;\">',\n      '<%- label.title %>',\n      '</span>',\n      '</a>',\n      '<% }); %>',\n    ].join(''));\n\n    return tpl(tplData);\n  }\n\n  bindEvents() {\n    return $('body').on('change', '.selected_issue', this.onSelectCheckboxIssue);\n  }\n  // eslint-disable-next-line class-methods-use-this\n  onSelectCheckboxIssue() {\n    if ($('.selected_issue:checked').length) {\n      return;\n    }\n    return $('.issues-bulk-update .labels-filter .dropdown-toggle-text').text('Label');\n  }\n  // eslint-disable-next-line class-methods-use-this\n  enableBulkLabelDropdown() {\n    IssuableBulkUpdateActions.willUpdateLabels = true;\n  }\n  // eslint-disable-next-line class-methods-use-this\n  setDropdownData($dropdown, isMarking, value) {\n    var i, markedIds, unmarkedIds, indeterminateIds;\n\n    markedIds = $dropdown.data('marked') || [];\n    unmarkedIds = $dropdown.data('unmarked') || [];\n    indeterminateIds = $dropdown.data('indeterminate') || [];\n\n    if (isMarking) {\n      markedIds.push(value);\n\n      i = indeterminateIds.indexOf(value);\n      if (i > -1) {\n        indeterminateIds.splice(i, 1);\n      }\n\n      i = unmarkedIds.indexOf(value);\n      if (i > -1) {\n        unmarkedIds.splice(i, 1);\n      }\n    } else {\n      // If marked item (not common) is unmarked\n      i = markedIds.indexOf(value);\n      if (i > -1) {\n        markedIds.splice(i, 1);\n      }\n\n      // If an indeterminate item is being unmarked\n      if (IssuableBulkUpdateActions.getOriginalIndeterminateIds().indexOf(value) > -1) {\n        unmarkedIds.push(value);\n      }\n\n      // If a marked item is being unmarked\n      // (a marked item could also be a label that is present in all selection)\n      if (IssuableBulkUpdateActions.getOriginalCommonIds().indexOf(value) > -1) {\n        unmarkedIds.push(value);\n      }\n    }\n\n    $dropdown.data('marked', markedIds);\n    $dropdown.data('unmarked', unmarkedIds);\n    $dropdown.data('indeterminate', indeterminateIds);\n  }\n  // eslint-disable-next-line class-methods-use-this\n  setOriginalDropdownData($container, $dropdown) {\n    const labels = [];\n    $container.find('[name=\"label_name[]\"]').map(function() {\n      return labels.push(this.value);\n    });\n    $dropdown.data('marked', labels);\n  }\n}\n","/* eslint-disable func-names, prefer-arrow-callback */\n\nimport $ from 'jquery';\nimport Api from './api';\nimport { humanize } from './lib/utils/text_utility';\n\nexport default class CreateLabelDropdown {\n  constructor($el, namespacePath, projectPath) {\n    this.$el = $el;\n    this.namespacePath = namespacePath;\n    this.projectPath = projectPath;\n    this.$dropdownBack = $('.dropdown-menu-back', this.$el.closest('.dropdown'));\n    this.$cancelButton = $('.js-cancel-label-btn', this.$el);\n    this.$newLabelField = $('#new_label_name', this.$el);\n    this.$newColorField = $('#new_label_color', this.$el);\n    this.$colorPreview = $('.js-dropdown-label-color-preview', this.$el);\n    this.$newLabelError = $('.js-label-error', this.$el);\n    this.$newLabelCreateButton = $('.js-new-label-btn', this.$el);\n    this.$colorSuggestions = $('.suggest-colors-dropdown a', this.$el);\n\n    this.$newLabelError.hide();\n    this.$newLabelCreateButton.disable();\n\n    this.cleanBinding();\n    this.addBinding();\n  }\n\n  cleanBinding() {\n    this.$colorSuggestions.off('click');\n    this.$newLabelField.off('keyup change');\n    this.$newColorField.off('keyup change');\n    this.$dropdownBack.off('click');\n    this.$cancelButton.off('click');\n    this.$newLabelCreateButton.off('click');\n  }\n\n  addBinding() {\n    const self = this;\n\n    this.$colorSuggestions.on('click', function (e) {\n      const $this = $(this);\n      self.addColorValue(e, $this);\n    });\n\n    this.$newLabelField.on('keyup change', this.enableLabelCreateButton.bind(this));\n    this.$newColorField.on('keyup change', this.enableLabelCreateButton.bind(this));\n\n    this.$dropdownBack.on('click', this.resetForm.bind(this));\n\n    this.$cancelButton.on('click', function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      self.resetForm();\n      self.$dropdownBack.trigger('click');\n    });\n\n    this.$newLabelCreateButton.on('click', this.saveLabel.bind(this));\n  }\n\n  addColorValue(e, $this) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.$newColorField.val($this.data('color')).trigger('change');\n    this.$colorPreview\n      .css('background-color', $this.data('color'))\n      .parent()\n      .addClass('is-active');\n  }\n\n  enableLabelCreateButton() {\n    if (this.$newLabelField.val() !== '' && this.$newColorField.val() !== '') {\n      this.$newLabelError.hide();\n      this.$newLabelCreateButton.enable();\n    } else {\n      this.$newLabelCreateButton.disable();\n    }\n  }\n\n  resetForm() {\n    this.$newLabelField\n      .val('')\n      .trigger('change');\n\n    this.$newColorField\n      .val('')\n      .trigger('change');\n\n    this.$colorPreview\n      .css('background-color', '')\n      .parent()\n      .removeClass('is-active');\n  }\n\n  saveLabel(e) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    Api.newLabel(this.namespacePath, this.projectPath, {\n      title: this.$newLabelField.val(),\n      color: this.$newColorField.val(),\n    }, (label) => {\n      this.$newLabelCreateButton.enable();\n\n      if (label.message) {\n        let errors;\n\n        if (typeof label.message === 'string') {\n          errors = label.message;\n        } else {\n          errors = Object.keys(label.message).map(key =>\n            `${humanize(key)} ${label.message[key].join(', ')}`,\n          ).join('<br/>');\n        }\n\n        this.$newLabelError\n          .html(errors)\n          .show();\n      } else {\n        this.$dropdownBack.trigger('click');\n\n        $(document).trigger('created.label', label);\n      }\n    });\n  }\n}\n","/* eslint-disable class-methods-use-this, no-unused-vars */\n\nimport $ from 'jquery';\n\nexport default class TemplateSelector {\n  constructor({ dropdown, data, pattern, wrapper, editor, $input } = {}) {\n    this.pattern = pattern;\n    this.editor = editor;\n    this.dropdown = dropdown;\n    this.$dropdownContainer = wrapper;\n    this.$filenameInput = $input || $('#file_name');\n    this.$dropdownIcon = $('.fa-chevron-down', dropdown);\n\n    this.initDropdown(dropdown, data);\n    this.listenForFilenameInput();\n    this.renderMatchedDropdown();\n    this.initAutosizeUpdateEvent();\n  }\n\n  initDropdown(dropdown, data) {\n    return $(dropdown).glDropdown({\n      data,\n      filterable: true,\n      selectable: true,\n      toggleLabel: item => item.name,\n      search: {\n        fields: ['name'],\n      },\n      clicked: options => this.fetchFileTemplate(options),\n      text: item => item.name,\n    });\n  }\n\n  initAutosizeUpdateEvent() {\n    this.autosizeUpdateEvent = document.createEvent('Event');\n    this.autosizeUpdateEvent.initEvent('autosize:update', true, false);\n  }\n\n  listenForFilenameInput() {\n    return this.$filenameInput.on('keyup blur', e => this.renderMatchedDropdown(e));\n  }\n\n  renderMatchedDropdown() {\n    if (!this.$filenameInput.length) {\n      return null;\n    }\n\n    const filenameMatches = this.pattern.test(this.$filenameInput.val().trim());\n\n    if (!filenameMatches) {\n      return this.$dropdownContainer.addClass('hidden');\n    }\n    return this.$dropdownContainer.removeClass('hidden');\n  }\n\n  fetchFileTemplate(options) {\n    const { e } = options;\n    const item = options.selectedObj;\n\n    e.preventDefault();\n    return this.requestFile(item);\n  }\n\n  requestFile(item) {\n    // This `requestFile` method is an abstract method that should\n    // be added by all subclasses.\n  }\n\n  // To be implemented on the extending class\n  // e.g. Api.gitlabCiYml(query.name, file => this.setEditorContent(file));\n\n  setEditorContent(file, { skipFocus } = {}) {\n    if (!file) return;\n\n    const newValue = file.content;\n\n    this.editor.setValue(newValue, 1);\n\n    if (!skipFocus) this.editor.focus();\n\n    if (this.editor instanceof $) {\n      this.editor.get(0).dispatchEvent(this.autosizeUpdateEvent);\n    }\n  }\n\n  startLoadingSpinner() {\n    this.$dropdownIcon\n      .addClass('fa-spinner fa-spin')\n      .removeClass('fa-chevron-down');\n  }\n\n  stopLoadingSpinner() {\n    this.$dropdownIcon\n      .addClass('fa-chevron-down')\n      .removeClass('fa-spinner fa-spin');\n  }\n}\n","/* eslint-disable no-useless-return, max-len */\n\nimport $ from 'jquery';\nimport Api from '../api';\nimport TemplateSelector from '../blob/template_selector';\n\nexport default class IssuableTemplateSelector extends TemplateSelector {\n  constructor(...args) {\n    super(...args);\n    this.projectPath = this.dropdown.data('projectPath');\n    this.namespacePath = this.dropdown.data('namespacePath');\n    this.issuableType = this.$dropdownContainer.data('issuableType');\n    this.titleInput = $(`#${this.issuableType}_title`);\n\n    const initialQuery = {\n      name: this.dropdown.data('selected'),\n    };\n\n    if (initialQuery.name) this.requestFile(initialQuery);\n\n    $('.reset-template', this.dropdown.parent()).on('click', () => {\n      this.setInputValueToTemplateContent();\n    });\n\n    $('.no-template', this.dropdown.parent()).on('click', () => {\n      this.currentTemplate.content = '';\n      this.setInputValueToTemplateContent();\n      $('.dropdown-toggle-text', this.dropdown).text('Choose a template');\n    });\n  }\n\n  requestFile(query) {\n    this.startLoadingSpinner();\n    Api.issueTemplate(this.namespacePath, this.projectPath, query.name, this.issuableType, (err, currentTemplate) => {\n      this.currentTemplate = currentTemplate;\n      this.stopLoadingSpinner();\n      if (err) return; // Error handled by global AJAX error handler\n      this.setInputValueToTemplateContent();\n    });\n    return;\n  }\n\n  setInputValueToTemplateContent() {\n    // `this.setEditorContent` sets the value of the description input field\n    // to the content of the template selected.\n    if (this.titleInput.val() === '') {\n      // If the title has not yet been set, focus the title input and\n      // skip focusing the description input by setting `true` as the\n      // `skipFocus` option to `setEditorContent`.\n      this.setEditorContent(this.currentTemplate, { skipFocus: true });\n      this.titleInput.focus();\n    } else {\n      this.setEditorContent(this.currentTemplate, { skipFocus: false });\n    }\n    return;\n  }\n}\n","/* eslint-disable no-new, class-methods-use-this */\n\nimport $ from 'jquery';\nimport IssuableTemplateSelector from './issuable_template_selector';\n\nexport default class IssuableTemplateSelectors {\n  constructor({ $dropdowns, editor } = {}) {\n    this.$dropdowns = $dropdowns || $('.js-issuable-selector');\n    this.editor = editor || this.initEditor();\n\n    this.$dropdowns.each((i, dropdown) => {\n      const $dropdown = $(dropdown);\n      new IssuableTemplateSelector({\n        pattern: /(\\.md)/,\n        data: $dropdown.data('data'),\n        wrapper: $dropdown.closest('.js-issuable-selector-wrap'),\n        dropdown: $dropdown,\n        editor: this.editor,\n      });\n    });\n  }\n\n  initEditor() {\n    const editor = $('.markdown-area');\n    // Proxy ace-editor's .setValue to jQuery's .val\n    editor.setValue = editor.val;\n    editor.getValue = editor.val;\n    return editor;\n  }\n}\n","import $ from 'jquery';\n\nlet instanceCount = 0;\n\nclass AutoWidthDropdownSelect {\n  constructor(selectElement) {\n    this.$selectElement = $(selectElement);\n    this.dropdownClass = `js-auto-width-select-dropdown-${instanceCount}`;\n    instanceCount += 1;\n  }\n\n  init() {\n    const { dropdownClass } = this;\n    this.$selectElement.select2({\n      dropdownCssClass: dropdownClass,\n      ...AutoWidthDropdownSelect.selectOptions(this.dropdownClass),\n    });\n\n    return this;\n  }\n\n  static selectOptions(dropdownClass) {\n    return {\n      dropdownCss() {\n        let resultantWidth = 'auto';\n        const $dropdown = $(`.${dropdownClass}`);\n\n        // We have to look at the parent because\n        // `offsetParent` on a `display: none;` is `null`\n        const offsetParentWidth = $(this).parent().offsetParent().width();\n        // Reset any width to let it naturally flow\n        $dropdown.css('width', 'auto');\n        if ($dropdown.outerWidth(false) > offsetParentWidth) {\n          resultantWidth = offsetParentWidth;\n        }\n\n        return {\n          width: resultantWidth,\n          maxWidth: offsetParentWidth,\n        };\n      },\n    };\n  }\n}\n\nexport default AutoWidthDropdownSelect;\n","/* eslint-disable no-new, no-unused-vars, consistent-return, no-else-return */\n/* global GitLab */\n\nimport $ from 'jquery';\nimport Pikaday from 'pikaday';\nimport Autosave from './autosave';\nimport UsersSelect from './users_select';\nimport GfmAutoComplete from './gfm_auto_complete';\nimport ZenMode from './zen_mode';\nimport AutoWidthDropdownSelect from './issuable/auto_width_dropdown_select';\nimport { parsePikadayDate, pikadayToString } from './lib/utils/datefix';\n\nexport default class IssuableForm {\n  constructor(form) {\n    this.form = form;\n    this.toggleWip = this.toggleWip.bind(this);\n    this.renderWipExplanation = this.renderWipExplanation.bind(this);\n    this.resetAutosave = this.resetAutosave.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.wipRegex = /^\\s*(\\[WIP\\]\\s*|WIP:\\s*|WIP\\s+)+\\s*/i;\n\n    new GfmAutoComplete(gl.GfmAutoComplete && gl.GfmAutoComplete.dataSources).setup();\n    new UsersSelect();\n    new ZenMode();\n\n    this.titleField = this.form.find('input[name*=\"[title]\"]');\n    this.descriptionField = this.form.find('textarea[name*=\"[description]\"]');\n    if (!(this.titleField.length && this.descriptionField.length)) {\n      return;\n    }\n\n    this.initAutosave();\n    this.form.on('submit', this.handleSubmit);\n    this.form.on('click', '.btn-cancel', this.resetAutosave);\n    this.initWip();\n\n    const $issuableDueDate = $('#issuable-due-date');\n\n    if ($issuableDueDate.length) {\n      const calendar = new Pikaday({\n        field: $issuableDueDate.get(0),\n        theme: 'gitlab-theme animate-picker',\n        format: 'yyyy-mm-dd',\n        container: $issuableDueDate.parent().get(0),\n        parse: dateString => parsePikadayDate(dateString),\n        toString: date => pikadayToString(date),\n        onSelect: dateText => $issuableDueDate.val(calendar.toString(dateText)),\n      });\n      calendar.setDate(parsePikadayDate($issuableDueDate.val()));\n    }\n\n    this.$targetBranchSelect = $('.js-target-branch-select', this.form);\n\n    if (this.$targetBranchSelect.length) {\n      this.initTargetBranchDropdown();\n    }\n  }\n\n  initAutosave() {\n    new Autosave(this.titleField, [document.location.pathname, document.location.search, 'title']);\n    return new Autosave(this.descriptionField, [document.location.pathname, document.location.search, 'description']);\n  }\n\n  handleSubmit() {\n    return this.resetAutosave();\n  }\n\n  resetAutosave() {\n    this.titleField.data('autosave').reset();\n    return this.descriptionField.data('autosave').reset();\n  }\n\n  initWip() {\n    this.$wipExplanation = this.form.find('.js-wip-explanation');\n    this.$noWipExplanation = this.form.find('.js-no-wip-explanation');\n    if (!(this.$wipExplanation.length && this.$noWipExplanation.length)) {\n      return;\n    }\n    this.form.on('click', '.js-toggle-wip', this.toggleWip);\n    this.titleField.on('keyup blur', this.renderWipExplanation);\n    return this.renderWipExplanation();\n  }\n\n  workInProgress() {\n    return this.wipRegex.test(this.titleField.val());\n  }\n\n  renderWipExplanation() {\n    if (this.workInProgress()) {\n      this.$wipExplanation.show();\n      return this.$noWipExplanation.hide();\n    } else {\n      this.$wipExplanation.hide();\n      return this.$noWipExplanation.show();\n    }\n  }\n\n  toggleWip(event) {\n    event.preventDefault();\n    if (this.workInProgress()) {\n      this.removeWip();\n    } else {\n      this.addWip();\n    }\n    return this.renderWipExplanation();\n  }\n\n  removeWip() {\n    return this.titleField.val(this.titleField.val().replace(this.wipRegex, ''));\n  }\n\n  addWip() {\n    this.titleField.val(`WIP: ${(this.titleField.val())}`);\n  }\n\n  initTargetBranchDropdown() {\n    this.$targetBranchSelect.select2({\n      ...AutoWidthDropdownSelect.selectOptions('js-target-branch-select'),\n      ajax: {\n        url: this.$targetBranchSelect.data('endpoint'),\n        dataType: 'JSON',\n        quietMillis: 250,\n        data(search) {\n          return {\n            search,\n          };\n        },\n        results(data) {\n          return {\n            // `data` keys are translated so we can't just access them with a string based key\n            results: data[Object.keys(data)[0]].map(name => ({\n              id: name,\n              text: name,\n            })),\n          };\n        },\n      },\n      initSelection(el, callback) {\n        const val = el.val();\n\n        callback({\n          id: val,\n          text: val,\n        });\n      },\n    });\n  }\n}\n","\nexport const pad = (val, len = 2) => (`0${val}`).slice(-len);\n\n/**\n * Formats dates in Pickaday\n * @param {String} dateString Date in yyyy-mm-dd format\n * @return {Date} UTC format\n */\nexport const parsePikadayDate = (dateString) => {\n  const parts = dateString.split('-');\n  const year = parseInt(parts[0], 10);\n  const month = parseInt(parts[1] - 1, 10);\n  const day = parseInt(parts[2], 10);\n\n  return new Date(year, month, day);\n};\n\n/**\n * Used `onSelect` method in pickaday\n * @param {Date} date UTC format\n * @return {String} Date formated in yyyy-mm-dd\n */\nexport const pikadayToString = (date) => {\n  const day = pad(date.getDate());\n  const month = pad(date.getMonth() + 1);\n  const year = date.getFullYear();\n\n  return `${year}-${month}-${day}`;\n};\n","/* eslint-disable no-new */\n\nimport $ from 'jquery';\nimport GLForm from '~/gl_form';\nimport IssuableForm from '~/issuable_form';\nimport LabelsSelect from '~/labels_select';\nimport MilestoneSelect from '~/milestone_select';\nimport ShortcutsNavigation from '~/shortcuts_navigation';\nimport IssuableTemplateSelectors from '~/templates/issuable_template_selectors';\n\nexport default () => {\n  new ShortcutsNavigation();\n  new GLForm($('.issue-form'));\n  new IssuableForm($('.issue-form'));\n  new LabelsSelect();\n  new MilestoneSelect();\n  new IssuableTemplateSelectors();\n};\n","import $ from 'jquery';\nimport Dropzone from 'dropzone';\nimport _ from 'underscore';\nimport './preview_markdown';\nimport csrf from './lib/utils/csrf';\nimport axios from './lib/utils/axios_utils';\n\nDropzone.autoDiscover = false;\n\nexport default function dropzoneInput(form) {\n  const divHover = '<div class=\"div-dropzone-hover\"></div>';\n  const iconPaperclip = '<i class=\"fa fa-paperclip div-dropzone-icon\"></i>';\n  const $attachButton = form.find('.button-attach-file');\n  const $attachingFileMessage = form.find('.attaching-file-message');\n  const $cancelButton = form.find('.button-cancel-uploading-files');\n  const $retryLink = form.find('.retry-uploading-link');\n  const $uploadProgress = form.find('.uploading-progress');\n  const $uploadingErrorContainer = form.find('.uploading-error-container');\n  const $uploadingErrorMessage = form.find('.uploading-error-message');\n  const $uploadingProgressContainer = form.find('.uploading-progress-container');\n  const uploadsPath = window.uploads_path || null;\n  const maxFileSize = gon.max_file_size || 10;\n  const formTextarea = form.find('.js-gfm-input');\n  let handlePaste;\n  let pasteText;\n  let addFileToForm;\n  let updateAttachingMessage;\n  let isImage;\n  let getFilename;\n  let uploadFile;\n\n  formTextarea.wrap('<div class=\"div-dropzone\"></div>');\n  formTextarea.on('paste', event => handlePaste(event));\n\n  // Add dropzone area to the form.\n  const $mdArea = formTextarea.closest('.md-area');\n  form.setupMarkdownPreview();\n  const $formDropzone = form.find('.div-dropzone');\n  $formDropzone.parent().addClass('div-dropzone-wrapper');\n  $formDropzone.append(divHover);\n  $formDropzone.find('.div-dropzone-hover').append(iconPaperclip);\n\n  if (!uploadsPath) {\n    $formDropzone.addClass('js-invalid-dropzone');\n    return;\n  }\n\n  const dropzone = $formDropzone.dropzone({\n    url: uploadsPath,\n    dictDefaultMessage: '',\n    clickable: true,\n    paramName: 'file',\n    maxFilesize: maxFileSize,\n    uploadMultiple: false,\n    headers: csrf.headers,\n    previewContainer: false,\n    processing: () => $('.div-dropzone-alert').alert('close'),\n    dragover: () => {\n      $mdArea.addClass('is-dropzone-hover');\n      form.find('.div-dropzone-hover').css('opacity', 0.7);\n    },\n    dragleave: () => {\n      $mdArea.removeClass('is-dropzone-hover');\n      form.find('.div-dropzone-hover').css('opacity', 0);\n    },\n    drop: () => {\n      $mdArea.removeClass('is-dropzone-hover');\n      form.find('.div-dropzone-hover').css('opacity', 0);\n      formTextarea.focus();\n    },\n    success(header, response) {\n      const processingFileCount = this.getQueuedFiles().length + this.getUploadingFiles().length;\n      const shouldPad = processingFileCount >= 1;\n\n      pasteText(response.link.markdown, shouldPad);\n      // Show 'Attach a file' link only when all files have been uploaded.\n      if (!processingFileCount) $attachButton.removeClass('hide');\n      addFileToForm(response.link.url);\n    },\n    error: (file, errorMessage = 'Attaching the file failed.', xhr) => {\n      // If 'error' event is fired by dropzone, the second parameter is error message.\n      // If the 'errorMessage' parameter is empty, the default error message is set.\n      // If the 'error' event is fired by backend (xhr) error response, the third parameter is\n      // xhr object (xhr.responseText is error message).\n      // On error we hide the 'Attach' and 'Cancel' buttons\n      // and show an error.\n\n      // If there's xhr error message, let's show it instead of dropzone's one.\n      const message = xhr ? xhr.responseText : errorMessage;\n\n      $uploadingErrorContainer.removeClass('hide');\n      $uploadingErrorMessage.html(message);\n      $attachButton.addClass('hide');\n      $cancelButton.addClass('hide');\n    },\n    totaluploadprogress(totalUploadProgress) {\n      updateAttachingMessage(this.files, $attachingFileMessage);\n      $uploadProgress.text(`${Math.round(totalUploadProgress)}%`);\n    },\n    sending: () => {\n      // DOM elements already exist.\n      // Instead of dynamically generating them,\n      // we just either hide or show them.\n      $attachButton.addClass('hide');\n      $uploadingErrorContainer.addClass('hide');\n      $uploadingProgressContainer.removeClass('hide');\n      $cancelButton.removeClass('hide');\n    },\n    removedfile: () => {\n      $attachButton.removeClass('hide');\n      $cancelButton.addClass('hide');\n      $uploadingProgressContainer.addClass('hide');\n      $uploadingErrorContainer.addClass('hide');\n    },\n    queuecomplete: () => {\n      $('.dz-preview').remove();\n      $('.markdown-area').trigger('input');\n\n      $uploadingProgressContainer.addClass('hide');\n      $cancelButton.addClass('hide');\n    },\n  });\n\n  const child = $(dropzone[0]).children('textarea');\n\n  // removeAllFiles(true) stops uploading files (if any)\n  // and remove them from dropzone files queue.\n  $cancelButton.on('click', (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    Dropzone.forElement($formDropzone.get(0)).removeAllFiles(true);\n  });\n\n  // If 'error' event is fired, we store a failed files,\n  // clear dropzone files queue, change status of failed files to undefined,\n  // and add that files to the dropzone files queue again.\n  // addFile() adds file to dropzone files queue and upload it.\n  $retryLink.on('click', (e) => {\n    const dropzoneInstance = Dropzone.forElement(e.target.closest('.js-main-target-form').querySelector('.div-dropzone'));\n    const failedFiles = dropzoneInstance.files;\n\n    e.preventDefault();\n\n    // 'true' parameter of removeAllFiles() cancels\n    // uploading of files that are being uploaded at the moment.\n    dropzoneInstance.removeAllFiles(true);\n\n    failedFiles.map((failedFile) => {\n      const file = failedFile;\n\n      if (file.status === Dropzone.ERROR) {\n        file.status = undefined;\n        file.accepted = undefined;\n      }\n\n      return dropzoneInstance.addFile(file);\n    });\n  });\n  // eslint-disable-next-line consistent-return\n  handlePaste = (event) => {\n    const pasteEvent = event.originalEvent;\n    if (pasteEvent.clipboardData && pasteEvent.clipboardData.items) {\n      const image = isImage(pasteEvent);\n      if (image) {\n        event.preventDefault();\n        const filename = getFilename(pasteEvent) || 'image.png';\n        const text = `{{${filename}}}`;\n        pasteText(text);\n        return uploadFile(image.getAsFile(), filename);\n      }\n    }\n  };\n\n  isImage = (data) => {\n    let i = 0;\n    while (i < data.clipboardData.items.length) {\n      const item = data.clipboardData.items[i];\n      if (item.type.indexOf('image') !== -1) {\n        return item;\n      }\n      i += 1;\n    }\n    return false;\n  };\n\n  pasteText = (text, shouldPad) => {\n    let formattedText = text;\n    if (shouldPad) {\n      formattedText += '\\n\\n';\n    }\n    const textarea = child.get(0);\n    const caretStart = textarea.selectionStart;\n    const caretEnd = textarea.selectionEnd;\n    const textEnd = $(child).val().length;\n    const beforeSelection = $(child).val().substring(0, caretStart);\n    const afterSelection = $(child).val().substring(caretEnd, textEnd);\n    $(child).val(beforeSelection + formattedText + afterSelection);\n    textarea.setSelectionRange(caretStart + formattedText.length, caretEnd + formattedText.length);\n    textarea.style.height = `${textarea.scrollHeight}px`;\n    formTextarea.get(0).dispatchEvent(new Event('input'));\n    return formTextarea.trigger('input');\n  };\n\n  addFileToForm = (path) => {\n    $(form).append(`<input type=\"hidden\" name=\"files[]\" value=\"${_.escape(path)}\">`);\n  };\n\n  getFilename = (e) => {\n    let value;\n    if (window.clipboardData && window.clipboardData.getData) {\n      value = window.clipboardData.getData('Text');\n    } else if (e.clipboardData && e.clipboardData.getData) {\n      value = e.clipboardData.getData('text/plain');\n    }\n    value = value.split('\\r');\n    return value[0];\n  };\n\n  const showSpinner = () => $uploadingProgressContainer.removeClass('hide');\n\n  const closeSpinner = () => $uploadingProgressContainer.addClass('hide');\n\n  const showError = (message) => {\n    $uploadingErrorContainer.removeClass('hide');\n    $uploadingErrorMessage.html(message);\n  };\n\n  const closeAlertMessage = () => form.find('.div-dropzone-alert').alert('close');\n\n  const insertToTextArea = (filename, url) => {\n    const $child = $(child);\n    $child.val((index, val) => val.replace(`{{${filename}}}`, url));\n\n    $child.trigger('change');\n  };\n\n  uploadFile = (item, filename) => {\n    const formData = new FormData();\n    formData.append('file', item, filename);\n\n    showSpinner();\n    closeAlertMessage();\n\n    axios.post(uploadsPath, formData)\n      .then(({ data }) => {\n        const md = data.link.markdown;\n\n        insertToTextArea(filename, md);\n        closeSpinner();\n      })\n      .catch((e) => {\n        showError(e.response.data.message);\n        closeSpinner();\n      });\n  };\n\n  updateAttachingMessage = (files, messageContainer) => {\n    let attachingMessage;\n    const filesCount = files.filter(file => file.status === 'uploading' || file.status === 'queued').length;\n\n    // Dinamycally change uploading files text depending on files number in\n    // dropzone files queue.\n    if (filesCount > 1) {\n      attachingMessage = `Attaching ${filesCount} files -`;\n    } else {\n      attachingMessage = 'Attaching a file -';\n    }\n\n    messageContainer.text(attachingMessage);\n  };\n\n  form.find('.markdown-selector').click(function onMarkdownClick(e) {\n    e.preventDefault();\n    $(this).closest('.gfm-form').find('.div-dropzone').click();\n    formTextarea.focus();\n  });\n}\n","/* eslint-disable func-names, no-var, no-param-reassign, quotes, one-var, one-var-declaration-per-line, operator-assignment, no-else-return, prefer-template, prefer-arrow-callback, max-len, consistent-return, no-unused-vars, max-len */\nimport $ from 'jquery';\nimport { insertText } from '~/lib/utils/common_utils';\n\nfunction selectedText(text, textarea) {\n  return text.substring(textarea.selectionStart, textarea.selectionEnd);\n}\n\nfunction lineBefore(text, textarea) {\n  var split;\n  split = text.substring(0, textarea.selectionStart).trim().split('\\n');\n  return split[split.length - 1];\n}\n\nfunction lineAfter(text, textarea) {\n  return text.substring(textarea.selectionEnd).trim().split('\\n')[0];\n}\n\nfunction blockTagText(text, textArea, blockTag, selected) {\n  const before = lineBefore(text, textArea);\n  const after = lineAfter(text, textArea);\n  if (before === blockTag && after === blockTag) {\n    // To remove the block tag we have to select the line before & after\n    if (blockTag != null) {\n      textArea.selectionStart = textArea.selectionStart - (blockTag.length + 1);\n      textArea.selectionEnd = textArea.selectionEnd + (blockTag.length + 1);\n    }\n    return selected;\n  } else {\n    return blockTag + \"\\n\" + selected + \"\\n\" + blockTag;\n  }\n}\n\nfunction moveCursor(textArea, tag, wrapped, removedLastNewLine) {\n  var pos;\n  if (!textArea.setSelectionRange) {\n    return;\n  }\n  if (textArea.selectionStart === textArea.selectionEnd) {\n    if (wrapped) {\n      pos = textArea.selectionStart - tag.length;\n    } else {\n      pos = textArea.selectionStart;\n    }\n\n    if (removedLastNewLine) {\n      pos -= 1;\n    }\n\n    return textArea.setSelectionRange(pos, pos);\n  }\n}\n\nexport function insertMarkdownText(textArea, text, tag, blockTag, selected, wrap) {\n  var textToInsert, inserted, selectedSplit, startChar, removedLastNewLine, removedFirstNewLine, currentLineEmpty, lastNewLine;\n  removedLastNewLine = false;\n  removedFirstNewLine = false;\n  currentLineEmpty = false;\n\n  // Remove the first newline\n  if (selected.indexOf('\\n') === 0) {\n    removedFirstNewLine = true;\n    selected = selected.replace(/\\n+/, '');\n  }\n\n  // Remove the last newline\n  if (textArea.selectionEnd - textArea.selectionStart > selected.replace(/\\n$/, '').length) {\n    removedLastNewLine = true;\n    selected = selected.replace(/\\n$/, '');\n  }\n\n  selectedSplit = selected.split('\\n');\n\n  if (!wrap) {\n    lastNewLine = textArea.value.substr(0, textArea.selectionStart).lastIndexOf('\\n');\n\n    // Check whether the current line is empty or consists only of spaces(=handle as empty)\n    if (/^\\s*$/.test(textArea.value.substring(lastNewLine, textArea.selectionStart))) {\n      currentLineEmpty = true;\n    }\n  }\n\n  startChar = !wrap && !currentLineEmpty && textArea.selectionStart > 0 ? '\\n' : '';\n\n  if (selectedSplit.length > 1 && (!wrap || (blockTag != null && blockTag !== ''))) {\n    if (blockTag != null && blockTag !== '') {\n      textToInsert = blockTagText(text, textArea, blockTag, selected);\n    } else {\n      textToInsert = selectedSplit.map(function(val) {\n        if (val.indexOf(tag) === 0) {\n          return \"\" + (val.replace(tag, ''));\n        } else {\n          return \"\" + tag + val;\n        }\n      }).join('\\n');\n    }\n  } else {\n    textToInsert = \"\" + startChar + tag + selected + (wrap ? tag : ' ');\n  }\n\n  if (removedFirstNewLine) {\n    textToInsert = '\\n' + textToInsert;\n  }\n\n  if (removedLastNewLine) {\n    textToInsert += '\\n';\n  }\n\n  insertText(textArea, textToInsert);\n  return moveCursor(textArea, tag, wrap, removedLastNewLine);\n}\n\nfunction updateText(textArea, tag, blockTag, wrap) {\n  var $textArea, selected, text;\n  $textArea = $(textArea);\n  textArea = $textArea.get(0);\n  text = $textArea.val();\n  selected = selectedText(text, textArea);\n  $textArea.focus();\n  return insertMarkdownText(textArea, text, tag, blockTag, selected, wrap);\n}\n\nfunction replaceRange(s, start, end, substitute) {\n  return s.substring(0, start) + substitute + s.substring(end);\n}\n\nexport function addMarkdownListeners(form) {\n  return $('.js-md', form).off('click').on('click', function() {\n    const $this = $(this);\n    return updateText($this.closest('.md-area').find('textarea'), $this.data('mdTag'), $this.data('mdBlock'), !$this.data('mdPrepend'));\n  });\n}\n\nexport function removeMarkdownListeners(form) {\n  return $('.js-md', form).off('click');\n}\n","import $ from 'jquery';\nimport autosize from 'autosize';\nimport GfmAutoComplete, * as GFMConfig from './gfm_auto_complete';\nimport dropzoneInput from './dropzone_input';\nimport { addMarkdownListeners, removeMarkdownListeners } from './lib/utils/text_markdown';\n\nexport default class GLForm {\n  constructor(form, enableGFM = {}) {\n    this.form = form;\n    this.textarea = this.form.find('textarea.js-gfm-input');\n    this.enableGFM = Object.assign({}, GFMConfig.defaultAutocompleteConfig, enableGFM);\n    // Disable autocomplete for keywords which do not have dataSources available\n    const dataSources = (gl.GfmAutoComplete && gl.GfmAutoComplete.dataSources) || {};\n    Object.keys(this.enableGFM).forEach(item => {\n      if (item !== 'emojis') {\n        this.enableGFM[item] = !!dataSources[item];\n      }\n    });\n    // Before we start, we should clean up any previous data for this form\n    this.destroy();\n    // Setup the form\n    this.setupForm();\n    this.form.data('glForm', this);\n  }\n\n  destroy() {\n    // Clean form listeners\n    this.clearEventListeners();\n    if (this.autoComplete) {\n      this.autoComplete.destroy();\n    }\n    this.form.data('glForm', null);\n  }\n\n  setupForm() {\n    const isNewForm = this.form.is(':not(.gfm-form)');\n    this.form.removeClass('js-new-note-form');\n    if (isNewForm) {\n      this.form.find('.div-dropzone').remove();\n      this.form.addClass('gfm-form');\n      // remove notify commit author checkbox for non-commit notes\n      gl.utils.disableButtonIfEmptyField(this.form.find('.js-note-text'), this.form.find('.js-comment-button, .js-note-new-discussion'));\n      this.autoComplete = new GfmAutoComplete(gl.GfmAutoComplete && gl.GfmAutoComplete.dataSources);\n      this.autoComplete.setup(this.form.find('.js-gfm-input'), this.enableGFM);\n      dropzoneInput(this.form);\n      autosize(this.textarea);\n    }\n    // form and textarea event listeners\n    this.addEventListeners();\n    addMarkdownListeners(this.form);\n    // hide discard button\n    this.form.find('.js-note-discard').hide();\n    this.form.show();\n    if (this.isAutosizeable) this.setupAutosize();\n  }\n\n  setupAutosize() {\n    this.textarea.off('autosize:resized')\n      .on('autosize:resized', this.setHeightData.bind(this));\n\n    this.textarea.off('mouseup.autosize')\n      .on('mouseup.autosize', this.destroyAutosize.bind(this));\n\n    setTimeout(() => {\n      autosize(this.textarea);\n      this.textarea.css('resize', 'vertical');\n    }, 0);\n  }\n\n  setHeightData() {\n    this.textarea.data('height', this.textarea.outerHeight());\n  }\n\n  destroyAutosize() {\n    const outerHeight = this.textarea.outerHeight();\n\n    if (this.textarea.data('height') === outerHeight) return;\n\n    autosize.destroy(this.textarea);\n\n    this.textarea.data('height', outerHeight);\n    this.textarea.outerHeight(outerHeight);\n    this.textarea.css('max-height', window.outerHeight);\n  }\n\n  clearEventListeners() {\n    this.textarea.off('focus');\n    this.textarea.off('blur');\n    removeMarkdownListeners(this.form);\n  }\n\n  addEventListeners() {\n    this.textarea.on('focus', function focusTextArea() {\n      $(this).closest('.md-area').addClass('is-focused');\n    });\n    this.textarea.on('blur', function blurTextArea() {\n      $(this).closest('.md-area').removeClass('is-focused');\n    });\n  }\n}\n","/* eslint-disable func-names, wrap-iife, prefer-arrow-callback, no-unused-vars, consistent-return, camelcase, comma-dangle, max-len, class-methods-use-this */\n\n// Zen Mode (full screen) textarea\n//\n/*= provides zen_mode:enter */\n/*= provides zen_mode:leave */\n\nimport $ from 'jquery';\nimport 'vendor/jquery.scrollTo';\nimport Dropzone from 'dropzone';\nimport Mousetrap from 'mousetrap';\nimport 'mousetrap/plugins/pause/mousetrap-pause';\n\nDropzone.autoDiscover = false;\n\n//\n// ### Events\n//\n// `zen_mode:enter`\n//\n// Fired when the \"Edit in fullscreen\" link is clicked.\n//\n// **Synchronicity** Sync\n// **Bubbles** Yes\n// **Cancelable** No\n// **Target** a.js-zen-enter\n//\n// `zen_mode:leave`\n//\n// Fired when the \"Leave Fullscreen\" link is clicked.\n//\n// **Synchronicity** Sync\n// **Bubbles** Yes\n// **Cancelable** No\n// **Target** a.js-zen-leave\n//\n\nexport default class ZenMode {\n  constructor() {\n    this.active_backdrop = null;\n    this.active_textarea = null;\n    $(document).on('click', '.js-zen-enter', function(e) {\n      e.preventDefault();\n      return $(e.currentTarget).trigger('zen_mode:enter');\n    });\n    $(document).on('click', '.js-zen-leave', function(e) {\n      e.preventDefault();\n      return $(e.currentTarget).trigger('zen_mode:leave');\n    });\n    $(document).on('zen_mode:enter', (function(_this) {\n      return function(e) {\n        return _this.enter($(e.target).closest('.md-area').find('.zen-backdrop'));\n      };\n    })(this));\n    $(document).on('zen_mode:leave', (function(_this) {\n      return function(e) {\n        return _this.exit();\n      };\n    })(this));\n    $(document).on('keydown', function(e) {\n      // Esc\n      if (e.keyCode === 27) {\n        e.preventDefault();\n        return $(document).trigger('zen_mode:leave');\n      }\n    });\n  }\n\n  enter(backdrop) {\n    Mousetrap.pause();\n    this.active_backdrop = $(backdrop);\n    this.active_backdrop.addClass('fullscreen');\n    this.active_textarea = this.active_backdrop.find('textarea');\n    // Prevent a user-resized textarea from persisting to fullscreen\n    this.active_textarea.removeAttr('style');\n    this.active_textarea.focus();\n  }\n\n  exit() {\n    if (this.active_textarea) {\n      Mousetrap.unpause();\n      this.active_textarea.closest('.zen-backdrop').removeClass('fullscreen');\n      this.scrollTo(this.active_textarea);\n      this.active_textarea = null;\n      this.active_backdrop = null;\n\n      const $dropzone = $('.div-dropzone');\n      if ($dropzone && !$dropzone.hasClass('js-invalid-dropzone')) {\n        Dropzone.forElement('.div-dropzone').enable();\n      }\n    }\n  }\n\n  scrollTo(zen_area) {\n    return $.scrollTo(zen_area, 0, {\n      offset: -150\n    });\n  }\n}\n","/*!\n * Pikaday\n *\n * Copyright © 2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday\n */\n\n(function (root, factory)\n{\n    'use strict';\n\n    var moment;\n    if (typeof exports === 'object') {\n        // CommonJS module\n        // Load moment.js as an optional dependency\n        try { moment = require('moment'); } catch (e) {}\n        module.exports = factory(moment);\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(function (req)\n        {\n            // Load moment.js as an optional dependency\n            var id = 'moment';\n            try { moment = req(id); } catch (e) {}\n            return factory(moment);\n        });\n    } else {\n        root.Pikaday = factory(root.moment);\n    }\n}(this, function (moment)\n{\n    'use strict';\n\n    /**\n     * feature detection and helper functions\n     */\n    var hasMoment = typeof moment === 'function',\n\n    hasEventListeners = !!window.addEventListener,\n\n    document = window.document,\n\n    sto = window.setTimeout,\n\n    addEvent = function(el, e, callback, capture)\n    {\n        if (hasEventListeners) {\n            el.addEventListener(e, callback, !!capture);\n        } else {\n            el.attachEvent('on' + e, callback);\n        }\n    },\n\n    removeEvent = function(el, e, callback, capture)\n    {\n        if (hasEventListeners) {\n            el.removeEventListener(e, callback, !!capture);\n        } else {\n            el.detachEvent('on' + e, callback);\n        }\n    },\n\n    trim = function(str)\n    {\n        return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g,'');\n    },\n\n    hasClass = function(el, cn)\n    {\n        return (' ' + el.className + ' ').indexOf(' ' + cn + ' ') !== -1;\n    },\n\n    addClass = function(el, cn)\n    {\n        if (!hasClass(el, cn)) {\n            el.className = (el.className === '') ? cn : el.className + ' ' + cn;\n        }\n    },\n\n    removeClass = function(el, cn)\n    {\n        el.className = trim((' ' + el.className + ' ').replace(' ' + cn + ' ', ' '));\n    },\n\n    isArray = function(obj)\n    {\n        return (/Array/).test(Object.prototype.toString.call(obj));\n    },\n\n    isDate = function(obj)\n    {\n        return (/Date/).test(Object.prototype.toString.call(obj)) && !isNaN(obj.getTime());\n    },\n\n    isWeekend = function(date)\n    {\n        var day = date.getDay();\n        return day === 0 || day === 6;\n    },\n\n    isLeapYear = function(year)\n    {\n        // solution by Matti Virkkunen: http://stackoverflow.com/a/4881951\n        return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;\n    },\n\n    getDaysInMonth = function(year, month)\n    {\n        return [31, isLeapYear(year) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];\n    },\n\n    setToStartOfDay = function(date)\n    {\n        if (isDate(date)) date.setHours(0,0,0,0);\n    },\n\n    compareDates = function(a,b)\n    {\n        // weak date comparison (use setToStartOfDay(date) to ensure correct result)\n        return a.getTime() === b.getTime();\n    },\n\n    extend = function(to, from, overwrite)\n    {\n        var prop, hasProp;\n        for (prop in from) {\n            hasProp = to[prop] !== undefined;\n            if (hasProp && typeof from[prop] === 'object' && from[prop] !== null && from[prop].nodeName === undefined) {\n                if (isDate(from[prop])) {\n                    if (overwrite) {\n                        to[prop] = new Date(from[prop].getTime());\n                    }\n                }\n                else if (isArray(from[prop])) {\n                    if (overwrite) {\n                        to[prop] = from[prop].slice(0);\n                    }\n                } else {\n                    to[prop] = extend({}, from[prop], overwrite);\n                }\n            } else if (overwrite || !hasProp) {\n                to[prop] = from[prop];\n            }\n        }\n        return to;\n    },\n\n    fireEvent = function(el, eventName, data)\n    {\n        var ev;\n\n        if (document.createEvent) {\n            ev = document.createEvent('HTMLEvents');\n            ev.initEvent(eventName, true, false);\n            ev = extend(ev, data);\n            el.dispatchEvent(ev);\n        } else if (document.createEventObject) {\n            ev = document.createEventObject();\n            ev = extend(ev, data);\n            el.fireEvent('on' + eventName, ev);\n        }\n    },\n\n    adjustCalendar = function(calendar) {\n        if (calendar.month < 0) {\n            calendar.year -= Math.ceil(Math.abs(calendar.month)/12);\n            calendar.month += 12;\n        }\n        if (calendar.month > 11) {\n            calendar.year += Math.floor(Math.abs(calendar.month)/12);\n            calendar.month -= 12;\n        }\n        return calendar;\n    },\n\n    /**\n     * defaults and localisation\n     */\n    defaults = {\n\n        // bind the picker to a form field\n        field: null,\n\n        // automatically show/hide the picker on `field` focus (default `true` if `field` is set)\n        bound: undefined,\n\n        // position of the datepicker, relative to the field (default to bottom & left)\n        // ('bottom' & 'left' keywords are not used, 'top' & 'right' are modifier on the bottom/left position)\n        position: 'bottom left',\n\n        // automatically fit in the viewport even if it means repositioning from the position option\n        reposition: true,\n\n        // the default output format for `.toString()` and `field` value\n        format: 'YYYY-MM-DD',\n\n        // the toString function which gets passed a current date object and format\n        // and returns a string\n        toString: null,\n\n        // used to create date object from current input string\n        parse: null,\n\n        // the initial date to view when first opened\n        defaultDate: null,\n\n        // make the `defaultDate` the initial selected value\n        setDefaultDate: false,\n\n        // first day of week (0: Sunday, 1: Monday etc)\n        firstDay: 0,\n\n        // the default flag for moment's strict date parsing\n        formatStrict: false,\n\n        // the minimum/earliest date that can be selected\n        minDate: null,\n        // the maximum/latest date that can be selected\n        maxDate: null,\n\n        // number of years either side, or array of upper/lower range\n        yearRange: 10,\n\n        // show week numbers at head of row\n        showWeekNumber: false,\n\n        // Week picker mode\n        pickWholeWeek: false,\n\n        // used internally (don't config outside)\n        minYear: 0,\n        maxYear: 9999,\n        minMonth: undefined,\n        maxMonth: undefined,\n\n        startRange: null,\n        endRange: null,\n\n        isRTL: false,\n\n        // Additional text to append to the year in the calendar title\n        yearSuffix: '',\n\n        // Render the month after year in the calendar title\n        showMonthAfterYear: false,\n\n        // Render days of the calendar grid that fall in the next or previous month\n        showDaysInNextAndPreviousMonths: false,\n\n        // Allows user to select days that fall in the next or previous month\n        enableSelectionDaysInNextAndPreviousMonths: false,\n\n        // how many months are visible\n        numberOfMonths: 1,\n\n        // when numberOfMonths is used, this will help you to choose where the main calendar will be (default `left`, can be set to `right`)\n        // only used for the first display or when a selected date is not visible\n        mainCalendar: 'left',\n\n        // Specify a DOM element to render the calendar in\n        container: undefined,\n\n        // Blur field when date is selected\n        blurFieldOnSelect : true,\n\n        // internationalization\n        i18n: {\n            previousMonth : 'Previous Month',\n            nextMonth     : 'Next Month',\n            months        : ['January','February','March','April','May','June','July','August','September','October','November','December'],\n            weekdays      : ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],\n            weekdaysShort : ['Sun','Mon','Tue','Wed','Thu','Fri','Sat']\n        },\n\n        // Theme Classname\n        theme: null,\n\n        // events array\n        events: [],\n\n        // callback function\n        onSelect: null,\n        onOpen: null,\n        onClose: null,\n        onDraw: null\n    },\n\n\n    /**\n     * templating functions to abstract HTML rendering\n     */\n    renderDayName = function(opts, day, abbr)\n    {\n        day += opts.firstDay;\n        while (day >= 7) {\n            day -= 7;\n        }\n        return abbr ? opts.i18n.weekdaysShort[day] : opts.i18n.weekdays[day];\n    },\n\n    renderDay = function(opts)\n    {\n        var arr = [];\n        var ariaSelected = 'false';\n        if (opts.isEmpty) {\n            if (opts.showDaysInNextAndPreviousMonths) {\n                arr.push('is-outside-current-month');\n\n                if(!opts.enableSelectionDaysInNextAndPreviousMonths) {\n                    arr.push('is-selection-disabled');\n                }\n\n            } else {\n                return '<td class=\"is-empty\"></td>';\n            }\n        }\n        if (opts.isDisabled) {\n            arr.push('is-disabled');\n        }\n        if (opts.isToday) {\n            arr.push('is-today');\n        }\n        if (opts.isSelected) {\n            arr.push('is-selected');\n            ariaSelected = 'true';\n        }\n        if (opts.hasEvent) {\n            arr.push('has-event');\n        }\n        if (opts.isInRange) {\n            arr.push('is-inrange');\n        }\n        if (opts.isStartRange) {\n            arr.push('is-startrange');\n        }\n        if (opts.isEndRange) {\n            arr.push('is-endrange');\n        }\n        return '<td data-day=\"' + opts.day + '\" class=\"' + arr.join(' ') + '\" aria-selected=\"' + ariaSelected + '\">' +\n                 '<button class=\"pika-button pika-day\" type=\"button\" ' +\n                    'data-pika-year=\"' + opts.year + '\" data-pika-month=\"' + opts.month + '\" data-pika-day=\"' + opts.day + '\">' +\n                        opts.day +\n                 '</button>' +\n               '</td>';\n    },\n\n    renderWeek = function (d, m, y) {\n        // Lifted from http://javascript.about.com/library/blweekyear.htm, lightly modified.\n        var onejan = new Date(y, 0, 1),\n            weekNum = Math.ceil((((new Date(y, m, d) - onejan) / 86400000) + onejan.getDay()+1)/7);\n        return '<td class=\"pika-week\">' + weekNum + '</td>';\n    },\n\n    renderRow = function(days, isRTL, pickWholeWeek, isRowSelected)\n    {\n        return '<tr class=\"pika-row' + (pickWholeWeek ? ' pick-whole-week' : '') + (isRowSelected ? ' is-selected' : '') + '\">' + (isRTL ? days.reverse() : days).join('') + '</tr>';\n    },\n\n    renderBody = function(rows)\n    {\n        return '<tbody>' + rows.join('') + '</tbody>';\n    },\n\n    renderHead = function(opts)\n    {\n        var i, arr = [];\n        if (opts.showWeekNumber) {\n            arr.push('<th></th>');\n        }\n        for (i = 0; i < 7; i++) {\n            arr.push('<th scope=\"col\"><abbr title=\"' + renderDayName(opts, i) + '\">' + renderDayName(opts, i, true) + '</abbr></th>');\n        }\n        return '<thead><tr>' + (opts.isRTL ? arr.reverse() : arr).join('') + '</tr></thead>';\n    },\n\n    renderTitle = function(instance, c, year, month, refYear, randId)\n    {\n        var i, j, arr,\n            opts = instance._o,\n            isMinYear = year === opts.minYear,\n            isMaxYear = year === opts.maxYear,\n            html = '<div id=\"' + randId + '\" class=\"pika-title\" role=\"heading\" aria-live=\"assertive\">',\n            monthHtml,\n            yearHtml,\n            prev = true,\n            next = true;\n\n        for (arr = [], i = 0; i < 12; i++) {\n            arr.push('<option value=\"' + (year === refYear ? i - c : 12 + i - c) + '\"' +\n                (i === month ? ' selected=\"selected\"': '') +\n                ((isMinYear && i < opts.minMonth) || (isMaxYear && i > opts.maxMonth) ? 'disabled=\"disabled\"' : '') + '>' +\n                opts.i18n.months[i] + '</option>');\n        }\n\n        monthHtml = '<div class=\"pika-label\">' + opts.i18n.months[month] + '<select class=\"pika-select pika-select-month\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\n        if (isArray(opts.yearRange)) {\n            i = opts.yearRange[0];\n            j = opts.yearRange[1] + 1;\n        } else {\n            i = year - opts.yearRange;\n            j = 1 + year + opts.yearRange;\n        }\n\n        for (arr = []; i < j && i <= opts.maxYear; i++) {\n            if (i >= opts.minYear) {\n                arr.push('<option value=\"' + i + '\"' + (i === year ? ' selected=\"selected\"': '') + '>' + (i) + '</option>');\n            }\n        }\n        yearHtml = '<div class=\"pika-label\">' + year + opts.yearSuffix + '<select class=\"pika-select pika-select-year\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\n        if (opts.showMonthAfterYear) {\n            html += yearHtml + monthHtml;\n        } else {\n            html += monthHtml + yearHtml;\n        }\n\n        if (isMinYear && (month === 0 || opts.minMonth >= month)) {\n            prev = false;\n        }\n\n        if (isMaxYear && (month === 11 || opts.maxMonth <= month)) {\n            next = false;\n        }\n\n        if (c === 0) {\n            html += '<button class=\"pika-prev' + (prev ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.previousMonth + '</button>';\n        }\n        if (c === (instance._o.numberOfMonths - 1) ) {\n            html += '<button class=\"pika-next' + (next ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.nextMonth + '</button>';\n        }\n\n        return html += '</div>';\n    },\n\n    renderTable = function(opts, data, randId)\n    {\n        return '<table cellpadding=\"0\" cellspacing=\"0\" class=\"pika-table\" role=\"grid\" aria-labelledby=\"' + randId + '\">' + renderHead(opts) + renderBody(data) + '</table>';\n    },\n\n\n    /**\n     * Pikaday constructor\n     */\n    Pikaday = function(options)\n    {\n        var self = this,\n            opts = self.config(options);\n\n        self._onMouseDown = function(e)\n        {\n            if (!self._v) {\n                return;\n            }\n            e = e || window.event;\n            var target = e.target || e.srcElement;\n            if (!target) {\n                return;\n            }\n\n            if (!hasClass(target, 'is-disabled')) {\n                if (hasClass(target, 'pika-button') && !hasClass(target, 'is-empty') && !hasClass(target.parentNode, 'is-disabled')) {\n                    self.setDate(new Date(target.getAttribute('data-pika-year'), target.getAttribute('data-pika-month'), target.getAttribute('data-pika-day')));\n                    if (opts.bound) {\n                        sto(function() {\n                            self.hide();\n                            if (opts.blurFieldOnSelect && opts.field) {\n                                opts.field.blur();\n                            }\n                        }, 100);\n                    }\n                }\n                else if (hasClass(target, 'pika-prev')) {\n                    self.prevMonth();\n                }\n                else if (hasClass(target, 'pika-next')) {\n                    self.nextMonth();\n                }\n            }\n            if (!hasClass(target, 'pika-select')) {\n                // if this is touch event prevent mouse events emulation\n                if (e.preventDefault) {\n                    e.preventDefault();\n                } else {\n                    e.returnValue = false;\n                    return false;\n                }\n            } else {\n                self._c = true;\n            }\n        };\n\n        self._onChange = function(e)\n        {\n            e = e || window.event;\n            var target = e.target || e.srcElement;\n            if (!target) {\n                return;\n            }\n            if (hasClass(target, 'pika-select-month')) {\n                self.gotoMonth(target.value);\n            }\n            else if (hasClass(target, 'pika-select-year')) {\n                self.gotoYear(target.value);\n            }\n        };\n\n        self._onKeyChange = function(e)\n        {\n            e = e || window.event;\n\n            if (self.isVisible()) {\n\n                switch(e.keyCode){\n                    case 13:\n                    case 27:\n                        if (opts.field) {\n                            opts.field.blur();\n                        }\n                        break;\n                    case 37:\n                        e.preventDefault();\n                        self.adjustDate('subtract', 1);\n                        break;\n                    case 38:\n                        self.adjustDate('subtract', 7);\n                        break;\n                    case 39:\n                        self.adjustDate('add', 1);\n                        break;\n                    case 40:\n                        self.adjustDate('add', 7);\n                        break;\n                }\n            }\n        };\n\n        self._onInputChange = function(e)\n        {\n            var date;\n\n            if (e.firedBy === self) {\n                return;\n            }\n            if (opts.parse) {\n                date = opts.parse(opts.field.value, opts.format);\n            } else if (hasMoment) {\n                date = moment(opts.field.value, opts.format, opts.formatStrict);\n                date = (date && date.isValid()) ? date.toDate() : null;\n            }\n            else {\n                date = new Date(Date.parse(opts.field.value));\n            }\n            if (isDate(date)) {\n              self.setDate(date);\n            }\n            if (!self._v) {\n                self.show();\n            }\n        };\n\n        self._onInputFocus = function()\n        {\n            self.show();\n        };\n\n        self._onInputClick = function()\n        {\n            self.show();\n        };\n\n        self._onInputBlur = function()\n        {\n            // IE allows pika div to gain focus; catch blur the input field\n            var pEl = document.activeElement;\n            do {\n                if (hasClass(pEl, 'pika-single')) {\n                    return;\n                }\n            }\n            while ((pEl = pEl.parentNode));\n\n            if (!self._c) {\n                self._b = sto(function() {\n                    self.hide();\n                }, 50);\n            }\n            self._c = false;\n        };\n\n        self._onClick = function(e)\n        {\n            e = e || window.event;\n            var target = e.target || e.srcElement,\n                pEl = target;\n            if (!target) {\n                return;\n            }\n            if (!hasEventListeners && hasClass(target, 'pika-select')) {\n                if (!target.onchange) {\n                    target.setAttribute('onchange', 'return;');\n                    addEvent(target, 'change', self._onChange);\n                }\n            }\n            do {\n                if (hasClass(pEl, 'pika-single') || pEl === opts.trigger) {\n                    return;\n                }\n            }\n            while ((pEl = pEl.parentNode));\n            if (self._v && target !== opts.trigger && pEl !== opts.trigger) {\n                self.hide();\n            }\n        };\n\n        self.el = document.createElement('div');\n        self.el.className = 'pika-single' + (opts.isRTL ? ' is-rtl' : '') + (opts.theme ? ' ' + opts.theme : '');\n\n        addEvent(self.el, 'mousedown', self._onMouseDown, true);\n        addEvent(self.el, 'touchend', self._onMouseDown, true);\n        addEvent(self.el, 'change', self._onChange);\n        addEvent(document, 'keydown', self._onKeyChange);\n\n        if (opts.field) {\n            if (opts.container) {\n                opts.container.appendChild(self.el);\n            } else if (opts.bound) {\n                document.body.appendChild(self.el);\n            } else {\n                opts.field.parentNode.insertBefore(self.el, opts.field.nextSibling);\n            }\n            addEvent(opts.field, 'change', self._onInputChange);\n\n            if (!opts.defaultDate) {\n                if (hasMoment && opts.field.value) {\n                    opts.defaultDate = moment(opts.field.value, opts.format).toDate();\n                } else {\n                    opts.defaultDate = new Date(Date.parse(opts.field.value));\n                }\n                opts.setDefaultDate = true;\n            }\n        }\n\n        var defDate = opts.defaultDate;\n\n        if (isDate(defDate)) {\n            if (opts.setDefaultDate) {\n                self.setDate(defDate, true);\n            } else {\n                self.gotoDate(defDate);\n            }\n        } else {\n            self.gotoDate(new Date());\n        }\n\n        if (opts.bound) {\n            this.hide();\n            self.el.className += ' is-bound';\n            addEvent(opts.trigger, 'click', self._onInputClick);\n            addEvent(opts.trigger, 'focus', self._onInputFocus);\n            addEvent(opts.trigger, 'blur', self._onInputBlur);\n        } else {\n            this.show();\n        }\n    };\n\n\n    /**\n     * public Pikaday API\n     */\n    Pikaday.prototype = {\n\n\n        /**\n         * configure functionality\n         */\n        config: function(options)\n        {\n            if (!this._o) {\n                this._o = extend({}, defaults, true);\n            }\n\n            var opts = extend(this._o, options, true);\n\n            opts.isRTL = !!opts.isRTL;\n\n            opts.field = (opts.field && opts.field.nodeName) ? opts.field : null;\n\n            opts.theme = (typeof opts.theme) === 'string' && opts.theme ? opts.theme : null;\n\n            opts.bound = !!(opts.bound !== undefined ? opts.field && opts.bound : opts.field);\n\n            opts.trigger = (opts.trigger && opts.trigger.nodeName) ? opts.trigger : opts.field;\n\n            opts.disableWeekends = !!opts.disableWeekends;\n\n            opts.disableDayFn = (typeof opts.disableDayFn) === 'function' ? opts.disableDayFn : null;\n\n            var nom = parseInt(opts.numberOfMonths, 10) || 1;\n            opts.numberOfMonths = nom > 4 ? 4 : nom;\n\n            if (!isDate(opts.minDate)) {\n                opts.minDate = false;\n            }\n            if (!isDate(opts.maxDate)) {\n                opts.maxDate = false;\n            }\n            if ((opts.minDate && opts.maxDate) && opts.maxDate < opts.minDate) {\n                opts.maxDate = opts.minDate = false;\n            }\n            if (opts.minDate) {\n                this.setMinDate(opts.minDate);\n            }\n            if (opts.maxDate) {\n                this.setMaxDate(opts.maxDate);\n            }\n\n            if (isArray(opts.yearRange)) {\n                var fallback = new Date().getFullYear() - 10;\n                opts.yearRange[0] = parseInt(opts.yearRange[0], 10) || fallback;\n                opts.yearRange[1] = parseInt(opts.yearRange[1], 10) || fallback;\n            } else {\n                opts.yearRange = Math.abs(parseInt(opts.yearRange, 10)) || defaults.yearRange;\n                if (opts.yearRange > 100) {\n                    opts.yearRange = 100;\n                }\n            }\n\n            return opts;\n        },\n\n        /**\n         * return a formatted string of the current selection (using Moment.js if available)\n         */\n        toString: function(format)\n        {\n            format = format || this._o.format;\n            if (!isDate(this._d)) {\n                return '';\n            }\n            if (this._o.toString) {\n              return this._o.toString(this._d, format);\n            }\n            if (hasMoment) {\n              return moment(this._d).format(format);\n            }\n            return this._d.toDateString();\n        },\n\n        /**\n         * return a Moment.js object of the current selection (if available)\n         */\n        getMoment: function()\n        {\n            return hasMoment ? moment(this._d) : null;\n        },\n\n        /**\n         * set the current selection from a Moment.js object (if available)\n         */\n        setMoment: function(date, preventOnSelect)\n        {\n            if (hasMoment && moment.isMoment(date)) {\n                this.setDate(date.toDate(), preventOnSelect);\n            }\n        },\n\n        /**\n         * return a Date object of the current selection\n         */\n        getDate: function()\n        {\n            return isDate(this._d) ? new Date(this._d.getTime()) : null;\n        },\n\n        /**\n         * set the current selection\n         */\n        setDate: function(date, preventOnSelect)\n        {\n            if (!date) {\n                this._d = null;\n\n                if (this._o.field) {\n                    this._o.field.value = '';\n                    fireEvent(this._o.field, 'change', { firedBy: this });\n                }\n\n                return this.draw();\n            }\n            if (typeof date === 'string') {\n                date = new Date(Date.parse(date));\n            }\n            if (!isDate(date)) {\n                return;\n            }\n\n            var min = this._o.minDate,\n                max = this._o.maxDate;\n\n            if (isDate(min) && date < min) {\n                date = min;\n            } else if (isDate(max) && date > max) {\n                date = max;\n            }\n\n            this._d = new Date(date.getTime());\n            setToStartOfDay(this._d);\n            this.gotoDate(this._d);\n\n            if (this._o.field) {\n                this._o.field.value = this.toString();\n                fireEvent(this._o.field, 'change', { firedBy: this });\n            }\n            if (!preventOnSelect && typeof this._o.onSelect === 'function') {\n                this._o.onSelect.call(this, this.getDate());\n            }\n        },\n\n        /**\n         * change view to a specific date\n         */\n        gotoDate: function(date)\n        {\n            var newCalendar = true;\n\n            if (!isDate(date)) {\n                return;\n            }\n\n            if (this.calendars) {\n                var firstVisibleDate = new Date(this.calendars[0].year, this.calendars[0].month, 1),\n                    lastVisibleDate = new Date(this.calendars[this.calendars.length-1].year, this.calendars[this.calendars.length-1].month, 1),\n                    visibleDate = date.getTime();\n                // get the end of the month\n                lastVisibleDate.setMonth(lastVisibleDate.getMonth()+1);\n                lastVisibleDate.setDate(lastVisibleDate.getDate()-1);\n                newCalendar = (visibleDate < firstVisibleDate.getTime() || lastVisibleDate.getTime() < visibleDate);\n            }\n\n            if (newCalendar) {\n                this.calendars = [{\n                    month: date.getMonth(),\n                    year: date.getFullYear()\n                }];\n                if (this._o.mainCalendar === 'right') {\n                    this.calendars[0].month += 1 - this._o.numberOfMonths;\n                }\n            }\n\n            this.adjustCalendars();\n        },\n\n        adjustDate: function(sign, days) {\n\n            var day = this.getDate() || new Date();\n            var difference = parseInt(days)*24*60*60*1000;\n\n            var newDay;\n\n            if (sign === 'add') {\n                newDay = new Date(day.valueOf() + difference);\n            } else if (sign === 'subtract') {\n                newDay = new Date(day.valueOf() - difference);\n            }\n\n            this.setDate(newDay);\n        },\n\n        adjustCalendars: function() {\n            this.calendars[0] = adjustCalendar(this.calendars[0]);\n            for (var c = 1; c < this._o.numberOfMonths; c++) {\n                this.calendars[c] = adjustCalendar({\n                    month: this.calendars[0].month + c,\n                    year: this.calendars[0].year\n                });\n            }\n            this.draw();\n        },\n\n        gotoToday: function()\n        {\n            this.gotoDate(new Date());\n        },\n\n        /**\n         * change view to a specific month (zero-index, e.g. 0: January)\n         */\n        gotoMonth: function(month)\n        {\n            if (!isNaN(month)) {\n                this.calendars[0].month = parseInt(month, 10);\n                this.adjustCalendars();\n            }\n        },\n\n        nextMonth: function()\n        {\n            this.calendars[0].month++;\n            this.adjustCalendars();\n        },\n\n        prevMonth: function()\n        {\n            this.calendars[0].month--;\n            this.adjustCalendars();\n        },\n\n        /**\n         * change view to a specific full year (e.g. \"2012\")\n         */\n        gotoYear: function(year)\n        {\n            if (!isNaN(year)) {\n                this.calendars[0].year = parseInt(year, 10);\n                this.adjustCalendars();\n            }\n        },\n\n        /**\n         * change the minDate\n         */\n        setMinDate: function(value)\n        {\n            if(value instanceof Date) {\n                setToStartOfDay(value);\n                this._o.minDate = value;\n                this._o.minYear  = value.getFullYear();\n                this._o.minMonth = value.getMonth();\n            } else {\n                this._o.minDate = defaults.minDate;\n                this._o.minYear  = defaults.minYear;\n                this._o.minMonth = defaults.minMonth;\n                this._o.startRange = defaults.startRange;\n            }\n\n            this.draw();\n        },\n\n        /**\n         * change the maxDate\n         */\n        setMaxDate: function(value)\n        {\n            if(value instanceof Date) {\n                setToStartOfDay(value);\n                this._o.maxDate = value;\n                this._o.maxYear = value.getFullYear();\n                this._o.maxMonth = value.getMonth();\n            } else {\n                this._o.maxDate = defaults.maxDate;\n                this._o.maxYear = defaults.maxYear;\n                this._o.maxMonth = defaults.maxMonth;\n                this._o.endRange = defaults.endRange;\n            }\n\n            this.draw();\n        },\n\n        setStartRange: function(value)\n        {\n            this._o.startRange = value;\n        },\n\n        setEndRange: function(value)\n        {\n            this._o.endRange = value;\n        },\n\n        /**\n         * refresh the HTML\n         */\n        draw: function(force)\n        {\n            if (!this._v && !force) {\n                return;\n            }\n            var opts = this._o,\n                minYear = opts.minYear,\n                maxYear = opts.maxYear,\n                minMonth = opts.minMonth,\n                maxMonth = opts.maxMonth,\n                html = '',\n                randId;\n\n            if (this._y <= minYear) {\n                this._y = minYear;\n                if (!isNaN(minMonth) && this._m < minMonth) {\n                    this._m = minMonth;\n                }\n            }\n            if (this._y >= maxYear) {\n                this._y = maxYear;\n                if (!isNaN(maxMonth) && this._m > maxMonth) {\n                    this._m = maxMonth;\n                }\n            }\n\n            randId = 'pika-title-' + Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 2);\n\n            for (var c = 0; c < opts.numberOfMonths; c++) {\n                html += '<div class=\"pika-lendar\">' + renderTitle(this, c, this.calendars[c].year, this.calendars[c].month, this.calendars[0].year, randId) + this.render(this.calendars[c].year, this.calendars[c].month, randId) + '</div>';\n            }\n\n            this.el.innerHTML = html;\n\n            if (opts.bound) {\n                if(opts.field.type !== 'hidden') {\n                    sto(function() {\n                        opts.trigger.focus();\n                    }, 1);\n                }\n            }\n\n            if (typeof this._o.onDraw === 'function') {\n                this._o.onDraw(this);\n            }\n\n            if (opts.bound) {\n                // let the screen reader user know to use arrow keys\n                opts.field.setAttribute('aria-label', 'Use the arrow keys to pick a date');\n            }\n        },\n\n        adjustPosition: function()\n        {\n            var field, pEl, width, height, viewportWidth, viewportHeight, scrollTop, left, top, clientRect;\n\n            if (this._o.container) return;\n\n            this.el.style.position = 'absolute';\n\n            field = this._o.trigger;\n            pEl = field;\n            width = this.el.offsetWidth;\n            height = this.el.offsetHeight;\n            viewportWidth = window.innerWidth || document.documentElement.clientWidth;\n            viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n            scrollTop = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\n\n            if (typeof field.getBoundingClientRect === 'function') {\n                clientRect = field.getBoundingClientRect();\n                left = clientRect.left + window.pageXOffset;\n                top = clientRect.bottom + window.pageYOffset;\n            } else {\n                left = pEl.offsetLeft;\n                top  = pEl.offsetTop + pEl.offsetHeight;\n                while((pEl = pEl.offsetParent)) {\n                    left += pEl.offsetLeft;\n                    top  += pEl.offsetTop;\n                }\n            }\n\n            // default position is bottom & left\n            if ((this._o.reposition && left + width > viewportWidth) ||\n                (\n                    this._o.position.indexOf('right') > -1 &&\n                    left - width + field.offsetWidth > 0\n                )\n            ) {\n                left = left - width + field.offsetWidth;\n            }\n            if ((this._o.reposition && top + height > viewportHeight + scrollTop) ||\n                (\n                    this._o.position.indexOf('top') > -1 &&\n                    top - height - field.offsetHeight > 0\n                )\n            ) {\n                top = top - height - field.offsetHeight;\n            }\n\n            this.el.style.left = left + 'px';\n            this.el.style.top = top + 'px';\n        },\n\n        /**\n         * render HTML for a particular month\n         */\n        render: function(year, month, randId)\n        {\n            var opts   = this._o,\n                now    = new Date(),\n                days   = getDaysInMonth(year, month),\n                before = new Date(year, month, 1).getDay(),\n                data   = [],\n                row    = [];\n            setToStartOfDay(now);\n            if (opts.firstDay > 0) {\n                before -= opts.firstDay;\n                if (before < 0) {\n                    before += 7;\n                }\n            }\n            var previousMonth = month === 0 ? 11 : month - 1,\n                nextMonth = month === 11 ? 0 : month + 1,\n                yearOfPreviousMonth = month === 0 ? year - 1 : year,\n                yearOfNextMonth = month === 11 ? year + 1 : year,\n                daysInPreviousMonth = getDaysInMonth(yearOfPreviousMonth, previousMonth);\n            var cells = days + before,\n                after = cells;\n            while(after > 7) {\n                after -= 7;\n            }\n            cells += 7 - after;\n            var isWeekSelected = false;\n            for (var i = 0, r = 0; i < cells; i++)\n            {\n                var day = new Date(year, month, 1 + (i - before)),\n                    isSelected = isDate(this._d) ? compareDates(day, this._d) : false,\n                    isToday = compareDates(day, now),\n                    hasEvent = opts.events.indexOf(day.toDateString()) !== -1 ? true : false,\n                    isEmpty = i < before || i >= (days + before),\n                    dayNumber = 1 + (i - before),\n                    monthNumber = month,\n                    yearNumber = year,\n                    isStartRange = opts.startRange && compareDates(opts.startRange, day),\n                    isEndRange = opts.endRange && compareDates(opts.endRange, day),\n                    isInRange = opts.startRange && opts.endRange && opts.startRange < day && day < opts.endRange,\n                    isDisabled = (opts.minDate && day < opts.minDate) ||\n                                 (opts.maxDate && day > opts.maxDate) ||\n                                 (opts.disableWeekends && isWeekend(day)) ||\n                                 (opts.disableDayFn && opts.disableDayFn(day));\n\n                if (isEmpty) {\n                    if (i < before) {\n                        dayNumber = daysInPreviousMonth + dayNumber;\n                        monthNumber = previousMonth;\n                        yearNumber = yearOfPreviousMonth;\n                    } else {\n                        dayNumber = dayNumber - days;\n                        monthNumber = nextMonth;\n                        yearNumber = yearOfNextMonth;\n                    }\n                }\n\n                var dayConfig = {\n                        day: dayNumber,\n                        month: monthNumber,\n                        year: yearNumber,\n                        hasEvent: hasEvent,\n                        isSelected: isSelected,\n                        isToday: isToday,\n                        isDisabled: isDisabled,\n                        isEmpty: isEmpty,\n                        isStartRange: isStartRange,\n                        isEndRange: isEndRange,\n                        isInRange: isInRange,\n                        showDaysInNextAndPreviousMonths: opts.showDaysInNextAndPreviousMonths,\n                        enableSelectionDaysInNextAndPreviousMonths: opts.enableSelectionDaysInNextAndPreviousMonths\n                    };\n\n                if (opts.pickWholeWeek && isSelected) {\n                    isWeekSelected = true;\n                }\n\n                row.push(renderDay(dayConfig));\n\n                if (++r === 7) {\n                    if (opts.showWeekNumber) {\n                        row.unshift(renderWeek(i - before, month, year));\n                    }\n                    data.push(renderRow(row, opts.isRTL, opts.pickWholeWeek, isWeekSelected));\n                    row = [];\n                    r = 0;\n                    isWeekSelected = false;\n                }\n            }\n            return renderTable(opts, data, randId);\n        },\n\n        isVisible: function()\n        {\n            return this._v;\n        },\n\n        show: function()\n        {\n            if (!this.isVisible()) {\n                this._v = true;\n                this.draw();\n                removeClass(this.el, 'is-hidden');\n                if (this._o.bound) {\n                    addEvent(document, 'click', this._onClick);\n                    this.adjustPosition();\n                }\n                if (typeof this._o.onOpen === 'function') {\n                    this._o.onOpen.call(this);\n                }\n            }\n        },\n\n        hide: function()\n        {\n            var v = this._v;\n            if (v !== false) {\n                if (this._o.bound) {\n                    removeEvent(document, 'click', this._onClick);\n                }\n                this.el.style.position = 'static'; // reset\n                this.el.style.left = 'auto';\n                this.el.style.top = 'auto';\n                addClass(this.el, 'is-hidden');\n                this._v = false;\n                if (v !== undefined && typeof this._o.onClose === 'function') {\n                    this._o.onClose.call(this);\n                }\n            }\n        },\n\n        /**\n         * GAME OVER\n         */\n        destroy: function()\n        {\n            this.hide();\n            removeEvent(this.el, 'mousedown', this._onMouseDown, true);\n            removeEvent(this.el, 'touchend', this._onMouseDown, true);\n            removeEvent(this.el, 'change', this._onChange);\n            removeEvent(document, 'keydown', this._onKeyChange);\n            if (this._o.field) {\n                removeEvent(this._o.field, 'change', this._onInputChange);\n                if (this._o.bound) {\n                    removeEvent(this._o.trigger, 'click', this._onInputClick);\n                    removeEvent(this._o.trigger, 'focus', this._onInputFocus);\n                    removeEvent(this._o.trigger, 'blur', this._onInputBlur);\n                }\n            }\n            if (this.el.parentNode) {\n                this.el.parentNode.removeChild(this.el);\n            }\n        }\n\n    };\n\n    return Pikaday;\n\n}));\n","/* eslint-disable comma-dangle, quotes, consistent-return, func-names, array-callback-return, prefer-arrow-callback, max-len, no-unused-vars */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport axios from './lib/utils/axios_utils';\nimport Flash from './flash';\n\nexport default {\n  init({ container, form, issues, prefixId } = {}) {\n    this.prefixId = prefixId || 'issue_';\n    this.form = form || this.getElement('.bulk-update');\n    this.$labelDropdown = this.form.find('.js-label-select');\n    this.issues = issues || this.getElement('.issues-list .issue');\n    this.willUpdateLabels = false;\n    this.bindEvents();\n  },\n\n  bindEvents() {\n    return this.form.off('submit').on('submit', this.onFormSubmit.bind(this));\n  },\n\n  onFormSubmit(e) {\n    e.preventDefault();\n    return this.submit();\n  },\n\n  submit() {\n    axios[this.form.attr('method')](this.form.attr('action'), this.getFormDataAsObject())\n      .then(() => window.location.reload())\n      .catch(() => this.onFormSubmitFailure());\n  },\n\n  onFormSubmitFailure() {\n    this.form.find('[type=\"submit\"]').enable();\n    return new Flash(\"Issue update failed\");\n  },\n\n  getSelectedIssues() {\n    return this.issues.has('.selected_issue:checked');\n  },\n\n  getLabelsFromSelection() {\n    const labels = [];\n    this.getSelectedIssues().map(function() {\n      const labelsData = $(this).data('labels');\n      if (labelsData) {\n        return labelsData.map(function(labelId) {\n          if (labels.indexOf(labelId) === -1) {\n            return labels.push(labelId);\n          }\n        });\n      }\n    });\n    return labels;\n  },\n\n  /**\n   * Will return only labels that were marked previously and the user has unmarked\n   * @return {Array} Label IDs\n   */\n\n  getUnmarkedIndeterminedLabels() {\n    const result = [];\n    const labelsToKeep = this.$labelDropdown.data('indeterminate');\n\n    this.getLabelsFromSelection().forEach((id) => {\n      if (labelsToKeep.indexOf(id) === -1) {\n        result.push(id);\n      }\n    });\n\n    return result;\n  },\n\n  /**\n   * Simple form serialization, it will return just what we need\n   * Returns key/value pairs from form data\n   */\n\n  getFormDataAsObject() {\n    const formData = {\n      update: {\n        state_event: this.form.find('input[name=\"update[state_event]\"]').val(),\n        // For Merge Requests\n        assignee_id: this.form.find('input[name=\"update[assignee_id]\"]').val(),\n        // For Issues\n        assignee_ids: [this.form.find('input[name=\"update[assignee_ids][]\"]').val()],\n        milestone_id: this.form.find('input[name=\"update[milestone_id]\"]').val(),\n        issuable_ids: this.form.find('input[name=\"update[issuable_ids]\"]').val(),\n        subscription_event: this.form.find('input[name=\"update[subscription_event]\"]').val(),\n        add_label_ids: [],\n        remove_label_ids: []\n      }\n    };\n    if (this.willUpdateLabels) {\n      formData.update.add_label_ids = this.$labelDropdown.data('marked');\n      formData.update.remove_label_ids = this.$labelDropdown.data('unmarked');\n    }\n    return formData;\n  },\n\n  setOriginalDropdownData() {\n    const $labelSelect = $('.bulk-update .js-label-select');\n    $labelSelect.data('common', this.getOriginalCommonIds());\n    $labelSelect.data('marked', this.getOriginalMarkedIds());\n    $labelSelect.data('indeterminate', this.getOriginalIndeterminateIds());\n  },\n\n  // From issuable's initial bulk selection\n  getOriginalCommonIds() {\n    const labelIds = [];\n\n    this.getElement('.selected_issue:checked').each((i, el) => {\n      labelIds.push(this.getElement(`#${this.prefixId}${el.dataset.id}`).data('labels'));\n    });\n    return _.intersection.apply(this, labelIds);\n  },\n\n  // From issuable's initial bulk selection\n  getOriginalMarkedIds() {\n    const labelIds = [];\n    this.getElement('.selected_issue:checked').each((i, el) => {\n      labelIds.push(this.getElement(`#${this.prefixId}${el.dataset.id}`).data('labels'));\n    });\n    return _.intersection.apply(this, labelIds);\n  },\n\n  // From issuable's initial bulk selection\n  getOriginalIndeterminateIds() {\n    const uniqueIds = [];\n    const labelIds = [];\n    let issuableLabels = [];\n\n    // Collect unique label IDs for all checked issues\n    this.getElement('.selected_issue:checked').each((i, el) => {\n      issuableLabels = this.getElement(`#${this.prefixId}${el.dataset.id}`).data('labels');\n      issuableLabels.forEach((labelId) => {\n        // Store unique IDs\n        if (uniqueIds.indexOf(labelId) === -1) {\n          uniqueIds.push(labelId);\n        }\n      });\n      // Store array of IDs per issuable\n      labelIds.push(issuableLabels);\n    });\n    // Add uniqueIds to add it as argument for _.intersection\n    labelIds.unshift(uniqueIds);\n    // Return IDs that are present but not in all selected issueables\n    return _.difference(uniqueIds, _.intersection.apply(this, labelIds));\n  },\n\n  getElement(selector) {\n    this.scopeEl = this.scopeEl || $('.content');\n    return this.scopeEl.find(selector);\n  },\n};\n","/* eslint-disable func-names, one-var, no-var, prefer-rest-params, quotes, max-len, one-var-declaration-per-line, vars-on-top, prefer-arrow-callback, consistent-return, comma-dangle, object-shorthand, no-shadow, no-unused-vars, no-else-return, no-self-compare, prefer-template, no-unused-expressions, yoda, prefer-spread, no-void, camelcase, no-param-reassign */\n/* global Issuable */\n/* global emitSidebarEvent */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport axios from './lib/utils/axios_utils';\nimport { __ } from './locale';\nimport ModalStore from './boards/stores/modal_store';\n\n// TODO: remove eventHub hack after code splitting refactor\nwindow.emitSidebarEvent = window.emitSidebarEvent || $.noop;\n\nfunction UsersSelect(currentUser, els, options = {}) {\n  var $els;\n  this.users = this.users.bind(this);\n  this.user = this.user.bind(this);\n  this.usersPath = \"/autocomplete/users.json\";\n  this.userPath = \"/autocomplete/users/:id.json\";\n  if (currentUser != null) {\n    if (typeof currentUser === 'object') {\n      this.currentUser = currentUser;\n    } else {\n      this.currentUser = JSON.parse(currentUser);\n    }\n  }\n\n  const { handleClick } = options;\n\n  $els = $(els);\n\n  if (!els) {\n    $els = $('.js-user-search');\n  }\n\n  $els.each((function(_this) {\n    return function(i, dropdown) {\n      var options = {};\n      var $block, $collapsedSidebar, $dropdown, $loading, $selectbox, $value, abilityName, assignTo, assigneeTemplate, collapsedAssigneeTemplate, defaultLabel, defaultNullUser, firstUser, issueURL, selectedId, selectedIdDefault, showAnyUser, showNullUser, showMenuAbove;\n      $dropdown = $(dropdown);\n      options.projectId = $dropdown.data('projectId');\n      options.groupId = $dropdown.data('groupId');\n      options.showCurrentUser = $dropdown.data('currentUser');\n      options.todoFilter = $dropdown.data('todoFilter');\n      options.todoStateFilter = $dropdown.data('todoStateFilter');\n      showNullUser = $dropdown.data('nullUser');\n      defaultNullUser = $dropdown.data('nullUserDefault');\n      showMenuAbove = $dropdown.data('showMenuAbove');\n      showAnyUser = $dropdown.data('anyUser');\n      firstUser = $dropdown.data('firstUser');\n      options.authorId = $dropdown.data('authorId');\n      defaultLabel = $dropdown.data('defaultLabel');\n      issueURL = $dropdown.data('issueUpdate');\n      $selectbox = $dropdown.closest('.selectbox');\n      $block = $selectbox.closest('.block');\n      abilityName = $dropdown.data('abilityName');\n      $value = $block.find('.value');\n      $collapsedSidebar = $block.find('.sidebar-collapsed-user');\n      $loading = $block.find('.block-loading').fadeOut();\n      selectedIdDefault = (defaultNullUser && showNullUser) ? 0 : null;\n      selectedId = $dropdown.data('selected');\n\n      if (selectedId === undefined) {\n        selectedId = selectedIdDefault;\n      }\n\n      const assignYourself = function () {\n        const unassignedSelected = $dropdown.closest('.selectbox')\n          .find(`input[name='${$dropdown.data('fieldName')}'][value=0]`);\n\n        if (unassignedSelected) {\n          unassignedSelected.remove();\n        }\n\n        // Save current selected user to the DOM\n        const input = document.createElement('input');\n        input.type = 'hidden';\n        input.name = $dropdown.data('fieldName');\n\n        const currentUserInfo = $dropdown.data('currentUserInfo');\n\n        if (currentUserInfo) {\n          input.value = currentUserInfo.id;\n          input.dataset.meta = _.escape(currentUserInfo.name);\n        } else if (_this.currentUser) {\n          input.value = _this.currentUser.id;\n        }\n\n        if ($selectbox) {\n          $dropdown.parent().before(input);\n        } else {\n          $dropdown.after(input);\n        }\n      };\n\n      if ($block[0]) {\n        $block[0].addEventListener('assignYourself', assignYourself);\n      }\n\n      const getSelectedUserInputs = function() {\n        return $selectbox\n          .find(`input[name=\"${$dropdown.data('fieldName')}\"]`);\n      };\n\n      const getSelected = function() {\n        return getSelectedUserInputs()\n          .map((index, input) => parseInt(input.value, 10))\n          .get();\n      };\n\n      const checkMaxSelect = function() {\n        const maxSelect = $dropdown.data('maxSelect');\n        if (maxSelect) {\n          const selected = getSelected();\n\n          if (selected.length > maxSelect) {\n            const firstSelectedId = selected[0];\n            const firstSelected = $dropdown.closest('.selectbox')\n              .find(`input[name='${$dropdown.data('fieldName')}'][value=${firstSelectedId}]`);\n\n            firstSelected.remove();\n            emitSidebarEvent('sidebar.removeAssignee', {\n              id: firstSelectedId,\n            });\n          }\n        }\n      };\n\n      const getMultiSelectDropdownTitle = function(selectedUser, isSelected) {\n        const selectedUsers = getSelected()\n          .filter(u => u !== 0);\n\n        const firstUser = getSelectedUserInputs()\n          .map((index, input) => ({\n            name: input.dataset.meta,\n            value: parseInt(input.value, 10),\n          }))\n          .filter(u => u.id !== 0)\n          .get(0);\n\n        if (selectedUsers.length === 0) {\n          return 'Unassigned';\n        } else if (selectedUsers.length === 1) {\n          return firstUser.name;\n        } else if (isSelected) {\n          const otherSelected = selectedUsers.filter(s => s !== selectedUser.id);\n          return `${selectedUser.name} + ${otherSelected.length} more`;\n        } else {\n          return `${firstUser.name} + ${selectedUsers.length - 1} more`;\n        }\n      };\n\n      $('.assign-to-me-link').on('click', (e) => {\n        e.preventDefault();\n        $(e.currentTarget).hide();\n\n        if ($dropdown.data('multiSelect')) {\n          assignYourself();\n          checkMaxSelect();\n\n          const currentUserInfo = $dropdown.data('currentUserInfo');\n          $dropdown.find('.dropdown-toggle-text').text(getMultiSelectDropdownTitle(currentUserInfo)).removeClass('is-default');\n        } else {\n          const $input = $(`input[name=\"${$dropdown.data('fieldName')}\"]`);\n          $input.val(gon.current_user_id);\n          selectedId = $input.val();\n          $dropdown.find('.dropdown-toggle-text').text(gon.current_user_fullname).removeClass('is-default');\n        }\n      });\n\n      $block.on('click', '.js-assign-yourself', (e) => {\n        e.preventDefault();\n        return assignTo(_this.currentUser.id);\n      });\n\n      assignTo = function(selected) {\n        var data;\n        data = {};\n        data[abilityName] = {};\n        data[abilityName].assignee_id = selected != null ? selected : null;\n        $loading.removeClass('hidden').fadeIn();\n        $dropdown.trigger('loading.gl.dropdown');\n\n        return axios.put(issueURL, data)\n          .then(({ data }) => {\n            var user, tooltipTitle;\n            $dropdown.trigger('loaded.gl.dropdown');\n            $loading.fadeOut();\n            if (data.assignee) {\n              user = {\n                name: data.assignee.name,\n                username: data.assignee.username,\n                avatar: data.assignee.avatar_url\n              };\n              tooltipTitle = _.escape(user.name);\n            } else {\n              user = {\n                name: 'Unassigned',\n                username: '',\n                avatar: ''\n              };\n              tooltipTitle = __('Assignee');\n            }\n            $value.html(assigneeTemplate(user));\n            $collapsedSidebar.attr('title', tooltipTitle).tooltip('_fixTitle');\n            return $collapsedSidebar.html(collapsedAssigneeTemplate(user));\n          });\n      };\n      collapsedAssigneeTemplate = _.template('<% if( avatar ) { %> <a class=\"author-link\" href=\"/<%- username %>\"> <img width=\"24\" class=\"avatar avatar-inline s24\" alt=\"\" src=\"<%- avatar %>\"> </a> <% } else { %> <i class=\"fa fa-user\"></i> <% } %>');\n      assigneeTemplate = _.template('<% if (username) { %> <a class=\"author-link bold\" href=\"/<%- username %>\"> <% if( avatar ) { %> <img width=\"32\" class=\"avatar avatar-inline s32\" alt=\"\" src=\"<%- avatar %>\"> <% } %> <span class=\"author\"><%- name %></span> <span class=\"username\"> @<%- username %> </span> </a> <% } else { %> <span class=\"no-value assign-yourself\"> No assignee - <a href=\"#\" class=\"js-assign-yourself\"> assign yourself </a> </span> <% } %>');\n      return $dropdown.glDropdown({\n        showMenuAbove: showMenuAbove,\n        data: function(term, callback) {\n          return _this.users(term, options, function(users) {\n            // GitLabDropdownFilter returns this.instance\n            // GitLabDropdownRemote returns this.options.instance\n            const glDropdown = this.instance || this.options.instance;\n            glDropdown.options.processData(term, users, callback);\n          }.bind(this));\n        },\n        processData: function(term, data, callback) {\n          let users = data;\n\n          // Only show assigned user list when there is no search term\n          if ($dropdown.hasClass('js-multiselect') && term.length === 0) {\n            const selectedInputs = getSelectedUserInputs();\n\n            // Potential duplicate entries when dealing with issue board\n            // because issue board is also managed by vue\n            const selectedUsers = _.uniq(selectedInputs, false, a => a.value)\n              .filter((input) => {\n                const userId = parseInt(input.value, 10);\n                const inUsersArray = users.find(u => u.id === userId);\n\n                return !inUsersArray && userId !== 0;\n              })\n              .map((input) => {\n                const userId = parseInt(input.value, 10);\n                const { avatarUrl, avatar_url, name, username } = input.dataset;\n                return {\n                  avatar_url: avatarUrl || avatar_url,\n                  id: userId,\n                  name,\n                  username,\n                };\n              });\n\n            users = data.concat(selectedUsers);\n          }\n\n          let anyUser;\n          let index;\n          let len;\n          let name;\n          let obj;\n          let showDivider;\n          if (term.length === 0) {\n            showDivider = 0;\n            if (firstUser) {\n              // Move current user to the front of the list\n              for (index = 0, len = users.length; index < len; index += 1) {\n                obj = users[index];\n                if (obj.username === firstUser) {\n                  users.splice(index, 1);\n                  users.unshift(obj);\n                  break;\n                }\n              }\n            }\n            if (showNullUser) {\n              showDivider += 1;\n              users.unshift({\n                beforeDivider: true,\n                name: 'Unassigned',\n                id: 0\n              });\n            }\n            if (showAnyUser) {\n              showDivider += 1;\n              name = showAnyUser;\n              if (name === true) {\n                name = 'Any User';\n              }\n              anyUser = {\n                beforeDivider: true,\n                name: name,\n                id: null\n              };\n              users.unshift(anyUser);\n            }\n\n            if (showDivider) {\n              users.splice(showDivider, 0, 'divider');\n            }\n\n            if ($dropdown.hasClass('js-multiselect')) {\n              const selected = getSelected().filter(i => i !== 0);\n\n              if (selected.length > 0) {\n                if ($dropdown.data('dropdownHeader')) {\n                  showDivider += 1;\n                  users.splice(showDivider, 0, {\n                    header: $dropdown.data('dropdownHeader'),\n                  });\n                }\n\n                const selectedUsers = users\n                  .filter(u => selected.indexOf(u.id) !== -1)\n                  .sort((a, b) => a.name > b.name);\n\n                users = users.filter(u => selected.indexOf(u.id) === -1);\n\n                selectedUsers.forEach((selectedUser) => {\n                  showDivider += 1;\n                  users.splice(showDivider, 0, selectedUser);\n                });\n\n                users.splice(showDivider + 1, 0, 'divider');\n              }\n            }\n          }\n\n          callback(users);\n          if (showMenuAbove) {\n            $dropdown.data('glDropdown').positionMenuAbove();\n          }\n        },\n        filterable: true,\n        filterRemote: true,\n        search: {\n          fields: ['name', 'username']\n        },\n        selectable: true,\n        fieldName: $dropdown.data('fieldName'),\n        toggleLabel: function(selected, el, glDropdown) {\n          const inputValue = glDropdown.filterInput.val();\n\n          if (this.multiSelect && inputValue === '') {\n            // Remove non-users from the fullData array\n            const users = glDropdown.filteredFullData();\n            const callback = glDropdown.parseData.bind(glDropdown);\n\n            // Update the data model\n            this.processData(inputValue, users, callback);\n          }\n\n          if (this.multiSelect) {\n            return getMultiSelectDropdownTitle(selected, $(el).hasClass('is-active'));\n          }\n\n          if (selected && 'id' in selected && $(el).hasClass('is-active')) {\n            $dropdown.find('.dropdown-toggle-text').removeClass('is-default');\n            if (selected.text) {\n              return selected.text;\n            } else {\n              return selected.name;\n            }\n          } else {\n            $dropdown.find('.dropdown-toggle-text').addClass('is-default');\n            return defaultLabel;\n          }\n        },\n        defaultLabel: defaultLabel,\n        hidden: function(e) {\n          if ($dropdown.hasClass('js-multiselect')) {\n            emitSidebarEvent('sidebar.saveAssignees');\n          }\n\n          if (!$dropdown.data('alwaysShowSelectbox')) {\n            $selectbox.hide();\n\n            // Recalculate where .value is because vue might have changed it\n            $block = $selectbox.closest('.block');\n            $value = $block.find('.value');\n            // display:block overrides the hide-collapse rule\n            $value.css('display', '');\n          }\n        },\n        multiSelect: $dropdown.hasClass('js-multiselect'),\n        inputMeta: $dropdown.data('inputMeta'),\n        clicked: function(options) {\n          const { $el, e, isMarking } = options;\n          const user = options.selectedObj;\n\n          if ($dropdown.hasClass('js-multiselect')) {\n            const isActive = $el.hasClass('is-active');\n            const previouslySelected = $dropdown.closest('.selectbox')\n                .find(\"input[name='\" + ($dropdown.data('fieldName')) + \"'][value!=0]\");\n\n            // Enables support for limiting the number of users selected\n            // Automatically removes the first on the list if more users are selected\n            checkMaxSelect();\n\n            if (user.beforeDivider && user.name.toLowerCase() === 'unassigned') {\n              // Unassigned selected\n              previouslySelected.each((index, element) => {\n                const id = parseInt(element.value, 10);\n                element.remove();\n              });\n              emitSidebarEvent('sidebar.removeAllAssignees');\n            } else if (isActive) {\n              // user selected\n              emitSidebarEvent('sidebar.addAssignee', user);\n\n              // Remove unassigned selection (if it was previously selected)\n              const unassignedSelected = $dropdown.closest('.selectbox')\n                .find(\"input[name='\" + ($dropdown.data('fieldName')) + \"'][value=0]\");\n\n              if (unassignedSelected) {\n                unassignedSelected.remove();\n              }\n            } else {\n              if (previouslySelected.length === 0) {\n              // Select unassigned because there is no more selected users\n                this.addInput($dropdown.data('fieldName'), 0, {});\n              }\n\n              // User unselected\n              emitSidebarEvent('sidebar.removeAssignee', user);\n            }\n\n            if (getSelected().find(u => u === gon.current_user_id)) {\n              $('.assign-to-me-link').hide();\n            } else {\n              $('.assign-to-me-link').show();\n            }\n          }\n\n          var isIssueIndex, isMRIndex, page, selected;\n          page = $('body').attr('data-page');\n          isIssueIndex = page === 'projects:issues:index';\n          isMRIndex = (page === page && page === 'projects:merge_requests:index');\n          if ($dropdown.hasClass('js-filter-bulk-update') || $dropdown.hasClass('js-issuable-form-dropdown')) {\n            e.preventDefault();\n\n            const isSelecting = (user.id !== selectedId);\n            selectedId = isSelecting ? user.id : selectedIdDefault;\n\n            if (selectedId === gon.current_user_id) {\n              $('.assign-to-me-link').hide();\n            } else {\n              $('.assign-to-me-link').show();\n            }\n            return;\n          }\n          if ($el.closest('.add-issues-modal').length) {\n            ModalStore.store.filter[$dropdown.data('fieldName')] = user.id;\n          } else if (handleClick) {\n            e.preventDefault();\n            handleClick(user, isMarking);\n          } else if ($dropdown.hasClass('js-filter-submit') && (isIssueIndex || isMRIndex)) {\n            return Issuable.filterResults($dropdown.closest('form'));\n          } else if ($dropdown.hasClass('js-filter-submit')) {\n            return $dropdown.closest('form').submit();\n          } else if (!$dropdown.hasClass('js-multiselect')) {\n            selected = $dropdown.closest('.selectbox').find(\"input[name='\" + ($dropdown.data('fieldName')) + \"']\").val();\n            return assignTo(selected);\n          }\n\n          // Automatically close dropdown after assignee is selected\n          // since CE has no multiple assignees\n          // EE does not have a max-select\n          if ($dropdown.data('maxSelect') &&\n              getSelected().length === $dropdown.data('maxSelect')) {\n            // Close the dropdown\n            $dropdown.dropdown('toggle');\n          }\n        },\n        id: function (user) {\n          return user.id;\n        },\n        opened: function(e) {\n          const $el = $(e.currentTarget);\n          const selected = getSelected();\n          if ($dropdown.hasClass('js-issue-board-sidebar') && selected.length === 0) {\n            this.addInput($dropdown.data('fieldName'), 0, {});\n          }\n          $el.find('.is-active').removeClass('is-active');\n\n          function highlightSelected(id) {\n            $el.find(`li[data-user-id=\"${id}\"] .dropdown-menu-user-link`).addClass('is-active');\n          }\n\n          if (selected.length > 0) {\n            getSelected().forEach(selectedId => highlightSelected(selectedId));\n          } else if ($dropdown.hasClass('js-issue-board-sidebar')) {\n            highlightSelected(0);\n          } else {\n            highlightSelected(selectedId);\n          }\n        },\n        updateLabel: $dropdown.data('dropdownTitle'),\n        renderRow: function(user) {\n          var avatar, img, listClosingTags, listWithName, listWithUserName, username;\n          username = user.username ? \"@\" + user.username : \"\";\n          avatar = user.avatar_url ? user.avatar_url : gon.default_avatar_url;\n\n          let selected = false;\n\n          if (this.multiSelect) {\n            selected = getSelected().find(u => user.id === u);\n\n            const { fieldName } = this;\n            const field = $dropdown.closest('.selectbox').find(\"input[name='\" + fieldName + \"'][value='\" + user.id + \"']\");\n\n            if (field.length) {\n              selected = true;\n            }\n          } else {\n            selected = user.id === selectedId;\n          }\n\n          img = \"\";\n          if (user.beforeDivider != null) {\n            `<li><a href='#' class='${selected === true ? 'is-active' : ''}'>${_.escape(user.name)}</a></li>`;\n          } else {\n            img = \"<img src='\" + avatar + \"' class='avatar avatar-inline' width='32' />\";\n          }\n\n          return `\n            <li data-user-id=${user.id}>\n              <a href='#' class='dropdown-menu-user-link ${selected === true ? 'is-active' : ''}'>\n                ${img}\n                <strong class='dropdown-menu-user-full-name'>\n                  ${_.escape(user.name)}\n                </strong>\n                ${username ? `<span class='dropdown-menu-user-username'>${username}</span>` : ''}\n              </a>\n            </li>\n          `;\n        }\n      });\n    };\n  })(this));\n  $('.ajax-users-select').each((function(_this) {\n    return function(i, select) {\n      var firstUser, showAnyUser, showEmailUser, showNullUser;\n      var options = {};\n      options.skipLdap = $(select).hasClass('skip_ldap');\n      options.projectId = $(select).data('projectId');\n      options.groupId = $(select).data('groupId');\n      options.showCurrentUser = $(select).data('currentUser');\n      options.authorId = $(select).data('authorId');\n      options.skipUsers = $(select).data('skipUsers');\n      showNullUser = $(select).data('nullUser');\n      showAnyUser = $(select).data('anyUser');\n      showEmailUser = $(select).data('emailUser');\n      firstUser = $(select).data('firstUser');\n      return $(select).select2({\n        placeholder: \"Search for a user\",\n        multiple: $(select).hasClass('multiselect'),\n        minimumInputLength: 0,\n        query: function(query) {\n          return _this.users(query.term, options, function(users) {\n            var anyUser, data, emailUser, index, len, name, nullUser, obj, ref;\n            data = {\n              results: users\n            };\n            if (query.term.length === 0) {\n              if (firstUser) {\n                // Move current user to the front of the list\n                ref = data.results;\n\n                for (index = 0, len = ref.length; index < len; index += 1) {\n                  obj = ref[index];\n                  if (obj.username === firstUser) {\n                    data.results.splice(index, 1);\n                    data.results.unshift(obj);\n                    break;\n                  }\n                }\n              }\n              if (showNullUser) {\n                nullUser = {\n                  name: 'Unassigned',\n                  id: 0\n                };\n                data.results.unshift(nullUser);\n              }\n              if (showAnyUser) {\n                name = showAnyUser;\n                if (name === true) {\n                  name = 'Any User';\n                }\n                anyUser = {\n                  name: name,\n                  id: null\n                };\n                data.results.unshift(anyUser);\n              }\n            }\n            if (showEmailUser && data.results.length === 0 && query.term.match(/^[^@]+@[^@]+$/)) {\n              var trimmed = query.term.trim();\n              emailUser = {\n                name: \"Invite \\\"\" + query.term + \"\\\" by email\",\n                username: trimmed,\n                id: trimmed,\n                invite: true\n              };\n              data.results.unshift(emailUser);\n            }\n            return query.callback(data);\n          });\n        },\n        initSelection: function() {\n          var args;\n          args = 1 <= arguments.length ? [].slice.call(arguments, 0) : [];\n          return _this.initSelection.apply(_this, args);\n        },\n        formatResult: function() {\n          var args;\n          args = 1 <= arguments.length ? [].slice.call(arguments, 0) : [];\n          return _this.formatResult.apply(_this, args);\n        },\n        formatSelection: function() {\n          var args;\n          args = 1 <= arguments.length ? [].slice.call(arguments, 0) : [];\n          return _this.formatSelection.apply(_this, args);\n        },\n        dropdownCssClass: \"ajax-users-dropdown\",\n        // we do not want to escape markup since we are displaying html in results\n        escapeMarkup: function(m) {\n          return m;\n        }\n      });\n    };\n  })(this));\n}\n\nUsersSelect.prototype.initSelection = function(element, callback) {\n  var id, nullUser;\n  id = $(element).val();\n  if (id === \"0\") {\n    nullUser = {\n      name: 'Unassigned'\n    };\n    return callback(nullUser);\n  } else if (id !== \"\") {\n    return this.user(id, callback);\n  }\n};\n\nUsersSelect.prototype.formatResult = function(user) {\n  var avatar;\n  if (user.avatar_url) {\n    avatar = user.avatar_url;\n  } else {\n    avatar = gon.default_avatar_url;\n  }\n  return \"<div class='user-result \" + (!user.username ? 'no-username' : void 0) + \"'> <div class='user-image'><img class='avatar avatar-inline s32' src='\" + avatar + \"'></div> <div class='user-name dropdown-menu-user-full-name'>\" + _.escape(user.name) + \"</div> <div class='user-username dropdown-menu-user-username'>\" + (!user.invite ? \"@\" + _.escape(user.username) : \"\") + \"</div> </div>\";\n};\n\nUsersSelect.prototype.formatSelection = function(user) {\n  return _.escape(user.name);\n};\n\nUsersSelect.prototype.user = function(user_id, callback) {\n  if (!/^\\d+$/.test(user_id)) {\n    return false;\n  }\n\n  var url;\n  url = this.buildUrl(this.userPath);\n  url = url.replace(':id', user_id);\n  return axios.get(url)\n    .then(({ data }) => {\n      callback(data);\n    });\n};\n\n// Return users list. Filtered by query\n// Only active users retrieved\nUsersSelect.prototype.users = function(query, options, callback) {\n  const url = this.buildUrl(this.usersPath);\n  const params = {\n    search: query,\n    active: true,\n    project_id: options.projectId || null,\n    group_id: options.groupId || null,\n    skip_ldap: options.skipLdap || null,\n    todo_filter: options.todoFilter || null,\n    todo_state_filter: options.todoStateFilter || null,\n    current_user: options.showCurrentUser || null,\n    author_id: options.authorId || null,\n    skip_users: options.skipUsers || null\n  };\n  return axios.get(url, { params })\n    .then(({ data }) => {\n      callback(data);\n    });\n};\n\nUsersSelect.prototype.buildUrl = function(url) {\n  if (gon.relative_url_root != null) {\n    url = gon.relative_url_root.replace(/\\/$/, '') + url;\n  }\n  return url;\n};\n\nexport default UsersSelect;\n","import initForm from '../form';\n\ndocument.addEventListener('DOMContentLoaded', initForm);\n","/* eslint-disable no-param-reassign, prefer-template, no-void, consistent-return */\n\nimport AccessorUtilities from './lib/utils/accessor';\n\nexport default class Autosave {\n  constructor(field, key) {\n    this.field = field;\n\n    this.isLocalStorageAvailable = AccessorUtilities.isLocalStorageAccessSafe();\n    if (key.join != null) {\n      key = key.join('/');\n    }\n    this.key = 'autosave/' + key;\n    this.field.data('autosave', this);\n    this.restore();\n    this.field.on('input', () => this.save());\n  }\n\n  restore() {\n    if (!this.isLocalStorageAvailable) return;\n    if (!this.field.length) return;\n\n    const text = window.localStorage.getItem(this.key);\n\n    if ((text != null ? text.length : void 0) > 0) {\n      this.field.val(text);\n    }\n\n    this.field.trigger('input');\n    // v-model does not update with jQuery trigger\n    // https://github.com/vuejs/vue/issues/2804#issuecomment-216968137\n    const event = new Event('change', { bubbles: true, cancelable: false });\n    const field = this.field.get(0);\n    if (field) {\n      field.dispatchEvent(event);\n    }\n  }\n\n  save() {\n    if (!this.field.length) return;\n\n    const text = this.field.val();\n\n    if (this.isLocalStorageAvailable && (text != null ? text.length : void 0) > 0) {\n      return window.localStorage.setItem(this.key, text);\n    }\n\n    return this.reset();\n  }\n\n  reset() {\n    if (!this.isLocalStorageAvailable) return;\n\n    return window.localStorage.removeItem(this.key);\n  }\n\n  dispose() {\n    this.field.off('input');\n  }\n}\n","/**\n * adds a pause and unpause method to Mousetrap\n * this allows you to enable or disable keyboard shortcuts\n * without having to reset Mousetrap and rebind everything\n */\n/* global Mousetrap:true */\nMousetrap = (function(Mousetrap) {\n    var self = Mousetrap,\n        _originalStopCallback = self.stopCallback,\n        enabled = true;\n\n    self.stopCallback = function(e, element, combo) {\n        if (!enabled) {\n            return true;\n        }\n\n        return _originalStopCallback(e, element, combo);\n    };\n\n    self.pause = function() {\n        enabled = false;\n    };\n\n    self.unpause = function() {\n        enabled = true;\n    };\n\n    return self;\n}) (Mousetrap);\n"],"sourceRoot":""}