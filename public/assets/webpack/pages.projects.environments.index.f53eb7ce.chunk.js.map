{"version":3,"sources":["webpack:///./environments/components/empty_state.vue?cf81","webpack:///environments/components/empty_state.vue","webpack:///./environments/components/empty_state.vue","webpack:///./environments/components/empty_state.vue?be56","webpack:///./environments/components/environments_app.vue?5eb1","webpack:///environments/components/environments_app.vue","webpack:///./environments/components/environments_app.vue","webpack:///./environments/components/environments_app.vue?726e","webpack:///./environments/index.js","webpack:///./pages/projects/environments/index/index.js"],"names":["components_empty_statevue_type_script_lang_js","name","props","newPath","type","String","required","canCreateEnvironment","Boolean","helpPath","empty_state","Object","componentNormalizer","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","s__","attrs","href","_e","components_environments_appvue_type_script_lang_js","components","emptyState","StopEnvironmentModal","mixins","ci_pagination_api_mixin","environments_mixin","endpoint","canCreateDeployment","canReadEnvironment","cssContainerClass","newEnvironmentPath","helpPagePath","created","event_hub","$on","toggleFolder","beforeDestroy","$off","methods","folder","store","isOpen","fetchChildEnvironments","_this","showLoader","arguments","length","undefined","updateEnvironmentProp","service","getFolderContent","folder_path","then","response","setfolderContent","data","environments","catch","flash","locale","successCallback","resp","_this2","saveData","openFolders","getOpenFolders","forEach","environments_app","class","environment","environmentInStopModal","tabs","scope","on","onChangeTab","isLoading","is-loading","state","pagination","paginationInformation","can-create-deployment","can-read-environment","onChangePage","slot","new-path","help-path","can-create-environment","vue_esm","use","translate","document","addEventListener","el","environmentsComponent","environmentsData","querySelector","$options","dataset","environmentsDataEndpoint","cssClass","common_utils","render","createElement"],"mappings":"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","file":"pages.projects.environments.index.f53eb7ce.chunk.js","sourcesContent":["import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./empty_state.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./empty_state.vue?vue&type=script&lang=js\"","<script>\n  export default {\n    name: 'EnvironmentsEmptyState',\n    props: {\n      newPath: {\n        type: String,\n        required: true,\n      },\n      canCreateEnvironment: {\n        type: Boolean,\n        required: true,\n      },\n      helpPath: {\n        type: String,\n        required: true,\n      },\n    },\n  };\n</script>\n<template>\n  <div class=\"blank-state-row\">\n    <div class=\"blank-state-center\">\n      <h2 class=\"blank-state-title js-blank-state-title\">\n        {{ s__(\"Environments|You don't have any environments right now.\") }}\n      </h2>\n      <p class=\"blank-state-text\">\n        {{ s__(`Environments|Environments are places where\ncode gets deployed, such as staging or production.`) }}\n        <br />\n        <a :href=\"helpPath\">\n          {{ s__(\"Environments|Read more about environments\") }}\n        </a>\n      </p>\n\n      <a\n        v-if=\"canCreateEnvironment\"\n        :href=\"newPath\"\n        class=\"btn btn-create js-new-environment-button\"\n      >\n        {{ s__(\"Environments|New environment\") }}\n      </a>\n    </div>\n  </div>\n</template>\n","import { render, staticRenderFns } from \"./empty_state.vue?vue&type=template&id=02a3e2da\"\nimport script from \"./empty_state.vue?vue&type=script&lang=js\"\nexport * from \"./empty_state.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"blank-state-row\"},[_c('div',{staticClass:\"blank-state-center\"},[_c('h2',{staticClass:\"blank-state-title js-blank-state-title\"},[_vm._v(\"\\n        \"+_vm._s(_vm.s__(\"Environments|You don't have any environments right now.\"))+\"\\n      \")]),_vm._v(\" \"),_c('p',{staticClass:\"blank-state-text\"},[_vm._v(\"\\n        \"+_vm._s(_vm.s__(\"Environments|Environments are places where\\ncode gets deployed, such as staging or production.\"))+\"\\n        \"),_c('br'),_vm._v(\" \"),_c('a',{attrs:{\"href\":_vm.helpPath}},[_vm._v(\"\\n          \"+_vm._s(_vm.s__(\"Environments|Read more about environments\"))+\"\\n        \")])]),_vm._v(\" \"),(_vm.canCreateEnvironment)?_c('a',{staticClass:\"btn btn-create js-new-environment-button\",attrs:{\"href\":_vm.newPath}},[_vm._v(\"\\n        \"+_vm._s(_vm.s__(\"Environments|New environment\"))+\"\\n      \")]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./environments_app.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./environments_app.vue?vue&type=script&lang=js\"","<script>\n  import Flash from '../../flash';\n  import { s__ } from '../../locale';\n  import emptyState from './empty_state.vue';\n  import eventHub from '../event_hub';\n  import environmentsMixin from '../mixins/environments_mixin';\n  import CIPaginationMixin from '../../vue_shared/mixins/ci_pagination_api_mixin';\n  import StopEnvironmentModal from './stop_environment_modal.vue';\n\n  export default {\n    components: {\n      emptyState,\n      StopEnvironmentModal,\n    },\n\n    mixins: [\n      CIPaginationMixin,\n      environmentsMixin,\n    ],\n\n    props: {\n      endpoint: {\n        type: String,\n        required: true,\n      },\n      canCreateEnvironment: {\n        type: Boolean,\n        required: true,\n      },\n      canCreateDeployment: {\n        type: Boolean,\n        required: true,\n      },\n      canReadEnvironment: {\n        type: Boolean,\n        required: true,\n      },\n      cssContainerClass: {\n        type: String,\n        required: true,\n      },\n      newEnvironmentPath: {\n        type: String,\n        required: true,\n      },\n      helpPagePath: {\n        type: String,\n        required: true,\n      },\n    },\n\n    created() {\n      eventHub.$on('toggleFolder', this.toggleFolder);\n    },\n\n    beforeDestroy() {\n      eventHub.$off('toggleFolder');\n    },\n\n    methods: {\n      toggleFolder(folder) {\n        this.store.toggleFolder(folder);\n\n        if (!folder.isOpen) {\n          this.fetchChildEnvironments(folder, true);\n        }\n      },\n\n      fetchChildEnvironments(folder, showLoader = false) {\n        this.store.updateEnvironmentProp(folder, 'isLoadingFolderContent', showLoader);\n\n        this.service.getFolderContent(folder.folder_path)\n          .then(response => this.store.setfolderContent(folder, response.data.environments))\n          .then(() => this.store.updateEnvironmentProp(folder, 'isLoadingFolderContent', false))\n          .catch(() => {\n            Flash(s__('Environments|An error occurred while fetching the environments.'));\n            this.store.updateEnvironmentProp(folder, 'isLoadingFolderContent', false);\n          });\n      },\n\n      successCallback(resp) {\n        this.saveData(resp);\n\n        // We need to verify if any folder is open to also update it\n        const openFolders = this.store.getOpenFolders();\n        if (openFolders.length) {\n          openFolders.forEach(folder => this.fetchChildEnvironments(folder));\n        }\n      },\n    },\n  };\n</script>\n<template>\n  <div :class=\"cssContainerClass\">\n    <stop-environment-modal :environment=\"environmentInStopModal\" />\n\n    <div class=\"top-area\">\n      <tabs\n        :tabs=\"tabs\"\n        scope=\"environments\"\n        @onChangeTab=\"onChangeTab\"\n      />\n\n      <div\n        v-if=\"canCreateEnvironment && !isLoading\"\n        class=\"nav-controls\"\n      >\n        <a\n          :href=\"newEnvironmentPath\"\n          class=\"btn btn-create\"\n        >\n          {{ s__(\"Environments|New environment\") }}\n        </a>\n      </div>\n    </div>\n\n    <container\n      :is-loading=\"isLoading\"\n      :environments=\"state.environments\"\n      :pagination=\"state.paginationInformation\"\n      :can-create-deployment=\"canCreateDeployment\"\n      :can-read-environment=\"canReadEnvironment\"\n      @onChangePage=\"onChangePage\"\n    >\n      <empty-state\n        v-if=\"!isLoading && state.environments.length === 0\"\n        slot=\"emptyState\"\n        :new-path=\"newEnvironmentPath\"\n        :help-path=\"helpPagePath\"\n        :can-create-environment=\"canCreateEnvironment\"\n      />\n    </container>\n  </div>\n</template>\n","import { render, staticRenderFns } from \"./environments_app.vue?vue&type=template&id=add45fd6\"\nimport script from \"./environments_app.vue?vue&type=script&lang=js\"\nexport * from \"./environments_app.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.cssContainerClass},[_c('stop-environment-modal',{attrs:{\"environment\":_vm.environmentInStopModal}}),_vm._v(\" \"),_c('div',{staticClass:\"top-area\"},[_c('tabs',{attrs:{\"tabs\":_vm.tabs,\"scope\":\"environments\"},on:{\"onChangeTab\":_vm.onChangeTab}}),_vm._v(\" \"),(_vm.canCreateEnvironment && !_vm.isLoading)?_c('div',{staticClass:\"nav-controls\"},[_c('a',{staticClass:\"btn btn-create\",attrs:{\"href\":_vm.newEnvironmentPath}},[_vm._v(\"\\n        \"+_vm._s(_vm.s__(\"Environments|New environment\"))+\"\\n      \")])]):_vm._e()],1),_vm._v(\" \"),_c('container',{attrs:{\"is-loading\":_vm.isLoading,\"environments\":_vm.state.environments,\"pagination\":_vm.state.paginationInformation,\"can-create-deployment\":_vm.canCreateDeployment,\"can-read-environment\":_vm.canReadEnvironment},on:{\"onChangePage\":_vm.onChangePage}},[(!_vm.isLoading && _vm.state.environments.length === 0)?_c('empty-state',{attrs:{\"slot\":\"emptyState\",\"new-path\":_vm.newEnvironmentPath,\"help-path\":_vm.helpPagePath,\"can-create-environment\":_vm.canCreateEnvironment},slot:\"emptyState\"}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue';\nimport environmentsComponent from './components/environments_app.vue';\nimport { convertPermissionToBoolean } from '../lib/utils/common_utils';\nimport Translate from '../vue_shared/translate';\n\nVue.use(Translate);\n\nexport default () => new Vue({\n  el: '#environments-list-view',\n  components: {\n    environmentsComponent,\n  },\n  data() {\n    const environmentsData = document.querySelector(this.$options.el).dataset;\n\n    return {\n      endpoint: environmentsData.environmentsDataEndpoint,\n      newEnvironmentPath: environmentsData.newEnvironmentPath,\n      helpPagePath: environmentsData.helpPagePath,\n      cssContainerClass: environmentsData.cssClass,\n      canCreateEnvironment: convertPermissionToBoolean(environmentsData.canCreateEnvironment),\n      canCreateDeployment: convertPermissionToBoolean(environmentsData.canCreateDeployment),\n      canReadEnvironment: convertPermissionToBoolean(environmentsData.canReadEnvironment),\n    };\n  },\n  render(createElement) {\n    return createElement('environments-component', {\n      props: {\n        endpoint: this.endpoint,\n        newEnvironmentPath: this.newEnvironmentPath,\n        helpPagePath: this.helpPagePath,\n        cssContainerClass: this.cssContainerClass,\n        canCreateEnvironment: this.canCreateEnvironment,\n        canCreateDeployment: this.canCreateDeployment,\n        canReadEnvironment: this.canReadEnvironment,\n      },\n    });\n  },\n});\n","import initEnviroments from '~/environments/';\n\ndocument.addEventListener('DOMContentLoaded', initEnviroments);\n"],"sourceRoot":""}