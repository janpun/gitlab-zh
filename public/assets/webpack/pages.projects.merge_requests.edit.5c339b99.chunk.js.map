{"version":3,"sources":["webpack:///./labels_select.js","webpack:///./create_label.js","webpack:///./files_comment_button.js","webpack:///./single_file_diff.js","webpack:///./diff.js","webpack:///./blob/template_selector.js","webpack:///./templates/issuable_template_selector.js","webpack:///./templates/issuable_template_selectors.js","webpack:///./issuable/auto_width_dropdown_select.js","webpack:///./issuable_form.js","webpack:///./pages/projects/merge_requests/init_merge_request.js","webpack:///./lib/utils/datefix.js","webpack:///./dropzone_input.js","webpack:///./lib/utils/text_markdown.js","webpack:///./gl_form.js","webpack:///./zen_mode.js","webpack:////var/cache/omnibus/src/gitlab-rails/node_modules/pikaday/pikaday.js","webpack:///./issuable_bulk_update_actions.js","webpack:///./users_select.js","webpack:///./image_diff/helpers/badge_helper.js","webpack:///./image_diff/helpers/comment_indicator_helper.js","webpack:///./image_diff/image_badge.js","webpack:///./image_diff/image_diff.js","webpack:///./lib/utils/image_utility.js","webpack:///./image_diff/view_types.js","webpack:///./image_diff/replaced_image_diff.js","webpack:///./commit/image_file.js","webpack:///./image_diff/helpers/index.js","webpack:///./image_diff/helpers/dom_helper.js","webpack:///./image_diff/helpers/utils_helper.js","webpack:///./pages/projects/merge_requests/edit/index.js","webpack:///./autosave.js","webpack:////var/cache/omnibus/src/gitlab-rails/node_modules/mousetrap/plugins/pause/mousetrap-pause.js"],"names":["LabelsSelect","els","_this","$els","options","arguments","length","undefined","_classCallCheck","this","jquery__WEBPACK_IMPORTED_MODULE_0___default","each","i","dropdown","$block","$dropdown","$form","$loading","$selectbox","$sidebarCollapsedValue","$value","abilityName","defaultLabel","issueUpdateURL","labelUrl","namespacePath","projectPath","saveLabelData","selectedLabel","showAny","showNo","$sidebarLabelTooltip","initialSelected","fieldName","showMenuAbove","$dropdownContainer","closest","find","data","hasClass","split","fadeOut","is","map","value","get","handleClick","tooltip","_create_label__WEBPACK_IMPORTED_MODULE_6__","selected","underscore__WEBPACK_IMPORTED_MODULE_1___default","a","isEqual","label_ids","removeClass","fadeIn","trigger","_lib_utils_axios_utils__WEBPACK_IMPORTED_MODULE_3__","put","then","_ref","labelCount","template","labelTooltipTitle","labelTitles","hide","labels","getLabelTemplate","removeAttr","html","text","label","title","slice","push","join","Object","_locale__WEBPACK_IMPORTED_MODULE_2__","attr","container","catch","_flash__WEBPACK_IMPORTED_MODULE_7__","glDropdown","term","callback","res","chain","groupBy","color","dup","id","duplicate","extraData","unshift","isAny","concat","positionMenuAbove","renderRow","instance","$a","$li","colorEl","indeterminate","removesAll","selectedClass","marked","dropdownName","dropdownValue","indexOf","splice","toString","replace","_filtered_search_dropdown_utils__WEBPACK_IMPORTED_MODULE_5__","duplicateLabelColor","_slicedToArray","addClass","escape","prop","search","fields","selectable","filterable","toggleLabel","el","$dropdownParent","parent","$dropdownInputField","isSelected","selectedLabels","val","index","hidden","isIssueIndex","isMRIndex","page","Issuable","filterResults","submit","multiSelect","vue","clicked","clickEvent","boardsModel","$el","e","isMarking","selectedObj","fadeOutLoader","enableBulkLabelDropdown","setDropdownData","_boards_stores_modal_store__WEBPACK_IMPORTED_MODULE_8__","store","filter","preventDefault","gl","issueBoards","BoardsStore","detail","issue","ListLabel","textColor","update","opened","previousSelection","updateLabel","preserveContext","setOriginalDropdownData","bindEvents","on","onSelectCheckboxIssue","_issuable_bulk_update_actions__WEBPACK_IMPORTED_MODULE_4__","willUpdateLabels","markedIds","unmarkedIds","indeterminateIds","getOriginalIndeterminateIds","getOriginalCommonIds","$container","tplData","tpl","CreateLabelDropdown","$dropdownBack","$cancelButton","$newLabelField","$newColorField","$colorPreview","$newLabelError","$newLabelCreateButton","$colorSuggestions","disable","cleanBinding","addBinding","off","self","$this","addColorValue","enableLabelCreateButton","bind","resetForm","stopPropagation","saveLabel","css","enable","_api__WEBPACK_IMPORTED_MODULE_1__","newLabel","message","errors","keys","key","_lib_utils_text_utility__WEBPACK_IMPORTED_MODULE_2__","show","document","files_comment_button","init","$diffFile","userCanCreateNote","isParallelView","js_cookie_default","LINE_COLUMN_CLASSES","showButton","hideButton","buttonParentElement","getButtonParent","currentTarget","validateButtonParent","classList","add","nextElementSibling","remove","hoveredElement","contains","previousElementSibling","parentNode","querySelector","WRAPPER","LOADING_HTML","COLLAPSED_HTML","SingleFileDiff","file","toggleDiff","content","jquery_default","$toggleIcon","diffForPath","isOpen","collapsedContent","loadingContent","after","target","$target","cb","hasError","getContentHTML","diffNotesCompileComponents","axios_utils","syntax_highlight","$file","canCreateNote","helpers","initImageDiff","flash","locale","isBound","diff_Diff","Diff","diff_classCallCheck","single_file_diff","tab","getElementById","dataset","isLocked","firstFile","first","hasAttribute","handleClickUnfold","handleClickLineNum","handleParallelLineDown","url_utility","highlightSelectedLine","openAnchoredDiff","_lineNumbers","lineNumbers","_lineNumbers2","oldLineNumber","newLineNumber","offset","bottom","since","to","unfold","lineNumber","prevNewLine","prev","parents","link","params","view","replaceWith","locationHash","anchoredDiff","diffFile","$","clickTarget","hash","window","history","pushState","location","line","table","lineClass","name","children","toArray","elm","parseInt","$diffFiles","TemplateSelector","pattern","wrapper","editor","$input","$filenameInput","$dropdownIcon","initDropdown","listenForFilenameInput","renderMatchedDropdown","initAutosizeUpdateEvent","item","fetchFileTemplate","autosizeUpdateEvent","createEvent","initEvent","_this2","test","trim","requestFile","skipFocus","newValue","setValue","focus","dispatchEvent","IssuableTemplateSelector","issuable_template_selector_classCallCheck","_len","args","Array","_key","_possibleConstructorReturn","__proto__","getPrototypeOf","call","apply","issuableType","titleInput","initialQuery","setInputValueToTemplateContent","currentTemplate","template_selector","query","startLoadingSpinner","api","issueTemplate","err","stopLoadingSpinner","setEditorContent","issuable_template_selectors_IssuableTemplateSelectors","IssuableTemplateSelectors","$dropdowns","issuable_template_selectors_classCallCheck","initEditor","issuable_template_selector","getValue","instanceCount","auto_width_dropdown_select","AutoWidthDropdownSelect","selectElement","$selectElement","dropdownClass","select2","_extends","dropdownCssClass","selectOptions","dropdownCss","resultantWidth","offsetParentWidth","offsetParent","width","outerWidth","maxWidth","issuable_form_IssuableForm","IssuableForm","form","issuable_form_classCallCheck","toggleWip","renderWipExplanation","resetAutosave","handleSubmit","wipRegex","gfm_auto_complete","GfmAutoComplete","dataSources","setup","users_select","zen_mode","titleField","descriptionField","initAutosave","initWip","$issuableDueDate","calendar","pikaday_default","field","theme","format","parse","dateString","datefix","date","onSelect","dateText","setDate","$targetBranchSelect","initTargetBranchDropdown","autosave","pathname","reset","$wipExplanation","$noWipExplanation","workInProgress","event","removeWip","addWip","issuable_form_extends","ajax","url","dataType","quietMillis","results","initSelection","_templates_issuable_template_selectors__WEBPACK_IMPORTED_MODULE_7__","__webpack_require__","__webpack_exports__","_diff__WEBPACK_IMPORTED_MODULE_1__","_shortcuts_navigation__WEBPACK_IMPORTED_MODULE_2__","_gl_form__WEBPACK_IMPORTED_MODULE_3__","_issuable_form__WEBPACK_IMPORTED_MODULE_4__","_labels_select__WEBPACK_IMPORTED_MODULE_5__","_milestone_select__WEBPACK_IMPORTED_MODULE_6__","pad","len","parsePikadayDate","parts","year","month","day","Date","pikadayToString","getDate","getMonth","getFullYear","dropzoneInput","$attachButton","$attachingFileMessage","$retryLink","$uploadProgress","$uploadingErrorContainer","$uploadingErrorMessage","$uploadingProgressContainer","uploadsPath","uploads_path","maxFileSize","gon","max_file_size","formTextarea","handlePaste","pasteText","addFileToForm","updateAttachingMessage","isImage","getFilename","uploadFile","wrap","$mdArea","setupMarkdownPreview","$formDropzone","append","dropzone","dictDefaultMessage","clickable","paramName","maxFilesize","uploadMultiple","headers","csrf","previewContainer","processing","alert","dragover","dragleave","drop","success","header","response","processingFileCount","getQueuedFiles","getUploadingFiles","shouldPad","markdown","error","errorMessage","xhr","responseText","totaluploadprogress","totalUploadProgress","files","Math","round","sending","removedfile","queuecomplete","child","dropzone_default","forElement","removeAllFiles","dropzoneInstance","failedFiles","failedFile","status","ERROR","accepted","addFile","pasteEvent","originalEvent","clipboardData","items","image","filename","getAsFile","type","formattedText","textarea","caretStart","selectionStart","caretEnd","selectionEnd","textEnd","beforeSelection","substring","afterSelection","setSelectionRange","style","height","scrollHeight","Event","path","underscore_default","getData","closeSpinner","formData","FormData","post","md","$child","insertToTextArea","messageContainer","attachingMessage","filesCount","click","autoDiscover","updateText","textArea","tag","blockTag","$textArea","selectedText","textToInsert","selectedSplit","startChar","removedLastNewLine","removedFirstNewLine","currentLineEmpty","lastNewLine","substr","lastIndexOf","before","lineBefore","lineAfter","blockTagText","common_utils","wrapped","pos","moveCursor","insertMarkdownText","gl_form_GLForm","GLForm","enableGFM","assign","forEach","destroy","setupForm","clearEventListeners","autoComplete","isNewForm","utils","disableButtonIfEmptyField","autosize_default","addEventListeners","isAutosizeable","setupAutosize","setHeightData","destroyAutosize","setTimeout","outerHeight","dropzone__WEBPACK_IMPORTED_MODULE_2___default","ZenMode","active_backdrop","active_textarea","enter","exit","keyCode","backdrop","mousetrap__WEBPACK_IMPORTED_MODULE_3___default","pause","unpause","scrollTo","$dropzone","zen_area","root","factory","moment","Error","code","module","exports","hasMoment","hasEventListeners","addEventListener","sto","addEvent","capture","attachEvent","removeEvent","removeEventListener","detachEvent","cn","className","isArray","obj","prototype","isDate","isNaN","getTime","isWeekend","getDay","getDaysInMonth","isLeapYear","setToStartOfDay","setHours","compareDates","b","extend","from","overwrite","hasProp","nodeName","fireEvent","eventName","ev","createEventObject","adjustCalendar","ceil","abs","floor","defaults","bound","position","reposition","defaultDate","setDefaultDate","firstDay","formatStrict","minDate","maxDate","yearRange","showWeekNumber","pickWholeWeek","minYear","maxYear","minMonth","maxMonth","startRange","endRange","isRTL","yearSuffix","showMonthAfterYear","showDaysInNextAndPreviousMonths","enableSelectionDaysInNextAndPreviousMonths","numberOfMonths","mainCalendar","blurFieldOnSelect","i18n","previousMonth","nextMonth","months","weekdays","weekdaysShort","events","onOpen","onClose","onDraw","renderDayName","opts","abbr","renderDay","arr","ariaSelected","isEmpty","isDisabled","isToday","hasEvent","isInRange","isStartRange","isEndRange","days","isRowSelected","reverse","renderTitle","c","refYear","randId","j","monthHtml","yearHtml","_o","isMinYear","isMaxYear","next","Pikaday","config","_onMouseDown","_v","srcElement","prevMonth","getAttribute","blur","_c","returnValue","_onChange","gotoMonth","gotoYear","_onKeyChange","isVisible","adjustDate","_onInputChange","firedBy","isValid","toDate","_onInputFocus","_onInputClick","_onInputBlur","pEl","activeElement","_b","_onClick","onchange","setAttribute","createElement","appendChild","body","insertBefore","nextSibling","defDate","gotoDate","disableWeekends","disableDayFn","nom","setMinDate","setMaxDate","fallback","_d","toDateString","getMoment","setMoment","preventOnSelect","isMoment","draw","min","max","newCalendar","calendars","firstVisibleDate","lastVisibleDate","visibleDate","setMonth","adjustCalendars","sign","newDay","difference","valueOf","gotoToday","setStartRange","setEndRange","force","_y","_m","random","render","innerHTML","adjustPosition","viewportWidth","viewportHeight","scrollTop","left","top","clientRect","offsetWidth","offsetHeight","innerWidth","documentElement","clientWidth","innerHeight","clientHeight","pageYOffset","getBoundingClientRect","pageXOffset","offsetLeft","offsetTop","now","row","yearOfPreviousMonth","yearOfNextMonth","daysInPreviousMonth","cells","d","m","y","onejan","isWeekSelected","r","dayNumber","monthNumber","yearNumber","dayConfig","renderHead","renderTable","str","v","removeChild","_flash__WEBPACK_IMPORTED_MODULE_3__","issues","prefixId","getElement","$labelDropdown","onFormSubmit","_lib_utils_axios_utils__WEBPACK_IMPORTED_MODULE_2__","getFormDataAsObject","reload","onFormSubmitFailure","getSelectedIssues","has","getLabelsFromSelection","labelsData","labelId","getUnmarkedIndeterminedLabels","result","labelsToKeep","state_event","assignee_id","assignee_ids","milestone_id","issuable_ids","subscription_event","add_label_ids","remove_label_ids","$labelSelect","getOriginalMarkedIds","labelIds","intersection","_this3","_this4","uniqueIds","issuableLabels","selector","scopeEl","UsersSelect","currentUser","users","user","usersPath","userPath","_typeof","JSON","$collapsedSidebar","assignTo","assigneeTemplate","collapsedAssigneeTemplate","defaultNullUser","firstUser","issueURL","selectedId","selectedIdDefault","showAnyUser","showNullUser","projectId","groupId","showCurrentUser","todoFilter","todoStateFilter","authorId","assignYourself","unassignedSelected","input","currentUserInfo","meta","getSelectedUserInputs","getSelected","checkMaxSelect","maxSelect","firstSelectedId","emitSidebarEvent","getMultiSelectDropdownTitle","selectedUser","selectedUsers","u","otherSelected","s","current_user_id","current_user_fullname","tooltipTitle","assignee","username","avatar","avatar_url","_locale__WEBPACK_IMPORTED_MODULE_3__","processData","selectedInputs","uniq","userId","_input$dataset","avatarUrl","anyUser","showDivider","beforeDivider","sort","filterRemote","inputValue","filterInput","filteredFullData","parseData","inputMeta","isActive","previouslySelected","toLowerCase","element","addInput","isSelecting","_boards_stores_modal_store__WEBPACK_IMPORTED_MODULE_4__","highlightSelected","img","default_avatar_url","select","showEmailUser","skipLdap","skipUsers","placeholder","multiple","minimumInputLength","emailUser","nullUser","ref","match","trimmed","invite","formatResult","formatSelection","escapeMarkup","noop","user_id","buildUrl","_ref2","active","project_id","group_id","skip_ldap","todo_filter","todo_state_filter","current_user","author_id","skip_users","_ref3","relative_url_root","createImageBadge","noteId","x","classNames","buttonEl","addCommentIndicator","containerEl","spriteIcon","defaultMeta","ImageBadge","discussionId","actual","browser","imageEl","resizeCoordinatesToImageElement","ImageDiff","image_diff_classCallCheck","renderCommentBadge","$noteContainer","imageBadges","imageFrameEl","imageClickedWrapper","imageClicked","imageBlurredWrapper","removeCommentIndicator","addBadgeWrapper","addBadge","removeBadgeWrapper","removeBadge","renderBadgesWrapper","renderBadges","complete","naturalHeight","toggleCollapsed","commentIndicatorOnClick","customEvent","selection","getTargetSelection","setPositionDataAttribute","showCommentIndicator","discussionsEls","querySelectorAll","_toConsumableArray","renderBadge","discussionEl","imageBadge","generateBadgeFromDiscussionDOM","coordinate","addImageCommentBadge","numberBadgeOptions","badgeText","addImageBadge","_event$detail","image_badge","addAvatarBadge","badgeNumber","updateDiscussionBadgeNumber","indexToRemove","imageBadgeEls","badge","updatedBadgeNumber","innerText","updateDiscussionAvatarBadgeNumber","viewTypes","TWO_UP","SWIPE","ONION_SKIN","image_diff","_imageFrameEls","_viewModesEls","defaultViewType","imageFrameEls","_defineProperty","viewModesEl","viewModesEls","currentView","generateImageEls","imageEls","getOwnPropertyNames","viewType","_get","ReplacedImageDiff","changeToViewTwoUp","changeView","changeToViewSwipe","changeToViewOnionSkin","newView","validate","indicator","existingBadges","replaced_image_diff_toConsumableArray","renderNewView","removed","normalizedIndicator","availWidth","viewModes","ImageFile","image_file_classCallCheck","views","two-up","requestImageInfo","swipe","maxHeight","$swipeWrap","$swipeBar","$swipeFrame","wrapPadding","prepareFrames","initDraggable","onion-skin","dragTrackWidth","_ref4","$frame","$track","$dragger","$frameAdded","framePadding","opacity","deletedWidth","deletedHeight","initViewModes","waitForImages","initView","viewMode","activateViewMode","padding","dragging","$body","$offsetEl","pageX","frame","domImg","naturalWidth","commentIndicatorEl","willRemove","avatarBadgeEl","positionObject","stringify","newBadgeNumber","discussionNotesEl","formEl","isCollapsed","display","imageWidth","imageHeight","widthRatio","heightRatio","firstNoteEl","offsetX","offsetY","actualWidth","actualHeight","normalizedX","normalizedY","fileEl","diff","image_file","replaced_image_diff","_pages_projects_merge_requests_init_merge_request__WEBPACK_IMPORTED_MODULE_0__","Autosave","isLocalStorageAvailable","_lib_utils_accessor__WEBPACK_IMPORTED_MODULE_0__","isLocalStorageAccessSafe","restore","save","localStorage","getItem","bubbles","cancelable","setItem","removeItem","Mousetrap","_originalStopCallback","stopCallback","enabled","combo"],"mappings":"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","file":"pages.projects.merge_requests.edit.5c339b99.chunk.js","sourcesContent":["/* eslint-disable no-useless-return, func-names, no-var, no-underscore-dangle, prefer-arrow-callback, max-len, one-var, no-unused-vars, one-var-declaration-per-line, prefer-template, no-new, consistent-return, object-shorthand, comma-dangle, no-shadow, no-param-reassign, brace-style, vars-on-top, quotes, no-lonely-if, no-else-return, dot-notation, no-empty */\n/* global Issuable */\n/* global ListLabel */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport { __ } from './locale';\nimport axios from './lib/utils/axios_utils';\nimport IssuableBulkUpdateActions from './issuable_bulk_update_actions';\nimport DropdownUtils from './filtered_search/dropdown_utils';\nimport CreateLabelDropdown from './create_label';\nimport flash from './flash';\nimport ModalStore from './boards/stores/modal_store';\n\nexport default class LabelsSelect {\n  constructor(els, options = {}) {\n    var _this, $els;\n    _this = this;\n\n    $els = $(els);\n\n    if (!els) {\n      $els = $('.js-label-select');\n    }\n\n    $els.each(function(i, dropdown) {\n      var $block, $colorPreview, $dropdown, $form, $loading, $selectbox, $sidebarCollapsedValue, $value, abilityName, defaultLabel, enableLabelCreateButton, issueURLSplit, issueUpdateURL, labelUrl, namespacePath, projectPath, saveLabelData, selectedLabel, showAny, showNo, $sidebarLabelTooltip, initialSelected, $toggleText, fieldName, useId, propertyName, showMenuAbove, $container, $dropdownContainer;\n      $dropdown = $(dropdown);\n      $dropdownContainer = $dropdown.closest('.labels-filter');\n      $toggleText = $dropdown.find('.dropdown-toggle-text');\n      namespacePath = $dropdown.data('namespacePath');\n      projectPath = $dropdown.data('projectPath');\n      labelUrl = $dropdown.data('labels');\n      issueUpdateURL = $dropdown.data('issueUpdate');\n      selectedLabel = $dropdown.data('selected');\n      if ((selectedLabel != null) && !$dropdown.hasClass('js-multiselect')) {\n        selectedLabel = selectedLabel.split(',');\n      }\n      showNo = $dropdown.data('showNo');\n      showAny = $dropdown.data('showAny');\n      showMenuAbove = $dropdown.data('showMenuAbove');\n      defaultLabel = $dropdown.data('defaultLabel') || 'Label';\n      abilityName = $dropdown.data('abilityName');\n      $selectbox = $dropdown.closest('.selectbox');\n      $block = $selectbox.closest('.block');\n      $form = $dropdown.closest('form, .js-issuable-update');\n      $sidebarCollapsedValue = $block.find('.sidebar-collapsed-icon span');\n      $sidebarLabelTooltip = $block.find('.js-sidebar-labels-tooltip');\n      $value = $block.find('.value');\n      $loading = $block.find('.block-loading').fadeOut();\n      fieldName = $dropdown.data('fieldName');\n      useId = $dropdown.is('.js-issuable-form-dropdown, .js-filter-bulk-update, .js-label-sidebar-dropdown');\n      propertyName = useId ? 'id' : 'title';\n      initialSelected = $selectbox\n        .find('input[name=\"' + $dropdown.data('fieldName') + '\"]')\n        .map(function () {\n          return this.value;\n        }).get();\n      const { handleClick } = options;\n\n      $sidebarLabelTooltip.tooltip();\n\n      if ($dropdown.closest('.dropdown').find('.dropdown-new-label').length) {\n        new CreateLabelDropdown($dropdown.closest('.dropdown').find('.dropdown-new-label'), namespacePath, projectPath);\n      }\n\n      saveLabelData = function() {\n        var data, selected;\n        selected = $dropdown.closest('.selectbox').find(\"input[name='\" + fieldName + \"']\").map(function() {\n          return this.value;\n        }).get();\n\n        if (_.isEqual(initialSelected, selected)) return;\n        initialSelected = selected;\n\n        data = {};\n        data[abilityName] = {};\n        data[abilityName].label_ids = selected;\n        if (!selected.length) {\n          data[abilityName].label_ids = [''];\n        }\n        $loading.removeClass('hidden').fadeIn();\n        $dropdown.trigger('loading.gl.dropdown');\n        axios.put(issueUpdateURL, data)\n          .then(({ data }) => {\n            var labelCount, template, labelTooltipTitle, labelTitles, formattedLabels;\n            $loading.fadeOut();\n            $dropdown.trigger('loaded.gl.dropdown');\n            $selectbox.hide();\n            data.issueUpdateURL = issueUpdateURL;\n            labelCount = 0;\n            if (data.labels.length && issueUpdateURL) {\n              template = LabelsSelect.getLabelTemplate({\n                labels: data.labels,\n                issueUpdateURL,\n              });\n              labelCount = data.labels.length;\n            }\n            else {\n              template = '<span class=\"no-value\">None</span>';\n            }\n            $value.removeAttr('style').html(template);\n            $sidebarCollapsedValue.text(labelCount);\n\n            if (data.labels.length) {\n              labelTitles = data.labels.map(function(label) {\n                return label.title;\n              });\n\n              if (labelTitles.length > 5) {\n                labelTitles = labelTitles.slice(0, 5);\n                labelTitles.push('and ' + (data.labels.length - 5) + ' more');\n              }\n\n              labelTooltipTitle = labelTitles.join(', ');\n            }\n            else {\n              labelTooltipTitle = __('Labels');\n            }\n\n            $sidebarLabelTooltip\n              .attr('title', labelTooltipTitle)\n              .tooltip('_fixTitle');\n\n            $('.has-tooltip', $value).tooltip({\n              container: 'body'\n            });\n          })\n          .catch(() => flash(__('Error saving label update.')));\n      };\n      $dropdown.glDropdown({\n        showMenuAbove: showMenuAbove,\n        data: function(term, callback) {\n          axios.get(labelUrl)\n            .then((res) => {\n              let data = _.chain(res.data).groupBy(function(label) {\n                return label.title;\n              }).map(function(label) {\n                var color;\n                color = _.map(label, function(dup) {\n                  return dup.color;\n                });\n                return {\n                  id: label[0].id,\n                  title: label[0].title,\n                  color: color,\n                  duplicate: color.length > 1\n                };\n              }).value();\n              if ($dropdown.hasClass('js-extra-options')) {\n                var extraData = [];\n                if (showNo) {\n                  extraData.unshift({\n                    id: 0,\n                    title: 'No Label'\n                  });\n                }\n                if (showAny) {\n                  extraData.unshift({\n                    isAny: true,\n                    title: 'Any Label'\n                  });\n                }\n                if (extraData.length) {\n                  extraData.push('divider');\n                  data = extraData.concat(data);\n                }\n              }\n\n              callback(data);\n              if (showMenuAbove) {\n                $dropdown.data('glDropdown').positionMenuAbove();\n              }\n            })\n            .catch(() => flash(__('Error fetching labels.')));\n        },\n        renderRow: function(label, instance) {\n          var $a, $li, color, colorEl, indeterminate, removesAll, selectedClass, spacing, i, marked, dropdownName, dropdownValue;\n          $li = $('<li>');\n          $a = $('<a href=\"#\">');\n          selectedClass = [];\n          removesAll = label.id <= 0 || (label.id == null);\n          if ($dropdown.hasClass('js-filter-bulk-update')) {\n            indeterminate = $dropdown.data('indeterminate') || [];\n            marked = $dropdown.data('marked') || [];\n\n            if (indeterminate.indexOf(label.id) !== -1) {\n              selectedClass.push('is-indeterminate');\n            }\n\n            if (marked.indexOf(label.id) !== -1) {\n              // Remove is-indeterminate class if the item will be marked as active\n              i = selectedClass.indexOf('is-indeterminate');\n              if (i !== -1) {\n                selectedClass.splice(i, 1);\n              }\n              selectedClass.push('is-active');\n            }\n          } else {\n            if (this.id(label)) {\n              dropdownName = $dropdown.data('fieldName');\n              dropdownValue = this.id(label).toString().replace(/'/g, '\\\\\\'');\n\n              if ($form.find(\"input[type='hidden'][name='\" + dropdownName + \"'][value='\" + dropdownValue + \"']\").length) {\n                selectedClass.push('is-active');\n              }\n            }\n\n            if ($dropdown.hasClass('js-multiselect') && removesAll) {\n              selectedClass.push('dropdown-clear-active');\n            }\n          }\n          if (label.duplicate) {\n            color = DropdownUtils.duplicateLabelColor(label.color);\n          }\n          else {\n            if (label.color != null) {\n              [color] = label.color;\n            }\n          }\n          if (color) {\n            colorEl = \"<span class='dropdown-label-box' style='background: \" + color + \"'></span>\";\n          }\n          else {\n            colorEl = '';\n          }\n          // We need to identify which items are actually labels\n          if (label.id) {\n            selectedClass.push('label-item');\n            $a.attr('data-label-id', label.id);\n          }\n          $a.addClass(selectedClass.join(' ')).html(`${colorEl} ${_.escape(label.title)}`);\n          // Return generated html\n          return $li.html($a).prop('outerHTML');\n        },\n        search: {\n          fields: ['title']\n        },\n        selectable: true,\n        filterable: true,\n        selected: $dropdown.data('selected') || [],\n        toggleLabel: function(selected, el) {\n          var $dropdownParent = $dropdown.parent();\n          var $dropdownInputField = $dropdownParent.find('.dropdown-input-field');\n          var isSelected = el !== null ? el.hasClass('is-active') : false;\n\n          var title = selected ? selected.title : null;\n          var selectedLabels = this.selected;\n\n          if ($dropdownInputField.length && $dropdownInputField.val().length) {\n            $dropdownParent.find('.dropdown-input-clear').trigger('click');\n          }\n\n          if (selected && selected.id === 0) {\n            this.selected = [];\n            return 'No Label';\n          }\n          else if (isSelected) {\n            this.selected.push(title);\n          }\n          else if (!isSelected && title) {\n            var index = this.selected.indexOf(title);\n            this.selected.splice(index, 1);\n          }\n\n          if (selectedLabels.length === 1) {\n            return selectedLabels;\n          }\n          else if (selectedLabels.length) {\n            return selectedLabels[0] + \" +\" + (selectedLabels.length - 1) + \" more\";\n          }\n          else {\n            return defaultLabel;\n          }\n        },\n        fieldName: $dropdown.data('fieldName'),\n        id: function(label) {\n          if (label.id <= 0) return label.title;\n\n          if ($dropdown.hasClass('js-issuable-form-dropdown')) {\n            return label.id;\n          }\n\n          if ($dropdown.hasClass(\"js-filter-submit\") && (label.isAny == null)) {\n            return label.title;\n          }\n          else {\n            return label.id;\n          }\n        },\n        hidden: function() {\n          var isIssueIndex, isMRIndex, page, selectedLabels;\n          page = $('body').attr('data-page');\n          isIssueIndex = page === 'projects:issues:index';\n          isMRIndex = page === 'projects:merge_requests:index';\n          $selectbox.hide();\n          // display:block overrides the hide-collapse rule\n          $value.removeAttr('style');\n\n          if ($dropdown.hasClass('js-issuable-form-dropdown')) {\n            return;\n          }\n\n          if ($('html').hasClass('issue-boards-page')) {\n            return;\n          }\n          if ($dropdown.hasClass('js-multiselect')) {\n            if ($dropdown.hasClass('js-filter-submit') && (isIssueIndex || isMRIndex)) {\n              selectedLabels = $dropdown.closest('form').find(\"input:hidden[name='\" + ($dropdown.data('fieldName')) + \"']\");\n              Issuable.filterResults($dropdown.closest('form'));\n            }\n            else if ($dropdown.hasClass('js-filter-submit')) {\n              $dropdown.closest('form').submit();\n            }\n            else {\n              if (!$dropdown.hasClass('js-filter-bulk-update')) {\n                saveLabelData();\n              }\n            }\n          }\n        },\n        multiSelect: $dropdown.hasClass('js-multiselect'),\n        vue: $dropdown.hasClass('js-issue-board-sidebar'),\n        clicked: function (clickEvent) {\n          const { $el, e, isMarking } = clickEvent;\n          const label = clickEvent.selectedObj;\n\n          var isIssueIndex, isMRIndex, page, boardsModel;\n          var fadeOutLoader = () => {\n            $loading.fadeOut();\n          };\n\n          page = $('body').attr('data-page');\n          isIssueIndex = page === 'projects:issues:index';\n          isMRIndex = page === 'projects:merge_requests:index';\n\n          if ($dropdown.parent().find('.is-active:not(.dropdown-clear-active)').length) {\n            $dropdown.parent()\n              .find('.dropdown-clear-active')\n              .removeClass('is-active');\n          }\n\n          if ($dropdown.hasClass('js-issuable-form-dropdown')) {\n            return;\n          }\n\n          if ($dropdown.hasClass('js-filter-bulk-update')) {\n            _this.enableBulkLabelDropdown();\n            _this.setDropdownData($dropdown, isMarking, label.id);\n            return;\n          }\n\n          if ($dropdown.closest('.add-issues-modal').length) {\n            boardsModel = ModalStore.store.filter;\n          }\n\n          if (boardsModel) {\n            if (label.isAny) {\n              boardsModel['label_name'] = [];\n            } else if ($el.hasClass('is-active')) {\n              boardsModel['label_name'].push(label.title);\n            }\n\n            e.preventDefault();\n            return;\n          }\n          else if ($dropdown.hasClass('js-filter-submit') && (isIssueIndex || isMRIndex)) {\n            if (!$dropdown.hasClass('js-multiselect')) {\n              selectedLabel = label.title;\n              return Issuable.filterResults($dropdown.closest('form'));\n            }\n          }\n          else if ($dropdown.hasClass('js-filter-submit')) {\n            return $dropdown.closest('form').submit();\n          }\n          else if ($dropdown.hasClass('js-issue-board-sidebar')) {\n            if ($el.hasClass('is-active')) {\n              gl.issueBoards.BoardsStore.detail.issue.labels.push(new ListLabel({\n                id: label.id,\n                title: label.title,\n                color: label.color[0],\n                textColor: '#fff'\n              }));\n            }\n            else {\n              var { labels } = gl.issueBoards.BoardsStore.detail.issue;\n              labels = labels.filter(function (selectedLabel) {\n                return selectedLabel.id !== label.id;\n              });\n              gl.issueBoards.BoardsStore.detail.issue.labels = labels;\n            }\n\n            $loading.fadeIn();\n\n            gl.issueBoards.BoardsStore.detail.issue.update($dropdown.attr('data-issue-update'))\n              .then(fadeOutLoader)\n              .catch(fadeOutLoader);\n          }\n          else if (handleClick) {\n            e.preventDefault();\n            handleClick(label);\n          }\n          else {\n            if ($dropdown.hasClass('js-multiselect')) {\n\n            }\n            else {\n              return saveLabelData();\n            }\n          }\n        },\n        opened: function(e) {\n          if ($dropdown.hasClass('js-issue-board-sidebar')) {\n            const previousSelection = $dropdown.attr('data-selected');\n            this.selected = previousSelection ? previousSelection.split(',') : [];\n            $dropdown.data('glDropdown').updateLabel();\n          }\n        },\n        preserveContext: true,\n      });\n\n      // Set dropdown data\n      _this.setOriginalDropdownData($dropdownContainer, $dropdown);\n    });\n    this.bindEvents();\n  }\n\n  static getLabelTemplate(tplData) {\n    // We could use ES6 template string here\n    // and properly indent markup for readability\n    // but that also introduces unintended white-space\n    // so best approach is to use traditional way of\n    // concatenation\n    // see: http://2ality.com/2016/05/template-literal-whitespace.html#joining-arrays\n    const tpl = _.template([\n      '<% _.each(labels, function(label){ %>',\n      '<a href=\"<%- issueUpdateURL.slice(0, issueUpdateURL.lastIndexOf(\"/\")) %>?label_name[]=<%- encodeURIComponent(label.title) %>\">',\n      '<span class=\"badge label has-tooltip color-label\" title=\"<%- label.description %>\" style=\"background-color: <%- label.color %>; color: <%- label.text_color %>;\">',\n      '<%- label.title %>',\n      '</span>',\n      '</a>',\n      '<% }); %>',\n    ].join(''));\n\n    return tpl(tplData);\n  }\n\n  bindEvents() {\n    return $('body').on('change', '.selected_issue', this.onSelectCheckboxIssue);\n  }\n  // eslint-disable-next-line class-methods-use-this\n  onSelectCheckboxIssue() {\n    if ($('.selected_issue:checked').length) {\n      return;\n    }\n    return $('.issues-bulk-update .labels-filter .dropdown-toggle-text').text('Label');\n  }\n  // eslint-disable-next-line class-methods-use-this\n  enableBulkLabelDropdown() {\n    IssuableBulkUpdateActions.willUpdateLabels = true;\n  }\n  // eslint-disable-next-line class-methods-use-this\n  setDropdownData($dropdown, isMarking, value) {\n    var i, markedIds, unmarkedIds, indeterminateIds;\n\n    markedIds = $dropdown.data('marked') || [];\n    unmarkedIds = $dropdown.data('unmarked') || [];\n    indeterminateIds = $dropdown.data('indeterminate') || [];\n\n    if (isMarking) {\n      markedIds.push(value);\n\n      i = indeterminateIds.indexOf(value);\n      if (i > -1) {\n        indeterminateIds.splice(i, 1);\n      }\n\n      i = unmarkedIds.indexOf(value);\n      if (i > -1) {\n        unmarkedIds.splice(i, 1);\n      }\n    } else {\n      // If marked item (not common) is unmarked\n      i = markedIds.indexOf(value);\n      if (i > -1) {\n        markedIds.splice(i, 1);\n      }\n\n      // If an indeterminate item is being unmarked\n      if (IssuableBulkUpdateActions.getOriginalIndeterminateIds().indexOf(value) > -1) {\n        unmarkedIds.push(value);\n      }\n\n      // If a marked item is being unmarked\n      // (a marked item could also be a label that is present in all selection)\n      if (IssuableBulkUpdateActions.getOriginalCommonIds().indexOf(value) > -1) {\n        unmarkedIds.push(value);\n      }\n    }\n\n    $dropdown.data('marked', markedIds);\n    $dropdown.data('unmarked', unmarkedIds);\n    $dropdown.data('indeterminate', indeterminateIds);\n  }\n  // eslint-disable-next-line class-methods-use-this\n  setOriginalDropdownData($container, $dropdown) {\n    const labels = [];\n    $container.find('[name=\"label_name[]\"]').map(function() {\n      return labels.push(this.value);\n    });\n    $dropdown.data('marked', labels);\n  }\n}\n","/* eslint-disable func-names, prefer-arrow-callback */\n\nimport $ from 'jquery';\nimport Api from './api';\nimport { humanize } from './lib/utils/text_utility';\n\nexport default class CreateLabelDropdown {\n  constructor($el, namespacePath, projectPath) {\n    this.$el = $el;\n    this.namespacePath = namespacePath;\n    this.projectPath = projectPath;\n    this.$dropdownBack = $('.dropdown-menu-back', this.$el.closest('.dropdown'));\n    this.$cancelButton = $('.js-cancel-label-btn', this.$el);\n    this.$newLabelField = $('#new_label_name', this.$el);\n    this.$newColorField = $('#new_label_color', this.$el);\n    this.$colorPreview = $('.js-dropdown-label-color-preview', this.$el);\n    this.$newLabelError = $('.js-label-error', this.$el);\n    this.$newLabelCreateButton = $('.js-new-label-btn', this.$el);\n    this.$colorSuggestions = $('.suggest-colors-dropdown a', this.$el);\n\n    this.$newLabelError.hide();\n    this.$newLabelCreateButton.disable();\n\n    this.cleanBinding();\n    this.addBinding();\n  }\n\n  cleanBinding() {\n    this.$colorSuggestions.off('click');\n    this.$newLabelField.off('keyup change');\n    this.$newColorField.off('keyup change');\n    this.$dropdownBack.off('click');\n    this.$cancelButton.off('click');\n    this.$newLabelCreateButton.off('click');\n  }\n\n  addBinding() {\n    const self = this;\n\n    this.$colorSuggestions.on('click', function (e) {\n      const $this = $(this);\n      self.addColorValue(e, $this);\n    });\n\n    this.$newLabelField.on('keyup change', this.enableLabelCreateButton.bind(this));\n    this.$newColorField.on('keyup change', this.enableLabelCreateButton.bind(this));\n\n    this.$dropdownBack.on('click', this.resetForm.bind(this));\n\n    this.$cancelButton.on('click', function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      self.resetForm();\n      self.$dropdownBack.trigger('click');\n    });\n\n    this.$newLabelCreateButton.on('click', this.saveLabel.bind(this));\n  }\n\n  addColorValue(e, $this) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.$newColorField.val($this.data('color')).trigger('change');\n    this.$colorPreview\n      .css('background-color', $this.data('color'))\n      .parent()\n      .addClass('is-active');\n  }\n\n  enableLabelCreateButton() {\n    if (this.$newLabelField.val() !== '' && this.$newColorField.val() !== '') {\n      this.$newLabelError.hide();\n      this.$newLabelCreateButton.enable();\n    } else {\n      this.$newLabelCreateButton.disable();\n    }\n  }\n\n  resetForm() {\n    this.$newLabelField\n      .val('')\n      .trigger('change');\n\n    this.$newColorField\n      .val('')\n      .trigger('change');\n\n    this.$colorPreview\n      .css('background-color', '')\n      .parent()\n      .removeClass('is-active');\n  }\n\n  saveLabel(e) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    Api.newLabel(this.namespacePath, this.projectPath, {\n      title: this.$newLabelField.val(),\n      color: this.$newColorField.val(),\n    }, (label) => {\n      this.$newLabelCreateButton.enable();\n\n      if (label.message) {\n        let errors;\n\n        if (typeof label.message === 'string') {\n          errors = label.message;\n        } else {\n          errors = Object.keys(label.message).map(key =>\n            `${humanize(key)} ${label.message[key].join(', ')}`,\n          ).join('<br/>');\n        }\n\n        this.$newLabelError\n          .html(errors)\n          .show();\n      } else {\n        this.$dropdownBack.trigger('click');\n\n        $(document).trigger('created.label', label);\n      }\n    });\n  }\n}\n","/* Developer beware! Do not add logic to showButton or hideButton\n * that will force a reflow. Doing so will create a signficant performance\n * bottleneck for pages with large diffs. For a comprehensive list of what\n * causes reflows, visit https://gist.github.com/paulirish/5d52fb081b3570c81e3a\n */\n\nimport Cookies from 'js-cookie';\n\nconst LINE_NUMBER_CLASS = 'diff-line-num';\nconst UNFOLDABLE_LINE_CLASS = 'js-unfold';\nconst NO_COMMENT_CLASS = 'no-comment-btn';\nconst EMPTY_CELL_CLASS = 'empty-cell';\nconst OLD_LINE_CLASS = 'old_line';\nconst LINE_COLUMN_CLASSES = `.${LINE_NUMBER_CLASS}, .line_content`;\nconst DIFF_CONTAINER_SELECTOR = '.files';\nconst DIFF_EXPANDED_CLASS = 'diff-expanded';\n\nexport default {\n  init($diffFile) {\n    /* Caching is used only when the following members are *true*.\n     * This is because there are likely to be\n     * differently configured versions of diffs in the same session.\n     * However if these values are true, they\n     * will be true in all cases */\n\n    if (!this.userCanCreateNote) {\n      // data-can-create-note is an empty string when true, otherwise undefined\n      this.userCanCreateNote = $diffFile.closest(DIFF_CONTAINER_SELECTOR).data('canCreateNote') === '';\n    }\n\n    this.isParallelView = Cookies.get('diff_view') === 'parallel';\n\n    if (this.userCanCreateNote) {\n      $diffFile.on('mouseover', LINE_COLUMN_CLASSES, e => this.showButton(this.isParallelView, e))\n        .on('mouseleave', LINE_COLUMN_CLASSES, e => this.hideButton(this.isParallelView, e));\n    }\n  },\n\n  showButton(isParallelView, e) {\n    const buttonParentElement = this.getButtonParent(e.currentTarget, isParallelView);\n\n    if (!this.validateButtonParent(buttonParentElement)) return;\n\n    buttonParentElement.classList.add('is-over');\n    buttonParentElement.nextElementSibling.classList.add('is-over');\n  },\n\n  hideButton(isParallelView, e) {\n    const buttonParentElement = this.getButtonParent(e.currentTarget, isParallelView);\n\n    buttonParentElement.classList.remove('is-over');\n    buttonParentElement.nextElementSibling.classList.remove('is-over');\n  },\n\n  getButtonParent(hoveredElement, isParallelView) {\n    if (isParallelView) {\n      if (!hoveredElement.classList.contains(LINE_NUMBER_CLASS)) {\n        return hoveredElement.previousElementSibling;\n      }\n    } else if (!hoveredElement.classList.contains(OLD_LINE_CLASS)) {\n      return hoveredElement.parentNode.querySelector(`.${OLD_LINE_CLASS}`);\n    }\n    return hoveredElement;\n  },\n\n  validateButtonParent(buttonParentElement) {\n    return !buttonParentElement.classList.contains(EMPTY_CELL_CLASS) &&\n      !buttonParentElement.classList.contains(UNFOLDABLE_LINE_CLASS) &&\n      !buttonParentElement.classList.contains(NO_COMMENT_CLASS) &&\n      !buttonParentElement.parentNode.classList.contains(DIFF_EXPANDED_CLASS);\n  },\n};\n","/* eslint-disable func-names, prefer-arrow-callback, consistent-return, */\n\nimport $ from 'jquery';\nimport { __ } from './locale';\nimport axios from './lib/utils/axios_utils';\nimport createFlash from './flash';\nimport FilesCommentButton from './files_comment_button';\nimport imageDiffHelper from './image_diff/helpers/index';\nimport syntaxHighlight from './syntax_highlight';\n\nconst WRAPPER = '<div class=\"diff-content\"></div>';\nconst LOADING_HTML = '<i class=\"fa fa-spinner fa-spin\"></i>';\nconst ERROR_HTML = '<div class=\"nothing-here-block\"><i class=\"fa fa-warning\"></i> Could not load diff</div>';\nconst COLLAPSED_HTML = '<div class=\"nothing-here-block diff-collapsed\">This diff is collapsed. <button class=\"click-to-expand btn btn-link\">Click to expand it.</button></div>';\n\nexport default class SingleFileDiff {\n  constructor(file) {\n    this.file = file;\n    this.toggleDiff = this.toggleDiff.bind(this);\n    this.content = $('.diff-content', this.file);\n    this.$toggleIcon = $('.diff-toggle-caret', this.file);\n    this.diffForPath = this.content.find('[data-diff-for-path]').data('diffForPath');\n    this.isOpen = !this.diffForPath;\n    if (this.diffForPath) {\n      this.collapsedContent = this.content;\n      this.loadingContent = $(WRAPPER).addClass('loading').html(LOADING_HTML).hide();\n      this.content = null;\n      this.collapsedContent.after(this.loadingContent);\n      this.$toggleIcon.addClass('fa-caret-right');\n    } else {\n      this.collapsedContent = $(WRAPPER).html(COLLAPSED_HTML).hide();\n      this.content.after(this.collapsedContent);\n      this.$toggleIcon.addClass('fa-caret-down');\n    }\n\n    $('.js-file-title, .click-to-expand', this.file).on('click', (function (e) {\n      this.toggleDiff($(e.target));\n    }).bind(this));\n  }\n\n  toggleDiff($target, cb) {\n    if (!$target.hasClass('js-file-title') && !$target.hasClass('click-to-expand') && !$target.hasClass('diff-toggle-caret')) return;\n    this.isOpen = !this.isOpen;\n    if (!this.isOpen && !this.hasError) {\n      this.content.hide();\n      this.$toggleIcon.addClass('fa-caret-right').removeClass('fa-caret-down');\n      this.collapsedContent.show();\n      if (typeof gl.diffNotesCompileComponents !== 'undefined') {\n        gl.diffNotesCompileComponents();\n      }\n    } else if (this.content) {\n      this.collapsedContent.hide();\n      this.content.show();\n      this.$toggleIcon.addClass('fa-caret-down').removeClass('fa-caret-right');\n      if (typeof gl.diffNotesCompileComponents !== 'undefined') {\n        gl.diffNotesCompileComponents();\n      }\n    } else {\n      this.$toggleIcon.addClass('fa-caret-down').removeClass('fa-caret-right');\n      return this.getContentHTML(cb);\n    }\n  }\n\n  getContentHTML(cb) {\n    this.collapsedContent.hide();\n    this.loadingContent.show();\n\n    axios.get(this.diffForPath)\n      .then(({ data }) => {\n        this.loadingContent.hide();\n        if (data.html) {\n          this.content = $(data.html);\n          syntaxHighlight(this.content);\n        } else {\n          this.hasError = true;\n          this.content = $(ERROR_HTML);\n        }\n        this.collapsedContent.after(this.content);\n\n        if (typeof gl.diffNotesCompileComponents !== 'undefined') {\n          gl.diffNotesCompileComponents();\n        }\n\n        const $file = $(this.file);\n        FilesCommentButton.init($file);\n\n        const canCreateNote = $file.closest('.files').is('[data-can-create-note]');\n        imageDiffHelper.initImageDiff($file[0], canCreateNote);\n\n        if (cb) cb();\n      })\n      .catch(() => {\n        createFlash(__('An error occurred while retrieving diff'));\n      });\n  }\n}\n","import $ from 'jquery';\nimport axios from '~/lib/utils/axios_utils';\nimport flash from '~/flash';\nimport { __ } from '~/locale';\nimport { getLocationHash } from './lib/utils/url_utility';\nimport FilesCommentButton from './files_comment_button';\nimport SingleFileDiff from './single_file_diff';\nimport imageDiffHelper from './image_diff/helpers/index';\n\nconst UNFOLD_COUNT = 20;\nlet isBound = false;\n\nexport default class Diff {\n  constructor() {\n    const $diffFile = $('.files .diff-file');\n\n    $diffFile.each((index, file) => {\n      if (!$.data(file, 'singleFileDiff')) {\n        $.data(file, 'singleFileDiff', new SingleFileDiff(file));\n      }\n    });\n\n    const tab = document.getElementById('diffs');\n    if (!tab || (tab && tab.dataset && tab.dataset.isLocked !== '')) FilesCommentButton.init($diffFile);\n\n    const firstFile = $('.files').first().get(0);\n    const canCreateNote = firstFile && firstFile.hasAttribute('data-can-create-note');\n    $diffFile.each((index, file) => imageDiffHelper.initImageDiff(file, canCreateNote));\n\n    if (!isBound) {\n      $(document)\n        .on('click', '.js-unfold', this.handleClickUnfold.bind(this))\n        .on('click', '.diff-line-num a', this.handleClickLineNum.bind(this))\n        .on('mousedown', 'td.line_content.parallel', this.handleParallelLineDown.bind(this));\n      isBound = true;\n    }\n\n    if (getLocationHash()) {\n      this.highlightSelectedLine();\n    }\n\n    this.openAnchoredDiff();\n  }\n\n  handleClickUnfold(e) {\n    const $target = $(e.target);\n    const [oldLineNumber, newLineNumber] = this.lineNumbers($target.parent());\n    const offset = newLineNumber - oldLineNumber;\n    const bottom = $target.hasClass('js-unfold-bottom');\n    let since;\n    let to;\n    let unfold = true;\n\n    if (bottom) {\n      const lineNumber = newLineNumber + 1;\n      since = lineNumber;\n      to = lineNumber + UNFOLD_COUNT;\n    } else {\n      const lineNumber = newLineNumber - 1;\n      since = lineNumber - UNFOLD_COUNT;\n      to = lineNumber;\n\n      // make sure we aren't loading more than we need\n      const prevNewLine = this.lineNumbers($target.parent().prev())[1];\n      if (since <= prevNewLine + 1) {\n        since = prevNewLine + 1;\n        unfold = false;\n      }\n    }\n\n    const file = $target.parents('.diff-file');\n    const link = file.data('blobDiffPath');\n    const view = file.data('view');\n\n    const params = { since, to, bottom, offset, unfold, view };\n    axios.get(link, { params })\n    .then(({ data }) => $target.parent().replaceWith(data))\n    .catch(() => flash(__('An error occurred while loading diff')));\n  }\n\n  openAnchoredDiff(cb) {\n    const locationHash = getLocationHash();\n    const anchoredDiff = locationHash && locationHash.split('_')[0];\n\n    if (!anchoredDiff) return;\n\n    const diffTitle = $(`#${anchoredDiff}`);\n    const diffFile = diffTitle.closest('.diff-file');\n    const nothingHereBlock = $('.nothing-here-block:visible', diffFile);\n    if (nothingHereBlock.length) {\n      const clickTarget = $('.js-file-title, .click-to-expand', diffFile);\n      diffFile.data('singleFileDiff').toggleDiff(clickTarget, () => {\n        this.highlightSelectedLine();\n        if (cb) cb();\n      });\n    } else if (cb) {\n      cb();\n    }\n  }\n\n  handleClickLineNum(e) {\n    const hash = $(e.currentTarget).attr('href');\n    e.preventDefault();\n    if (window.history.pushState) {\n      window.history.pushState(null, null, hash);\n    } else {\n      window.location.hash = hash;\n    }\n    this.highlightSelectedLine();\n  }\n  // eslint-disable-next-line class-methods-use-this\n  handleParallelLineDown(e) {\n    const line = $(e.currentTarget);\n    const table = line.closest('table');\n\n    table.removeClass('left-side-selected right-side-selected');\n\n    const lineClass = ['left-side', 'right-side'].filter(name => line.hasClass(name))[0];\n    if (lineClass) {\n      table.addClass(`${lineClass}-selected`);\n    }\n  }\n  // eslint-disable-next-line class-methods-use-this\n  diffViewType() {\n    return $('.inline-parallel-buttons a.active').data('viewType');\n  }\n  // eslint-disable-next-line class-methods-use-this\n  lineNumbers(line) {\n    const children = line.find('.diff-line-num').toArray();\n    if (children.length !== 2) {\n      return [0, 0];\n    }\n    return children.map(elm => parseInt($(elm).data('linenumber'), 10) || 0);\n  }\n  // eslint-disable-next-line class-methods-use-this\n  highlightSelectedLine() {\n    const hash = getLocationHash();\n    const $diffFiles = $('.diff-file');\n    $diffFiles.find('.hll').removeClass('hll');\n\n    if (hash) {\n      $diffFiles\n        .find(`tr#${hash}:not(.match) td, td#${hash}, td[data-line-code=\"${hash}\"]`)\n        .addClass('hll');\n    }\n  }\n}\n","/* eslint-disable class-methods-use-this, no-unused-vars */\n\nimport $ from 'jquery';\n\nexport default class TemplateSelector {\n  constructor({ dropdown, data, pattern, wrapper, editor, $input } = {}) {\n    this.pattern = pattern;\n    this.editor = editor;\n    this.dropdown = dropdown;\n    this.$dropdownContainer = wrapper;\n    this.$filenameInput = $input || $('#file_name');\n    this.$dropdownIcon = $('.fa-chevron-down', dropdown);\n\n    this.initDropdown(dropdown, data);\n    this.listenForFilenameInput();\n    this.renderMatchedDropdown();\n    this.initAutosizeUpdateEvent();\n  }\n\n  initDropdown(dropdown, data) {\n    return $(dropdown).glDropdown({\n      data,\n      filterable: true,\n      selectable: true,\n      toggleLabel: item => item.name,\n      search: {\n        fields: ['name'],\n      },\n      clicked: options => this.fetchFileTemplate(options),\n      text: item => item.name,\n    });\n  }\n\n  initAutosizeUpdateEvent() {\n    this.autosizeUpdateEvent = document.createEvent('Event');\n    this.autosizeUpdateEvent.initEvent('autosize:update', true, false);\n  }\n\n  listenForFilenameInput() {\n    return this.$filenameInput.on('keyup blur', e => this.renderMatchedDropdown(e));\n  }\n\n  renderMatchedDropdown() {\n    if (!this.$filenameInput.length) {\n      return null;\n    }\n\n    const filenameMatches = this.pattern.test(this.$filenameInput.val().trim());\n\n    if (!filenameMatches) {\n      return this.$dropdownContainer.addClass('hidden');\n    }\n    return this.$dropdownContainer.removeClass('hidden');\n  }\n\n  fetchFileTemplate(options) {\n    const { e } = options;\n    const item = options.selectedObj;\n\n    e.preventDefault();\n    return this.requestFile(item);\n  }\n\n  requestFile(item) {\n    // This `requestFile` method is an abstract method that should\n    // be added by all subclasses.\n  }\n\n  // To be implemented on the extending class\n  // e.g. Api.gitlabCiYml(query.name, file => this.setEditorContent(file));\n\n  setEditorContent(file, { skipFocus } = {}) {\n    if (!file) return;\n\n    const newValue = file.content;\n\n    this.editor.setValue(newValue, 1);\n\n    if (!skipFocus) this.editor.focus();\n\n    if (this.editor instanceof $) {\n      this.editor.get(0).dispatchEvent(this.autosizeUpdateEvent);\n    }\n  }\n\n  startLoadingSpinner() {\n    this.$dropdownIcon\n      .addClass('fa-spinner fa-spin')\n      .removeClass('fa-chevron-down');\n  }\n\n  stopLoadingSpinner() {\n    this.$dropdownIcon\n      .addClass('fa-chevron-down')\n      .removeClass('fa-spinner fa-spin');\n  }\n}\n","/* eslint-disable no-useless-return, max-len */\n\nimport $ from 'jquery';\nimport Api from '../api';\nimport TemplateSelector from '../blob/template_selector';\n\nexport default class IssuableTemplateSelector extends TemplateSelector {\n  constructor(...args) {\n    super(...args);\n    this.projectPath = this.dropdown.data('projectPath');\n    this.namespacePath = this.dropdown.data('namespacePath');\n    this.issuableType = this.$dropdownContainer.data('issuableType');\n    this.titleInput = $(`#${this.issuableType}_title`);\n\n    const initialQuery = {\n      name: this.dropdown.data('selected'),\n    };\n\n    if (initialQuery.name) this.requestFile(initialQuery);\n\n    $('.reset-template', this.dropdown.parent()).on('click', () => {\n      this.setInputValueToTemplateContent();\n    });\n\n    $('.no-template', this.dropdown.parent()).on('click', () => {\n      this.currentTemplate.content = '';\n      this.setInputValueToTemplateContent();\n      $('.dropdown-toggle-text', this.dropdown).text('Choose a template');\n    });\n  }\n\n  requestFile(query) {\n    this.startLoadingSpinner();\n    Api.issueTemplate(this.namespacePath, this.projectPath, query.name, this.issuableType, (err, currentTemplate) => {\n      this.currentTemplate = currentTemplate;\n      this.stopLoadingSpinner();\n      if (err) return; // Error handled by global AJAX error handler\n      this.setInputValueToTemplateContent();\n    });\n    return;\n  }\n\n  setInputValueToTemplateContent() {\n    // `this.setEditorContent` sets the value of the description input field\n    // to the content of the template selected.\n    if (this.titleInput.val() === '') {\n      // If the title has not yet been set, focus the title input and\n      // skip focusing the description input by setting `true` as the\n      // `skipFocus` option to `setEditorContent`.\n      this.setEditorContent(this.currentTemplate, { skipFocus: true });\n      this.titleInput.focus();\n    } else {\n      this.setEditorContent(this.currentTemplate, { skipFocus: false });\n    }\n    return;\n  }\n}\n","/* eslint-disable no-new, class-methods-use-this */\n\nimport $ from 'jquery';\nimport IssuableTemplateSelector from './issuable_template_selector';\n\nexport default class IssuableTemplateSelectors {\n  constructor({ $dropdowns, editor } = {}) {\n    this.$dropdowns = $dropdowns || $('.js-issuable-selector');\n    this.editor = editor || this.initEditor();\n\n    this.$dropdowns.each((i, dropdown) => {\n      const $dropdown = $(dropdown);\n      new IssuableTemplateSelector({\n        pattern: /(\\.md)/,\n        data: $dropdown.data('data'),\n        wrapper: $dropdown.closest('.js-issuable-selector-wrap'),\n        dropdown: $dropdown,\n        editor: this.editor,\n      });\n    });\n  }\n\n  initEditor() {\n    const editor = $('.markdown-area');\n    // Proxy ace-editor's .setValue to jQuery's .val\n    editor.setValue = editor.val;\n    editor.getValue = editor.val;\n    return editor;\n  }\n}\n","import $ from 'jquery';\n\nlet instanceCount = 0;\n\nclass AutoWidthDropdownSelect {\n  constructor(selectElement) {\n    this.$selectElement = $(selectElement);\n    this.dropdownClass = `js-auto-width-select-dropdown-${instanceCount}`;\n    instanceCount += 1;\n  }\n\n  init() {\n    const { dropdownClass } = this;\n    this.$selectElement.select2({\n      dropdownCssClass: dropdownClass,\n      ...AutoWidthDropdownSelect.selectOptions(this.dropdownClass),\n    });\n\n    return this;\n  }\n\n  static selectOptions(dropdownClass) {\n    return {\n      dropdownCss() {\n        let resultantWidth = 'auto';\n        const $dropdown = $(`.${dropdownClass}`);\n\n        // We have to look at the parent because\n        // `offsetParent` on a `display: none;` is `null`\n        const offsetParentWidth = $(this).parent().offsetParent().width();\n        // Reset any width to let it naturally flow\n        $dropdown.css('width', 'auto');\n        if ($dropdown.outerWidth(false) > offsetParentWidth) {\n          resultantWidth = offsetParentWidth;\n        }\n\n        return {\n          width: resultantWidth,\n          maxWidth: offsetParentWidth,\n        };\n      },\n    };\n  }\n}\n\nexport default AutoWidthDropdownSelect;\n","/* eslint-disable no-new, no-unused-vars, consistent-return, no-else-return */\n/* global GitLab */\n\nimport $ from 'jquery';\nimport Pikaday from 'pikaday';\nimport Autosave from './autosave';\nimport UsersSelect from './users_select';\nimport GfmAutoComplete from './gfm_auto_complete';\nimport ZenMode from './zen_mode';\nimport AutoWidthDropdownSelect from './issuable/auto_width_dropdown_select';\nimport { parsePikadayDate, pikadayToString } from './lib/utils/datefix';\n\nexport default class IssuableForm {\n  constructor(form) {\n    this.form = form;\n    this.toggleWip = this.toggleWip.bind(this);\n    this.renderWipExplanation = this.renderWipExplanation.bind(this);\n    this.resetAutosave = this.resetAutosave.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.wipRegex = /^\\s*(\\[WIP\\]\\s*|WIP:\\s*|WIP\\s+)+\\s*/i;\n\n    new GfmAutoComplete(gl.GfmAutoComplete && gl.GfmAutoComplete.dataSources).setup();\n    new UsersSelect();\n    new ZenMode();\n\n    this.titleField = this.form.find('input[name*=\"[title]\"]');\n    this.descriptionField = this.form.find('textarea[name*=\"[description]\"]');\n    if (!(this.titleField.length && this.descriptionField.length)) {\n      return;\n    }\n\n    this.initAutosave();\n    this.form.on('submit', this.handleSubmit);\n    this.form.on('click', '.btn-cancel', this.resetAutosave);\n    this.initWip();\n\n    const $issuableDueDate = $('#issuable-due-date');\n\n    if ($issuableDueDate.length) {\n      const calendar = new Pikaday({\n        field: $issuableDueDate.get(0),\n        theme: 'gitlab-theme animate-picker',\n        format: 'yyyy-mm-dd',\n        container: $issuableDueDate.parent().get(0),\n        parse: dateString => parsePikadayDate(dateString),\n        toString: date => pikadayToString(date),\n        onSelect: dateText => $issuableDueDate.val(calendar.toString(dateText)),\n      });\n      calendar.setDate(parsePikadayDate($issuableDueDate.val()));\n    }\n\n    this.$targetBranchSelect = $('.js-target-branch-select', this.form);\n\n    if (this.$targetBranchSelect.length) {\n      this.initTargetBranchDropdown();\n    }\n  }\n\n  initAutosave() {\n    new Autosave(this.titleField, [document.location.pathname, document.location.search, 'title']);\n    return new Autosave(this.descriptionField, [document.location.pathname, document.location.search, 'description']);\n  }\n\n  handleSubmit() {\n    return this.resetAutosave();\n  }\n\n  resetAutosave() {\n    this.titleField.data('autosave').reset();\n    return this.descriptionField.data('autosave').reset();\n  }\n\n  initWip() {\n    this.$wipExplanation = this.form.find('.js-wip-explanation');\n    this.$noWipExplanation = this.form.find('.js-no-wip-explanation');\n    if (!(this.$wipExplanation.length && this.$noWipExplanation.length)) {\n      return;\n    }\n    this.form.on('click', '.js-toggle-wip', this.toggleWip);\n    this.titleField.on('keyup blur', this.renderWipExplanation);\n    return this.renderWipExplanation();\n  }\n\n  workInProgress() {\n    return this.wipRegex.test(this.titleField.val());\n  }\n\n  renderWipExplanation() {\n    if (this.workInProgress()) {\n      this.$wipExplanation.show();\n      return this.$noWipExplanation.hide();\n    } else {\n      this.$wipExplanation.hide();\n      return this.$noWipExplanation.show();\n    }\n  }\n\n  toggleWip(event) {\n    event.preventDefault();\n    if (this.workInProgress()) {\n      this.removeWip();\n    } else {\n      this.addWip();\n    }\n    return this.renderWipExplanation();\n  }\n\n  removeWip() {\n    return this.titleField.val(this.titleField.val().replace(this.wipRegex, ''));\n  }\n\n  addWip() {\n    this.titleField.val(`WIP: ${(this.titleField.val())}`);\n  }\n\n  initTargetBranchDropdown() {\n    this.$targetBranchSelect.select2({\n      ...AutoWidthDropdownSelect.selectOptions('js-target-branch-select'),\n      ajax: {\n        url: this.$targetBranchSelect.data('endpoint'),\n        dataType: 'JSON',\n        quietMillis: 250,\n        data(search) {\n          return {\n            search,\n          };\n        },\n        results(data) {\n          return {\n            // `data` keys are translated so we can't just access them with a string based key\n            results: data[Object.keys(data)[0]].map(name => ({\n              id: name,\n              text: name,\n            })),\n          };\n        },\n      },\n      initSelection(el, callback) {\n        const val = el.val();\n\n        callback({\n          id: val,\n          text: val,\n        });\n      },\n    });\n  }\n}\n","/* eslint-disable no-new */\n\nimport $ from 'jquery';\nimport Diff from '~/diff';\nimport ShortcutsNavigation from '~/shortcuts_navigation';\nimport GLForm from '~/gl_form';\nimport IssuableForm from '~/issuable_form';\nimport LabelsSelect from '~/labels_select';\nimport MilestoneSelect from '~/milestone_select';\nimport IssuableTemplateSelectors from '~/templates/issuable_template_selectors';\n\nexport default () => {\n  new Diff();\n  new ShortcutsNavigation();\n  new GLForm($('.merge-request-form'));\n  new IssuableForm($('.merge-request-form'));\n  new LabelsSelect();\n  new MilestoneSelect();\n  new IssuableTemplateSelectors();\n};\n","\nexport const pad = (val, len = 2) => (`0${val}`).slice(-len);\n\n/**\n * Formats dates in Pickaday\n * @param {String} dateString Date in yyyy-mm-dd format\n * @return {Date} UTC format\n */\nexport const parsePikadayDate = (dateString) => {\n  const parts = dateString.split('-');\n  const year = parseInt(parts[0], 10);\n  const month = parseInt(parts[1] - 1, 10);\n  const day = parseInt(parts[2], 10);\n\n  return new Date(year, month, day);\n};\n\n/**\n * Used `onSelect` method in pickaday\n * @param {Date} date UTC format\n * @return {String} Date formated in yyyy-mm-dd\n */\nexport const pikadayToString = (date) => {\n  const day = pad(date.getDate());\n  const month = pad(date.getMonth() + 1);\n  const year = date.getFullYear();\n\n  return `${year}-${month}-${day}`;\n};\n","import $ from 'jquery';\nimport Dropzone from 'dropzone';\nimport _ from 'underscore';\nimport './preview_markdown';\nimport csrf from './lib/utils/csrf';\nimport axios from './lib/utils/axios_utils';\n\nDropzone.autoDiscover = false;\n\nexport default function dropzoneInput(form) {\n  const divHover = '<div class=\"div-dropzone-hover\"></div>';\n  const iconPaperclip = '<i class=\"fa fa-paperclip div-dropzone-icon\"></i>';\n  const $attachButton = form.find('.button-attach-file');\n  const $attachingFileMessage = form.find('.attaching-file-message');\n  const $cancelButton = form.find('.button-cancel-uploading-files');\n  const $retryLink = form.find('.retry-uploading-link');\n  const $uploadProgress = form.find('.uploading-progress');\n  const $uploadingErrorContainer = form.find('.uploading-error-container');\n  const $uploadingErrorMessage = form.find('.uploading-error-message');\n  const $uploadingProgressContainer = form.find('.uploading-progress-container');\n  const uploadsPath = window.uploads_path || null;\n  const maxFileSize = gon.max_file_size || 10;\n  const formTextarea = form.find('.js-gfm-input');\n  let handlePaste;\n  let pasteText;\n  let addFileToForm;\n  let updateAttachingMessage;\n  let isImage;\n  let getFilename;\n  let uploadFile;\n\n  formTextarea.wrap('<div class=\"div-dropzone\"></div>');\n  formTextarea.on('paste', event => handlePaste(event));\n\n  // Add dropzone area to the form.\n  const $mdArea = formTextarea.closest('.md-area');\n  form.setupMarkdownPreview();\n  const $formDropzone = form.find('.div-dropzone');\n  $formDropzone.parent().addClass('div-dropzone-wrapper');\n  $formDropzone.append(divHover);\n  $formDropzone.find('.div-dropzone-hover').append(iconPaperclip);\n\n  if (!uploadsPath) {\n    $formDropzone.addClass('js-invalid-dropzone');\n    return;\n  }\n\n  const dropzone = $formDropzone.dropzone({\n    url: uploadsPath,\n    dictDefaultMessage: '',\n    clickable: true,\n    paramName: 'file',\n    maxFilesize: maxFileSize,\n    uploadMultiple: false,\n    headers: csrf.headers,\n    previewContainer: false,\n    processing: () => $('.div-dropzone-alert').alert('close'),\n    dragover: () => {\n      $mdArea.addClass('is-dropzone-hover');\n      form.find('.div-dropzone-hover').css('opacity', 0.7);\n    },\n    dragleave: () => {\n      $mdArea.removeClass('is-dropzone-hover');\n      form.find('.div-dropzone-hover').css('opacity', 0);\n    },\n    drop: () => {\n      $mdArea.removeClass('is-dropzone-hover');\n      form.find('.div-dropzone-hover').css('opacity', 0);\n      formTextarea.focus();\n    },\n    success(header, response) {\n      const processingFileCount = this.getQueuedFiles().length + this.getUploadingFiles().length;\n      const shouldPad = processingFileCount >= 1;\n\n      pasteText(response.link.markdown, shouldPad);\n      // Show 'Attach a file' link only when all files have been uploaded.\n      if (!processingFileCount) $attachButton.removeClass('hide');\n      addFileToForm(response.link.url);\n    },\n    error: (file, errorMessage = 'Attaching the file failed.', xhr) => {\n      // If 'error' event is fired by dropzone, the second parameter is error message.\n      // If the 'errorMessage' parameter is empty, the default error message is set.\n      // If the 'error' event is fired by backend (xhr) error response, the third parameter is\n      // xhr object (xhr.responseText is error message).\n      // On error we hide the 'Attach' and 'Cancel' buttons\n      // and show an error.\n\n      // If there's xhr error message, let's show it instead of dropzone's one.\n      const message = xhr ? xhr.responseText : errorMessage;\n\n      $uploadingErrorContainer.removeClass('hide');\n      $uploadingErrorMessage.html(message);\n      $attachButton.addClass('hide');\n      $cancelButton.addClass('hide');\n    },\n    totaluploadprogress(totalUploadProgress) {\n      updateAttachingMessage(this.files, $attachingFileMessage);\n      $uploadProgress.text(`${Math.round(totalUploadProgress)}%`);\n    },\n    sending: () => {\n      // DOM elements already exist.\n      // Instead of dynamically generating them,\n      // we just either hide or show them.\n      $attachButton.addClass('hide');\n      $uploadingErrorContainer.addClass('hide');\n      $uploadingProgressContainer.removeClass('hide');\n      $cancelButton.removeClass('hide');\n    },\n    removedfile: () => {\n      $attachButton.removeClass('hide');\n      $cancelButton.addClass('hide');\n      $uploadingProgressContainer.addClass('hide');\n      $uploadingErrorContainer.addClass('hide');\n    },\n    queuecomplete: () => {\n      $('.dz-preview').remove();\n      $('.markdown-area').trigger('input');\n\n      $uploadingProgressContainer.addClass('hide');\n      $cancelButton.addClass('hide');\n    },\n  });\n\n  const child = $(dropzone[0]).children('textarea');\n\n  // removeAllFiles(true) stops uploading files (if any)\n  // and remove them from dropzone files queue.\n  $cancelButton.on('click', (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    Dropzone.forElement($formDropzone.get(0)).removeAllFiles(true);\n  });\n\n  // If 'error' event is fired, we store a failed files,\n  // clear dropzone files queue, change status of failed files to undefined,\n  // and add that files to the dropzone files queue again.\n  // addFile() adds file to dropzone files queue and upload it.\n  $retryLink.on('click', (e) => {\n    const dropzoneInstance = Dropzone.forElement(e.target.closest('.js-main-target-form').querySelector('.div-dropzone'));\n    const failedFiles = dropzoneInstance.files;\n\n    e.preventDefault();\n\n    // 'true' parameter of removeAllFiles() cancels\n    // uploading of files that are being uploaded at the moment.\n    dropzoneInstance.removeAllFiles(true);\n\n    failedFiles.map((failedFile) => {\n      const file = failedFile;\n\n      if (file.status === Dropzone.ERROR) {\n        file.status = undefined;\n        file.accepted = undefined;\n      }\n\n      return dropzoneInstance.addFile(file);\n    });\n  });\n  // eslint-disable-next-line consistent-return\n  handlePaste = (event) => {\n    const pasteEvent = event.originalEvent;\n    if (pasteEvent.clipboardData && pasteEvent.clipboardData.items) {\n      const image = isImage(pasteEvent);\n      if (image) {\n        event.preventDefault();\n        const filename = getFilename(pasteEvent) || 'image.png';\n        const text = `{{${filename}}}`;\n        pasteText(text);\n        return uploadFile(image.getAsFile(), filename);\n      }\n    }\n  };\n\n  isImage = (data) => {\n    let i = 0;\n    while (i < data.clipboardData.items.length) {\n      const item = data.clipboardData.items[i];\n      if (item.type.indexOf('image') !== -1) {\n        return item;\n      }\n      i += 1;\n    }\n    return false;\n  };\n\n  pasteText = (text, shouldPad) => {\n    let formattedText = text;\n    if (shouldPad) {\n      formattedText += '\\n\\n';\n    }\n    const textarea = child.get(0);\n    const caretStart = textarea.selectionStart;\n    const caretEnd = textarea.selectionEnd;\n    const textEnd = $(child).val().length;\n    const beforeSelection = $(child).val().substring(0, caretStart);\n    const afterSelection = $(child).val().substring(caretEnd, textEnd);\n    $(child).val(beforeSelection + formattedText + afterSelection);\n    textarea.setSelectionRange(caretStart + formattedText.length, caretEnd + formattedText.length);\n    textarea.style.height = `${textarea.scrollHeight}px`;\n    formTextarea.get(0).dispatchEvent(new Event('input'));\n    return formTextarea.trigger('input');\n  };\n\n  addFileToForm = (path) => {\n    $(form).append(`<input type=\"hidden\" name=\"files[]\" value=\"${_.escape(path)}\">`);\n  };\n\n  getFilename = (e) => {\n    let value;\n    if (window.clipboardData && window.clipboardData.getData) {\n      value = window.clipboardData.getData('Text');\n    } else if (e.clipboardData && e.clipboardData.getData) {\n      value = e.clipboardData.getData('text/plain');\n    }\n    value = value.split('\\r');\n    return value[0];\n  };\n\n  const showSpinner = () => $uploadingProgressContainer.removeClass('hide');\n\n  const closeSpinner = () => $uploadingProgressContainer.addClass('hide');\n\n  const showError = (message) => {\n    $uploadingErrorContainer.removeClass('hide');\n    $uploadingErrorMessage.html(message);\n  };\n\n  const closeAlertMessage = () => form.find('.div-dropzone-alert').alert('close');\n\n  const insertToTextArea = (filename, url) => {\n    const $child = $(child);\n    $child.val((index, val) => val.replace(`{{${filename}}}`, url));\n\n    $child.trigger('change');\n  };\n\n  uploadFile = (item, filename) => {\n    const formData = new FormData();\n    formData.append('file', item, filename);\n\n    showSpinner();\n    closeAlertMessage();\n\n    axios.post(uploadsPath, formData)\n      .then(({ data }) => {\n        const md = data.link.markdown;\n\n        insertToTextArea(filename, md);\n        closeSpinner();\n      })\n      .catch((e) => {\n        showError(e.response.data.message);\n        closeSpinner();\n      });\n  };\n\n  updateAttachingMessage = (files, messageContainer) => {\n    let attachingMessage;\n    const filesCount = files.filter(file => file.status === 'uploading' || file.status === 'queued').length;\n\n    // Dinamycally change uploading files text depending on files number in\n    // dropzone files queue.\n    if (filesCount > 1) {\n      attachingMessage = `Attaching ${filesCount} files -`;\n    } else {\n      attachingMessage = 'Attaching a file -';\n    }\n\n    messageContainer.text(attachingMessage);\n  };\n\n  form.find('.markdown-selector').click(function onMarkdownClick(e) {\n    e.preventDefault();\n    $(this).closest('.gfm-form').find('.div-dropzone').click();\n    formTextarea.focus();\n  });\n}\n","/* eslint-disable func-names, no-var, no-param-reassign, quotes, one-var, one-var-declaration-per-line, operator-assignment, no-else-return, prefer-template, prefer-arrow-callback, max-len, consistent-return, no-unused-vars, max-len */\nimport $ from 'jquery';\nimport { insertText } from '~/lib/utils/common_utils';\n\nfunction selectedText(text, textarea) {\n  return text.substring(textarea.selectionStart, textarea.selectionEnd);\n}\n\nfunction lineBefore(text, textarea) {\n  var split;\n  split = text.substring(0, textarea.selectionStart).trim().split('\\n');\n  return split[split.length - 1];\n}\n\nfunction lineAfter(text, textarea) {\n  return text.substring(textarea.selectionEnd).trim().split('\\n')[0];\n}\n\nfunction blockTagText(text, textArea, blockTag, selected) {\n  const before = lineBefore(text, textArea);\n  const after = lineAfter(text, textArea);\n  if (before === blockTag && after === blockTag) {\n    // To remove the block tag we have to select the line before & after\n    if (blockTag != null) {\n      textArea.selectionStart = textArea.selectionStart - (blockTag.length + 1);\n      textArea.selectionEnd = textArea.selectionEnd + (blockTag.length + 1);\n    }\n    return selected;\n  } else {\n    return blockTag + \"\\n\" + selected + \"\\n\" + blockTag;\n  }\n}\n\nfunction moveCursor(textArea, tag, wrapped, removedLastNewLine) {\n  var pos;\n  if (!textArea.setSelectionRange) {\n    return;\n  }\n  if (textArea.selectionStart === textArea.selectionEnd) {\n    if (wrapped) {\n      pos = textArea.selectionStart - tag.length;\n    } else {\n      pos = textArea.selectionStart;\n    }\n\n    if (removedLastNewLine) {\n      pos -= 1;\n    }\n\n    return textArea.setSelectionRange(pos, pos);\n  }\n}\n\nexport function insertMarkdownText(textArea, text, tag, blockTag, selected, wrap) {\n  var textToInsert, inserted, selectedSplit, startChar, removedLastNewLine, removedFirstNewLine, currentLineEmpty, lastNewLine;\n  removedLastNewLine = false;\n  removedFirstNewLine = false;\n  currentLineEmpty = false;\n\n  // Remove the first newline\n  if (selected.indexOf('\\n') === 0) {\n    removedFirstNewLine = true;\n    selected = selected.replace(/\\n+/, '');\n  }\n\n  // Remove the last newline\n  if (textArea.selectionEnd - textArea.selectionStart > selected.replace(/\\n$/, '').length) {\n    removedLastNewLine = true;\n    selected = selected.replace(/\\n$/, '');\n  }\n\n  selectedSplit = selected.split('\\n');\n\n  if (!wrap) {\n    lastNewLine = textArea.value.substr(0, textArea.selectionStart).lastIndexOf('\\n');\n\n    // Check whether the current line is empty or consists only of spaces(=handle as empty)\n    if (/^\\s*$/.test(textArea.value.substring(lastNewLine, textArea.selectionStart))) {\n      currentLineEmpty = true;\n    }\n  }\n\n  startChar = !wrap && !currentLineEmpty && textArea.selectionStart > 0 ? '\\n' : '';\n\n  if (selectedSplit.length > 1 && (!wrap || (blockTag != null && blockTag !== ''))) {\n    if (blockTag != null && blockTag !== '') {\n      textToInsert = blockTagText(text, textArea, blockTag, selected);\n    } else {\n      textToInsert = selectedSplit.map(function(val) {\n        if (val.indexOf(tag) === 0) {\n          return \"\" + (val.replace(tag, ''));\n        } else {\n          return \"\" + tag + val;\n        }\n      }).join('\\n');\n    }\n  } else {\n    textToInsert = \"\" + startChar + tag + selected + (wrap ? tag : ' ');\n  }\n\n  if (removedFirstNewLine) {\n    textToInsert = '\\n' + textToInsert;\n  }\n\n  if (removedLastNewLine) {\n    textToInsert += '\\n';\n  }\n\n  insertText(textArea, textToInsert);\n  return moveCursor(textArea, tag, wrap, removedLastNewLine);\n}\n\nfunction updateText(textArea, tag, blockTag, wrap) {\n  var $textArea, selected, text;\n  $textArea = $(textArea);\n  textArea = $textArea.get(0);\n  text = $textArea.val();\n  selected = selectedText(text, textArea);\n  $textArea.focus();\n  return insertMarkdownText(textArea, text, tag, blockTag, selected, wrap);\n}\n\nfunction replaceRange(s, start, end, substitute) {\n  return s.substring(0, start) + substitute + s.substring(end);\n}\n\nexport function addMarkdownListeners(form) {\n  return $('.js-md', form).off('click').on('click', function() {\n    const $this = $(this);\n    return updateText($this.closest('.md-area').find('textarea'), $this.data('mdTag'), $this.data('mdBlock'), !$this.data('mdPrepend'));\n  });\n}\n\nexport function removeMarkdownListeners(form) {\n  return $('.js-md', form).off('click');\n}\n","import $ from 'jquery';\nimport autosize from 'autosize';\nimport GfmAutoComplete, * as GFMConfig from './gfm_auto_complete';\nimport dropzoneInput from './dropzone_input';\nimport { addMarkdownListeners, removeMarkdownListeners } from './lib/utils/text_markdown';\n\nexport default class GLForm {\n  constructor(form, enableGFM = {}) {\n    this.form = form;\n    this.textarea = this.form.find('textarea.js-gfm-input');\n    this.enableGFM = Object.assign({}, GFMConfig.defaultAutocompleteConfig, enableGFM);\n    // Disable autocomplete for keywords which do not have dataSources available\n    const dataSources = (gl.GfmAutoComplete && gl.GfmAutoComplete.dataSources) || {};\n    Object.keys(this.enableGFM).forEach(item => {\n      if (item !== 'emojis') {\n        this.enableGFM[item] = !!dataSources[item];\n      }\n    });\n    // Before we start, we should clean up any previous data for this form\n    this.destroy();\n    // Setup the form\n    this.setupForm();\n    this.form.data('glForm', this);\n  }\n\n  destroy() {\n    // Clean form listeners\n    this.clearEventListeners();\n    if (this.autoComplete) {\n      this.autoComplete.destroy();\n    }\n    this.form.data('glForm', null);\n  }\n\n  setupForm() {\n    const isNewForm = this.form.is(':not(.gfm-form)');\n    this.form.removeClass('js-new-note-form');\n    if (isNewForm) {\n      this.form.find('.div-dropzone').remove();\n      this.form.addClass('gfm-form');\n      // remove notify commit author checkbox for non-commit notes\n      gl.utils.disableButtonIfEmptyField(this.form.find('.js-note-text'), this.form.find('.js-comment-button, .js-note-new-discussion'));\n      this.autoComplete = new GfmAutoComplete(gl.GfmAutoComplete && gl.GfmAutoComplete.dataSources);\n      this.autoComplete.setup(this.form.find('.js-gfm-input'), this.enableGFM);\n      dropzoneInput(this.form);\n      autosize(this.textarea);\n    }\n    // form and textarea event listeners\n    this.addEventListeners();\n    addMarkdownListeners(this.form);\n    // hide discard button\n    this.form.find('.js-note-discard').hide();\n    this.form.show();\n    if (this.isAutosizeable) this.setupAutosize();\n  }\n\n  setupAutosize() {\n    this.textarea.off('autosize:resized')\n      .on('autosize:resized', this.setHeightData.bind(this));\n\n    this.textarea.off('mouseup.autosize')\n      .on('mouseup.autosize', this.destroyAutosize.bind(this));\n\n    setTimeout(() => {\n      autosize(this.textarea);\n      this.textarea.css('resize', 'vertical');\n    }, 0);\n  }\n\n  setHeightData() {\n    this.textarea.data('height', this.textarea.outerHeight());\n  }\n\n  destroyAutosize() {\n    const outerHeight = this.textarea.outerHeight();\n\n    if (this.textarea.data('height') === outerHeight) return;\n\n    autosize.destroy(this.textarea);\n\n    this.textarea.data('height', outerHeight);\n    this.textarea.outerHeight(outerHeight);\n    this.textarea.css('max-height', window.outerHeight);\n  }\n\n  clearEventListeners() {\n    this.textarea.off('focus');\n    this.textarea.off('blur');\n    removeMarkdownListeners(this.form);\n  }\n\n  addEventListeners() {\n    this.textarea.on('focus', function focusTextArea() {\n      $(this).closest('.md-area').addClass('is-focused');\n    });\n    this.textarea.on('blur', function blurTextArea() {\n      $(this).closest('.md-area').removeClass('is-focused');\n    });\n  }\n}\n","/* eslint-disable func-names, wrap-iife, prefer-arrow-callback, no-unused-vars, consistent-return, camelcase, comma-dangle, max-len, class-methods-use-this */\n\n// Zen Mode (full screen) textarea\n//\n/*= provides zen_mode:enter */\n/*= provides zen_mode:leave */\n\nimport $ from 'jquery';\nimport 'vendor/jquery.scrollTo';\nimport Dropzone from 'dropzone';\nimport Mousetrap from 'mousetrap';\nimport 'mousetrap/plugins/pause/mousetrap-pause';\n\nDropzone.autoDiscover = false;\n\n//\n// ### Events\n//\n// `zen_mode:enter`\n//\n// Fired when the \"Edit in fullscreen\" link is clicked.\n//\n// **Synchronicity** Sync\n// **Bubbles** Yes\n// **Cancelable** No\n// **Target** a.js-zen-enter\n//\n// `zen_mode:leave`\n//\n// Fired when the \"Leave Fullscreen\" link is clicked.\n//\n// **Synchronicity** Sync\n// **Bubbles** Yes\n// **Cancelable** No\n// **Target** a.js-zen-leave\n//\n\nexport default class ZenMode {\n  constructor() {\n    this.active_backdrop = null;\n    this.active_textarea = null;\n    $(document).on('click', '.js-zen-enter', function(e) {\n      e.preventDefault();\n      return $(e.currentTarget).trigger('zen_mode:enter');\n    });\n    $(document).on('click', '.js-zen-leave', function(e) {\n      e.preventDefault();\n      return $(e.currentTarget).trigger('zen_mode:leave');\n    });\n    $(document).on('zen_mode:enter', (function(_this) {\n      return function(e) {\n        return _this.enter($(e.target).closest('.md-area').find('.zen-backdrop'));\n      };\n    })(this));\n    $(document).on('zen_mode:leave', (function(_this) {\n      return function(e) {\n        return _this.exit();\n      };\n    })(this));\n    $(document).on('keydown', function(e) {\n      // Esc\n      if (e.keyCode === 27) {\n        e.preventDefault();\n        return $(document).trigger('zen_mode:leave');\n      }\n    });\n  }\n\n  enter(backdrop) {\n    Mousetrap.pause();\n    this.active_backdrop = $(backdrop);\n    this.active_backdrop.addClass('fullscreen');\n    this.active_textarea = this.active_backdrop.find('textarea');\n    // Prevent a user-resized textarea from persisting to fullscreen\n    this.active_textarea.removeAttr('style');\n    this.active_textarea.focus();\n  }\n\n  exit() {\n    if (this.active_textarea) {\n      Mousetrap.unpause();\n      this.active_textarea.closest('.zen-backdrop').removeClass('fullscreen');\n      this.scrollTo(this.active_textarea);\n      this.active_textarea = null;\n      this.active_backdrop = null;\n\n      const $dropzone = $('.div-dropzone');\n      if ($dropzone && !$dropzone.hasClass('js-invalid-dropzone')) {\n        Dropzone.forElement('.div-dropzone').enable();\n      }\n    }\n  }\n\n  scrollTo(zen_area) {\n    return $.scrollTo(zen_area, 0, {\n      offset: -150\n    });\n  }\n}\n","/*!\n * Pikaday\n *\n * Copyright  2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday\n */\n\n(function (root, factory)\n{\n    'use strict';\n\n    var moment;\n    if (typeof exports === 'object') {\n        // CommonJS module\n        // Load moment.js as an optional dependency\n        try { moment = require('moment'); } catch (e) {}\n        module.exports = factory(moment);\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(function (req)\n        {\n            // Load moment.js as an optional dependency\n            var id = 'moment';\n            try { moment = req(id); } catch (e) {}\n            return factory(moment);\n        });\n    } else {\n        root.Pikaday = factory(root.moment);\n    }\n}(this, function (moment)\n{\n    'use strict';\n\n    /**\n     * feature detection and helper functions\n     */\n    var hasMoment = typeof moment === 'function',\n\n    hasEventListeners = !!window.addEventListener,\n\n    document = window.document,\n\n    sto = window.setTimeout,\n\n    addEvent = function(el, e, callback, capture)\n    {\n        if (hasEventListeners) {\n            el.addEventListener(e, callback, !!capture);\n        } else {\n            el.attachEvent('on' + e, callback);\n        }\n    },\n\n    removeEvent = function(el, e, callback, capture)\n    {\n        if (hasEventListeners) {\n            el.removeEventListener(e, callback, !!capture);\n        } else {\n            el.detachEvent('on' + e, callback);\n        }\n    },\n\n    trim = function(str)\n    {\n        return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g,'');\n    },\n\n    hasClass = function(el, cn)\n    {\n        return (' ' + el.className + ' ').indexOf(' ' + cn + ' ') !== -1;\n    },\n\n    addClass = function(el, cn)\n    {\n        if (!hasClass(el, cn)) {\n            el.className = (el.className === '') ? cn : el.className + ' ' + cn;\n        }\n    },\n\n    removeClass = function(el, cn)\n    {\n        el.className = trim((' ' + el.className + ' ').replace(' ' + cn + ' ', ' '));\n    },\n\n    isArray = function(obj)\n    {\n        return (/Array/).test(Object.prototype.toString.call(obj));\n    },\n\n    isDate = function(obj)\n    {\n        return (/Date/).test(Object.prototype.toString.call(obj)) && !isNaN(obj.getTime());\n    },\n\n    isWeekend = function(date)\n    {\n        var day = date.getDay();\n        return day === 0 || day === 6;\n    },\n\n    isLeapYear = function(year)\n    {\n        // solution by Matti Virkkunen: http://stackoverflow.com/a/4881951\n        return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;\n    },\n\n    getDaysInMonth = function(year, month)\n    {\n        return [31, isLeapYear(year) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];\n    },\n\n    setToStartOfDay = function(date)\n    {\n        if (isDate(date)) date.setHours(0,0,0,0);\n    },\n\n    compareDates = function(a,b)\n    {\n        // weak date comparison (use setToStartOfDay(date) to ensure correct result)\n        return a.getTime() === b.getTime();\n    },\n\n    extend = function(to, from, overwrite)\n    {\n        var prop, hasProp;\n        for (prop in from) {\n            hasProp = to[prop] !== undefined;\n            if (hasProp && typeof from[prop] === 'object' && from[prop] !== null && from[prop].nodeName === undefined) {\n                if (isDate(from[prop])) {\n                    if (overwrite) {\n                        to[prop] = new Date(from[prop].getTime());\n                    }\n                }\n                else if (isArray(from[prop])) {\n                    if (overwrite) {\n                        to[prop] = from[prop].slice(0);\n                    }\n                } else {\n                    to[prop] = extend({}, from[prop], overwrite);\n                }\n            } else if (overwrite || !hasProp) {\n                to[prop] = from[prop];\n            }\n        }\n        return to;\n    },\n\n    fireEvent = function(el, eventName, data)\n    {\n        var ev;\n\n        if (document.createEvent) {\n            ev = document.createEvent('HTMLEvents');\n            ev.initEvent(eventName, true, false);\n            ev = extend(ev, data);\n            el.dispatchEvent(ev);\n        } else if (document.createEventObject) {\n            ev = document.createEventObject();\n            ev = extend(ev, data);\n            el.fireEvent('on' + eventName, ev);\n        }\n    },\n\n    adjustCalendar = function(calendar) {\n        if (calendar.month < 0) {\n            calendar.year -= Math.ceil(Math.abs(calendar.month)/12);\n            calendar.month += 12;\n        }\n        if (calendar.month > 11) {\n            calendar.year += Math.floor(Math.abs(calendar.month)/12);\n            calendar.month -= 12;\n        }\n        return calendar;\n    },\n\n    /**\n     * defaults and localisation\n     */\n    defaults = {\n\n        // bind the picker to a form field\n        field: null,\n\n        // automatically show/hide the picker on `field` focus (default `true` if `field` is set)\n        bound: undefined,\n\n        // position of the datepicker, relative to the field (default to bottom & left)\n        // ('bottom' & 'left' keywords are not used, 'top' & 'right' are modifier on the bottom/left position)\n        position: 'bottom left',\n\n        // automatically fit in the viewport even if it means repositioning from the position option\n        reposition: true,\n\n        // the default output format for `.toString()` and `field` value\n        format: 'YYYY-MM-DD',\n\n        // the toString function which gets passed a current date object and format\n        // and returns a string\n        toString: null,\n\n        // used to create date object from current input string\n        parse: null,\n\n        // the initial date to view when first opened\n        defaultDate: null,\n\n        // make the `defaultDate` the initial selected value\n        setDefaultDate: false,\n\n        // first day of week (0: Sunday, 1: Monday etc)\n        firstDay: 0,\n\n        // the default flag for moment's strict date parsing\n        formatStrict: false,\n\n        // the minimum/earliest date that can be selected\n        minDate: null,\n        // the maximum/latest date that can be selected\n        maxDate: null,\n\n        // number of years either side, or array of upper/lower range\n        yearRange: 10,\n\n        // show week numbers at head of row\n        showWeekNumber: false,\n\n        // Week picker mode\n        pickWholeWeek: false,\n\n        // used internally (don't config outside)\n        minYear: 0,\n        maxYear: 9999,\n        minMonth: undefined,\n        maxMonth: undefined,\n\n        startRange: null,\n        endRange: null,\n\n        isRTL: false,\n\n        // Additional text to append to the year in the calendar title\n        yearSuffix: '',\n\n        // Render the month after year in the calendar title\n        showMonthAfterYear: false,\n\n        // Render days of the calendar grid that fall in the next or previous month\n        showDaysInNextAndPreviousMonths: false,\n\n        // Allows user to select days that fall in the next or previous month\n        enableSelectionDaysInNextAndPreviousMonths: false,\n\n        // how many months are visible\n        numberOfMonths: 1,\n\n        // when numberOfMonths is used, this will help you to choose where the main calendar will be (default `left`, can be set to `right`)\n        // only used for the first display or when a selected date is not visible\n        mainCalendar: 'left',\n\n        // Specify a DOM element to render the calendar in\n        container: undefined,\n\n        // Blur field when date is selected\n        blurFieldOnSelect : true,\n\n        // internationalization\n        i18n: {\n            previousMonth : 'Previous Month',\n            nextMonth     : 'Next Month',\n            months        : ['January','February','March','April','May','June','July','August','September','October','November','December'],\n            weekdays      : ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],\n            weekdaysShort : ['Sun','Mon','Tue','Wed','Thu','Fri','Sat']\n        },\n\n        // Theme Classname\n        theme: null,\n\n        // events array\n        events: [],\n\n        // callback function\n        onSelect: null,\n        onOpen: null,\n        onClose: null,\n        onDraw: null\n    },\n\n\n    /**\n     * templating functions to abstract HTML rendering\n     */\n    renderDayName = function(opts, day, abbr)\n    {\n        day += opts.firstDay;\n        while (day >= 7) {\n            day -= 7;\n        }\n        return abbr ? opts.i18n.weekdaysShort[day] : opts.i18n.weekdays[day];\n    },\n\n    renderDay = function(opts)\n    {\n        var arr = [];\n        var ariaSelected = 'false';\n        if (opts.isEmpty) {\n            if (opts.showDaysInNextAndPreviousMonths) {\n                arr.push('is-outside-current-month');\n\n                if(!opts.enableSelectionDaysInNextAndPreviousMonths) {\n                    arr.push('is-selection-disabled');\n                }\n\n            } else {\n                return '<td class=\"is-empty\"></td>';\n            }\n        }\n        if (opts.isDisabled) {\n            arr.push('is-disabled');\n        }\n        if (opts.isToday) {\n            arr.push('is-today');\n        }\n        if (opts.isSelected) {\n            arr.push('is-selected');\n            ariaSelected = 'true';\n        }\n        if (opts.hasEvent) {\n            arr.push('has-event');\n        }\n        if (opts.isInRange) {\n            arr.push('is-inrange');\n        }\n        if (opts.isStartRange) {\n            arr.push('is-startrange');\n        }\n        if (opts.isEndRange) {\n            arr.push('is-endrange');\n        }\n        return '<td data-day=\"' + opts.day + '\" class=\"' + arr.join(' ') + '\" aria-selected=\"' + ariaSelected + '\">' +\n                 '<button class=\"pika-button pika-day\" type=\"button\" ' +\n                    'data-pika-year=\"' + opts.year + '\" data-pika-month=\"' + opts.month + '\" data-pika-day=\"' + opts.day + '\">' +\n                        opts.day +\n                 '</button>' +\n               '</td>';\n    },\n\n    renderWeek = function (d, m, y) {\n        // Lifted from http://javascript.about.com/library/blweekyear.htm, lightly modified.\n        var onejan = new Date(y, 0, 1),\n            weekNum = Math.ceil((((new Date(y, m, d) - onejan) / 86400000) + onejan.getDay()+1)/7);\n        return '<td class=\"pika-week\">' + weekNum + '</td>';\n    },\n\n    renderRow = function(days, isRTL, pickWholeWeek, isRowSelected)\n    {\n        return '<tr class=\"pika-row' + (pickWholeWeek ? ' pick-whole-week' : '') + (isRowSelected ? ' is-selected' : '') + '\">' + (isRTL ? days.reverse() : days).join('') + '</tr>';\n    },\n\n    renderBody = function(rows)\n    {\n        return '<tbody>' + rows.join('') + '</tbody>';\n    },\n\n    renderHead = function(opts)\n    {\n        var i, arr = [];\n        if (opts.showWeekNumber) {\n            arr.push('<th></th>');\n        }\n        for (i = 0; i < 7; i++) {\n            arr.push('<th scope=\"col\"><abbr title=\"' + renderDayName(opts, i) + '\">' + renderDayName(opts, i, true) + '</abbr></th>');\n        }\n        return '<thead><tr>' + (opts.isRTL ? arr.reverse() : arr).join('') + '</tr></thead>';\n    },\n\n    renderTitle = function(instance, c, year, month, refYear, randId)\n    {\n        var i, j, arr,\n            opts = instance._o,\n            isMinYear = year === opts.minYear,\n            isMaxYear = year === opts.maxYear,\n            html = '<div id=\"' + randId + '\" class=\"pika-title\" role=\"heading\" aria-live=\"assertive\">',\n            monthHtml,\n            yearHtml,\n            prev = true,\n            next = true;\n\n        for (arr = [], i = 0; i < 12; i++) {\n            arr.push('<option value=\"' + (year === refYear ? i - c : 12 + i - c) + '\"' +\n                (i === month ? ' selected=\"selected\"': '') +\n                ((isMinYear && i < opts.minMonth) || (isMaxYear && i > opts.maxMonth) ? 'disabled=\"disabled\"' : '') + '>' +\n                opts.i18n.months[i] + '</option>');\n        }\n\n        monthHtml = '<div class=\"pika-label\">' + opts.i18n.months[month] + '<select class=\"pika-select pika-select-month\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\n        if (isArray(opts.yearRange)) {\n            i = opts.yearRange[0];\n            j = opts.yearRange[1] + 1;\n        } else {\n            i = year - opts.yearRange;\n            j = 1 + year + opts.yearRange;\n        }\n\n        for (arr = []; i < j && i <= opts.maxYear; i++) {\n            if (i >= opts.minYear) {\n                arr.push('<option value=\"' + i + '\"' + (i === year ? ' selected=\"selected\"': '') + '>' + (i) + '</option>');\n            }\n        }\n        yearHtml = '<div class=\"pika-label\">' + year + opts.yearSuffix + '<select class=\"pika-select pika-select-year\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\n        if (opts.showMonthAfterYear) {\n            html += yearHtml + monthHtml;\n        } else {\n            html += monthHtml + yearHtml;\n        }\n\n        if (isMinYear && (month === 0 || opts.minMonth >= month)) {\n            prev = false;\n        }\n\n        if (isMaxYear && (month === 11 || opts.maxMonth <= month)) {\n            next = false;\n        }\n\n        if (c === 0) {\n            html += '<button class=\"pika-prev' + (prev ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.previousMonth + '</button>';\n        }\n        if (c === (instance._o.numberOfMonths - 1) ) {\n            html += '<button class=\"pika-next' + (next ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.nextMonth + '</button>';\n        }\n\n        return html += '</div>';\n    },\n\n    renderTable = function(opts, data, randId)\n    {\n        return '<table cellpadding=\"0\" cellspacing=\"0\" class=\"pika-table\" role=\"grid\" aria-labelledby=\"' + randId + '\">' + renderHead(opts) + renderBody(data) + '</table>';\n    },\n\n\n    /**\n     * Pikaday constructor\n     */\n    Pikaday = function(options)\n    {\n        var self = this,\n            opts = self.config(options);\n\n        self._onMouseDown = function(e)\n        {\n            if (!self._v) {\n                return;\n            }\n            e = e || window.event;\n            var target = e.target || e.srcElement;\n            if (!target) {\n                return;\n            }\n\n            if (!hasClass(target, 'is-disabled')) {\n                if (hasClass(target, 'pika-button') && !hasClass(target, 'is-empty') && !hasClass(target.parentNode, 'is-disabled')) {\n                    self.setDate(new Date(target.getAttribute('data-pika-year'), target.getAttribute('data-pika-month'), target.getAttribute('data-pika-day')));\n                    if (opts.bound) {\n                        sto(function() {\n                            self.hide();\n                            if (opts.blurFieldOnSelect && opts.field) {\n                                opts.field.blur();\n                            }\n                        }, 100);\n                    }\n                }\n                else if (hasClass(target, 'pika-prev')) {\n                    self.prevMonth();\n                }\n                else if (hasClass(target, 'pika-next')) {\n                    self.nextMonth();\n                }\n            }\n            if (!hasClass(target, 'pika-select')) {\n                // if this is touch event prevent mouse events emulation\n                if (e.preventDefault) {\n                    e.preventDefault();\n                } else {\n                    e.returnValue = false;\n                    return false;\n                }\n            } else {\n                self._c = true;\n            }\n        };\n\n        self._onChange = function(e)\n        {\n            e = e || window.event;\n            var target = e.target || e.srcElement;\n            if (!target) {\n                return;\n            }\n            if (hasClass(target, 'pika-select-month')) {\n                self.gotoMonth(target.value);\n            }\n            else if (hasClass(target, 'pika-select-year')) {\n                self.gotoYear(target.value);\n            }\n        };\n\n        self._onKeyChange = function(e)\n        {\n            e = e || window.event;\n\n            if (self.isVisible()) {\n\n                switch(e.keyCode){\n                    case 13:\n                    case 27:\n                        if (opts.field) {\n                            opts.field.blur();\n                        }\n                        break;\n                    case 37:\n                        e.preventDefault();\n                        self.adjustDate('subtract', 1);\n                        break;\n                    case 38:\n                        self.adjustDate('subtract', 7);\n                        break;\n                    case 39:\n                        self.adjustDate('add', 1);\n                        break;\n                    case 40:\n                        self.adjustDate('add', 7);\n                        break;\n                }\n            }\n        };\n\n        self._onInputChange = function(e)\n        {\n            var date;\n\n            if (e.firedBy === self) {\n                return;\n            }\n            if (opts.parse) {\n                date = opts.parse(opts.field.value, opts.format);\n            } else if (hasMoment) {\n                date = moment(opts.field.value, opts.format, opts.formatStrict);\n                date = (date && date.isValid()) ? date.toDate() : null;\n            }\n            else {\n                date = new Date(Date.parse(opts.field.value));\n            }\n            if (isDate(date)) {\n              self.setDate(date);\n            }\n            if (!self._v) {\n                self.show();\n            }\n        };\n\n        self._onInputFocus = function()\n        {\n            self.show();\n        };\n\n        self._onInputClick = function()\n        {\n            self.show();\n        };\n\n        self._onInputBlur = function()\n        {\n            // IE allows pika div to gain focus; catch blur the input field\n            var pEl = document.activeElement;\n            do {\n                if (hasClass(pEl, 'pika-single')) {\n                    return;\n                }\n            }\n            while ((pEl = pEl.parentNode));\n\n            if (!self._c) {\n                self._b = sto(function() {\n                    self.hide();\n                }, 50);\n            }\n            self._c = false;\n        };\n\n        self._onClick = function(e)\n        {\n            e = e || window.event;\n            var target = e.target || e.srcElement,\n                pEl = target;\n            if (!target) {\n                return;\n            }\n            if (!hasEventListeners && hasClass(target, 'pika-select')) {\n                if (!target.onchange) {\n                    target.setAttribute('onchange', 'return;');\n                    addEvent(target, 'change', self._onChange);\n                }\n            }\n            do {\n                if (hasClass(pEl, 'pika-single') || pEl === opts.trigger) {\n                    return;\n                }\n            }\n            while ((pEl = pEl.parentNode));\n            if (self._v && target !== opts.trigger && pEl !== opts.trigger) {\n                self.hide();\n            }\n        };\n\n        self.el = document.createElement('div');\n        self.el.className = 'pika-single' + (opts.isRTL ? ' is-rtl' : '') + (opts.theme ? ' ' + opts.theme : '');\n\n        addEvent(self.el, 'mousedown', self._onMouseDown, true);\n        addEvent(self.el, 'touchend', self._onMouseDown, true);\n        addEvent(self.el, 'change', self._onChange);\n        addEvent(document, 'keydown', self._onKeyChange);\n\n        if (opts.field) {\n            if (opts.container) {\n                opts.container.appendChild(self.el);\n            } else if (opts.bound) {\n                document.body.appendChild(self.el);\n            } else {\n                opts.field.parentNode.insertBefore(self.el, opts.field.nextSibling);\n            }\n            addEvent(opts.field, 'change', self._onInputChange);\n\n            if (!opts.defaultDate) {\n                if (hasMoment && opts.field.value) {\n                    opts.defaultDate = moment(opts.field.value, opts.format).toDate();\n                } else {\n                    opts.defaultDate = new Date(Date.parse(opts.field.value));\n                }\n                opts.setDefaultDate = true;\n            }\n        }\n\n        var defDate = opts.defaultDate;\n\n        if (isDate(defDate)) {\n            if (opts.setDefaultDate) {\n                self.setDate(defDate, true);\n            } else {\n                self.gotoDate(defDate);\n            }\n        } else {\n            self.gotoDate(new Date());\n        }\n\n        if (opts.bound) {\n            this.hide();\n            self.el.className += ' is-bound';\n            addEvent(opts.trigger, 'click', self._onInputClick);\n            addEvent(opts.trigger, 'focus', self._onInputFocus);\n            addEvent(opts.trigger, 'blur', self._onInputBlur);\n        } else {\n            this.show();\n        }\n    };\n\n\n    /**\n     * public Pikaday API\n     */\n    Pikaday.prototype = {\n\n\n        /**\n         * configure functionality\n         */\n        config: function(options)\n        {\n            if (!this._o) {\n                this._o = extend({}, defaults, true);\n            }\n\n            var opts = extend(this._o, options, true);\n\n            opts.isRTL = !!opts.isRTL;\n\n            opts.field = (opts.field && opts.field.nodeName) ? opts.field : null;\n\n            opts.theme = (typeof opts.theme) === 'string' && opts.theme ? opts.theme : null;\n\n            opts.bound = !!(opts.bound !== undefined ? opts.field && opts.bound : opts.field);\n\n            opts.trigger = (opts.trigger && opts.trigger.nodeName) ? opts.trigger : opts.field;\n\n            opts.disableWeekends = !!opts.disableWeekends;\n\n            opts.disableDayFn = (typeof opts.disableDayFn) === 'function' ? opts.disableDayFn : null;\n\n            var nom = parseInt(opts.numberOfMonths, 10) || 1;\n            opts.numberOfMonths = nom > 4 ? 4 : nom;\n\n            if (!isDate(opts.minDate)) {\n                opts.minDate = false;\n            }\n            if (!isDate(opts.maxDate)) {\n                opts.maxDate = false;\n            }\n            if ((opts.minDate && opts.maxDate) && opts.maxDate < opts.minDate) {\n                opts.maxDate = opts.minDate = false;\n            }\n            if (opts.minDate) {\n                this.setMinDate(opts.minDate);\n            }\n            if (opts.maxDate) {\n                this.setMaxDate(opts.maxDate);\n            }\n\n            if (isArray(opts.yearRange)) {\n                var fallback = new Date().getFullYear() - 10;\n                opts.yearRange[0] = parseInt(opts.yearRange[0], 10) || fallback;\n                opts.yearRange[1] = parseInt(opts.yearRange[1], 10) || fallback;\n            } else {\n                opts.yearRange = Math.abs(parseInt(opts.yearRange, 10)) || defaults.yearRange;\n                if (opts.yearRange > 100) {\n                    opts.yearRange = 100;\n                }\n            }\n\n            return opts;\n        },\n\n        /**\n         * return a formatted string of the current selection (using Moment.js if available)\n         */\n        toString: function(format)\n        {\n            format = format || this._o.format;\n            if (!isDate(this._d)) {\n                return '';\n            }\n            if (this._o.toString) {\n              return this._o.toString(this._d, format);\n            }\n            if (hasMoment) {\n              return moment(this._d).format(format);\n            }\n            return this._d.toDateString();\n        },\n\n        /**\n         * return a Moment.js object of the current selection (if available)\n         */\n        getMoment: function()\n        {\n            return hasMoment ? moment(this._d) : null;\n        },\n\n        /**\n         * set the current selection from a Moment.js object (if available)\n         */\n        setMoment: function(date, preventOnSelect)\n        {\n            if (hasMoment && moment.isMoment(date)) {\n                this.setDate(date.toDate(), preventOnSelect);\n            }\n        },\n\n        /**\n         * return a Date object of the current selection\n         */\n        getDate: function()\n        {\n            return isDate(this._d) ? new Date(this._d.getTime()) : null;\n        },\n\n        /**\n         * set the current selection\n         */\n        setDate: function(date, preventOnSelect)\n        {\n            if (!date) {\n                this._d = null;\n\n                if (this._o.field) {\n                    this._o.field.value = '';\n                    fireEvent(this._o.field, 'change', { firedBy: this });\n                }\n\n                return this.draw();\n            }\n            if (typeof date === 'string') {\n                date = new Date(Date.parse(date));\n            }\n            if (!isDate(date)) {\n                return;\n            }\n\n            var min = this._o.minDate,\n                max = this._o.maxDate;\n\n            if (isDate(min) && date < min) {\n                date = min;\n            } else if (isDate(max) && date > max) {\n                date = max;\n            }\n\n            this._d = new Date(date.getTime());\n            setToStartOfDay(this._d);\n            this.gotoDate(this._d);\n\n            if (this._o.field) {\n                this._o.field.value = this.toString();\n                fireEvent(this._o.field, 'change', { firedBy: this });\n            }\n            if (!preventOnSelect && typeof this._o.onSelect === 'function') {\n                this._o.onSelect.call(this, this.getDate());\n            }\n        },\n\n        /**\n         * change view to a specific date\n         */\n        gotoDate: function(date)\n        {\n            var newCalendar = true;\n\n            if (!isDate(date)) {\n                return;\n            }\n\n            if (this.calendars) {\n                var firstVisibleDate = new Date(this.calendars[0].year, this.calendars[0].month, 1),\n                    lastVisibleDate = new Date(this.calendars[this.calendars.length-1].year, this.calendars[this.calendars.length-1].month, 1),\n                    visibleDate = date.getTime();\n                // get the end of the month\n                lastVisibleDate.setMonth(lastVisibleDate.getMonth()+1);\n                lastVisibleDate.setDate(lastVisibleDate.getDate()-1);\n                newCalendar = (visibleDate < firstVisibleDate.getTime() || lastVisibleDate.getTime() < visibleDate);\n            }\n\n            if (newCalendar) {\n                this.calendars = [{\n                    month: date.getMonth(),\n                    year: date.getFullYear()\n                }];\n                if (this._o.mainCalendar === 'right') {\n                    this.calendars[0].month += 1 - this._o.numberOfMonths;\n                }\n            }\n\n            this.adjustCalendars();\n        },\n\n        adjustDate: function(sign, days) {\n\n            var day = this.getDate() || new Date();\n            var difference = parseInt(days)*24*60*60*1000;\n\n            var newDay;\n\n            if (sign === 'add') {\n                newDay = new Date(day.valueOf() + difference);\n            } else if (sign === 'subtract') {\n                newDay = new Date(day.valueOf() - difference);\n            }\n\n            this.setDate(newDay);\n        },\n\n        adjustCalendars: function() {\n            this.calendars[0] = adjustCalendar(this.calendars[0]);\n            for (var c = 1; c < this._o.numberOfMonths; c++) {\n                this.calendars[c] = adjustCalendar({\n                    month: this.calendars[0].month + c,\n                    year: this.calendars[0].year\n                });\n            }\n            this.draw();\n        },\n\n        gotoToday: function()\n        {\n            this.gotoDate(new Date());\n        },\n\n        /**\n         * change view to a specific month (zero-index, e.g. 0: January)\n         */\n        gotoMonth: function(month)\n        {\n            if (!isNaN(month)) {\n                this.calendars[0].month = parseInt(month, 10);\n                this.adjustCalendars();\n            }\n        },\n\n        nextMonth: function()\n        {\n            this.calendars[0].month++;\n            this.adjustCalendars();\n        },\n\n        prevMonth: function()\n        {\n            this.calendars[0].month--;\n            this.adjustCalendars();\n        },\n\n        /**\n         * change view to a specific full year (e.g. \"2012\")\n         */\n        gotoYear: function(year)\n        {\n            if (!isNaN(year)) {\n                this.calendars[0].year = parseInt(year, 10);\n                this.adjustCalendars();\n            }\n        },\n\n        /**\n         * change the minDate\n         */\n        setMinDate: function(value)\n        {\n            if(value instanceof Date) {\n                setToStartOfDay(value);\n                this._o.minDate = value;\n                this._o.minYear  = value.getFullYear();\n                this._o.minMonth = value.getMonth();\n            } else {\n                this._o.minDate = defaults.minDate;\n                this._o.minYear  = defaults.minYear;\n                this._o.minMonth = defaults.minMonth;\n                this._o.startRange = defaults.startRange;\n            }\n\n            this.draw();\n        },\n\n        /**\n         * change the maxDate\n         */\n        setMaxDate: function(value)\n        {\n            if(value instanceof Date) {\n                setToStartOfDay(value);\n                this._o.maxDate = value;\n                this._o.maxYear = value.getFullYear();\n                this._o.maxMonth = value.getMonth();\n            } else {\n                this._o.maxDate = defaults.maxDate;\n                this._o.maxYear = defaults.maxYear;\n                this._o.maxMonth = defaults.maxMonth;\n                this._o.endRange = defaults.endRange;\n            }\n\n            this.draw();\n        },\n\n        setStartRange: function(value)\n        {\n            this._o.startRange = value;\n        },\n\n        setEndRange: function(value)\n        {\n            this._o.endRange = value;\n        },\n\n        /**\n         * refresh the HTML\n         */\n        draw: function(force)\n        {\n            if (!this._v && !force) {\n                return;\n            }\n            var opts = this._o,\n                minYear = opts.minYear,\n                maxYear = opts.maxYear,\n                minMonth = opts.minMonth,\n                maxMonth = opts.maxMonth,\n                html = '',\n                randId;\n\n            if (this._y <= minYear) {\n                this._y = minYear;\n                if (!isNaN(minMonth) && this._m < minMonth) {\n                    this._m = minMonth;\n                }\n            }\n            if (this._y >= maxYear) {\n                this._y = maxYear;\n                if (!isNaN(maxMonth) && this._m > maxMonth) {\n                    this._m = maxMonth;\n                }\n            }\n\n            randId = 'pika-title-' + Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 2);\n\n            for (var c = 0; c < opts.numberOfMonths; c++) {\n                html += '<div class=\"pika-lendar\">' + renderTitle(this, c, this.calendars[c].year, this.calendars[c].month, this.calendars[0].year, randId) + this.render(this.calendars[c].year, this.calendars[c].month, randId) + '</div>';\n            }\n\n            this.el.innerHTML = html;\n\n            if (opts.bound) {\n                if(opts.field.type !== 'hidden') {\n                    sto(function() {\n                        opts.trigger.focus();\n                    }, 1);\n                }\n            }\n\n            if (typeof this._o.onDraw === 'function') {\n                this._o.onDraw(this);\n            }\n\n            if (opts.bound) {\n                // let the screen reader user know to use arrow keys\n                opts.field.setAttribute('aria-label', 'Use the arrow keys to pick a date');\n            }\n        },\n\n        adjustPosition: function()\n        {\n            var field, pEl, width, height, viewportWidth, viewportHeight, scrollTop, left, top, clientRect;\n\n            if (this._o.container) return;\n\n            this.el.style.position = 'absolute';\n\n            field = this._o.trigger;\n            pEl = field;\n            width = this.el.offsetWidth;\n            height = this.el.offsetHeight;\n            viewportWidth = window.innerWidth || document.documentElement.clientWidth;\n            viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n            scrollTop = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\n\n            if (typeof field.getBoundingClientRect === 'function') {\n                clientRect = field.getBoundingClientRect();\n                left = clientRect.left + window.pageXOffset;\n                top = clientRect.bottom + window.pageYOffset;\n            } else {\n                left = pEl.offsetLeft;\n                top  = pEl.offsetTop + pEl.offsetHeight;\n                while((pEl = pEl.offsetParent)) {\n                    left += pEl.offsetLeft;\n                    top  += pEl.offsetTop;\n                }\n            }\n\n            // default position is bottom & left\n            if ((this._o.reposition && left + width > viewportWidth) ||\n                (\n                    this._o.position.indexOf('right') > -1 &&\n                    left - width + field.offsetWidth > 0\n                )\n            ) {\n                left = left - width + field.offsetWidth;\n            }\n            if ((this._o.reposition && top + height > viewportHeight + scrollTop) ||\n                (\n                    this._o.position.indexOf('top') > -1 &&\n                    top - height - field.offsetHeight > 0\n                )\n            ) {\n                top = top - height - field.offsetHeight;\n            }\n\n            this.el.style.left = left + 'px';\n            this.el.style.top = top + 'px';\n        },\n\n        /**\n         * render HTML for a particular month\n         */\n        render: function(year, month, randId)\n        {\n            var opts   = this._o,\n                now    = new Date(),\n                days   = getDaysInMonth(year, month),\n                before = new Date(year, month, 1).getDay(),\n                data   = [],\n                row    = [];\n            setToStartOfDay(now);\n            if (opts.firstDay > 0) {\n                before -= opts.firstDay;\n                if (before < 0) {\n                    before += 7;\n                }\n            }\n            var previousMonth = month === 0 ? 11 : month - 1,\n                nextMonth = month === 11 ? 0 : month + 1,\n                yearOfPreviousMonth = month === 0 ? year - 1 : year,\n                yearOfNextMonth = month === 11 ? year + 1 : year,\n                daysInPreviousMonth = getDaysInMonth(yearOfPreviousMonth, previousMonth);\n            var cells = days + before,\n                after = cells;\n            while(after > 7) {\n                after -= 7;\n            }\n            cells += 7 - after;\n            var isWeekSelected = false;\n            for (var i = 0, r = 0; i < cells; i++)\n            {\n                var day = new Date(year, month, 1 + (i - before)),\n                    isSelected = isDate(this._d) ? compareDates(day, this._d) : false,\n                    isToday = compareDates(day, now),\n                    hasEvent = opts.events.indexOf(day.toDateString()) !== -1 ? true : false,\n                    isEmpty = i < before || i >= (days + before),\n                    dayNumber = 1 + (i - before),\n                    monthNumber = month,\n                    yearNumber = year,\n                    isStartRange = opts.startRange && compareDates(opts.startRange, day),\n                    isEndRange = opts.endRange && compareDates(opts.endRange, day),\n                    isInRange = opts.startRange && opts.endRange && opts.startRange < day && day < opts.endRange,\n                    isDisabled = (opts.minDate && day < opts.minDate) ||\n                                 (opts.maxDate && day > opts.maxDate) ||\n                                 (opts.disableWeekends && isWeekend(day)) ||\n                                 (opts.disableDayFn && opts.disableDayFn(day));\n\n                if (isEmpty) {\n                    if (i < before) {\n                        dayNumber = daysInPreviousMonth + dayNumber;\n                        monthNumber = previousMonth;\n                        yearNumber = yearOfPreviousMonth;\n                    } else {\n                        dayNumber = dayNumber - days;\n                        monthNumber = nextMonth;\n                        yearNumber = yearOfNextMonth;\n                    }\n                }\n\n                var dayConfig = {\n                        day: dayNumber,\n                        month: monthNumber,\n                        year: yearNumber,\n                        hasEvent: hasEvent,\n                        isSelected: isSelected,\n                        isToday: isToday,\n                        isDisabled: isDisabled,\n                        isEmpty: isEmpty,\n                        isStartRange: isStartRange,\n                        isEndRange: isEndRange,\n                        isInRange: isInRange,\n                        showDaysInNextAndPreviousMonths: opts.showDaysInNextAndPreviousMonths,\n                        enableSelectionDaysInNextAndPreviousMonths: opts.enableSelectionDaysInNextAndPreviousMonths\n                    };\n\n                if (opts.pickWholeWeek && isSelected) {\n                    isWeekSelected = true;\n                }\n\n                row.push(renderDay(dayConfig));\n\n                if (++r === 7) {\n                    if (opts.showWeekNumber) {\n                        row.unshift(renderWeek(i - before, month, year));\n                    }\n                    data.push(renderRow(row, opts.isRTL, opts.pickWholeWeek, isWeekSelected));\n                    row = [];\n                    r = 0;\n                    isWeekSelected = false;\n                }\n            }\n            return renderTable(opts, data, randId);\n        },\n\n        isVisible: function()\n        {\n            return this._v;\n        },\n\n        show: function()\n        {\n            if (!this.isVisible()) {\n                this._v = true;\n                this.draw();\n                removeClass(this.el, 'is-hidden');\n                if (this._o.bound) {\n                    addEvent(document, 'click', this._onClick);\n                    this.adjustPosition();\n                }\n                if (typeof this._o.onOpen === 'function') {\n                    this._o.onOpen.call(this);\n                }\n            }\n        },\n\n        hide: function()\n        {\n            var v = this._v;\n            if (v !== false) {\n                if (this._o.bound) {\n                    removeEvent(document, 'click', this._onClick);\n                }\n                this.el.style.position = 'static'; // reset\n                this.el.style.left = 'auto';\n                this.el.style.top = 'auto';\n                addClass(this.el, 'is-hidden');\n                this._v = false;\n                if (v !== undefined && typeof this._o.onClose === 'function') {\n                    this._o.onClose.call(this);\n                }\n            }\n        },\n\n        /**\n         * GAME OVER\n         */\n        destroy: function()\n        {\n            this.hide();\n            removeEvent(this.el, 'mousedown', this._onMouseDown, true);\n            removeEvent(this.el, 'touchend', this._onMouseDown, true);\n            removeEvent(this.el, 'change', this._onChange);\n            removeEvent(document, 'keydown', this._onKeyChange);\n            if (this._o.field) {\n                removeEvent(this._o.field, 'change', this._onInputChange);\n                if (this._o.bound) {\n                    removeEvent(this._o.trigger, 'click', this._onInputClick);\n                    removeEvent(this._o.trigger, 'focus', this._onInputFocus);\n                    removeEvent(this._o.trigger, 'blur', this._onInputBlur);\n                }\n            }\n            if (this.el.parentNode) {\n                this.el.parentNode.removeChild(this.el);\n            }\n        }\n\n    };\n\n    return Pikaday;\n\n}));\n","/* eslint-disable comma-dangle, quotes, consistent-return, func-names, array-callback-return, prefer-arrow-callback, max-len, no-unused-vars */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport axios from './lib/utils/axios_utils';\nimport Flash from './flash';\n\nexport default {\n  init({ container, form, issues, prefixId } = {}) {\n    this.prefixId = prefixId || 'issue_';\n    this.form = form || this.getElement('.bulk-update');\n    this.$labelDropdown = this.form.find('.js-label-select');\n    this.issues = issues || this.getElement('.issues-list .issue');\n    this.willUpdateLabels = false;\n    this.bindEvents();\n  },\n\n  bindEvents() {\n    return this.form.off('submit').on('submit', this.onFormSubmit.bind(this));\n  },\n\n  onFormSubmit(e) {\n    e.preventDefault();\n    return this.submit();\n  },\n\n  submit() {\n    axios[this.form.attr('method')](this.form.attr('action'), this.getFormDataAsObject())\n      .then(() => window.location.reload())\n      .catch(() => this.onFormSubmitFailure());\n  },\n\n  onFormSubmitFailure() {\n    this.form.find('[type=\"submit\"]').enable();\n    return new Flash(\"Issue update failed\");\n  },\n\n  getSelectedIssues() {\n    return this.issues.has('.selected_issue:checked');\n  },\n\n  getLabelsFromSelection() {\n    const labels = [];\n    this.getSelectedIssues().map(function() {\n      const labelsData = $(this).data('labels');\n      if (labelsData) {\n        return labelsData.map(function(labelId) {\n          if (labels.indexOf(labelId) === -1) {\n            return labels.push(labelId);\n          }\n        });\n      }\n    });\n    return labels;\n  },\n\n  /**\n   * Will return only labels that were marked previously and the user has unmarked\n   * @return {Array} Label IDs\n   */\n\n  getUnmarkedIndeterminedLabels() {\n    const result = [];\n    const labelsToKeep = this.$labelDropdown.data('indeterminate');\n\n    this.getLabelsFromSelection().forEach((id) => {\n      if (labelsToKeep.indexOf(id) === -1) {\n        result.push(id);\n      }\n    });\n\n    return result;\n  },\n\n  /**\n   * Simple form serialization, it will return just what we need\n   * Returns key/value pairs from form data\n   */\n\n  getFormDataAsObject() {\n    const formData = {\n      update: {\n        state_event: this.form.find('input[name=\"update[state_event]\"]').val(),\n        // For Merge Requests\n        assignee_id: this.form.find('input[name=\"update[assignee_id]\"]').val(),\n        // For Issues\n        assignee_ids: [this.form.find('input[name=\"update[assignee_ids][]\"]').val()],\n        milestone_id: this.form.find('input[name=\"update[milestone_id]\"]').val(),\n        issuable_ids: this.form.find('input[name=\"update[issuable_ids]\"]').val(),\n        subscription_event: this.form.find('input[name=\"update[subscription_event]\"]').val(),\n        add_label_ids: [],\n        remove_label_ids: []\n      }\n    };\n    if (this.willUpdateLabels) {\n      formData.update.add_label_ids = this.$labelDropdown.data('marked');\n      formData.update.remove_label_ids = this.$labelDropdown.data('unmarked');\n    }\n    return formData;\n  },\n\n  setOriginalDropdownData() {\n    const $labelSelect = $('.bulk-update .js-label-select');\n    $labelSelect.data('common', this.getOriginalCommonIds());\n    $labelSelect.data('marked', this.getOriginalMarkedIds());\n    $labelSelect.data('indeterminate', this.getOriginalIndeterminateIds());\n  },\n\n  // From issuable's initial bulk selection\n  getOriginalCommonIds() {\n    const labelIds = [];\n\n    this.getElement('.selected_issue:checked').each((i, el) => {\n      labelIds.push(this.getElement(`#${this.prefixId}${el.dataset.id}`).data('labels'));\n    });\n    return _.intersection.apply(this, labelIds);\n  },\n\n  // From issuable's initial bulk selection\n  getOriginalMarkedIds() {\n    const labelIds = [];\n    this.getElement('.selected_issue:checked').each((i, el) => {\n      labelIds.push(this.getElement(`#${this.prefixId}${el.dataset.id}`).data('labels'));\n    });\n    return _.intersection.apply(this, labelIds);\n  },\n\n  // From issuable's initial bulk selection\n  getOriginalIndeterminateIds() {\n    const uniqueIds = [];\n    const labelIds = [];\n    let issuableLabels = [];\n\n    // Collect unique label IDs for all checked issues\n    this.getElement('.selected_issue:checked').each((i, el) => {\n      issuableLabels = this.getElement(`#${this.prefixId}${el.dataset.id}`).data('labels');\n      issuableLabels.forEach((labelId) => {\n        // Store unique IDs\n        if (uniqueIds.indexOf(labelId) === -1) {\n          uniqueIds.push(labelId);\n        }\n      });\n      // Store array of IDs per issuable\n      labelIds.push(issuableLabels);\n    });\n    // Add uniqueIds to add it as argument for _.intersection\n    labelIds.unshift(uniqueIds);\n    // Return IDs that are present but not in all selected issueables\n    return _.difference(uniqueIds, _.intersection.apply(this, labelIds));\n  },\n\n  getElement(selector) {\n    this.scopeEl = this.scopeEl || $('.content');\n    return this.scopeEl.find(selector);\n  },\n};\n","/* eslint-disable func-names, one-var, no-var, prefer-rest-params, quotes, max-len, one-var-declaration-per-line, vars-on-top, prefer-arrow-callback, consistent-return, comma-dangle, object-shorthand, no-shadow, no-unused-vars, no-else-return, no-self-compare, prefer-template, no-unused-expressions, yoda, prefer-spread, no-void, camelcase, no-param-reassign */\n/* global Issuable */\n/* global emitSidebarEvent */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport axios from './lib/utils/axios_utils';\nimport { __ } from './locale';\nimport ModalStore from './boards/stores/modal_store';\n\n// TODO: remove eventHub hack after code splitting refactor\nwindow.emitSidebarEvent = window.emitSidebarEvent || $.noop;\n\nfunction UsersSelect(currentUser, els, options = {}) {\n  var $els;\n  this.users = this.users.bind(this);\n  this.user = this.user.bind(this);\n  this.usersPath = \"/autocomplete/users.json\";\n  this.userPath = \"/autocomplete/users/:id.json\";\n  if (currentUser != null) {\n    if (typeof currentUser === 'object') {\n      this.currentUser = currentUser;\n    } else {\n      this.currentUser = JSON.parse(currentUser);\n    }\n  }\n\n  const { handleClick } = options;\n\n  $els = $(els);\n\n  if (!els) {\n    $els = $('.js-user-search');\n  }\n\n  $els.each((function(_this) {\n    return function(i, dropdown) {\n      var options = {};\n      var $block, $collapsedSidebar, $dropdown, $loading, $selectbox, $value, abilityName, assignTo, assigneeTemplate, collapsedAssigneeTemplate, defaultLabel, defaultNullUser, firstUser, issueURL, selectedId, selectedIdDefault, showAnyUser, showNullUser, showMenuAbove;\n      $dropdown = $(dropdown);\n      options.projectId = $dropdown.data('projectId');\n      options.groupId = $dropdown.data('groupId');\n      options.showCurrentUser = $dropdown.data('currentUser');\n      options.todoFilter = $dropdown.data('todoFilter');\n      options.todoStateFilter = $dropdown.data('todoStateFilter');\n      showNullUser = $dropdown.data('nullUser');\n      defaultNullUser = $dropdown.data('nullUserDefault');\n      showMenuAbove = $dropdown.data('showMenuAbove');\n      showAnyUser = $dropdown.data('anyUser');\n      firstUser = $dropdown.data('firstUser');\n      options.authorId = $dropdown.data('authorId');\n      defaultLabel = $dropdown.data('defaultLabel');\n      issueURL = $dropdown.data('issueUpdate');\n      $selectbox = $dropdown.closest('.selectbox');\n      $block = $selectbox.closest('.block');\n      abilityName = $dropdown.data('abilityName');\n      $value = $block.find('.value');\n      $collapsedSidebar = $block.find('.sidebar-collapsed-user');\n      $loading = $block.find('.block-loading').fadeOut();\n      selectedIdDefault = (defaultNullUser && showNullUser) ? 0 : null;\n      selectedId = $dropdown.data('selected');\n\n      if (selectedId === undefined) {\n        selectedId = selectedIdDefault;\n      }\n\n      const assignYourself = function () {\n        const unassignedSelected = $dropdown.closest('.selectbox')\n          .find(`input[name='${$dropdown.data('fieldName')}'][value=0]`);\n\n        if (unassignedSelected) {\n          unassignedSelected.remove();\n        }\n\n        // Save current selected user to the DOM\n        const input = document.createElement('input');\n        input.type = 'hidden';\n        input.name = $dropdown.data('fieldName');\n\n        const currentUserInfo = $dropdown.data('currentUserInfo');\n\n        if (currentUserInfo) {\n          input.value = currentUserInfo.id;\n          input.dataset.meta = _.escape(currentUserInfo.name);\n        } else if (_this.currentUser) {\n          input.value = _this.currentUser.id;\n        }\n\n        if ($selectbox) {\n          $dropdown.parent().before(input);\n        } else {\n          $dropdown.after(input);\n        }\n      };\n\n      if ($block[0]) {\n        $block[0].addEventListener('assignYourself', assignYourself);\n      }\n\n      const getSelectedUserInputs = function() {\n        return $selectbox\n          .find(`input[name=\"${$dropdown.data('fieldName')}\"]`);\n      };\n\n      const getSelected = function() {\n        return getSelectedUserInputs()\n          .map((index, input) => parseInt(input.value, 10))\n          .get();\n      };\n\n      const checkMaxSelect = function() {\n        const maxSelect = $dropdown.data('maxSelect');\n        if (maxSelect) {\n          const selected = getSelected();\n\n          if (selected.length > maxSelect) {\n            const firstSelectedId = selected[0];\n            const firstSelected = $dropdown.closest('.selectbox')\n              .find(`input[name='${$dropdown.data('fieldName')}'][value=${firstSelectedId}]`);\n\n            firstSelected.remove();\n            emitSidebarEvent('sidebar.removeAssignee', {\n              id: firstSelectedId,\n            });\n          }\n        }\n      };\n\n      const getMultiSelectDropdownTitle = function(selectedUser, isSelected) {\n        const selectedUsers = getSelected()\n          .filter(u => u !== 0);\n\n        const firstUser = getSelectedUserInputs()\n          .map((index, input) => ({\n            name: input.dataset.meta,\n            value: parseInt(input.value, 10),\n          }))\n          .filter(u => u.id !== 0)\n          .get(0);\n\n        if (selectedUsers.length === 0) {\n          return 'Unassigned';\n        } else if (selectedUsers.length === 1) {\n          return firstUser.name;\n        } else if (isSelected) {\n          const otherSelected = selectedUsers.filter(s => s !== selectedUser.id);\n          return `${selectedUser.name} + ${otherSelected.length} more`;\n        } else {\n          return `${firstUser.name} + ${selectedUsers.length - 1} more`;\n        }\n      };\n\n      $('.assign-to-me-link').on('click', (e) => {\n        e.preventDefault();\n        $(e.currentTarget).hide();\n\n        if ($dropdown.data('multiSelect')) {\n          assignYourself();\n          checkMaxSelect();\n\n          const currentUserInfo = $dropdown.data('currentUserInfo');\n          $dropdown.find('.dropdown-toggle-text').text(getMultiSelectDropdownTitle(currentUserInfo)).removeClass('is-default');\n        } else {\n          const $input = $(`input[name=\"${$dropdown.data('fieldName')}\"]`);\n          $input.val(gon.current_user_id);\n          selectedId = $input.val();\n          $dropdown.find('.dropdown-toggle-text').text(gon.current_user_fullname).removeClass('is-default');\n        }\n      });\n\n      $block.on('click', '.js-assign-yourself', (e) => {\n        e.preventDefault();\n        return assignTo(_this.currentUser.id);\n      });\n\n      assignTo = function(selected) {\n        var data;\n        data = {};\n        data[abilityName] = {};\n        data[abilityName].assignee_id = selected != null ? selected : null;\n        $loading.removeClass('hidden').fadeIn();\n        $dropdown.trigger('loading.gl.dropdown');\n\n        return axios.put(issueURL, data)\n          .then(({ data }) => {\n            var user, tooltipTitle;\n            $dropdown.trigger('loaded.gl.dropdown');\n            $loading.fadeOut();\n            if (data.assignee) {\n              user = {\n                name: data.assignee.name,\n                username: data.assignee.username,\n                avatar: data.assignee.avatar_url\n              };\n              tooltipTitle = _.escape(user.name);\n            } else {\n              user = {\n                name: 'Unassigned',\n                username: '',\n                avatar: ''\n              };\n              tooltipTitle = __('Assignee');\n            }\n            $value.html(assigneeTemplate(user));\n            $collapsedSidebar.attr('title', tooltipTitle).tooltip('_fixTitle');\n            return $collapsedSidebar.html(collapsedAssigneeTemplate(user));\n          });\n      };\n      collapsedAssigneeTemplate = _.template('<% if( avatar ) { %> <a class=\"author-link\" href=\"/<%- username %>\"> <img width=\"24\" class=\"avatar avatar-inline s24\" alt=\"\" src=\"<%- avatar %>\"> </a> <% } else { %> <i class=\"fa fa-user\"></i> <% } %>');\n      assigneeTemplate = _.template('<% if (username) { %> <a class=\"author-link bold\" href=\"/<%- username %>\"> <% if( avatar ) { %> <img width=\"32\" class=\"avatar avatar-inline s32\" alt=\"\" src=\"<%- avatar %>\"> <% } %> <span class=\"author\"><%- name %></span> <span class=\"username\"> @<%- username %> </span> </a> <% } else { %> <span class=\"no-value assign-yourself\"> No assignee - <a href=\"#\" class=\"js-assign-yourself\"> assign yourself </a> </span> <% } %>');\n      return $dropdown.glDropdown({\n        showMenuAbove: showMenuAbove,\n        data: function(term, callback) {\n          return _this.users(term, options, function(users) {\n            // GitLabDropdownFilter returns this.instance\n            // GitLabDropdownRemote returns this.options.instance\n            const glDropdown = this.instance || this.options.instance;\n            glDropdown.options.processData(term, users, callback);\n          }.bind(this));\n        },\n        processData: function(term, data, callback) {\n          let users = data;\n\n          // Only show assigned user list when there is no search term\n          if ($dropdown.hasClass('js-multiselect') && term.length === 0) {\n            const selectedInputs = getSelectedUserInputs();\n\n            // Potential duplicate entries when dealing with issue board\n            // because issue board is also managed by vue\n            const selectedUsers = _.uniq(selectedInputs, false, a => a.value)\n              .filter((input) => {\n                const userId = parseInt(input.value, 10);\n                const inUsersArray = users.find(u => u.id === userId);\n\n                return !inUsersArray && userId !== 0;\n              })\n              .map((input) => {\n                const userId = parseInt(input.value, 10);\n                const { avatarUrl, avatar_url, name, username } = input.dataset;\n                return {\n                  avatar_url: avatarUrl || avatar_url,\n                  id: userId,\n                  name,\n                  username,\n                };\n              });\n\n            users = data.concat(selectedUsers);\n          }\n\n          let anyUser;\n          let index;\n          let len;\n          let name;\n          let obj;\n          let showDivider;\n          if (term.length === 0) {\n            showDivider = 0;\n            if (firstUser) {\n              // Move current user to the front of the list\n              for (index = 0, len = users.length; index < len; index += 1) {\n                obj = users[index];\n                if (obj.username === firstUser) {\n                  users.splice(index, 1);\n                  users.unshift(obj);\n                  break;\n                }\n              }\n            }\n            if (showNullUser) {\n              showDivider += 1;\n              users.unshift({\n                beforeDivider: true,\n                name: 'Unassigned',\n                id: 0\n              });\n            }\n            if (showAnyUser) {\n              showDivider += 1;\n              name = showAnyUser;\n              if (name === true) {\n                name = 'Any User';\n              }\n              anyUser = {\n                beforeDivider: true,\n                name: name,\n                id: null\n              };\n              users.unshift(anyUser);\n            }\n\n            if (showDivider) {\n              users.splice(showDivider, 0, 'divider');\n            }\n\n            if ($dropdown.hasClass('js-multiselect')) {\n              const selected = getSelected().filter(i => i !== 0);\n\n              if (selected.length > 0) {\n                if ($dropdown.data('dropdownHeader')) {\n                  showDivider += 1;\n                  users.splice(showDivider, 0, {\n                    header: $dropdown.data('dropdownHeader'),\n                  });\n                }\n\n                const selectedUsers = users\n                  .filter(u => selected.indexOf(u.id) !== -1)\n                  .sort((a, b) => a.name > b.name);\n\n                users = users.filter(u => selected.indexOf(u.id) === -1);\n\n                selectedUsers.forEach((selectedUser) => {\n                  showDivider += 1;\n                  users.splice(showDivider, 0, selectedUser);\n                });\n\n                users.splice(showDivider + 1, 0, 'divider');\n              }\n            }\n          }\n\n          callback(users);\n          if (showMenuAbove) {\n            $dropdown.data('glDropdown').positionMenuAbove();\n          }\n        },\n        filterable: true,\n        filterRemote: true,\n        search: {\n          fields: ['name', 'username']\n        },\n        selectable: true,\n        fieldName: $dropdown.data('fieldName'),\n        toggleLabel: function(selected, el, glDropdown) {\n          const inputValue = glDropdown.filterInput.val();\n\n          if (this.multiSelect && inputValue === '') {\n            // Remove non-users from the fullData array\n            const users = glDropdown.filteredFullData();\n            const callback = glDropdown.parseData.bind(glDropdown);\n\n            // Update the data model\n            this.processData(inputValue, users, callback);\n          }\n\n          if (this.multiSelect) {\n            return getMultiSelectDropdownTitle(selected, $(el).hasClass('is-active'));\n          }\n\n          if (selected && 'id' in selected && $(el).hasClass('is-active')) {\n            $dropdown.find('.dropdown-toggle-text').removeClass('is-default');\n            if (selected.text) {\n              return selected.text;\n            } else {\n              return selected.name;\n            }\n          } else {\n            $dropdown.find('.dropdown-toggle-text').addClass('is-default');\n            return defaultLabel;\n          }\n        },\n        defaultLabel: defaultLabel,\n        hidden: function(e) {\n          if ($dropdown.hasClass('js-multiselect')) {\n            emitSidebarEvent('sidebar.saveAssignees');\n          }\n\n          if (!$dropdown.data('alwaysShowSelectbox')) {\n            $selectbox.hide();\n\n            // Recalculate where .value is because vue might have changed it\n            $block = $selectbox.closest('.block');\n            $value = $block.find('.value');\n            // display:block overrides the hide-collapse rule\n            $value.css('display', '');\n          }\n        },\n        multiSelect: $dropdown.hasClass('js-multiselect'),\n        inputMeta: $dropdown.data('inputMeta'),\n        clicked: function(options) {\n          const { $el, e, isMarking } = options;\n          const user = options.selectedObj;\n\n          if ($dropdown.hasClass('js-multiselect')) {\n            const isActive = $el.hasClass('is-active');\n            const previouslySelected = $dropdown.closest('.selectbox')\n                .find(\"input[name='\" + ($dropdown.data('fieldName')) + \"'][value!=0]\");\n\n            // Enables support for limiting the number of users selected\n            // Automatically removes the first on the list if more users are selected\n            checkMaxSelect();\n\n            if (user.beforeDivider && user.name.toLowerCase() === 'unassigned') {\n              // Unassigned selected\n              previouslySelected.each((index, element) => {\n                const id = parseInt(element.value, 10);\n                element.remove();\n              });\n              emitSidebarEvent('sidebar.removeAllAssignees');\n            } else if (isActive) {\n              // user selected\n              emitSidebarEvent('sidebar.addAssignee', user);\n\n              // Remove unassigned selection (if it was previously selected)\n              const unassignedSelected = $dropdown.closest('.selectbox')\n                .find(\"input[name='\" + ($dropdown.data('fieldName')) + \"'][value=0]\");\n\n              if (unassignedSelected) {\n                unassignedSelected.remove();\n              }\n            } else {\n              if (previouslySelected.length === 0) {\n              // Select unassigned because there is no more selected users\n                this.addInput($dropdown.data('fieldName'), 0, {});\n              }\n\n              // User unselected\n              emitSidebarEvent('sidebar.removeAssignee', user);\n            }\n\n            if (getSelected().find(u => u === gon.current_user_id)) {\n              $('.assign-to-me-link').hide();\n            } else {\n              $('.assign-to-me-link').show();\n            }\n          }\n\n          var isIssueIndex, isMRIndex, page, selected;\n          page = $('body').attr('data-page');\n          isIssueIndex = page === 'projects:issues:index';\n          isMRIndex = (page === page && page === 'projects:merge_requests:index');\n          if ($dropdown.hasClass('js-filter-bulk-update') || $dropdown.hasClass('js-issuable-form-dropdown')) {\n            e.preventDefault();\n\n            const isSelecting = (user.id !== selectedId);\n            selectedId = isSelecting ? user.id : selectedIdDefault;\n\n            if (selectedId === gon.current_user_id) {\n              $('.assign-to-me-link').hide();\n            } else {\n              $('.assign-to-me-link').show();\n            }\n            return;\n          }\n          if ($el.closest('.add-issues-modal').length) {\n            ModalStore.store.filter[$dropdown.data('fieldName')] = user.id;\n          } else if (handleClick) {\n            e.preventDefault();\n            handleClick(user, isMarking);\n          } else if ($dropdown.hasClass('js-filter-submit') && (isIssueIndex || isMRIndex)) {\n            return Issuable.filterResults($dropdown.closest('form'));\n          } else if ($dropdown.hasClass('js-filter-submit')) {\n            return $dropdown.closest('form').submit();\n          } else if (!$dropdown.hasClass('js-multiselect')) {\n            selected = $dropdown.closest('.selectbox').find(\"input[name='\" + ($dropdown.data('fieldName')) + \"']\").val();\n            return assignTo(selected);\n          }\n\n          // Automatically close dropdown after assignee is selected\n          // since CE has no multiple assignees\n          // EE does not have a max-select\n          if ($dropdown.data('maxSelect') &&\n              getSelected().length === $dropdown.data('maxSelect')) {\n            // Close the dropdown\n            $dropdown.dropdown('toggle');\n          }\n        },\n        id: function (user) {\n          return user.id;\n        },\n        opened: function(e) {\n          const $el = $(e.currentTarget);\n          const selected = getSelected();\n          if ($dropdown.hasClass('js-issue-board-sidebar') && selected.length === 0) {\n            this.addInput($dropdown.data('fieldName'), 0, {});\n          }\n          $el.find('.is-active').removeClass('is-active');\n\n          function highlightSelected(id) {\n            $el.find(`li[data-user-id=\"${id}\"] .dropdown-menu-user-link`).addClass('is-active');\n          }\n\n          if (selected.length > 0) {\n            getSelected().forEach(selectedId => highlightSelected(selectedId));\n          } else if ($dropdown.hasClass('js-issue-board-sidebar')) {\n            highlightSelected(0);\n          } else {\n            highlightSelected(selectedId);\n          }\n        },\n        updateLabel: $dropdown.data('dropdownTitle'),\n        renderRow: function(user) {\n          var avatar, img, listClosingTags, listWithName, listWithUserName, username;\n          username = user.username ? \"@\" + user.username : \"\";\n          avatar = user.avatar_url ? user.avatar_url : gon.default_avatar_url;\n\n          let selected = false;\n\n          if (this.multiSelect) {\n            selected = getSelected().find(u => user.id === u);\n\n            const { fieldName } = this;\n            const field = $dropdown.closest('.selectbox').find(\"input[name='\" + fieldName + \"'][value='\" + user.id + \"']\");\n\n            if (field.length) {\n              selected = true;\n            }\n          } else {\n            selected = user.id === selectedId;\n          }\n\n          img = \"\";\n          if (user.beforeDivider != null) {\n            `<li><a href='#' class='${selected === true ? 'is-active' : ''}'>${_.escape(user.name)}</a></li>`;\n          } else {\n            img = \"<img src='\" + avatar + \"' class='avatar avatar-inline' width='32' />\";\n          }\n\n          return `\n            <li data-user-id=${user.id}>\n              <a href='#' class='dropdown-menu-user-link ${selected === true ? 'is-active' : ''}'>\n                ${img}\n                <strong class='dropdown-menu-user-full-name'>\n                  ${_.escape(user.name)}\n                </strong>\n                ${username ? `<span class='dropdown-menu-user-username'>${username}</span>` : ''}\n              </a>\n            </li>\n          `;\n        }\n      });\n    };\n  })(this));\n  $('.ajax-users-select').each((function(_this) {\n    return function(i, select) {\n      var firstUser, showAnyUser, showEmailUser, showNullUser;\n      var options = {};\n      options.skipLdap = $(select).hasClass('skip_ldap');\n      options.projectId = $(select).data('projectId');\n      options.groupId = $(select).data('groupId');\n      options.showCurrentUser = $(select).data('currentUser');\n      options.authorId = $(select).data('authorId');\n      options.skipUsers = $(select).data('skipUsers');\n      showNullUser = $(select).data('nullUser');\n      showAnyUser = $(select).data('anyUser');\n      showEmailUser = $(select).data('emailUser');\n      firstUser = $(select).data('firstUser');\n      return $(select).select2({\n        placeholder: \"Search for a user\",\n        multiple: $(select).hasClass('multiselect'),\n        minimumInputLength: 0,\n        query: function(query) {\n          return _this.users(query.term, options, function(users) {\n            var anyUser, data, emailUser, index, len, name, nullUser, obj, ref;\n            data = {\n              results: users\n            };\n            if (query.term.length === 0) {\n              if (firstUser) {\n                // Move current user to the front of the list\n                ref = data.results;\n\n                for (index = 0, len = ref.length; index < len; index += 1) {\n                  obj = ref[index];\n                  if (obj.username === firstUser) {\n                    data.results.splice(index, 1);\n                    data.results.unshift(obj);\n                    break;\n                  }\n                }\n              }\n              if (showNullUser) {\n                nullUser = {\n                  name: 'Unassigned',\n                  id: 0\n                };\n                data.results.unshift(nullUser);\n              }\n              if (showAnyUser) {\n                name = showAnyUser;\n                if (name === true) {\n                  name = 'Any User';\n                }\n                anyUser = {\n                  name: name,\n                  id: null\n                };\n                data.results.unshift(anyUser);\n              }\n            }\n            if (showEmailUser && data.results.length === 0 && query.term.match(/^[^@]+@[^@]+$/)) {\n              var trimmed = query.term.trim();\n              emailUser = {\n                name: \"Invite \\\"\" + query.term + \"\\\" by email\",\n                username: trimmed,\n                id: trimmed,\n                invite: true\n              };\n              data.results.unshift(emailUser);\n            }\n            return query.callback(data);\n          });\n        },\n        initSelection: function() {\n          var args;\n          args = 1 <= arguments.length ? [].slice.call(arguments, 0) : [];\n          return _this.initSelection.apply(_this, args);\n        },\n        formatResult: function() {\n          var args;\n          args = 1 <= arguments.length ? [].slice.call(arguments, 0) : [];\n          return _this.formatResult.apply(_this, args);\n        },\n        formatSelection: function() {\n          var args;\n          args = 1 <= arguments.length ? [].slice.call(arguments, 0) : [];\n          return _this.formatSelection.apply(_this, args);\n        },\n        dropdownCssClass: \"ajax-users-dropdown\",\n        // we do not want to escape markup since we are displaying html in results\n        escapeMarkup: function(m) {\n          return m;\n        }\n      });\n    };\n  })(this));\n}\n\nUsersSelect.prototype.initSelection = function(element, callback) {\n  var id, nullUser;\n  id = $(element).val();\n  if (id === \"0\") {\n    nullUser = {\n      name: 'Unassigned'\n    };\n    return callback(nullUser);\n  } else if (id !== \"\") {\n    return this.user(id, callback);\n  }\n};\n\nUsersSelect.prototype.formatResult = function(user) {\n  var avatar;\n  if (user.avatar_url) {\n    avatar = user.avatar_url;\n  } else {\n    avatar = gon.default_avatar_url;\n  }\n  return \"<div class='user-result \" + (!user.username ? 'no-username' : void 0) + \"'> <div class='user-image'><img class='avatar avatar-inline s32' src='\" + avatar + \"'></div> <div class='user-name dropdown-menu-user-full-name'>\" + _.escape(user.name) + \"</div> <div class='user-username dropdown-menu-user-username'>\" + (!user.invite ? \"@\" + _.escape(user.username) : \"\") + \"</div> </div>\";\n};\n\nUsersSelect.prototype.formatSelection = function(user) {\n  return _.escape(user.name);\n};\n\nUsersSelect.prototype.user = function(user_id, callback) {\n  if (!/^\\d+$/.test(user_id)) {\n    return false;\n  }\n\n  var url;\n  url = this.buildUrl(this.userPath);\n  url = url.replace(':id', user_id);\n  return axios.get(url)\n    .then(({ data }) => {\n      callback(data);\n    });\n};\n\n// Return users list. Filtered by query\n// Only active users retrieved\nUsersSelect.prototype.users = function(query, options, callback) {\n  const url = this.buildUrl(this.usersPath);\n  const params = {\n    search: query,\n    active: true,\n    project_id: options.projectId || null,\n    group_id: options.groupId || null,\n    skip_ldap: options.skipLdap || null,\n    todo_filter: options.todoFilter || null,\n    todo_state_filter: options.todoStateFilter || null,\n    current_user: options.showCurrentUser || null,\n    author_id: options.authorId || null,\n    skip_users: options.skipUsers || null\n  };\n  return axios.get(url, { params })\n    .then(({ data }) => {\n      callback(data);\n    });\n};\n\nUsersSelect.prototype.buildUrl = function(url) {\n  if (gon.relative_url_root != null) {\n    url = gon.relative_url_root.replace(/\\/$/, '') + url;\n  }\n  return url;\n};\n\nexport default UsersSelect;\n","export function createImageBadge(noteId, { x, y }, classNames = []) {\n  const buttonEl = document.createElement('button');\n  const classList = classNames.concat(['js-image-badge']);\n  classList.forEach(className => buttonEl.classList.add(className));\n  buttonEl.setAttribute('type', 'button');\n  buttonEl.setAttribute('disabled', true);\n  buttonEl.dataset.noteId = noteId;\n  buttonEl.style.left = `${x}px`;\n  buttonEl.style.top = `${y}px`;\n\n  return buttonEl;\n}\n\nexport function addImageBadge(containerEl, { coordinate, badgeText, noteId }) {\n  const buttonEl = createImageBadge(noteId, coordinate, ['badge']);\n  buttonEl.innerText = badgeText;\n\n  containerEl.appendChild(buttonEl);\n}\n\nexport function addImageCommentBadge(containerEl, { coordinate, noteId }) {\n  const buttonEl = createImageBadge(noteId, coordinate, ['image-comment-badge']);\n  buttonEl.innerHTML = gl.utils.spriteIcon('image-comment-dark');\n\n  containerEl.appendChild(buttonEl);\n}\n\nexport function addAvatarBadge(el, event) {\n  const { noteId, badgeNumber } = event.detail;\n\n  // Add badge to new comment\n  const avatarBadgeEl = el.querySelector(`#${noteId} .badge`);\n  avatarBadgeEl.innerText = badgeNumber;\n  avatarBadgeEl.classList.remove('hidden');\n}\n","export function addCommentIndicator(containerEl, { x, y }) {\n  const buttonEl = document.createElement('button');\n  buttonEl.classList.add('btn-transparent');\n  buttonEl.classList.add('comment-indicator');\n  buttonEl.setAttribute('type', 'button');\n  buttonEl.style.left = `${x}px`;\n  buttonEl.style.top = `${y}px`;\n\n  buttonEl.innerHTML = gl.utils.spriteIcon('image-comment-dark');\n\n  containerEl.appendChild(buttonEl);\n}\n\nexport function removeCommentIndicator(imageFrameEl) {\n  const commentIndicatorEl = imageFrameEl.querySelector('.comment-indicator');\n  const imageEl = imageFrameEl.querySelector('img');\n  const willRemove = !!commentIndicatorEl;\n  let meta = {};\n\n  if (willRemove) {\n    meta = {\n      x: parseInt(commentIndicatorEl.style.left, 10),\n      y: parseInt(commentIndicatorEl.style.top, 10),\n      image: {\n        width: imageEl.width,\n        height: imageEl.height,\n      },\n    };\n\n    commentIndicatorEl.remove();\n  }\n\n  return Object.assign({}, meta, {\n    removed: willRemove,\n  });\n}\n\nexport function showCommentIndicator(imageFrameEl, coordinate) {\n  const { x, y } = coordinate;\n  const commentIndicatorEl = imageFrameEl.querySelector('.comment-indicator');\n\n  if (commentIndicatorEl) {\n    commentIndicatorEl.style.left = `${x}px`;\n    commentIndicatorEl.style.top = `${y}px`;\n  } else {\n    addCommentIndicator(imageFrameEl, coordinate);\n  }\n}\n\nexport function commentIndicatorOnClick(event) {\n  // Prevent from triggering onAddImageDiffNote in notes.js\n  event.stopPropagation();\n\n  const buttonEl = event.currentTarget;\n  const diffViewerEl = buttonEl.closest('.diff-viewer');\n  const textareaEl = diffViewerEl.querySelector('.note-container .note-textarea');\n  textareaEl.focus();\n}\n","import imageDiffHelper from './helpers/index';\n\nconst defaultMeta = {\n  x: 0,\n  y: 0,\n  width: 0,\n  height: 0,\n};\n\nexport default class ImageBadge {\n  constructor(options) {\n    const { noteId, discussionId } = options;\n\n    this.actual = options.actual || defaultMeta;\n    this.browser = options.browser || defaultMeta;\n    this.noteId = noteId;\n    this.discussionId = discussionId;\n\n    if (options.imageEl && !options.browser) {\n      this.browser = imageDiffHelper.resizeCoordinatesToImageElement(options.imageEl, this.actual);\n    }\n  }\n}\n","import $ from 'jquery';\nimport imageDiffHelper from './helpers/index';\nimport ImageBadge from './image_badge';\nimport { isImageLoaded } from '../lib/utils/image_utility';\n\nexport default class ImageDiff {\n  constructor(el, options) {\n    this.el = el;\n    this.canCreateNote = !!(options && options.canCreateNote);\n    this.renderCommentBadge = !!(options && options.renderCommentBadge);\n    this.$noteContainer = $('.note-container', this.el);\n    this.imageBadges = [];\n  }\n\n  init() {\n    this.imageFrameEl = this.el.querySelector('.diff-file .js-image-frame');\n    this.imageEl = this.imageFrameEl.querySelector('img');\n\n    this.bindEvents();\n  }\n\n  bindEvents() {\n    this.imageClickedWrapper = this.imageClicked.bind(this);\n    this.imageBlurredWrapper = imageDiffHelper.removeCommentIndicator.bind(null, this.imageFrameEl);\n    this.addBadgeWrapper = this.addBadge.bind(this);\n    this.removeBadgeWrapper = this.removeBadge.bind(this);\n    this.renderBadgesWrapper = this.renderBadges.bind(this);\n\n    // Render badges\n    if (isImageLoaded(this.imageEl)) {\n      this.renderBadges();\n    } else {\n      this.imageEl.addEventListener('load', this.renderBadgesWrapper);\n    }\n\n    // jquery makes the event delegation here much simpler\n    this.$noteContainer.on('click', '.js-diff-notes-toggle', imageDiffHelper.toggleCollapsed);\n    $(this.el).on('click', '.comment-indicator', imageDiffHelper.commentIndicatorOnClick);\n\n    if (this.canCreateNote) {\n      this.el.addEventListener('click.imageDiff', this.imageClickedWrapper);\n      this.el.addEventListener('blur.imageDiff', this.imageBlurredWrapper);\n      this.el.addEventListener('addBadge.imageDiff', this.addBadgeWrapper);\n      this.el.addEventListener('removeBadge.imageDiff', this.removeBadgeWrapper);\n    }\n  }\n\n  imageClicked(event) {\n    const customEvent = event.detail;\n    const selection = imageDiffHelper.getTargetSelection(customEvent);\n    const el = customEvent.currentTarget;\n\n    imageDiffHelper.setPositionDataAttribute(el, selection.actual);\n    imageDiffHelper.showCommentIndicator(this.imageFrameEl, selection.browser);\n  }\n\n  renderBadges() {\n    const discussionsEls = this.el.querySelectorAll('.note-container .discussion-notes .notes');\n    [...discussionsEls].forEach(this.renderBadge.bind(this));\n  }\n\n  renderBadge(discussionEl, index) {\n    const imageBadge = imageDiffHelper\n      .generateBadgeFromDiscussionDOM(this.imageFrameEl, discussionEl);\n\n    this.imageBadges.push(imageBadge);\n\n    const options = {\n      coordinate: imageBadge.browser,\n      noteId: imageBadge.noteId,\n    };\n\n    if (this.renderCommentBadge) {\n      imageDiffHelper.addImageCommentBadge(this.imageFrameEl, options);\n    } else {\n      const numberBadgeOptions = Object.assign({}, options, {\n        badgeText: index + 1,\n      });\n\n      imageDiffHelper.addImageBadge(this.imageFrameEl, numberBadgeOptions);\n    }\n  }\n\n  addBadge(event) {\n    const { x, y, width, height, noteId, discussionId } = event.detail;\n    const badgeText = this.imageBadges.length + 1;\n    const imageBadge = new ImageBadge({\n      actual: {\n        x,\n        y,\n        width,\n        height,\n      },\n      imageEl: this.imageFrameEl.querySelector('img'),\n      noteId,\n      discussionId,\n    });\n\n    this.imageBadges.push(imageBadge);\n\n    imageDiffHelper.addImageBadge(this.imageFrameEl, {\n      coordinate: imageBadge.browser,\n      badgeText,\n      noteId,\n    });\n\n    imageDiffHelper.addAvatarBadge(this.el, {\n      detail: {\n        noteId,\n        badgeNumber: badgeText,\n      },\n    });\n\n    const discussionEl = this.el.querySelector(`#discussion_${discussionId}`);\n    imageDiffHelper.updateDiscussionBadgeNumber(discussionEl, badgeText);\n  }\n\n  removeBadge(event) {\n    const { badgeNumber } = event.detail;\n    const indexToRemove = badgeNumber - 1;\n    const imageBadgeEls = this.imageFrameEl.querySelectorAll('.badge');\n\n    if (this.imageBadges.length !== badgeNumber) {\n      // Cascade badges count numbers for (avatar badges + image badges)\n      this.imageBadges.forEach((badge, index) => {\n        if (index > indexToRemove) {\n          const { discussionId } = badge;\n          const updatedBadgeNumber = index;\n          const discussionEl = this.el.querySelector(`#discussion_${discussionId}`);\n\n          imageBadgeEls[index].innerText = updatedBadgeNumber;\n\n          imageDiffHelper.updateDiscussionBadgeNumber(discussionEl, updatedBadgeNumber);\n          imageDiffHelper.updateDiscussionAvatarBadgeNumber(discussionEl, updatedBadgeNumber);\n        }\n      });\n    }\n\n    this.imageBadges.splice(indexToRemove, 1);\n\n    const imageBadgeEl = imageBadgeEls[indexToRemove];\n    imageBadgeEl.remove();\n  }\n}\n","/* eslint-disable import/prefer-default-export */\n\nexport function isImageLoaded(element) {\n  return element.complete && element.naturalHeight !== 0;\n}\n","export const viewTypes = {\n  TWO_UP: 'TWO_UP',\n  SWIPE: 'SWIPE',\n  ONION_SKIN: 'ONION_SKIN',\n};\n\nexport function isValidViewType(validate) {\n  return !!Object.getOwnPropertyNames(viewTypes).find(viewType => viewType === validate);\n}\n","import imageDiffHelper from './helpers/index';\nimport { viewTypes, isValidViewType } from './view_types';\nimport ImageDiff from './image_diff';\n\nexport default class ReplacedImageDiff extends ImageDiff {\n  init(defaultViewType = viewTypes.TWO_UP) {\n    this.imageFrameEls = {\n      [viewTypes.TWO_UP]: this.el.querySelector('.two-up .js-image-frame'),\n      [viewTypes.SWIPE]: this.el.querySelector('.swipe .js-image-frame'),\n      [viewTypes.ONION_SKIN]: this.el.querySelector('.onion-skin .js-image-frame'),\n    };\n\n    const viewModesEl = this.el.querySelector('.view-modes-menu');\n    this.viewModesEls = {\n      [viewTypes.TWO_UP]: viewModesEl.querySelector('.two-up'),\n      [viewTypes.SWIPE]: viewModesEl.querySelector('.swipe'),\n      [viewTypes.ONION_SKIN]: viewModesEl.querySelector('.onion-skin'),\n    };\n\n    this.currentView = defaultViewType;\n    this.generateImageEls();\n    this.bindEvents();\n  }\n\n  generateImageEls() {\n    this.imageEls = {};\n\n    const viewTypeNames = Object.getOwnPropertyNames(viewTypes);\n    viewTypeNames.forEach((viewType) => {\n      this.imageEls[viewType] = this.imageFrameEls[viewType].querySelector('img');\n    });\n  }\n\n  bindEvents() {\n    super.bindEvents();\n\n    this.changeToViewTwoUp = this.changeView.bind(this, viewTypes.TWO_UP);\n    this.changeToViewSwipe = this.changeView.bind(this, viewTypes.SWIPE);\n    this.changeToViewOnionSkin = this.changeView.bind(this, viewTypes.ONION_SKIN);\n\n    this.viewModesEls[viewTypes.TWO_UP].addEventListener('click', this.changeToViewTwoUp);\n    this.viewModesEls[viewTypes.SWIPE].addEventListener('click', this.changeToViewSwipe);\n    this.viewModesEls[viewTypes.ONION_SKIN].addEventListener('click', this.changeToViewOnionSkin);\n  }\n\n  get imageEl() {\n    return this.imageEls[this.currentView];\n  }\n\n  get imageFrameEl() {\n    return this.imageFrameEls[this.currentView];\n  }\n\n  changeView(newView) {\n    if (!isValidViewType(newView)) {\n      return;\n    }\n\n    const indicator = imageDiffHelper.removeCommentIndicator(this.imageFrameEl);\n\n    this.currentView = newView;\n\n    // Clear existing badges on new view\n    const existingBadges = this.imageFrameEl.querySelectorAll('.badge');\n    [...existingBadges].map(badge => badge.remove());\n\n    // Remove existing references to old view image badges\n    this.imageBadges = [];\n\n    // Image_file.js has a fade animation of 200ms for loading the view\n    // Need to wait an additional 250ms for the images to be displayed\n    // on window in order to re-normalize their dimensions\n    setTimeout(this.renderNewView.bind(this, indicator), 250);\n  }\n\n  renderNewView(indicator) {\n    // Generate badge coordinates on new view\n    this.renderBadges();\n\n    // Re-render indicator in new view\n    if (indicator.removed) {\n      const normalizedIndicator = imageDiffHelper\n        .resizeCoordinatesToImageElement(this.imageEl, {\n          x: indicator.x,\n          y: indicator.y,\n          width: indicator.image.width,\n          height: indicator.image.height,\n        });\n      imageDiffHelper.showCommentIndicator(this.imageFrameEl, normalizedIndicator);\n    }\n  }\n}\n","/* eslint-disable func-names, wrap-iife, no-var, prefer-arrow-callback, no-else-return, consistent-return, prefer-template, quotes, one-var, one-var-declaration-per-line, no-unused-vars, no-return-assign, comma-dangle, quote-props, no-unused-expressions, no-sequences, max-len */\n\nimport $ from 'jquery';\n\n// Width where images must fits in, for 2-up this gets divided by 2\nconst availWidth = 900;\nconst viewModes = ['two-up', 'swipe'];\n\nexport default class ImageFile {\n  constructor(file) {\n    this.file = file;\n    this.requestImageInfo($('.two-up.view .frame.deleted img', this.file), (function(_this) {\n      return function(deletedWidth, deletedHeight) {\n        return _this.requestImageInfo($('.two-up.view .frame.added img', _this.file), function(width, height) {\n          _this.initViewModes();\n\n          // Load two-up view after images are loaded\n          // so that we can display the correct width and height information\n          const $images = $('.two-up.view img', _this.file);\n\n          $images.waitForImages(function() {\n            _this.initView('two-up');\n          });\n        });\n      };\n    })(this));\n  }\n\n  initViewModes() {\n    const viewMode = viewModes[0];\n    $('.view-modes', this.file).removeClass('hide');\n    $('.view-modes-menu', this.file).on('click', 'li', (function(_this) {\n      return function(event) {\n        if (!$(event.currentTarget).hasClass('active')) {\n          return _this.activateViewMode(event.currentTarget.className);\n        }\n      };\n    })(this));\n    return this.activateViewMode(viewMode);\n  }\n\n  activateViewMode(viewMode) {\n    $('.view-modes-menu li', this.file).removeClass('active').filter(\".\" + viewMode).addClass('active');\n    return $(\".view:visible:not(.\" + viewMode + \")\", this.file).fadeOut(200, (function(_this) {\n      return function() {\n        $(\".view.\" + viewMode, _this.file).fadeIn(200);\n        return _this.initView(viewMode);\n      };\n    })(this));\n  }\n\n  initView(viewMode) {\n    return this.views[viewMode].call(this);\n  }\n  // eslint-disable-next-line class-methods-use-this\n  initDraggable($el, padding, callback) {\n    var dragging = false;\n    var $body = $('body');\n    var $offsetEl = $el.parent();\n\n    $el.off('mousedown').on('mousedown', function() {\n      dragging = true;\n      $body.css('user-select', 'none');\n    });\n\n    $body.off('mouseup').off('mousemove').on('mouseup', function() {\n      dragging = false;\n      $body.css('user-select', '');\n    })\n    .on('mousemove', function(e) {\n      var left;\n      if (!dragging) return;\n\n      left = e.pageX - ($offsetEl.offset().left + padding);\n\n      callback(e, left);\n    });\n  }\n\n  prepareFrames(view) {\n    var maxHeight, maxWidth;\n    maxWidth = 0;\n    maxHeight = 0;\n    $('.frame', view).each((function(_this) {\n      return function(index, frame) {\n        var height, width;\n        width = $(frame).width();\n        height = $(frame).height();\n        maxWidth = width > maxWidth ? width : maxWidth;\n        return maxHeight = height > maxHeight ? height : maxHeight;\n      };\n    })(this)).css({\n      width: maxWidth,\n      height: maxHeight\n    });\n    return [maxWidth, maxHeight];\n  }\n\n  views = {\n    'two-up': function() {\n      return $('.two-up.view .wrap', this.file).each((function(_this) {\n        return function(index, wrap) {\n          $('img', wrap).each(function() {\n            var currentWidth;\n            currentWidth = $(this).width();\n            if (currentWidth > availWidth / 2) {\n              return $(this).width(availWidth / 2);\n            }\n          });\n          return _this.requestImageInfo($('img', wrap), function(width, height) {\n            $('.image-info .meta-width', wrap).text(width + \"px\");\n            $('.image-info .meta-height', wrap).text(height + \"px\");\n            return $('.image-info', wrap).removeClass('hide');\n          });\n        };\n      })(this));\n    },\n    'swipe': function() {\n      var maxHeight, maxWidth;\n      maxWidth = 0;\n      maxHeight = 0;\n      return $('.swipe.view', this.file).each((function(_this) {\n        return function(index, view) {\n          var $swipeWrap, $swipeBar, $swipeFrame, wrapPadding, ref;\n          ref = _this.prepareFrames(view), [maxWidth, maxHeight] = ref;\n          $swipeFrame = $('.swipe-frame', view);\n          $swipeWrap = $('.swipe-wrap', view);\n          $swipeBar = $('.swipe-bar', view);\n\n          $swipeFrame.css({\n            width: maxWidth + 16,\n            height: maxHeight + 28\n          });\n          $swipeWrap.css({\n            width: maxWidth + 1,\n            height: maxHeight + 2\n          });\n          // Set swipeBar left position to match image frame\n          $swipeBar.css({\n            left: 1\n          });\n\n          wrapPadding = parseInt($swipeWrap.css('right').replace('px', ''), 10);\n\n          _this.initDraggable($swipeBar, wrapPadding, function(e, left) {\n            if (left > 0 && left < $swipeFrame.width() - (wrapPadding * 2)) {\n              $swipeWrap.width((maxWidth + 1) - left);\n              $swipeBar.css('left', left);\n            }\n          });\n        };\n      })(this));\n    },\n    'onion-skin': function() {\n      var dragTrackWidth, maxHeight, maxWidth;\n      maxWidth = 0;\n      maxHeight = 0;\n      dragTrackWidth = $('.drag-track', this.file).width() - $('.dragger', this.file).width();\n      return $('.onion-skin.view', this.file).each((function(_this) {\n        return function(index, view) {\n          var $frame, $track, $dragger, $frameAdded, framePadding, ref, dragging = false;\n          ref = _this.prepareFrames(view), [maxWidth, maxHeight] = ref;\n          $frame = $('.onion-skin-frame', view);\n          $frameAdded = $('.frame.added', view);\n          $track = $('.drag-track', view);\n          $dragger = $('.dragger', $track);\n\n          $frame.css({\n            width: maxWidth + 16,\n            height: maxHeight + 28\n          });\n          $('.swipe-wrap', view).css({\n            width: maxWidth + 1,\n            height: maxHeight + 2\n          });\n          $dragger.css({\n            left: dragTrackWidth\n          });\n\n          $frameAdded.css('opacity', 1);\n          framePadding = parseInt($frameAdded.css('right').replace('px', ''), 10);\n\n          _this.initDraggable($dragger, framePadding, function(e, left) {\n            var opacity = left / dragTrackWidth;\n\n            if (opacity >= 0 && opacity <= 1) {\n              $dragger.css('left', left);\n              $frameAdded.css('opacity', opacity);\n            }\n          });\n        };\n      })(this));\n    }\n  }\n\n  requestImageInfo(img, callback) {\n    const domImg = img.get(0);\n    if (domImg) {\n      if (domImg.complete) {\n        return callback.call(this, domImg.naturalWidth, domImg.naturalHeight);\n      } else {\n        return img.on('load', (function(_this) {\n          return function() {\n            return callback.call(_this, domImg.naturalWidth, domImg.naturalHeight);\n          };\n        })(this));\n      }\n    }\n  }\n}\n","import * as badgeHelper from './badge_helper';\nimport * as commentIndicatorHelper from './comment_indicator_helper';\nimport * as domHelper from './dom_helper';\nimport * as utilsHelper from './utils_helper';\n\nexport default {\n  addCommentIndicator: commentIndicatorHelper.addCommentIndicator,\n  removeCommentIndicator: commentIndicatorHelper.removeCommentIndicator,\n  showCommentIndicator: commentIndicatorHelper.showCommentIndicator,\n  commentIndicatorOnClick: commentIndicatorHelper.commentIndicatorOnClick,\n\n  addImageBadge: badgeHelper.addImageBadge,\n  addImageCommentBadge: badgeHelper.addImageCommentBadge,\n  addAvatarBadge: badgeHelper.addAvatarBadge,\n\n  setPositionDataAttribute: domHelper.setPositionDataAttribute,\n  updateDiscussionAvatarBadgeNumber: domHelper.updateDiscussionAvatarBadgeNumber,\n  updateDiscussionBadgeNumber: domHelper.updateDiscussionBadgeNumber,\n  toggleCollapsed: domHelper.toggleCollapsed,\n\n  resizeCoordinatesToImageElement: utilsHelper.resizeCoordinatesToImageElement,\n  generateBadgeFromDiscussionDOM: utilsHelper.generateBadgeFromDiscussionDOM,\n  getTargetSelection: utilsHelper.getTargetSelection,\n  initImageDiff: utilsHelper.initImageDiff,\n};\n","export function setPositionDataAttribute(el, options) {\n  // Update position data attribute so that the\n  // new comment form can use this data for ajax request\n  const { x, y, width, height } = options;\n  const { position } = el.dataset;\n\n  const positionObject = Object.assign({}, JSON.parse(position), {\n    x,\n    y,\n    width,\n    height,\n  });\n\n  el.setAttribute('data-position', JSON.stringify(positionObject));\n}\n\nexport function updateDiscussionAvatarBadgeNumber(discussionEl, newBadgeNumber) {\n  const avatarBadgeEl = discussionEl.querySelector('.image-diff-avatar-link .badge');\n  avatarBadgeEl.innerText = newBadgeNumber;\n}\n\nexport function updateDiscussionBadgeNumber(discussionEl, newBadgeNumber) {\n  const discussionBadgeEl = discussionEl.querySelector('.badge');\n  discussionBadgeEl.innerText = newBadgeNumber;\n}\n\nexport function toggleCollapsed(event) {\n  const toggleButtonEl = event.currentTarget;\n  const discussionNotesEl = toggleButtonEl.closest('.discussion-notes');\n  const formEl = discussionNotesEl.querySelector('.discussion-form');\n  const isCollapsed = discussionNotesEl.classList.contains('collapsed');\n\n  if (isCollapsed) {\n    discussionNotesEl.classList.remove('collapsed');\n  } else {\n    discussionNotesEl.classList.add('collapsed');\n  }\n\n  // Override the inline display style set in notes.js\n  if (formEl && !isCollapsed) {\n    formEl.style.display = 'none';\n  } else if (formEl && isCollapsed) {\n    formEl.style.display = 'block';\n  }\n}\n","import ImageBadge from '../image_badge';\nimport ImageDiff from '../image_diff';\nimport ReplacedImageDiff from '../replaced_image_diff';\nimport ImageFile from '../../commit/image_file';\n\nexport function resizeCoordinatesToImageElement(imageEl, meta) {\n  const { x, y, width, height } = meta;\n\n  const imageWidth = imageEl.width;\n  const imageHeight = imageEl.height;\n\n  const widthRatio = imageWidth / width;\n  const heightRatio = imageHeight / height;\n\n  return {\n    x: Math.round(x * widthRatio),\n    y: Math.round(y * heightRatio),\n    width: imageWidth,\n    height: imageHeight,\n  };\n}\n\nexport function generateBadgeFromDiscussionDOM(imageFrameEl, discussionEl) {\n  const position = JSON.parse(discussionEl.dataset.position);\n  const firstNoteEl = discussionEl.querySelector('.note');\n  const badge = new ImageBadge({\n    actual: position,\n    imageEl: imageFrameEl.querySelector('img'),\n    noteId: firstNoteEl.id,\n    discussionId: discussionEl.dataset.discussionId,\n  });\n\n  return badge;\n}\n\nexport function getTargetSelection(event) {\n  const containerEl = event.currentTarget;\n  const imageEl = containerEl.querySelector('img');\n\n  const x = event.offsetX;\n  const y = event.offsetY;\n\n  const { width, height } = imageEl;\n\n  const actualWidth = imageEl.naturalWidth;\n  const actualHeight = imageEl.naturalHeight;\n\n  const widthRatio = actualWidth / width;\n  const heightRatio = actualHeight / height;\n\n  // Browser will include the frame as a clickable target,\n  // which would result in potential 1px out of bounds value\n  // This bound the coordinates to inside the frame\n  const normalizedX = Math.max(0, x) && Math.min(x, width);\n  const normalizedY = Math.max(0, y) && Math.min(y, height);\n\n  return {\n    browser: {\n      x: normalizedX,\n      y: normalizedY,\n      width,\n      height,\n    },\n    actual: {\n      // Round x, y so that we don't need to deal with decimals\n      x: Math.round(normalizedX * widthRatio),\n      y: Math.round(normalizedY * heightRatio),\n      width: actualWidth,\n      height: actualHeight,\n    },\n  };\n}\n\nexport function initImageDiff(fileEl, canCreateNote, renderCommentBadge) {\n  const options = {\n    canCreateNote,\n    renderCommentBadge,\n  };\n  let diff;\n\n  // ImageFile needs to be invoked before initImageDiff so that badges\n  // can mount to the correct location\n  new ImageFile(fileEl); // eslint-disable-line no-new\n\n  if (fileEl.querySelector('.diff-file .js-single-image')) {\n    diff = new ImageDiff(fileEl, options);\n    diff.init();\n  } else if (fileEl.querySelector('.diff-file .js-replaced-image')) {\n    diff = new ReplacedImageDiff(fileEl, options);\n    diff.init();\n  }\n\n  return diff;\n}\n","import initMergeRequest from '~/pages/projects/merge_requests/init_merge_request';\n\ndocument.addEventListener('DOMContentLoaded', initMergeRequest);\n","/* eslint-disable no-param-reassign, prefer-template, no-void, consistent-return */\n\nimport AccessorUtilities from './lib/utils/accessor';\n\nexport default class Autosave {\n  constructor(field, key) {\n    this.field = field;\n\n    this.isLocalStorageAvailable = AccessorUtilities.isLocalStorageAccessSafe();\n    if (key.join != null) {\n      key = key.join('/');\n    }\n    this.key = 'autosave/' + key;\n    this.field.data('autosave', this);\n    this.restore();\n    this.field.on('input', () => this.save());\n  }\n\n  restore() {\n    if (!this.isLocalStorageAvailable) return;\n    if (!this.field.length) return;\n\n    const text = window.localStorage.getItem(this.key);\n\n    if ((text != null ? text.length : void 0) > 0) {\n      this.field.val(text);\n    }\n\n    this.field.trigger('input');\n    // v-model does not update with jQuery trigger\n    // https://github.com/vuejs/vue/issues/2804#issuecomment-216968137\n    const event = new Event('change', { bubbles: true, cancelable: false });\n    const field = this.field.get(0);\n    if (field) {\n      field.dispatchEvent(event);\n    }\n  }\n\n  save() {\n    if (!this.field.length) return;\n\n    const text = this.field.val();\n\n    if (this.isLocalStorageAvailable && (text != null ? text.length : void 0) > 0) {\n      return window.localStorage.setItem(this.key, text);\n    }\n\n    return this.reset();\n  }\n\n  reset() {\n    if (!this.isLocalStorageAvailable) return;\n\n    return window.localStorage.removeItem(this.key);\n  }\n\n  dispose() {\n    this.field.off('input');\n  }\n}\n","/**\n * adds a pause and unpause method to Mousetrap\n * this allows you to enable or disable keyboard shortcuts\n * without having to reset Mousetrap and rebind everything\n */\n/* global Mousetrap:true */\nMousetrap = (function(Mousetrap) {\n    var self = Mousetrap,\n        _originalStopCallback = self.stopCallback,\n        enabled = true;\n\n    self.stopCallback = function(e, element, combo) {\n        if (!enabled) {\n            return true;\n        }\n\n        return _originalStopCallback(e, element, combo);\n    };\n\n    self.pause = function() {\n        enabled = false;\n    };\n\n    self.unpause = function() {\n        enabled = true;\n    };\n\n    return self;\n}) (Mousetrap);\n"],"sourceRoot":""}