(this.webpackJsonp=this.webpackJsonp||[]).push([[201],{103:function(e,t,a){"use strict";var i=a(0),n=a.n(i),s=a(73),o=a.n(s),r=a(111),d=a.n(r),l=a(1),u=a(5),c=a(38),f=a(36),h=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}();function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.$dropdown,i=t.$loading;p(this,e);var s=a.closest(".dropdown"),o=a.closest(".block");this.$loading=i,this.$dropdown=a,this.$dropdownParent=s,this.$datePicker=s.find(".js-due-date-calendar"),this.$block=o,this.$sidebarCollapsedValue=o.find(".sidebar-collapsed-icon"),this.$selectbox=a.closest(".selectbox"),this.$value=o.find(".value"),this.$valueContent=o.find(".value-content"),this.$sidebarValue=n()(".js-due-date-sidebar-value",o),this.fieldName=a.data("fieldName"),this.abilityName=a.data("abilityName"),this.issueUpdateURL=a.data("issueUpdate"),this.rawSelectedDate=null,this.displayedDate=null,this.datePayload=null,this.initGlDropdown(),this.initRemoveDueDate(),this.initDatePicker()}return h(e,[{key:"initGlDropdown",value:function(){var e=this;this.$dropdown.glDropdown({opened:function(){e.$datePicker.data("pikaday").show()},hidden:function(){e.$selectbox.hide(),e.$value.css("display","")}})}},{key:"initDatePicker",value:function(){var e=this,t=n()("input[name='"+this.fieldName+"']"),a=new o.a({field:t.get(0),theme:"gitlab-theme",format:"yyyy-mm-dd",parse:function(e){return Object(f.a)(e)},toString:function(e){return Object(f.b)(e)},onSelect:function(i){t.val(a.toString(i)),e.$dropdown.hasClass("js-issue-boards-due-date")?(gl.issueBoards.BoardsStore.detail.issue.dueDate=t.val(),e.updateIssueBoardIssue()):e.saveDueDate(!0)}});a.setDate(Object(f.a)(t.val())),this.$datePicker.append(a.el),this.$datePicker.data("pikaday",a)}},{key:"initRemoveDueDate",value:function(){var e=this;this.$block.on("click",".js-remove-due-date",function(t){var a=e.$datePicker.data("pikaday");t.preventDefault(),a.setDate(null),e.$dropdown.hasClass("js-issue-boards-due-date")?(gl.issueBoards.BoardsStore.detail.issue.dueDate="",e.updateIssueBoardIssue()):(n()("input[name='"+e.fieldName+"']").val(""),e.saveDueDate(!1))})}},{key:"saveDueDate",value:function(e){this.parseSelectedDate(),this.prepSelectedDate(),this.submitSelectedDate(e)}},{key:"parseSelectedDate",value:function(){if(this.rawSelectedDate=n()("input[name='"+this.fieldName+"']").val(),this.rawSelectedDate.length){var e=this.rawSelectedDate.split("-").map(function(e){return parseInt(e,10)}),t=new Date(e[0],e[1]-1,e[2]);this.displayedDate=d()(t,"mmm d, yyyy")}else this.displayedDate="No due date"}},{key:"prepSelectedDate",value:function(){var e={};e[this.abilityName]={},e[this.abilityName].due_date=this.rawSelectedDate,this.datePayload=e}},{key:"updateIssueBoardIssue",value:function(){var e=this;this.$loading.fadeIn(),this.$dropdown.trigger("loading.gl.dropdown"),this.$selectbox.hide(),this.$value.css("display","");var t=function(){e.$loading.fadeOut()};gl.issueBoards.BoardsStore.detail.issue.update(this.$dropdown.attr("data-issue-update")).then(t).catch(t)}},{key:"submitSelectedDate",value:function(e){var t=this,a=this.datePayload[this.abilityName].due_date,i="No due date"!==this.displayedDate,s=i?"bold":"no-value";return this.$loading.removeClass("hidden").fadeIn(),e&&(this.$dropdown.trigger("loading.gl.dropdown"),this.$selectbox.hide()),this.$value.css("display",""),this.$valueContent.html("<span class='"+s+"'>"+this.displayedDate+"</span>"),this.$sidebarValue.html(this.displayedDate),n()(".js-remove-due-date-holder").toggleClass("hidden",a.length),u.a.put(this.issueUpdateURL,this.datePayload).then(function(){var n=i?Object(l.a)("Due date")+"<br />"+a+" ("+Object(c.f)(a)+")":Object(l.a)("Due date");return e&&(t.$dropdown.trigger("loaded.gl.dropdown"),t.$dropdown.dropdown("toggle")),t.$sidebarCollapsedValue.attr("data-original-title",n),t.$loading.fadeOut()})}}]),e}(),m=function(){function e(){p(this,e),this.initMilestoneDatePicker(),this.initIssuableSelect()}return h(e,[{key:"initMilestoneDatePicker",value:function(){n()(".datepicker").each(function(){var e=n()(this),t=e.val(),a=new o.a({field:e.get(0),theme:"gitlab-theme animate-picker",format:"yyyy-mm-dd",container:e.parent().get(0),parse:function(e){return Object(f.a)(e)},toString:function(e){return Object(f.b)(e)},onSelect:function(t){e.val(a.toString(t))}});a.setDate(Object(f.a)(t)),e.data("pikaday",a)}),n()(".js-clear-due-date,.js-clear-start-date").on("click",function(e){e.preventDefault(),n()(e.target).siblings(".datepicker").data("pikaday").setDate(null)})}},{key:"initIssuableSelect",value:function(){var e=n()(".js-issuable-update .due_date").find(".block-loading").hide();n()(".js-due-date-select").each(function(t,a){var i=n()(a);new v({$dropdown:i,$loading:e})})}}]),e}();t.a=m},1231:function(e,t,a){"use strict";a.r(t);var i=a(285);document.addEventListener("DOMContentLoaded",function(){return Object(i.a)(!1)})},1232:function(e,t,a){a(31),e.exports=a(1231)},285:function(e,t,a){"use strict";var i=a(0),n=a.n(i),s=a(71),o=a(103),r=a(65);t.a=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];new s.a,new o.a,new r.a(n()(".milestone-form"),{emojis:!0,members:e,issues:e,mergeRequests:e,epics:e,milestones:e,labels:e})}},65:function(e,t,a){"use strict";var i=a(0),n=a.n(i),s=a(50),o=a.n(s),r=a(53),d=a(24),l=a.n(d),u=a(3),c=a.n(u),f=(a(157),a(66)),h=a(5);function p(e){var t=e.find(".button-attach-file"),a=e.find(".attaching-file-message"),i=e.find(".button-cancel-uploading-files"),s=e.find(".retry-uploading-link"),o=e.find(".uploading-progress"),r=e.find(".uploading-error-container"),d=e.find(".uploading-error-message"),u=e.find(".uploading-progress-container"),p=window.uploads_path||null,v=gon.max_file_size||10,m=e.find(".js-gfm-input"),g=void 0,b=void 0,y=void 0,k=void 0,D=void 0,w=void 0,C=void 0;m.wrap('<div class="div-dropzone"></div>'),m.on("paste",function(e){return g(e)});var x=m.closest(".md-area");e.setupMarkdownPreview();var z=e.find(".div-dropzone");if(z.parent().addClass("div-dropzone-wrapper"),z.append('<div class="div-dropzone-hover"></div>'),z.find(".div-dropzone-hover").append('<i class="fa fa-paperclip div-dropzone-icon"></i>'),p){var j=z.dropzone({url:p,dictDefaultMessage:"",clickable:!0,paramName:"file",maxFilesize:v,uploadMultiple:!1,headers:f.a.headers,previewContainer:!1,processing:function(){return n()(".div-dropzone-alert").alert("close")},dragover:function(){x.addClass("is-dropzone-hover"),e.find(".div-dropzone-hover").css("opacity",.7)},dragleave:function(){x.removeClass("is-dropzone-hover"),e.find(".div-dropzone-hover").css("opacity",0)},drop:function(){x.removeClass("is-dropzone-hover"),e.find(".div-dropzone-hover").css("opacity",0),m.focus()},success:function(e,a){var i=this.getQueuedFiles().length+this.getUploadingFiles().length,n=i>=1;b(a.link.markdown,n),i||t.removeClass("hide"),y(a.link.url)},error:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Attaching the file failed.",n=arguments[2],s=n?n.responseText:a;r.removeClass("hide"),d.html(s),t.addClass("hide"),i.addClass("hide")},totaluploadprogress:function(e){k(this.files,a),o.text(Math.round(e)+"%")},sending:function(){t.addClass("hide"),r.addClass("hide"),u.removeClass("hide"),i.removeClass("hide")},removedfile:function(){t.removeClass("hide"),i.addClass("hide"),u.addClass("hide"),r.addClass("hide")},queuecomplete:function(){n()(".dz-preview").remove(),n()(".markdown-area").trigger("input"),u.addClass("hide"),i.addClass("hide")}}),$=n()(j[0]).children("textarea");i.on("click",function(e){e.preventDefault(),e.stopPropagation(),l.a.forElement(z.get(0)).removeAllFiles(!0)}),s.on("click",function(e){var t=l.a.forElement(e.target.closest(".js-main-target-form").querySelector(".div-dropzone")),a=t.files;e.preventDefault(),t.removeAllFiles(!0),a.map(function(e){var a=e;return a.status===l.a.ERROR&&(a.status=void 0,a.accepted=void 0),t.addFile(a)})}),g=function(e){var t=e.originalEvent;if(t.clipboardData&&t.clipboardData.items){var a=D(t);if(a){e.preventDefault();var i=w(t)||"image.png";return b("{{"+i+"}}"),C(a.getAsFile(),i)}}},D=function(e){for(var t=0;t<e.clipboardData.items.length;){var a=e.clipboardData.items[t];if(-1!==a.type.indexOf("image"))return a;t+=1}return!1},b=function(e,t){var a=e;t&&(a+="\n\n");var i=$.get(0),s=i.selectionStart,o=i.selectionEnd,r=n()($).val().length,d=n()($).val().substring(0,s),l=n()($).val().substring(o,r);return n()($).val(d+a+l),i.setSelectionRange(s+a.length,o+a.length),i.style.height=i.scrollHeight+"px",m.get(0).dispatchEvent(new Event("input")),m.trigger("input")},y=function(t){n()(e).append('<input type="hidden" name="files[]" value="'+c.a.escape(t)+'">')},w=function(e){var t=void 0;return window.clipboardData&&window.clipboardData.getData?t=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData&&(t=e.clipboardData.getData("text/plain")),(t=t.split("\r"))[0]};var S=function(){return u.addClass("hide")};C=function(t,a){var i=new FormData;i.append("file",t,a),u.removeClass("hide"),e.find(".div-dropzone-alert").alert("close"),h.a.post(p,i).then(function(e){var t=e.data.link.markdown;!function(e,t){var a=n()($);a.val(function(a,i){return i.replace("{{"+e+"}}",t)}),a.trigger("change")}(a,t),S()}).catch(function(e){var t;t=e.response.data.message,r.removeClass("hide"),d.html(t),S()})},k=function(e,t){var a=void 0,i=e.filter(function(e){return"uploading"===e.status||"queued"===e.status}).length;a=i>1?"Attaching "+i+" files -":"Attaching a file -",t.text(a)},e.find(".markdown-selector").click(function(e){e.preventDefault(),n()(this).closest(".gfm-form").find(".div-dropzone").click(),m.focus()})}else z.addClass("js-invalid-dropzone")}l.a.autoDiscover=!1;var v=a(11);function m(e,t,a,i){var s,o,r;return e=(s=n()(e)).get(0),o=function(e,t){return e.substring(t.selectionStart,t.selectionEnd)}(r=s.val(),e),s.focus(),function(e,t,a,i,n,s){var o,r,d,l,u,c,f;return l=!1,u=!1,c=!1,0===n.indexOf("\n")&&(u=!0,n=n.replace(/\n+/,"")),e.selectionEnd-e.selectionStart>n.replace(/\n$/,"").length&&(l=!0,n=n.replace(/\n$/,"")),r=n.split("\n"),s||(f=e.value.substr(0,e.selectionStart).lastIndexOf("\n"),/^\s*$/.test(e.value.substring(f,e.selectionStart))&&(c=!0)),d=!s&&!c&&e.selectionStart>0?"\n":"",o=r.length>1&&(!s||null!=i&&""!==i)?null!=i&&""!==i?function(e,t,a,i){var n=function(e,t){var a;return(a=e.substring(0,t.selectionStart).trim().split("\n"))[a.length-1]}(e,t),s=function(e,t){return e.substring(t.selectionEnd).trim().split("\n")[0]}(e,t);return n===a&&s===a?(null!=a&&(t.selectionStart=t.selectionStart-(a.length+1),t.selectionEnd=t.selectionEnd+(a.length+1)),i):a+"\n"+i+"\n"+a}(t,e,i,n):r.map(function(e){return 0===e.indexOf(a)?""+e.replace(a,""):""+a+e}).join("\n"):""+d+a+n+(s?a:" "),u&&(o="\n"+o),l&&(o+="\n"),Object(v.p)(e,o),function(e,t,a,i){var n;if(e.setSelectionRange)return e.selectionStart===e.selectionEnd?(n=a?e.selectionStart-t.length:e.selectionStart,i&&(n-=1),e.setSelectionRange(n,n)):void 0}(e,a,s,l)}(e,r,t,a,o,i)}var g=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}();var b=function(){function e(t){var a=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.form=t,this.textarea=this.form.find("textarea.js-gfm-input"),this.enableGFM=Object.assign({},r.b,i);var n=gl.GfmAutoComplete&&gl.GfmAutoComplete.dataSources||{};Object.keys(this.enableGFM).forEach(function(e){"emojis"!==e&&(a.enableGFM[e]=!!n[e])}),this.destroy(),this.setupForm(),this.form.data("glForm",this)}return g(e,[{key:"destroy",value:function(){this.clearEventListeners(),this.autoComplete&&this.autoComplete.destroy(),this.form.data("glForm",null)}},{key:"setupForm",value:function(){var e,t=this.form.is(":not(.gfm-form)");this.form.removeClass("js-new-note-form"),t&&(this.form.find(".div-dropzone").remove(),this.form.addClass("gfm-form"),gl.utils.disableButtonIfEmptyField(this.form.find(".js-note-text"),this.form.find(".js-comment-button, .js-note-new-discussion")),this.autoComplete=new r.a(gl.GfmAutoComplete&&gl.GfmAutoComplete.dataSources),this.autoComplete.setup(this.form.find(".js-gfm-input"),this.enableGFM),p(this.form),o()(this.textarea)),this.addEventListeners(),e=this.form,n()(".js-md",e).off("click").on("click",function(){var e=n()(this);return m(e.closest(".md-area").find("textarea"),e.data("mdTag"),e.data("mdBlock"),!e.data("mdPrepend"))}),this.form.find(".js-note-discard").hide(),this.form.show(),this.isAutosizeable&&this.setupAutosize()}},{key:"setupAutosize",value:function(){var e=this;this.textarea.off("autosize:resized").on("autosize:resized",this.setHeightData.bind(this)),this.textarea.off("mouseup.autosize").on("mouseup.autosize",this.destroyAutosize.bind(this)),setTimeout(function(){o()(e.textarea),e.textarea.css("resize","vertical")},0)}},{key:"setHeightData",value:function(){this.textarea.data("height",this.textarea.outerHeight())}},{key:"destroyAutosize",value:function(){var e=this.textarea.outerHeight();this.textarea.data("height")!==e&&(o.a.destroy(this.textarea),this.textarea.data("height",e),this.textarea.outerHeight(e),this.textarea.css("max-height",window.outerHeight))}},{key:"clearEventListeners",value:function(){var e;this.textarea.off("focus"),this.textarea.off("blur"),e=this.form,n()(".js-md",e).off("click")}},{key:"addEventListeners",value:function(){this.textarea.on("focus",function(){n()(this).closest(".md-area").addClass("is-focused")}),this.textarea.on("blur",function(){n()(this).closest(".md-area").removeClass("is-focused")})}}]),e}();t.a=b},71:function(e,t,a){"use strict";var i=a(0),n=a.n(i),s=(a(158),a(24)),o=a.n(s),r=a(29),d=a.n(r),l=(a(99),function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}());o.a.autoDiscover=!1;var u=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.active_backdrop=null,this.active_textarea=null,n()(document).on("click",".js-zen-enter",function(e){return e.preventDefault(),n()(e.currentTarget).trigger("zen_mode:enter")}),n()(document).on("click",".js-zen-leave",function(e){return e.preventDefault(),n()(e.currentTarget).trigger("zen_mode:leave")}),n()(document).on("zen_mode:enter",(t=this,function(e){return t.enter(n()(e.target).closest(".md-area").find(".zen-backdrop"))})),n()(document).on("zen_mode:leave",function(e){return function(t){return e.exit()}}(this)),n()(document).on("keydown",function(e){if(27===e.keyCode)return e.preventDefault(),n()(document).trigger("zen_mode:leave")})}return l(e,[{key:"enter",value:function(e){d.a.pause(),this.active_backdrop=n()(e),this.active_backdrop.addClass("fullscreen"),this.active_textarea=this.active_backdrop.find("textarea"),this.active_textarea.removeAttr("style"),this.active_textarea.focus()}},{key:"exit",value:function(){if(this.active_textarea){d.a.unpause(),this.active_textarea.closest(".zen-backdrop").removeClass("fullscreen"),this.scrollTo(this.active_textarea),this.active_textarea=null,this.active_backdrop=null;var e=n()(".div-dropzone");e&&!e.hasClass("js-invalid-dropzone")&&o.a.forElement(".div-dropzone").enable()}}},{key:"scrollTo",value:function(e){return n.a.scrollTo(e,0,{offset:-150})}}]),e}();t.a=u},99:function(e,t){Mousetrap=function(e){var t=e,a=t.stopCallback,i=!0;return t.stopCallback=function(e,t,n){return!i||a(e,t,n)},t.pause=function(){i=!1},t.unpause=function(){i=!0},t}(Mousetrap)}},[[1232,0,1,3,4]]]);
//# sourceMappingURL=pages.groups.milestones.new.2f877e61.chunk.js.map