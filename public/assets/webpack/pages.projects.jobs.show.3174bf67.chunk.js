(this.webpackJsonp=this.webpackJsonp||[]).push([[138],{121:function(t,e,n){"use strict";var i=n(12),o=n(94),r=(n(38),{directives:{tooltip:i.a},mixins:[o.a],props:{time:{type:String,required:!0},tooltipPlacement:{type:String,required:!1,default:"top"},cssClass:{type:String,required:!1,default:""}}}),a=n(2),s=Object(a.a)(r,function(){var t=this.$createElement;return(this._self._c||t)("time",{directives:[{name:"tooltip",rawName:"v-tooltip"}],class:this.cssClass,attrs:{title:this.tooltipTitle(this.time),"data-placement":this.tooltipPlacement,"data-container":"body"},domProps:{textContent:this._s(this.timeFormated(this.time))}})},[],!1,null,null,null);e.a=s.exports},151:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return a}),n.d(e,"c",function(){return s});var i=n(46),o=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function r(t){var e=0,n="";if(!Number.isNaN(Number(t))){var i=t.toString().split(".");switch(o(i,1)[0].length){case 1:e=3;break;case 2:e=2;break;case 3:e=1;break;default:e=4}n=Number(t).toFixed(e)}return n}function a(t){return t/(i.a*i.a)}function s(t){return t<i.a?t+" bytes":t<i.a*i.a?(e=t,e/i.a).toFixed(2)+" KiB":t<i.a*i.a*i.a?a(t).toFixed(2)+" MiB":function(t){return t/(i.a*i.a*i.a)}(t).toFixed(2)+" GiB";var e}},186:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return s});var i=n(228),o=n.n(i),r=function(t,e,n,i){var o=Math.floor(t.offsetTop-e);if(o<=n&&!t.classList.contains("is-stuck")){var r=i?function(){var t=document.createElement("div");return t.classList.add("sticky-placeholder"),t}():null,a=t.offsetHeight;t.classList.add("is-stuck"),i&&(t.parentNode.insertBefore(r,t.nextElementSibling),r.style.height=a-t.offsetHeight+"px")}else o>n&&t.classList.contains("is-stuck")&&(t.classList.remove("is-stuck"),i&&t.nextElementSibling&&t.nextElementSibling.classList.contains("sticky-placeholder")&&t.nextElementSibling.remove())},a=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t&&"undefined"!=typeof CSS&&CSS.supports("(position: -webkit-sticky) or (position: sticky)")&&document.addEventListener("scroll",function(){return r(t,window.scrollY,e,n)},{passive:!0})},s=function(t){o.a.add(t)}},228:function(t,e){!function(e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=!1;if(e.getComputedStyle){var r=n.createElement("div");["","-webkit-","-moz-","-ms-"].some(function(t){try{r.style.position=t+"sticky"}catch(t){}return""!=r.style.position})&&(o=!0)}else o=!0;var a="undefined"!=typeof ShadowRoot,s={top:null,left:null},l=[];function u(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function c(t){return parseFloat(t)||0}function d(t){for(var e=0;t;)e+=t.offsetTop,t=t.offsetParent;return e}var h=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!(e instanceof HTMLElement))throw new Error("First argument must be HTMLElement");if(l.some(function(t){return t._node===e}))throw new Error("Stickyfill is already applied to this node");this._node=e,this._stickyMode=null,this._active=!1,l.push(this),this.refresh()}return i(t,[{key:"refresh",value:function(){if(!o&&!this._removed){this._active&&this._deactivate();var t=this._node,i=getComputedStyle(t),r={top:i.top,display:i.display,marginTop:i.marginTop,marginBottom:i.marginBottom,marginLeft:i.marginLeft,marginRight:i.marginRight,cssFloat:i.cssFloat};if(!isNaN(parseFloat(r.top))&&"table-cell"!=r.display&&"none"!=r.display){this._active=!0;var s=t.parentNode,l=a&&s instanceof ShadowRoot?s.host:s,h=t.getBoundingClientRect(),f=l.getBoundingClientRect(),p=getComputedStyle(l);this._parent={node:l,styles:{position:l.style.position},offsetHeight:l.offsetHeight},this._offsetToWindow={left:h.left,right:n.documentElement.clientWidth-h.right},this._offsetToParent={top:h.top-f.top-c(p.borderTopWidth),left:h.left-f.left-c(p.borderLeftWidth),right:-h.right+f.right-c(p.borderRightWidth)},this._styles={position:t.style.position,top:t.style.top,bottom:t.style.bottom,left:t.style.left,right:t.style.right,width:t.style.width,marginTop:t.style.marginTop,marginLeft:t.style.marginLeft,marginRight:t.style.marginRight};var b=c(r.top);this._limits={start:h.top+e.pageYOffset-b,end:f.top+e.pageYOffset+l.offsetHeight-c(p.borderBottomWidth)-t.offsetHeight-b-c(r.marginBottom)};var g=p.position;"absolute"!=g&&"relative"!=g&&(l.style.position="relative"),this._recalcPosition();var m=this._clone={};m.node=n.createElement("div"),u(m.node.style,{width:h.right-h.left+"px",height:h.bottom-h.top+"px",marginTop:r.marginTop,marginBottom:r.marginBottom,marginLeft:r.marginLeft,marginRight:r.marginRight,cssFloat:r.cssFloat,padding:0,border:0,borderSpacing:0,fontSize:"1em",position:"static"}),s.insertBefore(m.node,t),m.docOffsetTop=d(m.node)}}}},{key:"_recalcPosition",value:function(){if(this._active&&!this._removed){var t=s.top<=this._limits.start?"start":s.top>=this._limits.end?"end":"middle";if(this._stickyMode!=t){switch(t){case"start":u(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:this._offsetToParent.top+"px",bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"middle":u(this._node.style,{position:"fixed",left:this._offsetToWindow.left+"px",right:this._offsetToWindow.right+"px",top:this._styles.top,bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"end":u(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:"auto",bottom:0,width:"auto",marginLeft:0,marginRight:0})}this._stickyMode=t}}}},{key:"_fastCheck",value:function(){this._active&&!this._removed&&(Math.abs(d(this._clone.node)-this._clone.docOffsetTop)>1||Math.abs(this._parent.node.offsetHeight-this._parent.offsetHeight)>1)&&this.refresh()}},{key:"_deactivate",value:function(){var t=this;this._active&&!this._removed&&(this._clone.node.parentNode.removeChild(this._clone.node),delete this._clone,u(this._node.style,this._styles),delete this._styles,l.some(function(e){return e!==t&&e._parent&&e._parent.node===t._parent.node})||u(this._parent.node.style,this._parent.styles),delete this._parent,this._stickyMode=null,this._active=!1,delete this._offsetToWindow,delete this._offsetToParent,delete this._limits)}},{key:"remove",value:function(){var t=this;this._deactivate(),l.some(function(e,n){if(e._node===t._node)return l.splice(n,1),!0}),this._removed=!0}}]),t}(),f={stickies:l,Sticky:h,addOne:function(t){if(!(t instanceof HTMLElement)){if(!t.length||!t[0])return;t=t[0]}for(var e=0;e<l.length;e++)if(l[e]._node===t)return l[e];return new h(t)},add:function(t){if(t instanceof HTMLElement&&(t=[t]),t.length){for(var e=[],n=function(n){var i=t[n];return i instanceof HTMLElement?l.some(function(t){if(t._node===i)return e.push(t),!0})?"continue":void e.push(new h(i)):(e.push(void 0),"continue")},i=0;i<t.length;i++)n(i);return e}},refreshAll:function(){l.forEach(function(t){return t.refresh()})},removeOne:function(t){if(!(t instanceof HTMLElement)){if(!t.length||!t[0])return;t=t[0]}l.some(function(e){if(e._node===t)return e.remove(),!0})},remove:function(t){if(t instanceof HTMLElement&&(t=[t]),t.length)for(var e=function(e){var n=t[e];l.some(function(t){if(t._node===n)return t.remove(),!0})},n=0;n<t.length;n++)e(n)},removeAll:function(){for(;l.length;)l[0].remove()}};o||function(){function t(){e.pageXOffset!=s.left?(s.top=e.pageYOffset,s.left=e.pageXOffset,f.refreshAll()):e.pageYOffset!=s.top&&(s.top=e.pageYOffset,s.left=e.pageXOffset,l.forEach(function(t){return t._recalcPosition()}))}t(),e.addEventListener("scroll",t),e.addEventListener("resize",f.refreshAll),e.addEventListener("orientationchange",f.refreshAll);var i=void 0;function o(){i=setInterval(function(){l.forEach(function(t){return t._fastCheck()})},500)}var r=void 0,a=void 0;"hidden"in n?(r="hidden",a="visibilitychange"):"webkitHidden"in n&&(r="webkitHidden",a="webkitvisibilitychange"),a?(n[r]||o(),n.addEventListener(a,function(){n[r]?clearInterval(i):o()})):o()}(),void 0!==t&&t.exports?t.exports=f:e.Stickyfill=f}(window,document)},272:function(t,e,n){"use strict";var i=n(188),o=n(27),r=n(121),a=n(12),s=n(82),l={components:{CiIconBadge:i.a,LoadingIcon:o.a,TimeagoTooltip:r.a,UserAvatarImage:s.a},directives:{tooltip:a.a},props:{status:{type:Object,required:!0},itemName:{type:String,required:!0},itemId:{type:Number,required:!0},time:{type:String,required:!0},user:{type:Object,required:!1,default:function(){return{}}},actions:{type:Array,required:!1,default:function(){return[]}},hasSidebarButton:{type:Boolean,required:!1,default:!1},shouldRenderTriggeredLabel:{type:Boolean,required:!1,default:!0}},computed:{userAvatarAltText:function(){return this.user.name+"'s avatar"}},methods:{onClickAction:function(t){this.$emit("actionClicked",t)}}},u=n(2),c=Object(u.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"page-content-header ci-header-container"},[n("section",{staticClass:"header-main-content"},[n("ci-icon-badge",{attrs:{status:t.status}}),t._v(" "),n("strong",[t._v("\n        "+t._s(t.itemName)+" #"+t._s(t.itemId)+"\n      ")]),t._v(" "),t.shouldRenderTriggeredLabel?[t._v("\n        triggered\n      ")]:[t._v("\n        created\n      ")],t._v(" "),n("timeago-tooltip",{attrs:{time:t.time}}),t._v("\n\n      by\n\n      "),t.user?[n("a",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"js-user-link commit-committer-link",attrs:{href:t.user.path,title:t.user.email}},[n("user-avatar-image",{attrs:{"img-src":t.user.avatar_url,"img-alt":t.userAvatarAltText,"tooltip-text":t.user.name,"img-size":24}}),t._v("\n\n          "+t._s(t.user.name)+"\n        ")],1),t._v(" "),t.user.status_tooltip_html?n("span",{domProps:{innerHTML:t._s(t.user.status_tooltip_html)}}):t._e()]:t._e()],2),t._v(" "),t.actions.length?n("section",{staticClass:"header-action-buttons"},[t._l(t.actions,function(e,i){return["link"===e.type?n("a",{key:i,class:e.cssClass,attrs:{href:e.path}},[t._v("\n          "+t._s(e.label)+"\n        ")]):"ujs-link"===e.type?n("a",{key:i,class:e.cssClass,attrs:{href:e.path,"data-method":"post",rel:"nofollow"}},[t._v("\n          "+t._s(e.label)+"\n        ")]):"button"===e.type?n("button",{key:i,class:e.cssClass,attrs:{disabled:e.isLoading,type:"button"},on:{click:function(n){t.onClickAction(e)}}},[t._v("\n          "+t._s(e.label)+"\n          "),n("i",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"action.isLoading"}],staticClass:"fa fa-spin fa-spinner",attrs:{"aria-hidden":"true"}})]):t._e()]}),t._v(" "),t.hasSidebarButton?n("button",{staticClass:"btn btn-default d-block d-sm-none d-md-none\nsidebar-toggle-btn js-sidebar-build-toggle js-sidebar-build-toggle-header",attrs:{id:"toggleSidebar",type:"button","aria-label":"Toggle Sidebar"}},[n("i",{staticClass:"fa fa-angle-double-left",attrs:{"aria-hidden":"true","aria-labelledby":"toggleSidebar"}})]):t._e()],2):t._e()])},[],!1,null,null,null);e.a=c.exports},46:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var i=1024,o="hidden"},879:function(t,e,n){"use strict";n.r(e);var i=n(8),o=n(61),r=n.n(o),a=n(7),s=n(97),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.state={job:{}}}return l(t,[{key:"storeJob",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state.job=t}}]),t}(),c=n(5),d=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.job=e}return d(t,[{key:"getJob",value:function(){return c.a.get(this.job)}}]),t}(),f=n(0),p=n.n(f),b=n(3),g=n.n(b),m=n(186),v=n(21),_=n(91),y=n(151),j=n(11),w=function(){var t=p()(document),e=t.scrollTop();return t.height()-e===p()(window).height()},k=function(){var t=p()(document);t.scrollTop(t.height())},C=function(t,e){e&&t.prop("disabled")||t.prop("disabled",e)},T=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var S=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$scrollTopBtn=p()(".js-scroll-up"),this.$scrollBottomBtn=p()(".js-scroll-down"),this.$scrollTopBtn.off("click").on("click",this.scrollToTop.bind(this)),this.$scrollBottomBtn.off("click").on("click",this.scrollToBottom.bind(this))}return T(t,[{key:"toggleScroll",value:function(){var t=p()(document),e=t.scrollTop(),n=t.height(),i=p()(window).height();p()(document).height()>p()(window).height()?e>0&&n-e!==i?(C(this.$scrollTopBtn,!1),C(this.$scrollBottomBtn,!1)):0===e?(C(this.$scrollTopBtn,!0),C(this.$scrollBottomBtn,!1)):w()&&(C(this.$scrollTopBtn,!1),C(this.$scrollBottomBtn,!0)):(C(this.$scrollTopBtn,!0),C(this.$scrollBottomBtn,!0))}},{key:"toggleScrollAnimation",value:function(t){this.$scrollBottomBtn.toggleClass("animate",t)}}]),t}(),B=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var L=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.timeout=null,n.state=null,n.fetchingStatusFavicon=!1,n.options=t||p()(".js-build-options").data(),n.pagePath=n.options.pagePath,n.buildStatus=n.options.buildStatus,n.state=n.options.logState,n.buildStage=n.options.buildStage,n.$document=p()(document),n.$window=p()(window),n.logBytes=0,n.updateDropdown=n.updateDropdown.bind(n),n.$buildTrace=p()("#build-trace"),n.$buildRefreshAnimation=p()(".js-build-refresh"),n.$truncatedInfo=p()(".js-truncated-info"),n.$buildTraceOutput=p()(".js-build-output"),n.$topBar=p()(".js-top-bar"),clearTimeout(n.timeout),n.initSidebar(),n.populateJobs(n.buildStage),n.updateStageDropdownText(n.buildStage),n.sidebarOnResize(),n.$document.off("click",".js-sidebar-build-toggle").on("click",".js-sidebar-build-toggle",n.sidebarOnClick.bind(n)),n.$document.off("click",".stage-item").on("click",".stage-item",n.updateDropdown),n.scrollThrottled=g.a.throttle(n.toggleScroll.bind(n),100),n.$window.off("scroll").on("scroll",function(){w()?w()&&!n.isLogComplete&&n.toggleScrollAnimation(!0):n.toggleScrollAnimation(!1),n.scrollThrottled()}),n.$window.off("resize.build").on("resize.build",g.a.throttle(n.sidebarOnResize.bind(n),100)),n.initAffixTopArea(),n.getBuildTrace(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,S),B(e,[{key:"initAffixTopArea",value:function(){Object(m.a)(this.$topBar)}},{key:"scrollToBottom",value:function(){k(),this.hasBeenScrolled=!0,this.toggleScroll()}},{key:"scrollToTop",value:function(){p()(document).scrollTop(0),this.hasBeenScrolled=!0,this.toggleScroll()}},{key:"toggleScrollAnimation",value:function(t){this.$scrollBottomBtn.toggleClass("animate",t)}},{key:"initSidebar",value:function(){this.$sidebar=p()(".js-build-sidebar")}},{key:"getBuildTrace",value:function(){var t=this;return c.a.get(this.pagePath+"/trace.json",{params:{state:this.state}}).then(function(e){var n=e.data;if(t.fetchingStatusFavicon||(t.fetchingStatusFavicon=!0,Object(j.G)(t.pagePath+"/status.json").then(function(){t.fetchingStatusFavicon=!1}).catch(function(){t.fetchingStatusFavicon=!1})),n.state&&(t.state=n.state),t.isScrollInBottom=w(),n.append?(t.$buildTraceOutput.append(n.html),t.logBytes+=n.size):(t.$buildTraceOutput.html(n.html),t.logBytes=n.size),t.logBytes<n.total){var i=Object(y.c)(t.logBytes);p()(".js-truncated-info-size").html(""+i),t.$truncatedInfo.removeClass("hidden")}else t.$truncatedInfo.addClass("hidden");t.isLogComplete=n.complete,!1===n.complete?t.timeout=setTimeout(function(){t.getBuildTrace()},4e3):(t.$buildRefreshAnimation.remove(),t.toggleScrollAnimation(!1)),n.status!==t.buildStatus&&Object(v.g)(t.pagePath)}).catch(function(){t.$buildRefreshAnimation.remove()}).then(function(){t.isScrollInBottom&&k()}).then(function(){return t.toggleScroll()})}},{key:"shouldHideSidebarForViewport",value:function(){return"xs"===_.a.getBreakpointSize()}},{key:"toggleSidebar",value:function(t){var e="boolean"==typeof t?!t:void 0,n=p()(".js-sidebar-build-toggle-header");this.$sidebar.toggleClass("right-sidebar-expanded",e).toggleClass("right-sidebar-collapsed",t),this.$topBar.toggleClass("sidebar-expanded",e).toggleClass("sidebar-collapsed",t),this.$sidebar.hasClass("right-sidebar-expanded")?n.addClass("hidden"):n.removeClass("hidden")}},{key:"sidebarOnResize",value:function(){this.toggleSidebar(this.shouldHideSidebarForViewport())}},{key:"sidebarOnClick",value:function(){this.shouldHideSidebarForViewport()&&this.toggleSidebar()}},{key:"populateJobs",value:function(t){p()(".build-job").hide(),p()('.build-job[data-stage="'+t+'"]').show()}},{key:"updateStageDropdownText",value:function(t){p()(".stage-selection").text(t)}},{key:"updateDropdown",value:function(t){t.preventDefault();var e=t.currentTarget.text;this.updateStageDropdownText(e),this.populateJobs(e)}}]),e}();var O=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var x=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.store=new u,this.service=new h(e.endpoint),this.state={isLoading:!1}}return O(t,[{key:"initBuildClass",value:function(){this.build=new L,p()(".js-reveal-variables").off("click").on("click",function(){p()(".js-build-variables").toggle(),p()(this).hide()})}},{key:"fetchJob",value:function(){var t=this;this.poll=new s.a({resource:this.service,method:"getJob",successCallback:function(e){return t.successCallback(e)},errorCallback:function(){return t.errorCallback()}}),r.a.hidden()?this.getJob():(this.state.isLoading=!0,this.poll.makeRequest()),r.a.change(function(){r.a.hidden()?t.poll.stop():t.poll.restart()})}},{key:"getJob",value:function(){var t=this;return this.service.getJob().then(function(e){return t.successCallback(e)}).catch(function(){return t.errorCallback()})}},{key:"successCallback",value:function(t){return this.state.isLoading=!1,this.store.storeJob(t.data)}},{key:"errorCallback",value:function(){return this.state.isLoading=!1,new a.a("An error occurred while fetching the job.")}}]),t}(),R=n(272),E=n(27),$=["danger","success","info","warning"],q={props:{category:{type:String,required:!1,default:$[0],validator:function(t){return $.includes(t)}},message:{type:String,required:!0}}},A=n(2),H=Object(A.a)(q,function(){var t=this.$createElement;return(this._self._c||t)("div",{class:"bs-callout bs-callout-"+this.category,attrs:{role:"alert","aria-live":"assertive"}},[this._v("\n  "+this._s(this.message)+"\n")])},[],!1,null,null,null).exports,P={name:"JobHeaderSection",components:{ciHeader:R.a,loadingIcon:E.a,callout:H},props:{job:{type:Object,required:!0},isLoading:{type:Boolean,required:!0}},data:function(){return{actions:this.getActions()}},computed:{status:function(){return this.job&&this.job.status},shouldRenderContent:function(){return!this.isLoading&&Object.keys(this.job).length},shouldRenderReason:function(){return!(!this.job.status||!this.job.callout_message)},jobStarted:function(){return!1==!this.job.started},headerTime:function(){return this.jobStarted?this.job.started:this.job.created_at}},watch:{job:function(){this.actions=this.getActions()}},methods:{getActions:function(){var t=[];return this.job.new_issue_path&&t.push({label:"New issue",path:this.job.new_issue_path,cssClass:"js-new-issue btn btn-new btn-inverted d-none d-md-block d-lg-block d-xl-block",type:"link"}),t}}},F=Object(A.a)(P,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[n("div",{staticClass:"js-build-header build-header top-area"},[t.shouldRenderContent?n("ci-header",{attrs:{status:t.status,"item-id":t.job.id,time:t.headerTime,user:t.job.user,actions:t.actions,"has-sidebar-button":!0,"should-render-triggered-label":t.jobStarted,"item-name":"Job"}}):t._e(),t._v(" "),t.isLoading?n("loading-icon",{staticClass:"prepend-top-default append-bottom-default",attrs:{size:"2"}}):t._e()],1),t._v(" "),t.shouldRenderReason?n("callout",{attrs:{message:t.job.callout_message}}):t._e()],1)},[],!1,null,null,null).exports,I={name:"SidebarDetailRow",props:{title:{type:String,required:!1,default:""},value:{type:String,required:!0},helpUrl:{type:String,required:!1,default:""}},computed:{hasTitle:function(){return this.title.length>0},hasHelpURL:function(){return this.helpUrl.length>0}}},M=Object(A.a)(I,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"build-detail-row"},[t.hasTitle?n("span",{staticClass:"build-light-text"},[t._v("\n    "+t._s(t.title)+":\n  ")]):t._e(),t._v("\n  "+t._s(t.value)+"\n\n  "),t.hasHelpURL?n("span",{staticClass:"help-button float-right"},[n("a",{attrs:{href:t.helpUrl,target:"_blank",rel:"noopener noreferrer nofollow"}},[n("i",{staticClass:"fa fa-question-circle",attrs:{"aria-hidden":"true"}})])]):t._e()])},[],!1,null,null,null).exports,N=n(94),J=n(38),z={name:"SidebarDetailsBlock",components:{detailRow:M,loadingIcon:E.a},mixins:[N.a],props:{job:{type:Object,required:!0},isLoading:{type:Boolean,required:!0},canUserRetry:{type:Boolean,required:!1,default:!1},runnerHelpUrl:{type:String,required:!1,default:""}},computed:{shouldRenderContent:function(){return!this.isLoading&&Object.keys(this.job).length>0},coverage:function(){return this.job.coverage+"%"},duration:function(){return Object(J.g)(this.job.duration)},queued:function(){return Object(J.g)(this.job.queued)},runnerId:function(){return this.job.runner.description+" (#"+this.job.runner.id+")"},retryButtonClass:function(){var t="js-retry-button float-right btn btn-retry d-none d-md-block d-lg-block d-xl-block";return t+=this.job.status&&this.job.recoverable?" btn-primary":" btn-inverted-secondary"},hasTimeout:function(){return null!=this.job.metadata&&null!==this.job.metadata.timeout_human_readable},timeout:function(){if(null==this.job.metadata)return"";var t=this.job.metadata.timeout_human_readable;return""!==this.job.metadata.timeout_source&&(t+=" (from "+this.job.metadata.timeout_source+")"),t},renderBlock:function(){return this.job.merge_request||this.job.duration||this.job.finished_data||this.job.erased_at||this.job.queued||this.job.runner||this.job.coverage||this.job.tags.length||this.job.cancel_path}}},U=Object(A.a)(z,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"block"},[n("strong",{staticClass:"inline prepend-top-8"},[t._v("\n      "+t._s(t.job.name)+"\n    ")]),t._v(" "),t.canUserRetry?n("a",{class:t.retryButtonClass,attrs:{href:t.job.retry_path,"data-method":"post",rel:"nofollow"}},[t._v("\n      "+t._s(t.__("Retry"))+"\n    ")]):t._e(),t._v(" "),n("button",{staticClass:"btn btn-blank gutter-toggle float-right d-block d-md-none js-sidebar-build-toggle",attrs:{"aria-label":t.__("Toggle Sidebar"),type:"button"}},[n("i",{staticClass:"fa fa-angle-double-right",attrs:{"aria-hidden":"true","data-hidden":"true"}})])]),t._v(" "),t.shouldRenderContent?[t.job.retry_path||t.job.new_issue_path?n("div",{staticClass:"block retry-link"},[t.job.new_issue_path?n("a",{staticClass:"js-new-issue btn btn-new btn-inverted",attrs:{href:t.job.new_issue_path}},[t._v("\n        "+t._s(t.__("New issue"))+"\n      ")]):t._e(),t._v(" "),t.canUserRetry?n("a",{staticClass:"js-retry-job btn btn-inverted-secondary",attrs:{href:t.job.retry_path,"data-method":"post",rel:"nofollow"}},[t._v("\n        "+t._s(t.__("Retry"))+"\n      ")]):t._e()]):t._e(),t._v(" "),n("div",{class:{block:t.renderBlock}},[t.job.merge_request?n("p",{staticClass:"build-detail-row js-job-mr"},[n("span",{staticClass:"build-light-text"},[t._v("\n          "+t._s(t.__("Merge Request:"))+"\n        ")]),t._v(" "),n("a",{attrs:{href:t.job.merge_request.path}},[t._v("\n          !"+t._s(t.job.merge_request.iid)+"\n        ")])]):t._e(),t._v(" "),t.job.duration?n("detail-row",{staticClass:"js-job-duration",attrs:{value:t.duration,title:"Duration"}}):t._e(),t._v(" "),t.job.finished_at?n("detail-row",{staticClass:"js-job-finished",attrs:{value:t.timeFormated(t.job.finished_at),title:"Finished"}}):t._e(),t._v(" "),t.job.erased_at?n("detail-row",{staticClass:"js-job-erased",attrs:{value:t.timeFormated(t.job.erased_at),title:"Erased"}}):t._e(),t._v(" "),t.job.queued?n("detail-row",{staticClass:"js-job-queued",attrs:{value:t.queued,title:"Queued"}}):t._e(),t._v(" "),t.hasTimeout?n("detail-row",{staticClass:"js-job-timeout",attrs:{"help-url":t.runnerHelpUrl,value:t.timeout,title:"Timeout"}}):t._e(),t._v(" "),t.job.runner?n("detail-row",{staticClass:"js-job-runner",attrs:{value:t.runnerId,title:"Runner"}}):t._e(),t._v(" "),t.job.coverage?n("detail-row",{staticClass:"js-job-coverage",attrs:{value:t.coverage,title:"Coverage"}}):t._e(),t._v(" "),t.job.tags.length?n("p",{staticClass:"build-detail-row js-job-tags"},[n("span",{staticClass:"build-light-text"},[t._v("\n          "+t._s(t.__("Tags:"))+"\n        ")]),t._v(" "),t._l(t.job.tags,function(e,i){return n("span",{key:i,staticClass:"label label-primary"},[t._v("\n          "+t._s(e)+"\n        ")])})],2):t._e(),t._v(" "),t.job.cancel_path?n("div",{staticClass:"btn-group prepend-top-5",attrs:{role:"group"}},[n("a",{staticClass:"js-cancel-job btn btn-sm btn-default",attrs:{href:t.job.cancel_path,"data-method":"post",rel:"nofollow"}},[t._v("\n          "+t._s(t.__("Cancel"))+"\n        ")])]):t._e()],1)]:t._e(),t._v(" "),t.isLoading?n("loading-icon",{staticClass:"prepend-top-10",attrs:{size:"2"}}):t._e()],2)},[],!1,null,null,null).exports;document.addEventListener("DOMContentLoaded",function(){var t=document.getElementById("js-job-details-vue").dataset,e=new x({endpoint:t.endpoint});e.fetchJob(),new i.default({el:"#js-build-header-vue",components:{jobHeader:F},data:function(){return{mediator:e}},mounted:function(){this.mediator.initBuildClass()},render:function(t){return t("job-header",{props:{isLoading:this.mediator.state.isLoading,job:this.mediator.store.state.job}})}});var n=document.getElementById("js-details-block-vue"),o=n.dataset;new i.default({el:n,components:{detailsBlock:U},data:function(){return{mediator:e}},render:function(e){return e("details-block",{props:{isLoading:this.mediator.state.isLoading,canUserRetry:!!("canUserRetry"in o),job:this.mediator.store.state.job,runnerHelpUrl:t.runnerHelpUrl}})}})})},968:function(t,e,n){n(31),n(57),t.exports=n(879)}},[[968,0,1,2,6]]]);
//# sourceMappingURL=pages.projects.jobs.show.3174bf67.chunk.js.map