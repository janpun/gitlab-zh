{"version":3,"sources":["webpack:///./pages/import/fogbugz/new_user_map/index.js","webpack:///./users_select.js"],"names":["document","addEventListener","_users_select__WEBPACK_IMPORTED_MODULE_0__","UsersSelect","currentUser","els","$els","options","arguments","length","undefined","this","users","bind","user","usersPath","userPath","_typeof","JSON","parse","_this","handleClick","jquery__WEBPACK_IMPORTED_MODULE_0___default","each","i","dropdown","$block","$collapsedSidebar","$dropdown","$loading","$selectbox","$value","abilityName","assignTo","assigneeTemplate","collapsedAssigneeTemplate","defaultLabel","defaultNullUser","firstUser","issueURL","selectedId","selectedIdDefault","showAnyUser","showNullUser","showMenuAbove","projectId","data","groupId","showCurrentUser","todoFilter","todoStateFilter","authorId","closest","find","fadeOut","assignYourself","unassignedSelected","remove","input","createElement","type","name","currentUserInfo","value","id","dataset","meta","underscore__WEBPACK_IMPORTED_MODULE_1___default","a","escape","parent","before","after","getSelectedUserInputs","getSelected","map","index","parseInt","get","checkMaxSelect","maxSelect","selected","firstSelectedId","emitSidebarEvent","getMultiSelectDropdownTitle","selectedUser","isSelected","selectedUsers","filter","u","otherSelected","s","on","e","preventDefault","currentTarget","hide","text","removeClass","$input","$","val","gon","current_user_id","current_user_fullname","assignee_id","fadeIn","trigger","_lib_utils_axios_utils__WEBPACK_IMPORTED_MODULE_2__","put","then","_ref","tooltipTitle","assignee","username","avatar","avatar_url","Object","_locale__WEBPACK_IMPORTED_MODULE_3__","html","attr","tooltip","template","glDropdown","term","callback","instance","processData","hasClass","selectedInputs","uniq","userId","_input$dataset","avatarUrl","concat","anyUser","len","obj","showDivider","splice","unshift","beforeDivider","header","indexOf","sort","b","forEach","positionMenuAbove","filterable","filterRemote","search","fields","selectable","fieldName","toggleLabel","el","inputValue","filterInput","multiSelect","filteredFullData","parseData","addClass","hidden","css","inputMeta","clicked","isIssueIndex","isMRIndex","page","$el","isMarking","selectedObj","isActive","previouslySelected","toLowerCase","element","addInput","show","isSelecting","_boards_stores_modal_store__WEBPACK_IMPORTED_MODULE_4__","store","Issuable","filterResults","submit","opened","highlightSelected","updateLabel","renderRow","img","default_avatar_url","select","showEmailUser","skipLdap","skipUsers","select2","placeholder","multiple","minimumInputLength","query","emailUser","nullUser","ref","results","match","trimmed","trim","invite","initSelection","args","slice","call","apply","formatResult","formatSelection","dropdownCssClass","escapeMarkup","m","window","noop","prototype","user_id","test","url","buildUrl","replace","_ref2","params","active","project_id","group_id","skip_ldap","todo_filter","todo_state_filter","current_user","author_id","skip_users","_ref3","relative_url_root","__webpack_exports__"],"mappings":"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","file":"pages.import.fogbugz.new_user_map.fb9f2325.chunk.js","sourcesContent":["import UsersSelect from '~/users_select';\n\ndocument.addEventListener('DOMContentLoaded', () => new UsersSelect());\n","/* eslint-disable func-names, one-var, no-var, prefer-rest-params, quotes, max-len, one-var-declaration-per-line, vars-on-top, prefer-arrow-callback, consistent-return, comma-dangle, object-shorthand, no-shadow, no-unused-vars, no-else-return, no-self-compare, prefer-template, no-unused-expressions, yoda, prefer-spread, no-void, camelcase, no-param-reassign */\n/* global Issuable */\n/* global emitSidebarEvent */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport axios from './lib/utils/axios_utils';\nimport { __ } from './locale';\nimport ModalStore from './boards/stores/modal_store';\n\n// TODO: remove eventHub hack after code splitting refactor\nwindow.emitSidebarEvent = window.emitSidebarEvent || $.noop;\n\nfunction UsersSelect(currentUser, els, options = {}) {\n  var $els;\n  this.users = this.users.bind(this);\n  this.user = this.user.bind(this);\n  this.usersPath = \"/autocomplete/users.json\";\n  this.userPath = \"/autocomplete/users/:id.json\";\n  if (currentUser != null) {\n    if (typeof currentUser === 'object') {\n      this.currentUser = currentUser;\n    } else {\n      this.currentUser = JSON.parse(currentUser);\n    }\n  }\n\n  const { handleClick } = options;\n\n  $els = $(els);\n\n  if (!els) {\n    $els = $('.js-user-search');\n  }\n\n  $els.each((function(_this) {\n    return function(i, dropdown) {\n      var options = {};\n      var $block, $collapsedSidebar, $dropdown, $loading, $selectbox, $value, abilityName, assignTo, assigneeTemplate, collapsedAssigneeTemplate, defaultLabel, defaultNullUser, firstUser, issueURL, selectedId, selectedIdDefault, showAnyUser, showNullUser, showMenuAbove;\n      $dropdown = $(dropdown);\n      options.projectId = $dropdown.data('projectId');\n      options.groupId = $dropdown.data('groupId');\n      options.showCurrentUser = $dropdown.data('currentUser');\n      options.todoFilter = $dropdown.data('todoFilter');\n      options.todoStateFilter = $dropdown.data('todoStateFilter');\n      showNullUser = $dropdown.data('nullUser');\n      defaultNullUser = $dropdown.data('nullUserDefault');\n      showMenuAbove = $dropdown.data('showMenuAbove');\n      showAnyUser = $dropdown.data('anyUser');\n      firstUser = $dropdown.data('firstUser');\n      options.authorId = $dropdown.data('authorId');\n      defaultLabel = $dropdown.data('defaultLabel');\n      issueURL = $dropdown.data('issueUpdate');\n      $selectbox = $dropdown.closest('.selectbox');\n      $block = $selectbox.closest('.block');\n      abilityName = $dropdown.data('abilityName');\n      $value = $block.find('.value');\n      $collapsedSidebar = $block.find('.sidebar-collapsed-user');\n      $loading = $block.find('.block-loading').fadeOut();\n      selectedIdDefault = (defaultNullUser && showNullUser) ? 0 : null;\n      selectedId = $dropdown.data('selected');\n\n      if (selectedId === undefined) {\n        selectedId = selectedIdDefault;\n      }\n\n      const assignYourself = function () {\n        const unassignedSelected = $dropdown.closest('.selectbox')\n          .find(`input[name='${$dropdown.data('fieldName')}'][value=0]`);\n\n        if (unassignedSelected) {\n          unassignedSelected.remove();\n        }\n\n        // Save current selected user to the DOM\n        const input = document.createElement('input');\n        input.type = 'hidden';\n        input.name = $dropdown.data('fieldName');\n\n        const currentUserInfo = $dropdown.data('currentUserInfo');\n\n        if (currentUserInfo) {\n          input.value = currentUserInfo.id;\n          input.dataset.meta = _.escape(currentUserInfo.name);\n        } else if (_this.currentUser) {\n          input.value = _this.currentUser.id;\n        }\n\n        if ($selectbox) {\n          $dropdown.parent().before(input);\n        } else {\n          $dropdown.after(input);\n        }\n      };\n\n      if ($block[0]) {\n        $block[0].addEventListener('assignYourself', assignYourself);\n      }\n\n      const getSelectedUserInputs = function() {\n        return $selectbox\n          .find(`input[name=\"${$dropdown.data('fieldName')}\"]`);\n      };\n\n      const getSelected = function() {\n        return getSelectedUserInputs()\n          .map((index, input) => parseInt(input.value, 10))\n          .get();\n      };\n\n      const checkMaxSelect = function() {\n        const maxSelect = $dropdown.data('maxSelect');\n        if (maxSelect) {\n          const selected = getSelected();\n\n          if (selected.length > maxSelect) {\n            const firstSelectedId = selected[0];\n            const firstSelected = $dropdown.closest('.selectbox')\n              .find(`input[name='${$dropdown.data('fieldName')}'][value=${firstSelectedId}]`);\n\n            firstSelected.remove();\n            emitSidebarEvent('sidebar.removeAssignee', {\n              id: firstSelectedId,\n            });\n          }\n        }\n      };\n\n      const getMultiSelectDropdownTitle = function(selectedUser, isSelected) {\n        const selectedUsers = getSelected()\n          .filter(u => u !== 0);\n\n        const firstUser = getSelectedUserInputs()\n          .map((index, input) => ({\n            name: input.dataset.meta,\n            value: parseInt(input.value, 10),\n          }))\n          .filter(u => u.id !== 0)\n          .get(0);\n\n        if (selectedUsers.length === 0) {\n          return 'Unassigned';\n        } else if (selectedUsers.length === 1) {\n          return firstUser.name;\n        } else if (isSelected) {\n          const otherSelected = selectedUsers.filter(s => s !== selectedUser.id);\n          return `${selectedUser.name} + ${otherSelected.length} more`;\n        } else {\n          return `${firstUser.name} + ${selectedUsers.length - 1} more`;\n        }\n      };\n\n      $('.assign-to-me-link').on('click', (e) => {\n        e.preventDefault();\n        $(e.currentTarget).hide();\n\n        if ($dropdown.data('multiSelect')) {\n          assignYourself();\n          checkMaxSelect();\n\n          const currentUserInfo = $dropdown.data('currentUserInfo');\n          $dropdown.find('.dropdown-toggle-text').text(getMultiSelectDropdownTitle(currentUserInfo)).removeClass('is-default');\n        } else {\n          const $input = $(`input[name=\"${$dropdown.data('fieldName')}\"]`);\n          $input.val(gon.current_user_id);\n          selectedId = $input.val();\n          $dropdown.find('.dropdown-toggle-text').text(gon.current_user_fullname).removeClass('is-default');\n        }\n      });\n\n      $block.on('click', '.js-assign-yourself', (e) => {\n        e.preventDefault();\n        return assignTo(_this.currentUser.id);\n      });\n\n      assignTo = function(selected) {\n        var data;\n        data = {};\n        data[abilityName] = {};\n        data[abilityName].assignee_id = selected != null ? selected : null;\n        $loading.removeClass('hidden').fadeIn();\n        $dropdown.trigger('loading.gl.dropdown');\n\n        return axios.put(issueURL, data)\n          .then(({ data }) => {\n            var user, tooltipTitle;\n            $dropdown.trigger('loaded.gl.dropdown');\n            $loading.fadeOut();\n            if (data.assignee) {\n              user = {\n                name: data.assignee.name,\n                username: data.assignee.username,\n                avatar: data.assignee.avatar_url\n              };\n              tooltipTitle = _.escape(user.name);\n            } else {\n              user = {\n                name: 'Unassigned',\n                username: '',\n                avatar: ''\n              };\n              tooltipTitle = __('Assignee');\n            }\n            $value.html(assigneeTemplate(user));\n            $collapsedSidebar.attr('title', tooltipTitle).tooltip('_fixTitle');\n            return $collapsedSidebar.html(collapsedAssigneeTemplate(user));\n          });\n      };\n      collapsedAssigneeTemplate = _.template('<% if( avatar ) { %> <a class=\"author-link\" href=\"/<%- username %>\"> <img width=\"24\" class=\"avatar avatar-inline s24\" alt=\"\" src=\"<%- avatar %>\"> </a> <% } else { %> <i class=\"fa fa-user\"></i> <% } %>');\n      assigneeTemplate = _.template('<% if (username) { %> <a class=\"author-link bold\" href=\"/<%- username %>\"> <% if( avatar ) { %> <img width=\"32\" class=\"avatar avatar-inline s32\" alt=\"\" src=\"<%- avatar %>\"> <% } %> <span class=\"author\"><%- name %></span> <span class=\"username\"> @<%- username %> </span> </a> <% } else { %> <span class=\"no-value assign-yourself\"> No assignee - <a href=\"#\" class=\"js-assign-yourself\"> assign yourself </a> </span> <% } %>');\n      return $dropdown.glDropdown({\n        showMenuAbove: showMenuAbove,\n        data: function(term, callback) {\n          return _this.users(term, options, function(users) {\n            // GitLabDropdownFilter returns this.instance\n            // GitLabDropdownRemote returns this.options.instance\n            const glDropdown = this.instance || this.options.instance;\n            glDropdown.options.processData(term, users, callback);\n          }.bind(this));\n        },\n        processData: function(term, data, callback) {\n          let users = data;\n\n          // Only show assigned user list when there is no search term\n          if ($dropdown.hasClass('js-multiselect') && term.length === 0) {\n            const selectedInputs = getSelectedUserInputs();\n\n            // Potential duplicate entries when dealing with issue board\n            // because issue board is also managed by vue\n            const selectedUsers = _.uniq(selectedInputs, false, a => a.value)\n              .filter((input) => {\n                const userId = parseInt(input.value, 10);\n                const inUsersArray = users.find(u => u.id === userId);\n\n                return !inUsersArray && userId !== 0;\n              })\n              .map((input) => {\n                const userId = parseInt(input.value, 10);\n                const { avatarUrl, avatar_url, name, username } = input.dataset;\n                return {\n                  avatar_url: avatarUrl || avatar_url,\n                  id: userId,\n                  name,\n                  username,\n                };\n              });\n\n            users = data.concat(selectedUsers);\n          }\n\n          let anyUser;\n          let index;\n          let len;\n          let name;\n          let obj;\n          let showDivider;\n          if (term.length === 0) {\n            showDivider = 0;\n            if (firstUser) {\n              // Move current user to the front of the list\n              for (index = 0, len = users.length; index < len; index += 1) {\n                obj = users[index];\n                if (obj.username === firstUser) {\n                  users.splice(index, 1);\n                  users.unshift(obj);\n                  break;\n                }\n              }\n            }\n            if (showNullUser) {\n              showDivider += 1;\n              users.unshift({\n                beforeDivider: true,\n                name: 'Unassigned',\n                id: 0\n              });\n            }\n            if (showAnyUser) {\n              showDivider += 1;\n              name = showAnyUser;\n              if (name === true) {\n                name = 'Any User';\n              }\n              anyUser = {\n                beforeDivider: true,\n                name: name,\n                id: null\n              };\n              users.unshift(anyUser);\n            }\n\n            if (showDivider) {\n              users.splice(showDivider, 0, 'divider');\n            }\n\n            if ($dropdown.hasClass('js-multiselect')) {\n              const selected = getSelected().filter(i => i !== 0);\n\n              if (selected.length > 0) {\n                if ($dropdown.data('dropdownHeader')) {\n                  showDivider += 1;\n                  users.splice(showDivider, 0, {\n                    header: $dropdown.data('dropdownHeader'),\n                  });\n                }\n\n                const selectedUsers = users\n                  .filter(u => selected.indexOf(u.id) !== -1)\n                  .sort((a, b) => a.name > b.name);\n\n                users = users.filter(u => selected.indexOf(u.id) === -1);\n\n                selectedUsers.forEach((selectedUser) => {\n                  showDivider += 1;\n                  users.splice(showDivider, 0, selectedUser);\n                });\n\n                users.splice(showDivider + 1, 0, 'divider');\n              }\n            }\n          }\n\n          callback(users);\n          if (showMenuAbove) {\n            $dropdown.data('glDropdown').positionMenuAbove();\n          }\n        },\n        filterable: true,\n        filterRemote: true,\n        search: {\n          fields: ['name', 'username']\n        },\n        selectable: true,\n        fieldName: $dropdown.data('fieldName'),\n        toggleLabel: function(selected, el, glDropdown) {\n          const inputValue = glDropdown.filterInput.val();\n\n          if (this.multiSelect && inputValue === '') {\n            // Remove non-users from the fullData array\n            const users = glDropdown.filteredFullData();\n            const callback = glDropdown.parseData.bind(glDropdown);\n\n            // Update the data model\n            this.processData(inputValue, users, callback);\n          }\n\n          if (this.multiSelect) {\n            return getMultiSelectDropdownTitle(selected, $(el).hasClass('is-active'));\n          }\n\n          if (selected && 'id' in selected && $(el).hasClass('is-active')) {\n            $dropdown.find('.dropdown-toggle-text').removeClass('is-default');\n            if (selected.text) {\n              return selected.text;\n            } else {\n              return selected.name;\n            }\n          } else {\n            $dropdown.find('.dropdown-toggle-text').addClass('is-default');\n            return defaultLabel;\n          }\n        },\n        defaultLabel: defaultLabel,\n        hidden: function(e) {\n          if ($dropdown.hasClass('js-multiselect')) {\n            emitSidebarEvent('sidebar.saveAssignees');\n          }\n\n          if (!$dropdown.data('alwaysShowSelectbox')) {\n            $selectbox.hide();\n\n            // Recalculate where .value is because vue might have changed it\n            $block = $selectbox.closest('.block');\n            $value = $block.find('.value');\n            // display:block overrides the hide-collapse rule\n            $value.css('display', '');\n          }\n        },\n        multiSelect: $dropdown.hasClass('js-multiselect'),\n        inputMeta: $dropdown.data('inputMeta'),\n        clicked: function(options) {\n          const { $el, e, isMarking } = options;\n          const user = options.selectedObj;\n\n          if ($dropdown.hasClass('js-multiselect')) {\n            const isActive = $el.hasClass('is-active');\n            const previouslySelected = $dropdown.closest('.selectbox')\n                .find(\"input[name='\" + ($dropdown.data('fieldName')) + \"'][value!=0]\");\n\n            // Enables support for limiting the number of users selected\n            // Automatically removes the first on the list if more users are selected\n            checkMaxSelect();\n\n            if (user.beforeDivider && user.name.toLowerCase() === 'unassigned') {\n              // Unassigned selected\n              previouslySelected.each((index, element) => {\n                const id = parseInt(element.value, 10);\n                element.remove();\n              });\n              emitSidebarEvent('sidebar.removeAllAssignees');\n            } else if (isActive) {\n              // user selected\n              emitSidebarEvent('sidebar.addAssignee', user);\n\n              // Remove unassigned selection (if it was previously selected)\n              const unassignedSelected = $dropdown.closest('.selectbox')\n                .find(\"input[name='\" + ($dropdown.data('fieldName')) + \"'][value=0]\");\n\n              if (unassignedSelected) {\n                unassignedSelected.remove();\n              }\n            } else {\n              if (previouslySelected.length === 0) {\n              // Select unassigned because there is no more selected users\n                this.addInput($dropdown.data('fieldName'), 0, {});\n              }\n\n              // User unselected\n              emitSidebarEvent('sidebar.removeAssignee', user);\n            }\n\n            if (getSelected().find(u => u === gon.current_user_id)) {\n              $('.assign-to-me-link').hide();\n            } else {\n              $('.assign-to-me-link').show();\n            }\n          }\n\n          var isIssueIndex, isMRIndex, page, selected;\n          page = $('body').attr('data-page');\n          isIssueIndex = page === 'projects:issues:index';\n          isMRIndex = (page === page && page === 'projects:merge_requests:index');\n          if ($dropdown.hasClass('js-filter-bulk-update') || $dropdown.hasClass('js-issuable-form-dropdown')) {\n            e.preventDefault();\n\n            const isSelecting = (user.id !== selectedId);\n            selectedId = isSelecting ? user.id : selectedIdDefault;\n\n            if (selectedId === gon.current_user_id) {\n              $('.assign-to-me-link').hide();\n            } else {\n              $('.assign-to-me-link').show();\n            }\n            return;\n          }\n          if ($el.closest('.add-issues-modal').length) {\n            ModalStore.store.filter[$dropdown.data('fieldName')] = user.id;\n          } else if (handleClick) {\n            e.preventDefault();\n            handleClick(user, isMarking);\n          } else if ($dropdown.hasClass('js-filter-submit') && (isIssueIndex || isMRIndex)) {\n            return Issuable.filterResults($dropdown.closest('form'));\n          } else if ($dropdown.hasClass('js-filter-submit')) {\n            return $dropdown.closest('form').submit();\n          } else if (!$dropdown.hasClass('js-multiselect')) {\n            selected = $dropdown.closest('.selectbox').find(\"input[name='\" + ($dropdown.data('fieldName')) + \"']\").val();\n            return assignTo(selected);\n          }\n\n          // Automatically close dropdown after assignee is selected\n          // since CE has no multiple assignees\n          // EE does not have a max-select\n          if ($dropdown.data('maxSelect') &&\n              getSelected().length === $dropdown.data('maxSelect')) {\n            // Close the dropdown\n            $dropdown.dropdown('toggle');\n          }\n        },\n        id: function (user) {\n          return user.id;\n        },\n        opened: function(e) {\n          const $el = $(e.currentTarget);\n          const selected = getSelected();\n          if ($dropdown.hasClass('js-issue-board-sidebar') && selected.length === 0) {\n            this.addInput($dropdown.data('fieldName'), 0, {});\n          }\n          $el.find('.is-active').removeClass('is-active');\n\n          function highlightSelected(id) {\n            $el.find(`li[data-user-id=\"${id}\"] .dropdown-menu-user-link`).addClass('is-active');\n          }\n\n          if (selected.length > 0) {\n            getSelected().forEach(selectedId => highlightSelected(selectedId));\n          } else if ($dropdown.hasClass('js-issue-board-sidebar')) {\n            highlightSelected(0);\n          } else {\n            highlightSelected(selectedId);\n          }\n        },\n        updateLabel: $dropdown.data('dropdownTitle'),\n        renderRow: function(user) {\n          var avatar, img, listClosingTags, listWithName, listWithUserName, username;\n          username = user.username ? \"@\" + user.username : \"\";\n          avatar = user.avatar_url ? user.avatar_url : gon.default_avatar_url;\n\n          let selected = false;\n\n          if (this.multiSelect) {\n            selected = getSelected().find(u => user.id === u);\n\n            const { fieldName } = this;\n            const field = $dropdown.closest('.selectbox').find(\"input[name='\" + fieldName + \"'][value='\" + user.id + \"']\");\n\n            if (field.length) {\n              selected = true;\n            }\n          } else {\n            selected = user.id === selectedId;\n          }\n\n          img = \"\";\n          if (user.beforeDivider != null) {\n            `<li><a href='#' class='${selected === true ? 'is-active' : ''}'>${_.escape(user.name)}</a></li>`;\n          } else {\n            img = \"<img src='\" + avatar + \"' class='avatar avatar-inline' width='32' />\";\n          }\n\n          return `\n            <li data-user-id=${user.id}>\n              <a href='#' class='dropdown-menu-user-link ${selected === true ? 'is-active' : ''}'>\n                ${img}\n                <strong class='dropdown-menu-user-full-name'>\n                  ${_.escape(user.name)}\n                </strong>\n                ${username ? `<span class='dropdown-menu-user-username'>${username}</span>` : ''}\n              </a>\n            </li>\n          `;\n        }\n      });\n    };\n  })(this));\n  $('.ajax-users-select').each((function(_this) {\n    return function(i, select) {\n      var firstUser, showAnyUser, showEmailUser, showNullUser;\n      var options = {};\n      options.skipLdap = $(select).hasClass('skip_ldap');\n      options.projectId = $(select).data('projectId');\n      options.groupId = $(select).data('groupId');\n      options.showCurrentUser = $(select).data('currentUser');\n      options.authorId = $(select).data('authorId');\n      options.skipUsers = $(select).data('skipUsers');\n      showNullUser = $(select).data('nullUser');\n      showAnyUser = $(select).data('anyUser');\n      showEmailUser = $(select).data('emailUser');\n      firstUser = $(select).data('firstUser');\n      return $(select).select2({\n        placeholder: \"Search for a user\",\n        multiple: $(select).hasClass('multiselect'),\n        minimumInputLength: 0,\n        query: function(query) {\n          return _this.users(query.term, options, function(users) {\n            var anyUser, data, emailUser, index, len, name, nullUser, obj, ref;\n            data = {\n              results: users\n            };\n            if (query.term.length === 0) {\n              if (firstUser) {\n                // Move current user to the front of the list\n                ref = data.results;\n\n                for (index = 0, len = ref.length; index < len; index += 1) {\n                  obj = ref[index];\n                  if (obj.username === firstUser) {\n                    data.results.splice(index, 1);\n                    data.results.unshift(obj);\n                    break;\n                  }\n                }\n              }\n              if (showNullUser) {\n                nullUser = {\n                  name: 'Unassigned',\n                  id: 0\n                };\n                data.results.unshift(nullUser);\n              }\n              if (showAnyUser) {\n                name = showAnyUser;\n                if (name === true) {\n                  name = 'Any User';\n                }\n                anyUser = {\n                  name: name,\n                  id: null\n                };\n                data.results.unshift(anyUser);\n              }\n            }\n            if (showEmailUser && data.results.length === 0 && query.term.match(/^[^@]+@[^@]+$/)) {\n              var trimmed = query.term.trim();\n              emailUser = {\n                name: \"Invite \\\"\" + query.term + \"\\\" by email\",\n                username: trimmed,\n                id: trimmed,\n                invite: true\n              };\n              data.results.unshift(emailUser);\n            }\n            return query.callback(data);\n          });\n        },\n        initSelection: function() {\n          var args;\n          args = 1 <= arguments.length ? [].slice.call(arguments, 0) : [];\n          return _this.initSelection.apply(_this, args);\n        },\n        formatResult: function() {\n          var args;\n          args = 1 <= arguments.length ? [].slice.call(arguments, 0) : [];\n          return _this.formatResult.apply(_this, args);\n        },\n        formatSelection: function() {\n          var args;\n          args = 1 <= arguments.length ? [].slice.call(arguments, 0) : [];\n          return _this.formatSelection.apply(_this, args);\n        },\n        dropdownCssClass: \"ajax-users-dropdown\",\n        // we do not want to escape markup since we are displaying html in results\n        escapeMarkup: function(m) {\n          return m;\n        }\n      });\n    };\n  })(this));\n}\n\nUsersSelect.prototype.initSelection = function(element, callback) {\n  var id, nullUser;\n  id = $(element).val();\n  if (id === \"0\") {\n    nullUser = {\n      name: 'Unassigned'\n    };\n    return callback(nullUser);\n  } else if (id !== \"\") {\n    return this.user(id, callback);\n  }\n};\n\nUsersSelect.prototype.formatResult = function(user) {\n  var avatar;\n  if (user.avatar_url) {\n    avatar = user.avatar_url;\n  } else {\n    avatar = gon.default_avatar_url;\n  }\n  return \"<div class='user-result \" + (!user.username ? 'no-username' : void 0) + \"'> <div class='user-image'><img class='avatar avatar-inline s32' src='\" + avatar + \"'></div> <div class='user-name dropdown-menu-user-full-name'>\" + _.escape(user.name) + \"</div> <div class='user-username dropdown-menu-user-username'>\" + (!user.invite ? \"@\" + _.escape(user.username) : \"\") + \"</div> </div>\";\n};\n\nUsersSelect.prototype.formatSelection = function(user) {\n  return _.escape(user.name);\n};\n\nUsersSelect.prototype.user = function(user_id, callback) {\n  if (!/^\\d+$/.test(user_id)) {\n    return false;\n  }\n\n  var url;\n  url = this.buildUrl(this.userPath);\n  url = url.replace(':id', user_id);\n  return axios.get(url)\n    .then(({ data }) => {\n      callback(data);\n    });\n};\n\n// Return users list. Filtered by query\n// Only active users retrieved\nUsersSelect.prototype.users = function(query, options, callback) {\n  const url = this.buildUrl(this.usersPath);\n  const params = {\n    search: query,\n    active: true,\n    project_id: options.projectId || null,\n    group_id: options.groupId || null,\n    skip_ldap: options.skipLdap || null,\n    todo_filter: options.todoFilter || null,\n    todo_state_filter: options.todoStateFilter || null,\n    current_user: options.showCurrentUser || null,\n    author_id: options.authorId || null,\n    skip_users: options.skipUsers || null\n  };\n  return axios.get(url, { params })\n    .then(({ data }) => {\n      callback(data);\n    });\n};\n\nUsersSelect.prototype.buildUrl = function(url) {\n  if (gon.relative_url_root != null) {\n    url = gon.relative_url_root.replace(/\\/$/, '') + url;\n  }\n  return url;\n};\n\nexport default UsersSelect;\n"],"sourceRoot":""}