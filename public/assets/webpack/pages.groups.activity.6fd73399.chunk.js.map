{"version":3,"sources":["webpack:///./pages/groups/activity/index.js","webpack:///./pager.js","webpack:///./activities.js"],"names":["document","addEventListener","_activities__WEBPACK_IMPORTED_MODULE_0__","__webpack_exports__","init","limit","arguments","length","undefined","preload","disable","prepareData","jquery__WEBPACK_IMPORTED_MODULE_0___default","a","noop","callback","this","url","data","Object","_lib_utils_url_utility__WEBPACK_IMPORTED_MODULE_3__","offset","parseInt","_lib_utils_common_utils__WEBPACK_IMPORTED_MODULE_1__","loading","first","getOld","initLoadMore","_this","show","_lib_utils_axios_utils__WEBPACK_IMPORTED_MODULE_2__","get","params","then","_ref","append","count","html","isScrollable","hide","catch","$w","window","height","scrollTop","_this2","off","endlessScroll","bottomPixels","fireDelay","fireOnce","ceaseFire","is","Activities","_classCallCheck","_pager__WEBPACK_IMPORTED_MODULE_2__","updateTooltips","on","e","preventDefault","toggleFilter","currentTarget","reloadActivities","_lib_utils_datetime_utility__WEBPACK_IMPORTED_MODULE_3__","sender","$sender","filter","attr","split","removeClass","js_cookie__WEBPACK_IMPORTED_MODULE_1___default","set","closest","toggleClass"],"mappings":"6GAEAA,SAASC,iBAAiB,mBAAoB,kBAAM,IAAIC,EAAA,+HCMxDC,EAAA,GACEC,KADa,WAC8E,IAAtFC,EAAsFC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAA9E,EAAGG,EAA2EH,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAA1DI,EAA0DJ,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAAzCK,EAAyCL,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAA3BM,EAAAC,EAAEC,KAAMC,EAAmBT,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAARM,EAAAC,EAAEC,KACnFE,KAAKC,IAAML,IAAE,iBAAiBM,KAAK,SAAWC,OAAAC,EAAA,EAAAD,EAAc,QAAS,WACrEH,KAAKX,MAAQA,EACbW,KAAKK,OAASC,SAASH,OAAAI,EAAA,EAAAJ,CAAmB,UAAW,KAAOH,KAAKX,MACjEW,KAAKN,QAAUA,EACfM,KAAKL,YAAcA,EACnBK,KAAKD,SAAWA,EAChBC,KAAKQ,QAAUZ,IAAE,YAAYa,QACzBhB,IACFO,KAAKK,OAAS,EACdL,KAAKU,UAEPV,KAAKW,gBAGPD,OAhBa,WAgBJ,IAAAE,EAAAZ,KACPA,KAAKQ,QAAQK,OACbC,EAAA,EAAMC,IAAIf,KAAKC,KACbe,QACE3B,MAAOW,KAAKX,MACZgB,OAAQL,KAAKK,UAEdY,KAAK,SAAAC,GAAc,IAAXhB,EAAWgB,EAAXhB,KACTU,EAAKO,OAAOjB,EAAKkB,MAAOR,EAAKjB,YAAYO,EAAKmB,OAC9CT,EAAKb,WAGAa,EAAKlB,SAAYkB,EAAKU,eAGzBV,EAAKJ,QAAQe,OAFbX,EAAKF,WAINc,MAAM,kBAAMZ,EAAKJ,QAAQe,UAG9BJ,OApCa,SAoCNC,EAAOC,GACZzB,IAAE,iBAAiBuB,OAAOE,GACtBD,EAAQ,EACVpB,KAAKK,QAAUe,EAEfpB,KAAKN,SAAU,GAInB4B,aA7Ca,WA8CX,IAAMG,EAAK7B,IAAE8B,QACb,OAAO9B,IAAEZ,UAAU2C,SAAWF,EAAGE,SAAWF,EAAGG,YAlDlB,KAqD/BjB,aAlDa,WAkDE,IAAAkB,EAAA7B,KACbJ,IAAEZ,UAAU8C,IAAI,UAChBlC,IAAEZ,UAAU+C,eACVC,aAxD2B,IAyD3BC,UAxD+B,IAyD/BC,UAAU,EACVC,UAAW,kBAAuB,IAAjBN,EAAKnC,SACtBK,SAAU,WACH8B,EAAKrB,QAAQ4B,GAAG,cACnBP,EAAKrB,QAAQK,OACbgB,EAAKnB,gWC7DM2B,aACnB,SAAAA,IAAc,IAAAzB,EAAAZ,kGAAAsC,CAAAtC,KAAAqC,GACZE,EAAA,EAAMnD,KAAK,IAAI,GAAM,EAAO,SAAAc,GAAA,OAAQA,GAAMF,KAAKwC,gBAE/C5C,IAAE,sBAAsB6C,GAAG,QAAS,SAACC,GACnCA,EAAEC,iBACF/B,EAAKgC,aAAaF,EAAEG,eACpBjC,EAAKkC,wEAKP3C,OAAA4C,EAAA,EAAA5C,CAAaP,IAAE,cAAe,6DAI9BA,IAAE,iBAAiByB,KAAK,IACxBkB,EAAA,EAAMnD,KAAK,IAAI,GAAM,EAAO,SAAAc,GAAA,OAAQA,GAAMF,KAAKwC,qDAGpCQ,GACX,IAAMC,EAAUrD,IAAEoD,GACZE,EAASD,EAAQE,KAAK,MAAMC,MAAM,KAAK,GAE7CxD,IAAE,yBAAyByD,YAAY,UACvCC,EAAAzD,EAAQ0D,IAAI,eAAgBL,GAE5BD,EAAQO,QAAQ,MAAMC,YAAY","file":"pages.groups.activity.6fd73399.chunk.js","sourcesContent":["import Activities from '~/activities';\n\ndocument.addEventListener('DOMContentLoaded', () => new Activities());\n","import $ from 'jquery';\nimport { getParameterByName } from '~/lib/utils/common_utils';\nimport axios from './lib/utils/axios_utils';\nimport { removeParams } from './lib/utils/url_utility';\n\nconst ENDLESS_SCROLL_BOTTOM_PX = 400;\nconst ENDLESS_SCROLL_FIRE_DELAY_MS = 1000;\n\nexport default {\n  init(limit = 0, preload = false, disable = false, prepareData = $.noop, callback = $.noop) {\n    this.url = $('.content_list').data('href') || removeParams(['limit', 'offset']);\n    this.limit = limit;\n    this.offset = parseInt(getParameterByName('offset'), 10) || this.limit;\n    this.disable = disable;\n    this.prepareData = prepareData;\n    this.callback = callback;\n    this.loading = $('.loading').first();\n    if (preload) {\n      this.offset = 0;\n      this.getOld();\n    }\n    this.initLoadMore();\n  },\n\n  getOld() {\n    this.loading.show();\n    axios.get(this.url, {\n      params: {\n        limit: this.limit,\n        offset: this.offset,\n      },\n    }).then(({ data }) => {\n      this.append(data.count, this.prepareData(data.html));\n      this.callback();\n\n      // keep loading until we've filled the viewport height\n      if (!this.disable && !this.isScrollable()) {\n        this.getOld();\n      } else {\n        this.loading.hide();\n      }\n    }).catch(() => this.loading.hide());\n  },\n\n  append(count, html) {\n    $('.content_list').append(html);\n    if (count > 0) {\n      this.offset += count;\n    } else {\n      this.disable = true;\n    }\n  },\n\n  isScrollable() {\n    const $w = $(window);\n    return $(document).height() > $w.height() + $w.scrollTop() + ENDLESS_SCROLL_BOTTOM_PX;\n  },\n\n  initLoadMore() {\n    $(document).off('scroll');\n    $(document).endlessScroll({\n      bottomPixels: ENDLESS_SCROLL_BOTTOM_PX,\n      fireDelay: ENDLESS_SCROLL_FIRE_DELAY_MS,\n      fireOnce: true,\n      ceaseFire: () => this.disable === true,\n      callback: () => {\n        if (!this.loading.is(':visible')) {\n          this.loading.show();\n          this.getOld();\n        }\n      },\n    });\n  },\n};\n","/* eslint-disable class-methods-use-this */\n\nimport $ from 'jquery';\nimport Cookies from 'js-cookie';\nimport Pager from './pager';\nimport { localTimeAgo } from './lib/utils/datetime_utility';\n\nexport default class Activities {\n  constructor() {\n    Pager.init(20, true, false, data => data, this.updateTooltips);\n\n    $('.event-filter-link').on('click', (e) => {\n      e.preventDefault();\n      this.toggleFilter(e.currentTarget);\n      this.reloadActivities();\n    });\n  }\n\n  updateTooltips() {\n    localTimeAgo($('.js-timeago', '.content_list'));\n  }\n\n  reloadActivities() {\n    $('.content_list').html('');\n    Pager.init(20, true, false, data => data, this.updateTooltips);\n  }\n\n  toggleFilter(sender) {\n    const $sender = $(sender);\n    const filter = $sender.attr('id').split('_')[0];\n\n    $('.event-filter .active').removeClass('active');\n    Cookies.set('event_filter', filter);\n\n    $sender.closest('li').toggleClass('active');\n  }\n}\n"],"sourceRoot":""}