(this.webpackJsonp=this.webpackJsonp||[]).push([[109],{12:function(t,e,n){"use strict";var i=n(0),r=n.n(i);e.a={bind:function(t){r()(t).tooltip({trigger:"hover"})},componentUpdated:function(t){r()(t).tooltip("_fixTitle")},unbind:function(t){r()(t).tooltip("dispose")}}},15:function(t,e,n){"use strict";var i=[8,10,12,16,18,24,32,48,72],r={props:{name:{type:String,required:!0,validator:function(){return!0}},size:{type:Number,required:!1,default:16,validator:function(t){return i.includes(t)}},cssClasses:{type:String,required:!1,default:""},width:{type:Number,required:!1,default:null},height:{type:Number,required:!1,default:null},y:{type:Number,required:!1,default:null},x:{type:Number,required:!1,default:null},tabIndex:{type:String,required:!1,default:null}},computed:{spriteHref:function(){return gon.sprite_icons+"#"+this.name},iconTestClass:function(){return"ic-"+this.name},iconSizeClass:function(){return this.size?"s"+this.size:""}}},a=n(2),o=Object(a.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{class:[t.iconSizeClass,t.iconTestClass,t.cssClasses],attrs:{width:t.width,height:t.height,x:t.x,y:t.y,tabindex:t.tabIndex}},[n("use",t._b({},"use",{"xlink:href":t.spriteHref},!1))])},[],!1,null,null,null);e.a=o.exports},151:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return s});var i=n(46),r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function a(t){var e=0,n="";if(!Number.isNaN(Number(t))){var i=t.toString().split(".");switch(r(i,1)[0].length){case 1:e=3;break;case 2:e=2;break;case 3:e=1;break;default:e=4}n=Number(t).toFixed(e)}return n}function o(t){return t/(i.a*i.a)}function s(t){return t<i.a?t+" bytes":t<i.a*i.a?(e=t,e/i.a).toFixed(2)+" KiB":t<i.a*i.a*i.a?o(t).toFixed(2)+" MiB":function(t){return t/(i.a*i.a*i.a)}(t).toFixed(2)+" GiB";var e}},178:function(t,e,n){"use strict";var i=n(12),r=n(15),a={name:"ClipboardButton",directives:{tooltip:i.a},components:{Icon:r.a},props:{text:{type:String,required:!0},gfm:{type:String,required:!1,default:null},title:{type:String,required:!0},tooltipPlacement:{type:String,required:!1,default:"top"},tooltipContainer:{type:[String,Boolean],required:!1,default:!1},cssClass:{type:String,required:!1,default:"btn-default"}},computed:{clipboardText:function(){return null!==this.gfm?JSON.stringify({text:this.text,gfm:this.gfm}):this.text}}},o=n(2),s=Object(o.a)(a,function(){var t=this.$createElement,e=this._self._c||t;return e("button",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"btn",class:this.cssClass,attrs:{title:this.title,"data-clipboard-text":this.clipboardText,"data-container":this.tooltipContainer,"data-placement":this.tooltipPlacement,type:"button"}},[e("icon",{attrs:{name:"duplicate"}})],1)},[],!1,null,null,null);e.a=s.exports},244:function(t,e,n){"use strict";var i=n(1),r=Object(i.e)("Pagination|Prev"),a=Object(i.e)("Pagination|Next"),o=Object(i.e)("Pagination|« First"),s=Object(i.e)("Pagination|Last »"),c={props:{change:{type:Function,required:!0},pageInfo:{type:Object,required:!0}},computed:{prev:function(){return this.pageInfo.previousPage},next:function(){return this.pageInfo.nextPage},getItems:function(){var t=this.pageInfo.totalPages,e=this.pageInfo.page,n=[];e>1&&n.push({title:o,first:!0}),e>1?n.push({title:r,prev:!0}):n.push({title:r,disabled:!0,prev:!0}),e>6&&n.push({title:"...",separator:!0});for(var i=Math.max(e-4,1),c=Math.min(e+4,t),u=i;u<=c;u+=1){var l=u===e;n.push({title:u,active:l,page:!0})}return t-e>4&&n.push({title:"...",separator:!0,page:!0}),e===t?n.push({title:a,disabled:!0,next:!0}):t-e>=1&&n.push({title:a,next:!0}),t-e>=1&&n.push({title:s,last:!0}),n},showPagination:function(){return this.pageInfo.totalPages>1}},methods:{changePage:function(t,e){if(!e){var n=this.pageInfo,i=n.totalPages,c=n.nextPage,u=n.previousPage;switch(t){case"...":break;case s:this.change(i);break;case a:this.change(c);break;case r:this.change(u);break;case o:this.change(1);break;default:this.change(+t)}}},hideOnSmallScreen:function(t){return!(t.first||t.last||t.next||t.prev||t.active)}}},u=n(2),l=Object(u.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showPagination?n("div",{staticClass:"gl-pagination prepend-top-default"},[n("ul",{staticClass:"pagination justify-content-center"},t._l(t.getItems,function(e,i){return n("li",{key:i,staticClass:"page-item",class:{page:e.page,"js-previous-button":e.prev,"js-next-button":e.next,"js-last-button":e.last,"js-first-button":e.first,"d-none d-md-block":t.hideOnSmallScreen(e),separator:e.separator,active:e.active,disabled:e.disabled||e.separator}},[n("a",{staticClass:"page-link",on:{click:function(n){n.preventDefault(),t.changePage(e.title,e.disabled)}}},[t._v("\n        "+t._s(e.title)+"\n      ")])])}))]):t._e()},[],!1,null,null,null);e.a=l.exports},46:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r});var i=1024,r="hidden"},878:function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"fetchRepos",function(){return p}),n.d(i,"fetchList",function(){return d}),n.d(i,"deleteRepo",function(){return f}),n.d(i,"deleteRegistry",function(){return h}),n.d(i,"setMainEndpoint",function(){return g}),n.d(i,"toggleLoading",function(){return b}),n.d(i,"default",function(){return v});var r={};n.r(r),n.d(r,"isLoading",function(){return _}),n.d(r,"repos",function(){return m}),n.d(r,"default",function(){return y});var a=n(8),o=n(14),s=n(7),c=n(27),u=n(235);a.default.use(u.a);var l,p=function(t){var e=t.commit,n=t.state;return e("TOGGLE_MAIN_LOADING"),a.default.http.get(n.endpoint).then(function(t){return t.json()}).then(function(t){e("TOGGLE_MAIN_LOADING"),e("SET_REPOS_LIST",t)})},d=function(t,e){var n=t.commit,i=e.repo,r=e.page;return n("TOGGLE_REGISTRY_LIST_LOADING",i),a.default.http.get(i.tagsPath,{params:{page:r}}).then(function(t){var e=t.headers;return t.json().then(function(t){n("TOGGLE_REGISTRY_LIST_LOADING",i),n("SET_REGISTRY_LIST",{repo:i,resp:t,headers:e})})})},f=function(t,e){t.commit;return a.default.http.delete(e.destroyPath)},h=function(t,e){t.commit;return a.default.http.delete(e.destroyPath)},g=function(t,e){return(0,t.commit)("SET_MAIN_ENDPOINT",e)},b=function(t){return(0,t.commit)("TOGGLE_MAIN_LOADING")},v=function(){},_=function(t){return t.isLoading},m=function(t){return t.repos},y=function(){},O=n(11);function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var j=(R(l={},"SET_MAIN_ENDPOINT",function(t,e){Object.assign(t,{endpoint:e})}),R(l,"SET_REPOS_LIST",function(t,e){Object.assign(t,{repos:e.map(function(t){return{canDelete:!!t.destroy_path,destroyPath:t.destroy_path,id:t.id,isLoading:!1,list:[],location:t.location,name:t.path,tagsPath:t.tags_path}})})}),R(l,"TOGGLE_MAIN_LOADING",function(t){Object.assign(t,{isLoading:!t.isLoading})}),R(l,"SET_REGISTRY_LIST",function(t,e){var n=e.repo,i=e.resp,r=e.headers,a=t.repos.find(function(t){return t.id===n.id}),o=Object(O.z)(r),s=Object(O.B)(o);a.pagination=s,a.list=i.map(function(t){return{tag:t.name,revision:t.revision,shortRevision:t.short_revision,size:t.total_size,layers:t.layers,location:t.location,createdAt:t.created_at,destroyPath:t.destroy_path,canDelete:!!t.destroy_path}})}),R(l,"TOGGLE_REGISTRY_LIST_LOADING",function(t,e){var n=t.repos.find(function(t){return t.id===e.id});n.isLoading=!n.isLoading}),l);a.default.use(o.a);var S,E=new o.a.Store({state:{isLoading:!1,endpoint:"",repos:[]},actions:i,getters:r,mutations:j}),C=n(178),L=n(12),I=n(1),T=n(244),w=n(94);function P(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var x="FETCH_REGISTRY",N="FETCH_REPOS",G="DELETE_REPO",k="DELETE_REGISTRY",D=(P(S={},x,Object(I.a)("Something went wrong while fetching the registry list.")),P(S,N,Object(I.a)("Something went wrong while fetching the projects.")),P(S,G,Object(I.a)("Something went wrong on our end.")),P(S,k,Object(I.a)("Something went wrong on our end.")),S),A=n(151),q=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},z={components:{clipboardButton:C.a,tablePagination:T.a},directives:{tooltip:L.a},mixins:[w.a],props:{repo:{type:Object,required:!0}},computed:{shouldRenderPagination:function(){return this.repo.pagination.total>this.repo.pagination.perPage}},methods:q({},Object(o.b)(["fetchList","deleteRegistry"]),{layers:function(t){return t.layers?Object(I.d)("%d layer","%d layers",t.layers):""},formatSize:function(t){return Object(A.c)(t)},handleDeleteRegistry:function(t){var e=this;this.deleteRegistry(t).then(function(){return e.fetchList({repo:e.repo})}).catch(function(){return e.showError(k)})},onPageChange:function(t){var e=this;this.fetchList({repo:this.repo,page:t}).catch(function(){return e.showError(x)})},showError:function(t){Object(s.a)(D[t])}})},M=n(2),F=Object(M.a)(z,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("table",{staticClass:"table tags"},[n("thead",[n("tr",[n("th",[t._v(t._s(t.s__("ContainerRegistry|Tag")))]),t._v(" "),n("th",[t._v(t._s(t.s__("ContainerRegistry|Tag ID")))]),t._v(" "),n("th",[t._v(t._s(t.s__("ContainerRegistry|Size")))]),t._v(" "),n("th",[t._v(t._s(t.s__("ContainerRegistry|Created")))]),t._v(" "),n("th")])]),t._v(" "),n("tbody",t._l(t.repo.list,function(e,i){return n("tr",{key:i},[n("td",[t._v("\n\n          "+t._s(e.tag)+"\n\n          "),e.location?n("clipboard-button",{attrs:{title:e.location,text:e.location,"css-class":"btn-default btn-transparent btn-clipboard"}}):t._e()],1),t._v(" "),n("td",[n("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],attrs:{title:e.revision,"data-placement":"bottom"}},[t._v("\n            "+t._s(e.shortRevision)+"\n          ")])]),t._v(" "),n("td",[t._v("\n          "+t._s(t.formatSize(e.size))+"\n          "),e.size&&e.layers?[t._v("\n            ·\n          ")]:t._e(),t._v("\n          "+t._s(t.layers(e))+"\n        ")],2),t._v(" "),n("td",[n("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],attrs:{title:t.tooltipTitle(e.createdAt),"data-placement":"bottom"}},[t._v("\n            "+t._s(t.timeFormated(e.createdAt))+"\n          ")])]),t._v(" "),n("td",{staticClass:"content"},[e.canDelete?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"js-delete-registry btn btn-danger d-none d-sm-block float-right",attrs:{title:t.s__("ContainerRegistry|Remove tag"),"aria-label":t.s__("ContainerRegistry|Remove tag"),type:"button","data-container":"body"},on:{click:function(n){t.handleDeleteRegistry(e)}}},[n("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})]):t._e()])])}))]),t._v(" "),t.shouldRenderPagination?n("table-pagination",{attrs:{change:t.onPageChange,"page-info":t.repo.pagination}}):t._e()],1)},[],!1,null,null,null).exports,B=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Y={name:"CollapsibeContainerRegisty",components:{clipboardButton:C.a,loadingIcon:c.a,tableRegistry:F},directives:{tooltip:L.a},props:{repo:{type:Object,required:!0}},data:function(){return{isOpen:!1}},methods:B({},Object(o.b)(["fetchRepos","fetchList","deleteRepo"]),{toggleRepo:function(){var t=this;this.isOpen=!this.isOpen,this.isOpen&&this.fetchList({repo:this.repo}).catch(function(){return t.showError(x)})},handleDeleteRepository:function(){var t=this;this.deleteRepo(this.repo).then(function(){return t.fetchRepos()}).catch(function(){return t.showError(G)})},showError:function(t){Object(s.a)(D[t])}})},$=Object(M.a)(Y,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-image"},[n("div",{staticClass:"container-image-head"},[n("button",{staticClass:"js-toggle-repo btn-link",attrs:{type:"button"},on:{click:t.toggleRepo}},[n("i",{staticClass:"fa",class:{"fa-chevron-right":!t.isOpen,"fa-chevron-up":t.isOpen},attrs:{"aria-hidden":"true"}}),t._v("\n      "+t._s(t.repo.name)+"\n    ")]),t._v(" "),t.repo.location?n("clipboard-button",{attrs:{text:t.repo.location,title:t.repo.location,"css-class":"btn-default btn-transparent btn-clipboard"}}):t._e(),t._v(" "),n("div",{staticClass:"controls d-none d-sm-block float-right"},[t.repo.canDelete?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"js-remove-repo btn btn-danger",attrs:{title:t.s__("ContainerRegistry|Remove repository"),"aria-label":t.s__("ContainerRegistry|Remove repository"),type:"button"},on:{click:t.handleDeleteRepository}},[n("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})]):t._e()])],1),t._v(" "),t.repo.isLoading?n("loading-icon",{staticClass:"append-bottom-20",attrs:{size:"2"}}):!t.repo.isLoading&&t.isOpen?n("div",{staticClass:"container-image-tags"},[t.repo.list.length?n("table-registry",{attrs:{repo:t.repo}}):n("div",{staticClass:"nothing-here-block"},[t._v("\n      "+t._s(t.s__("ContainerRegistry|No tags in Container Registry for this container image."))+"\n    ")])],1):t._e()],1)},[],!1,null,null,null).exports,H=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},J={name:"RegistryListApp",components:{collapsibleContainer:$,loadingIcon:c.a},props:{endpoint:{type:String,required:!0}},store:E,computed:H({},Object(o.c)(["isLoading","repos"])),created:function(){this.setMainEndpoint(this.endpoint)},mounted:function(){this.fetchRepos().catch(function(){return Object(s.a)(D[N])})},methods:H({},Object(o.b)(["setMainEndpoint","fetchRepos"]))},K=Object(M.a)(J,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isLoading?n("loading-icon",{attrs:{size:"3"}}):!t.isLoading&&t.repos.length?t._l(t.repos,function(t,e){return n("collapsible-container",{key:e,attrs:{repo:t}})}):t.isLoading||t.repos.length?t._e():n("p",[t._v("\n      "+t._s(t.__("No container images stored for this project.\nAdd one by following the instructions above."))+"\n    ")])],2)},[],!1,null,null,null).exports,U=n(72);a.default.use(U.a);document.addEventListener("DOMContentLoaded",function(){return new a.default({el:"#js-vue-registry-images",components:{registryApp:K},data:function(){return{endpoint:document.querySelector(this.$options.el).dataset.endpoint}},render:function(t){return t("registry-app",{props:{endpoint:this.endpoint}})}})})},922:function(t,e,n){n(31),n(57),t.exports=n(878)},94:function(t,e,n){"use strict";var i=n(38);e.a={methods:{timeFormated:function(t){return Object(i.d)().format(t)},tooltipTitle:function(t){return Object(i.a)(t)}}}}},[[922,0,1,2]]]);
//# sourceMappingURL=pages.projects.registry.repositories.60e49fec.chunk.js.map