(this.webpackJsonp=this.webpackJsonp||[]).push([[140,4,7],{107:function(e,t,n){"use strict";var a=n(0),i=n.n(a),s=n(3),r=n.n(s),o=n(1),l=n(5),u=n(79),d=n(64),c=n(117),h=n(7),f=n(47),p=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,i=!1,s=void 0;try{for(var r,o=e[Symbol.iterator]();!(a=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var v=function(){function e(t){var n,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,a=i()(t),t||(a=i()(".js-label-select")),a.each(function(t,a){var u,m,v,g,b,w,y,k,_,D,C,x,j,S,E,I,O,M,F,L,$,T;T=(m=i()(a)).closest(".labels-filter"),m.find(".dropdown-toggle-text"),x=m.data("namespacePath"),j=m.data("projectPath"),C=m.data("labels"),D=m.data("issueUpdate"),null==(E=m.data("selected"))||m.hasClass("js-multiselect")||(E=E.split(",")),O=m.data("showNo"),I=m.data("showAny"),$=m.data("showMenuAbove"),_=m.data("defaultLabel")||"Label",k=m.data("abilityName"),u=(b=m.closest(".selectbox")).closest(".block"),v=m.closest("form, .js-issuable-update"),w=u.find(".sidebar-collapsed-icon span"),M=u.find(".js-sidebar-labels-tooltip"),y=u.find(".value"),g=u.find(".block-loading").fadeOut(),L=m.data("fieldName"),m.is(".js-issuable-form-dropdown, .js-filter-bulk-update, .js-label-sidebar-dropdown"),F=b.find('input[name="'+m.data("fieldName")+'"]').map(function(){return this.value}).get();var A=s.handleClick;M.tooltip(),m.closest(".dropdown").find(".dropdown-new-label").length&&new c.a(m.closest(".dropdown").find(".dropdown-new-label"),x,j),S=function(){var t,n;n=m.closest(".selectbox").find("input[name='"+L+"']").map(function(){return this.value}).get(),r.a.isEqual(F,n)||(F=n,(t={})[k]={},t[k].label_ids=n,n.length||(t[k].label_ids=[""]),g.removeClass("hidden").fadeIn(),m.trigger("loading.gl.dropdown"),l.a.put(D,t).then(function(t){var n,a,s,r,l=t.data;g.fadeOut(),m.trigger("loaded.gl.dropdown"),b.hide(),l.issueUpdateURL=D,n=0,l.labels.length&&D?(a=e.getLabelTemplate({labels:l.labels,issueUpdateURL:D}),n=l.labels.length):a='<span class="no-value">None</span>',y.removeAttr("style").html(a),w.text(n),l.labels.length?((r=l.labels.map(function(e){return e.title})).length>5&&(r=r.slice(0,5)).push("and "+(l.labels.length-5)+" more"),s=r.join(", ")):s=Object(o.a)("Labels"),M.attr("title",s).tooltip("_fixTitle"),i()(".has-tooltip",y).tooltip({container:"body"})}).catch(function(){return Object(h.a)(Object(o.a)("Error saving label update."))}))},m.glDropdown({showMenuAbove:$,data:function(e,t){l.a.get(C).then(function(e){var n=r.a.chain(e.data).groupBy(function(e){return e.title}).map(function(e){var t;return t=r.a.map(e,function(e){return e.color}),{id:e[0].id,title:e[0].title,color:t,duplicate:t.length>1}}).value();if(m.hasClass("js-extra-options")){var a=[];O&&a.unshift({id:0,title:"No Label"}),I&&a.unshift({isAny:!0,title:"Any Label"}),a.length&&(a.push("divider"),n=a.concat(n))}t(n),$&&m.data("glDropdown").positionMenuAbove()}).catch(function(){return Object(h.a)(Object(o.a)("Error fetching labels."))})},renderRow:function(e,t){var n,a,s,o,l,u,c,h,f,g,b;(a=i()("<li>"),n=i()('<a href="#">'),c=[],u=e.id<=0||null==e.id,m.hasClass("js-filter-bulk-update")?(l=m.data("indeterminate")||[],f=m.data("marked")||[],-1!==l.indexOf(e.id)&&c.push("is-indeterminate"),-1!==f.indexOf(e.id)&&(-1!==(h=c.indexOf("is-indeterminate"))&&c.splice(h,1),c.push("is-active"))):(this.id(e)&&(g=m.data("fieldName"),b=this.id(e).toString().replace(/'/g,"\\'"),v.find("input[type='hidden'][name='"+g+"'][value='"+b+"']").length&&c.push("is-active")),m.hasClass("js-multiselect")&&u&&c.push("dropdown-clear-active")),e.duplicate)?s=d.a.duplicateLabelColor(e.color):null!=e.color&&(s=p(e.color,1)[0]);return o=s?"<span class='dropdown-label-box' style='background: "+s+"'></span>":"",e.id&&(c.push("label-item"),n.attr("data-label-id",e.id)),n.addClass(c.join(" ")).html(o+" "+r.a.escape(e.title)),a.html(n).prop("outerHTML")},search:{fields:["title"]},selectable:!0,filterable:!0,selected:m.data("selected")||[],toggleLabel:function(e,t){var n=m.parent(),a=n.find(".dropdown-input-field"),i=null!==t&&t.hasClass("is-active"),s=e?e.title:null,r=this.selected;if(a.length&&a.val().length&&n.find(".dropdown-input-clear").trigger("click"),e&&0===e.id)return this.selected=[],"No Label";if(i)this.selected.push(s);else if(!i&&s){var o=this.selected.indexOf(s);this.selected.splice(o,1)}return 1===r.length?r:r.length?r[0]+" +"+(r.length-1)+" more":_},fieldName:m.data("fieldName"),id:function(e){return e.id<=0?e.title:m.hasClass("js-issuable-form-dropdown")?e.id:m.hasClass("js-filter-submit")&&null==e.isAny?e.title:e.id},hidden:function(){var e,t,n;e="projects:issues:index"===(n=i()("body").attr("data-page")),t="projects:merge_requests:index"===n,b.hide(),y.removeAttr("style"),m.hasClass("js-issuable-form-dropdown")||i()("html").hasClass("issue-boards-page")||m.hasClass("js-multiselect")&&(m.hasClass("js-filter-submit")&&(e||t)?(m.closest("form").find("input:hidden[name='"+m.data("fieldName")+"']"),Issuable.filterResults(m.closest("form"))):m.hasClass("js-filter-submit")?m.closest("form").submit():m.hasClass("js-filter-bulk-update")||S())},multiSelect:m.hasClass("js-multiselect"),vue:m.hasClass("js-issue-board-sidebar"),clicked:function(e){var t,a,s,r,o=e.$el,l=e.e,u=e.isMarking,d=e.selectedObj,c=function(){g.fadeOut()};if(t="projects:issues:index"===(s=i()("body").attr("data-page")),a="projects:merge_requests:index"===s,m.parent().find(".is-active:not(.dropdown-clear-active)").length&&m.parent().find(".dropdown-clear-active").removeClass("is-active"),!m.hasClass("js-issuable-form-dropdown")){if(m.hasClass("js-filter-bulk-update"))return n.enableBulkLabelDropdown(),void n.setDropdownData(m,u,d.id);if(m.closest(".add-issues-modal").length&&(r=f.a.store.filter),r)return d.isAny?r.label_name=[]:o.hasClass("is-active")&&r.label_name.push(d.title),void l.preventDefault();if(m.hasClass("js-filter-submit")&&(t||a)){if(!m.hasClass("js-multiselect"))return E=d.title,Issuable.filterResults(m.closest("form"))}else{if(m.hasClass("js-filter-submit"))return m.closest("form").submit();if(m.hasClass("js-issue-board-sidebar")){if(o.hasClass("is-active"))gl.issueBoards.BoardsStore.detail.issue.labels.push(new ListLabel({id:d.id,title:d.title,color:d.color[0],textColor:"#fff"}));else{var h=gl.issueBoards.BoardsStore.detail.issue.labels;h=h.filter(function(e){return e.id!==d.id}),gl.issueBoards.BoardsStore.detail.issue.labels=h}g.fadeIn(),gl.issueBoards.BoardsStore.detail.issue.update(m.attr("data-issue-update")).then(c).catch(c)}else if(A)l.preventDefault(),A(d);else if(!m.hasClass("js-multiselect"))return S()}}},opened:function(e){if(m.hasClass("js-issue-board-sidebar")){var t=m.attr("data-selected");this.selected=t?t.split(","):[],m.data("glDropdown").updateLabel()}},preserveContext:!0}),n.setOriginalDropdownData(T,m)}),this.bindEvents()}return m(e,[{key:"bindEvents",value:function(){return i()("body").on("change",".selected_issue",this.onSelectCheckboxIssue)}},{key:"onSelectCheckboxIssue",value:function(){if(!i()(".selected_issue:checked").length)return i()(".issues-bulk-update .labels-filter .dropdown-toggle-text").text("Label")}},{key:"enableBulkLabelDropdown",value:function(){u.a.willUpdateLabels=!0}},{key:"setDropdownData",value:function(e,t,n){var a,i,s,r;i=e.data("marked")||[],s=e.data("unmarked")||[],r=e.data("indeterminate")||[],t?(i.push(n),(a=r.indexOf(n))>-1&&r.splice(a,1),(a=s.indexOf(n))>-1&&s.splice(a,1)):((a=i.indexOf(n))>-1&&i.splice(a,1),u.a.getOriginalIndeterminateIds().indexOf(n)>-1&&s.push(n),u.a.getOriginalCommonIds().indexOf(n)>-1&&s.push(n)),e.data("marked",i),e.data("unmarked",s),e.data("indeterminate",r)}},{key:"setOriginalDropdownData",value:function(e,t){var n=[];e.find('[name="label_name[]"]').map(function(){return n.push(this.value)}),t.data("marked",n)}}],[{key:"getLabelTemplate",value:function(e){return r.a.template(["<% _.each(labels, function(label){ %>",'<a href="<%- issueUpdateURL.slice(0, issueUpdateURL.lastIndexOf("/")) %>?label_name[]=<%- encodeURIComponent(label.title) %>">','<span class="badge label has-tooltip color-label" title="<%- label.description %>" style="background-color: <%- label.color %>; color: <%- label.text_color %>;">',"<%- label.title %>","</span>","</a>","<% }); %>"].join(""))(e)}}]),e}();t.a=v},117:function(e,t,n){"use strict";var a=n(0),i=n.n(a),s=n(33),r=n(45),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var l=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$el=t,this.namespacePath=n,this.projectPath=a,this.$dropdownBack=i()(".dropdown-menu-back",this.$el.closest(".dropdown")),this.$cancelButton=i()(".js-cancel-label-btn",this.$el),this.$newLabelField=i()("#new_label_name",this.$el),this.$newColorField=i()("#new_label_color",this.$el),this.$colorPreview=i()(".js-dropdown-label-color-preview",this.$el),this.$newLabelError=i()(".js-label-error",this.$el),this.$newLabelCreateButton=i()(".js-new-label-btn",this.$el),this.$colorSuggestions=i()(".suggest-colors-dropdown a",this.$el),this.$newLabelError.hide(),this.$newLabelCreateButton.disable(),this.cleanBinding(),this.addBinding()}return o(e,[{key:"cleanBinding",value:function(){this.$colorSuggestions.off("click"),this.$newLabelField.off("keyup change"),this.$newColorField.off("keyup change"),this.$dropdownBack.off("click"),this.$cancelButton.off("click"),this.$newLabelCreateButton.off("click")}},{key:"addBinding",value:function(){var e=this;this.$colorSuggestions.on("click",function(t){var n=i()(this);e.addColorValue(t,n)}),this.$newLabelField.on("keyup change",this.enableLabelCreateButton.bind(this)),this.$newColorField.on("keyup change",this.enableLabelCreateButton.bind(this)),this.$dropdownBack.on("click",this.resetForm.bind(this)),this.$cancelButton.on("click",function(t){t.preventDefault(),t.stopPropagation(),e.resetForm(),e.$dropdownBack.trigger("click")}),this.$newLabelCreateButton.on("click",this.saveLabel.bind(this))}},{key:"addColorValue",value:function(e,t){e.preventDefault(),e.stopPropagation(),this.$newColorField.val(t.data("color")).trigger("change"),this.$colorPreview.css("background-color",t.data("color")).parent().addClass("is-active")}},{key:"enableLabelCreateButton",value:function(){""!==this.$newLabelField.val()&&""!==this.$newColorField.val()?(this.$newLabelError.hide(),this.$newLabelCreateButton.enable()):this.$newLabelCreateButton.disable()}},{key:"resetForm",value:function(){this.$newLabelField.val("").trigger("change"),this.$newColorField.val("").trigger("change"),this.$colorPreview.css("background-color","").parent().removeClass("is-active")}},{key:"saveLabel",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),s.a.newLabel(this.namespacePath,this.projectPath,{title:this.$newLabelField.val(),color:this.$newColorField.val()},function(e){if(t.$newLabelCreateButton.enable(),e.message){var n=void 0;n="string"==typeof e.message?e.message:Object.keys(e.message).map(function(t){return Object(r.h)(t)+" "+e.message[t].join(", ")}).join("<br/>"),t.$newLabelError.html(n).show()}else t.$dropdownBack.trigger("click"),i()(document).trigger("created.label",e)})}}]),e}();t.a=l},196:function(e,t,n){"use strict";var a=n(0),i=n.n(a),s=n(33),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.dropdown,a=t.data,s=t.pattern,r=t.wrapper,o=t.editor,l=t.$input;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pattern=s,this.editor=o,this.dropdown=n,this.$dropdownContainer=r,this.$filenameInput=l||i()("#file_name"),this.$dropdownIcon=i()(".fa-chevron-down",n),this.initDropdown(n,a),this.listenForFilenameInput(),this.renderMatchedDropdown(),this.initAutosizeUpdateEvent()}return r(e,[{key:"initDropdown",value:function(e,t){var n=this;return i()(e).glDropdown({data:t,filterable:!0,selectable:!0,toggleLabel:function(e){return e.name},search:{fields:["name"]},clicked:function(e){return n.fetchFileTemplate(e)},text:function(e){return e.name}})}},{key:"initAutosizeUpdateEvent",value:function(){this.autosizeUpdateEvent=document.createEvent("Event"),this.autosizeUpdateEvent.initEvent("autosize:update",!0,!1)}},{key:"listenForFilenameInput",value:function(){var e=this;return this.$filenameInput.on("keyup blur",function(t){return e.renderMatchedDropdown(t)})}},{key:"renderMatchedDropdown",value:function(){return this.$filenameInput.length?this.pattern.test(this.$filenameInput.val().trim())?this.$dropdownContainer.removeClass("hidden"):this.$dropdownContainer.addClass("hidden"):null}},{key:"fetchFileTemplate",value:function(e){var t=e.e,n=e.selectedObj;return t.preventDefault(),this.requestFile(n)}},{key:"requestFile",value:function(e){}},{key:"setEditorContent",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).skipFocus;if(e){var n=e.content;this.editor.setValue(n,1),t||this.editor.focus(),this.editor instanceof i.a&&this.editor.get(0).dispatchEvent(this.autosizeUpdateEvent)}}},{key:"startLoadingSpinner",value:function(){this.$dropdownIcon.addClass("fa-spinner fa-spin").removeClass("fa-chevron-down")}},{key:"stopLoadingSpinner",value:function(){this.$dropdownIcon.addClass("fa-chevron-down").removeClass("fa-spinner fa-spin")}}]),e}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var u=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,a=Array(n),s=0;s<n;s++)a[s]=arguments[s];var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));r.projectPath=r.dropdown.data("projectPath"),r.namespacePath=r.dropdown.data("namespacePath"),r.issuableType=r.$dropdownContainer.data("issuableType"),r.titleInput=i()("#"+r.issuableType+"_title");var o={name:r.dropdown.data("selected")};return o.name&&r.requestFile(o),i()(".reset-template",r.dropdown.parent()).on("click",function(){r.setInputValueToTemplateContent()}),i()(".no-template",r.dropdown.parent()).on("click",function(){r.currentTemplate.content="",r.setInputValueToTemplateContent(),i()(".dropdown-toggle-text",r.dropdown).text("Choose a template")}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o),l(t,[{key:"requestFile",value:function(e){var t=this;this.startLoadingSpinner(),s.a.issueTemplate(this.namespacePath,this.projectPath,e.name,this.issuableType,function(e,n){t.currentTemplate=n,t.stopLoadingSpinner(),e||t.setInputValueToTemplateContent()})}},{key:"setInputValueToTemplateContent",value:function(){""===this.titleInput.val()?(this.setEditorContent(this.currentTemplate,{skipFocus:!0}),this.titleInput.focus()):this.setEditorContent(this.currentTemplate,{skipFocus:!1})}}]),t}(),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var c=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.$dropdowns,s=n.editor;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$dropdowns=a||i()(".js-issuable-selector"),this.editor=s||this.initEditor(),this.$dropdowns.each(function(e,n){var a=i()(n);new u({pattern:/(\.md)/,data:a.data("data"),wrapper:a.closest(".js-issuable-selector-wrap"),dropdown:a,editor:t.editor})})}return d(e,[{key:"initEditor",value:function(){var e=i()(".markdown-area");return e.setValue=e.val,e.getValue=e.val,e}}]),e}();t.a=c},222:function(e,t,n){"use strict";var a=n(0),i=n.n(a),s=n(73),r=n.n(s),o=n(98),l=n(81),u=n(53),d=n(71),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var f=0,p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$selectElement=i()(t),this.dropdownClass="js-auto-width-select-dropdown-"+f,f+=1}return h(e,[{key:"init",value:function(){var t=this.dropdownClass;return this.$selectElement.select2(c({dropdownCssClass:t},e.selectOptions(this.dropdownClass))),this}}],[{key:"selectOptions",value:function(e){return{dropdownCss:function(){var t="auto",n=i()("."+e),a=i()(this).parent().offsetParent().width();return n.css("width","auto"),n.outerWidth(!1)>a&&(t=a),{width:t,maxWidth:a}}}}}]),e}(),m=n(36),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var b=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.form=t,this.toggleWip=this.toggleWip.bind(this),this.renderWipExplanation=this.renderWipExplanation.bind(this),this.resetAutosave=this.resetAutosave.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.wipRegex=/^\s*(\[WIP\]\s*|WIP:\s*|WIP\s+)+\s*/i,new u.a(gl.GfmAutoComplete&&gl.GfmAutoComplete.dataSources).setup(),new l.a,new d.a,this.titleField=this.form.find('input[name*="[title]"]'),this.descriptionField=this.form.find('textarea[name*="[description]"]'),this.titleField.length&&this.descriptionField.length){this.initAutosave(),this.form.on("submit",this.handleSubmit),this.form.on("click",".btn-cancel",this.resetAutosave),this.initWip();var n=i()("#issuable-due-date");if(n.length){var a=new r.a({field:n.get(0),theme:"gitlab-theme animate-picker",format:"yyyy-mm-dd",container:n.parent().get(0),parse:function(e){return Object(m.a)(e)},toString:function(e){return Object(m.b)(e)},onSelect:function(e){return n.val(a.toString(e))}});a.setDate(Object(m.a)(n.val()))}this.$targetBranchSelect=i()(".js-target-branch-select",this.form),this.$targetBranchSelect.length&&this.initTargetBranchDropdown()}}return g(e,[{key:"initAutosave",value:function(){return new o.a(this.titleField,[document.location.pathname,document.location.search,"title"]),new o.a(this.descriptionField,[document.location.pathname,document.location.search,"description"])}},{key:"handleSubmit",value:function(){return this.resetAutosave()}},{key:"resetAutosave",value:function(){return this.titleField.data("autosave").reset(),this.descriptionField.data("autosave").reset()}},{key:"initWip",value:function(){if(this.$wipExplanation=this.form.find(".js-wip-explanation"),this.$noWipExplanation=this.form.find(".js-no-wip-explanation"),this.$wipExplanation.length&&this.$noWipExplanation.length)return this.form.on("click",".js-toggle-wip",this.toggleWip),this.titleField.on("keyup blur",this.renderWipExplanation),this.renderWipExplanation()}},{key:"workInProgress",value:function(){return this.wipRegex.test(this.titleField.val())}},{key:"renderWipExplanation",value:function(){return this.workInProgress()?(this.$wipExplanation.show(),this.$noWipExplanation.hide()):(this.$wipExplanation.hide(),this.$noWipExplanation.show())}},{key:"toggleWip",value:function(e){return e.preventDefault(),this.workInProgress()?this.removeWip():this.addWip(),this.renderWipExplanation()}},{key:"removeWip",value:function(){return this.titleField.val(this.titleField.val().replace(this.wipRegex,""))}},{key:"addWip",value:function(){this.titleField.val("WIP: "+this.titleField.val())}},{key:"initTargetBranchDropdown",value:function(){this.$targetBranchSelect.select2(v({},p.selectOptions("js-target-branch-select"),{ajax:{url:this.$targetBranchSelect.data("endpoint"),dataType:"JSON",quietMillis:250,data:function(e){return{search:e}},results:function(e){return{results:e[Object.keys(e)[0]].map(function(e){return{id:e,text:e}})}}},initSelection:function(e,t){var n=e.val();t({id:n,text:n})}}))}}]),e}();t.a=b},36:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s});var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return("0"+e).slice(-t)},i=function(e){var t=e.split("-"),n=parseInt(t[0],10),a=parseInt(t[1]-1,10),i=parseInt(t[2],10);return new Date(n,a,i)},s=function(e){var t=a(e.getDate()),n=a(e.getMonth()+1);return e.getFullYear()+"-"+n+"-"+t}},456:function(e,t,n){"use strict";var a=n(0),i=n.n(a),s=n(65),r=n(222),o=n(107),l=n(132),u=n(87),d=n(196);t.a=function(){new u.a,new s.a(i()(".issue-form")),new r.a(i()(".issue-form")),new o.a,new l.a,new d.a}},65:function(e,t,n){"use strict";var a=n(0),i=n.n(a),s=n(50),r=n.n(s),o=n(53),l=n(24),u=n.n(l),d=n(3),c=n.n(d),h=(n(157),n(66)),f=n(5);function p(e){var t=e.find(".button-attach-file"),n=e.find(".attaching-file-message"),a=e.find(".button-cancel-uploading-files"),s=e.find(".retry-uploading-link"),r=e.find(".uploading-progress"),o=e.find(".uploading-error-container"),l=e.find(".uploading-error-message"),d=e.find(".uploading-progress-container"),p=window.uploads_path||null,m=gon.max_file_size||10,v=e.find(".js-gfm-input"),g=void 0,b=void 0,w=void 0,y=void 0,k=void 0,_=void 0,D=void 0;v.wrap('<div class="div-dropzone"></div>'),v.on("paste",function(e){return g(e)});var C=v.closest(".md-area");e.setupMarkdownPreview();var x=e.find(".div-dropzone");if(x.parent().addClass("div-dropzone-wrapper"),x.append('<div class="div-dropzone-hover"></div>'),x.find(".div-dropzone-hover").append('<i class="fa fa-paperclip div-dropzone-icon"></i>'),p){var j=x.dropzone({url:p,dictDefaultMessage:"",clickable:!0,paramName:"file",maxFilesize:m,uploadMultiple:!1,headers:h.a.headers,previewContainer:!1,processing:function(){return i()(".div-dropzone-alert").alert("close")},dragover:function(){C.addClass("is-dropzone-hover"),e.find(".div-dropzone-hover").css("opacity",.7)},dragleave:function(){C.removeClass("is-dropzone-hover"),e.find(".div-dropzone-hover").css("opacity",0)},drop:function(){C.removeClass("is-dropzone-hover"),e.find(".div-dropzone-hover").css("opacity",0),v.focus()},success:function(e,n){var a=this.getQueuedFiles().length+this.getUploadingFiles().length,i=a>=1;b(n.link.markdown,i),a||t.removeClass("hide"),w(n.link.url)},error:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Attaching the file failed.",i=arguments[2],s=i?i.responseText:n;o.removeClass("hide"),l.html(s),t.addClass("hide"),a.addClass("hide")},totaluploadprogress:function(e){y(this.files,n),r.text(Math.round(e)+"%")},sending:function(){t.addClass("hide"),o.addClass("hide"),d.removeClass("hide"),a.removeClass("hide")},removedfile:function(){t.removeClass("hide"),a.addClass("hide"),d.addClass("hide"),o.addClass("hide")},queuecomplete:function(){i()(".dz-preview").remove(),i()(".markdown-area").trigger("input"),d.addClass("hide"),a.addClass("hide")}}),S=i()(j[0]).children("textarea");a.on("click",function(e){e.preventDefault(),e.stopPropagation(),u.a.forElement(x.get(0)).removeAllFiles(!0)}),s.on("click",function(e){var t=u.a.forElement(e.target.closest(".js-main-target-form").querySelector(".div-dropzone")),n=t.files;e.preventDefault(),t.removeAllFiles(!0),n.map(function(e){var n=e;return n.status===u.a.ERROR&&(n.status=void 0,n.accepted=void 0),t.addFile(n)})}),g=function(e){var t=e.originalEvent;if(t.clipboardData&&t.clipboardData.items){var n=k(t);if(n){e.preventDefault();var a=_(t)||"image.png";return b("{{"+a+"}}"),D(n.getAsFile(),a)}}},k=function(e){for(var t=0;t<e.clipboardData.items.length;){var n=e.clipboardData.items[t];if(-1!==n.type.indexOf("image"))return n;t+=1}return!1},b=function(e,t){var n=e;t&&(n+="\n\n");var a=S.get(0),s=a.selectionStart,r=a.selectionEnd,o=i()(S).val().length,l=i()(S).val().substring(0,s),u=i()(S).val().substring(r,o);return i()(S).val(l+n+u),a.setSelectionRange(s+n.length,r+n.length),a.style.height=a.scrollHeight+"px",v.get(0).dispatchEvent(new Event("input")),v.trigger("input")},w=function(t){i()(e).append('<input type="hidden" name="files[]" value="'+c.a.escape(t)+'">')},_=function(e){var t=void 0;return window.clipboardData&&window.clipboardData.getData?t=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData&&(t=e.clipboardData.getData("text/plain")),(t=t.split("\r"))[0]};var E=function(){return d.addClass("hide")};D=function(t,n){var a=new FormData;a.append("file",t,n),d.removeClass("hide"),e.find(".div-dropzone-alert").alert("close"),f.a.post(p,a).then(function(e){var t=e.data.link.markdown;!function(e,t){var n=i()(S);n.val(function(n,a){return a.replace("{{"+e+"}}",t)}),n.trigger("change")}(n,t),E()}).catch(function(e){var t;t=e.response.data.message,o.removeClass("hide"),l.html(t),E()})},y=function(e,t){var n=void 0,a=e.filter(function(e){return"uploading"===e.status||"queued"===e.status}).length;n=a>1?"Attaching "+a+" files -":"Attaching a file -",t.text(n)},e.find(".markdown-selector").click(function(e){e.preventDefault(),i()(this).closest(".gfm-form").find(".div-dropzone").click(),v.focus()})}else x.addClass("js-invalid-dropzone")}u.a.autoDiscover=!1;var m=n(11);function v(e,t,n,a){var s,r,o;return e=(s=i()(e)).get(0),r=function(e,t){return e.substring(t.selectionStart,t.selectionEnd)}(o=s.val(),e),s.focus(),function(e,t,n,a,i,s){var r,o,l,u,d,c,h;return u=!1,d=!1,c=!1,0===i.indexOf("\n")&&(d=!0,i=i.replace(/\n+/,"")),e.selectionEnd-e.selectionStart>i.replace(/\n$/,"").length&&(u=!0,i=i.replace(/\n$/,"")),o=i.split("\n"),s||(h=e.value.substr(0,e.selectionStart).lastIndexOf("\n"),/^\s*$/.test(e.value.substring(h,e.selectionStart))&&(c=!0)),l=!s&&!c&&e.selectionStart>0?"\n":"",r=o.length>1&&(!s||null!=a&&""!==a)?null!=a&&""!==a?function(e,t,n,a){var i=function(e,t){var n;return(n=e.substring(0,t.selectionStart).trim().split("\n"))[n.length-1]}(e,t),s=function(e,t){return e.substring(t.selectionEnd).trim().split("\n")[0]}(e,t);return i===n&&s===n?(null!=n&&(t.selectionStart=t.selectionStart-(n.length+1),t.selectionEnd=t.selectionEnd+(n.length+1)),a):n+"\n"+a+"\n"+n}(t,e,a,i):o.map(function(e){return 0===e.indexOf(n)?""+e.replace(n,""):""+n+e}).join("\n"):""+l+n+i+(s?n:" "),d&&(r="\n"+r),u&&(r+="\n"),Object(m.p)(e,r),function(e,t,n,a){var i;if(e.setSelectionRange)return e.selectionStart===e.selectionEnd?(i=n?e.selectionStart-t.length:e.selectionStart,a&&(i-=1),e.setSelectionRange(i,i)):void 0}(e,n,s,u)}(e,o,t,n,r,a)}var g=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var b=function(){function e(t){var n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.form=t,this.textarea=this.form.find("textarea.js-gfm-input"),this.enableGFM=Object.assign({},o.b,a);var i=gl.GfmAutoComplete&&gl.GfmAutoComplete.dataSources||{};Object.keys(this.enableGFM).forEach(function(e){"emojis"!==e&&(n.enableGFM[e]=!!i[e])}),this.destroy(),this.setupForm(),this.form.data("glForm",this)}return g(e,[{key:"destroy",value:function(){this.clearEventListeners(),this.autoComplete&&this.autoComplete.destroy(),this.form.data("glForm",null)}},{key:"setupForm",value:function(){var e,t=this.form.is(":not(.gfm-form)");this.form.removeClass("js-new-note-form"),t&&(this.form.find(".div-dropzone").remove(),this.form.addClass("gfm-form"),gl.utils.disableButtonIfEmptyField(this.form.find(".js-note-text"),this.form.find(".js-comment-button, .js-note-new-discussion")),this.autoComplete=new o.a(gl.GfmAutoComplete&&gl.GfmAutoComplete.dataSources),this.autoComplete.setup(this.form.find(".js-gfm-input"),this.enableGFM),p(this.form),r()(this.textarea)),this.addEventListeners(),e=this.form,i()(".js-md",e).off("click").on("click",function(){var e=i()(this);return v(e.closest(".md-area").find("textarea"),e.data("mdTag"),e.data("mdBlock"),!e.data("mdPrepend"))}),this.form.find(".js-note-discard").hide(),this.form.show(),this.isAutosizeable&&this.setupAutosize()}},{key:"setupAutosize",value:function(){var e=this;this.textarea.off("autosize:resized").on("autosize:resized",this.setHeightData.bind(this)),this.textarea.off("mouseup.autosize").on("mouseup.autosize",this.destroyAutosize.bind(this)),setTimeout(function(){r()(e.textarea),e.textarea.css("resize","vertical")},0)}},{key:"setHeightData",value:function(){this.textarea.data("height",this.textarea.outerHeight())}},{key:"destroyAutosize",value:function(){var e=this.textarea.outerHeight();this.textarea.data("height")!==e&&(r.a.destroy(this.textarea),this.textarea.data("height",e),this.textarea.outerHeight(e),this.textarea.css("max-height",window.outerHeight))}},{key:"clearEventListeners",value:function(){var e;this.textarea.off("focus"),this.textarea.off("blur"),e=this.form,i()(".js-md",e).off("click")}},{key:"addEventListeners",value:function(){this.textarea.on("focus",function(){i()(this).closest(".md-area").addClass("is-focused")}),this.textarea.on("blur",function(){i()(this).closest(".md-area").removeClass("is-focused")})}}]),e}();t.a=b},71:function(e,t,n){"use strict";var a=n(0),i=n.n(a),s=(n(158),n(24)),r=n.n(s),o=n(29),l=n.n(o),u=(n(99),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}());r.a.autoDiscover=!1;var d=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.active_backdrop=null,this.active_textarea=null,i()(document).on("click",".js-zen-enter",function(e){return e.preventDefault(),i()(e.currentTarget).trigger("zen_mode:enter")}),i()(document).on("click",".js-zen-leave",function(e){return e.preventDefault(),i()(e.currentTarget).trigger("zen_mode:leave")}),i()(document).on("zen_mode:enter",(t=this,function(e){return t.enter(i()(e.target).closest(".md-area").find(".zen-backdrop"))})),i()(document).on("zen_mode:leave",function(e){return function(t){return e.exit()}}(this)),i()(document).on("keydown",function(e){if(27===e.keyCode)return e.preventDefault(),i()(document).trigger("zen_mode:leave")})}return u(e,[{key:"enter",value:function(e){l.a.pause(),this.active_backdrop=i()(e),this.active_backdrop.addClass("fullscreen"),this.active_textarea=this.active_backdrop.find("textarea"),this.active_textarea.removeAttr("style"),this.active_textarea.focus()}},{key:"exit",value:function(){if(this.active_textarea){l.a.unpause(),this.active_textarea.closest(".zen-backdrop").removeClass("fullscreen"),this.scrollTo(this.active_textarea),this.active_textarea=null,this.active_backdrop=null;var e=i()(".div-dropzone");e&&!e.hasClass("js-invalid-dropzone")&&r.a.forElement(".div-dropzone").enable()}}},{key:"scrollTo",value:function(e){return i.a.scrollTo(e,0,{offset:-150})}}]),e}();t.a=d},73:function(e,t,n){
/*!
 * Pikaday
 *
 * Copyright Â© 2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday
 */
!function(t,a){"use strict";var i;try{i=n(!function(){var e=new Error("Cannot find module 'moment'");throw e.code="MODULE_NOT_FOUND",e}())}catch(e){}e.exports=function(e){var t="function"==typeof e,n=!!window.addEventListener,a=window.document,i=window.setTimeout,s=function(e,t,a,i){n?e.addEventListener(t,a,!!i):e.attachEvent("on"+t,a)},r=function(e,t,a,i){n?e.removeEventListener(t,a,!!i):e.detachEvent("on"+t,a)},o=function(e,t){return-1!==(" "+e.className+" ").indexOf(" "+t+" ")},l=function(e){return/Array/.test(Object.prototype.toString.call(e))},u=function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())},d=function(e){var t=e.getDay();return 0===t||6===t},c=function(e,t){return[31,function(e){return e%4==0&&e%100!=0||e%400==0}(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},h=function(e){u(e)&&e.setHours(0,0,0,0)},f=function(e,t){return e.getTime()===t.getTime()},p=function(e,t,n){var a,i;for(a in t)(i=void 0!==e[a])&&"object"==typeof t[a]&&null!==t[a]&&void 0===t[a].nodeName?u(t[a])?n&&(e[a]=new Date(t[a].getTime())):l(t[a])?n&&(e[a]=t[a].slice(0)):e[a]=p({},t[a],n):!n&&i||(e[a]=t[a]);return e},m=function(e,t,n){var i;a.createEvent?((i=a.createEvent("HTMLEvents")).initEvent(t,!0,!1),i=p(i,n),e.dispatchEvent(i)):a.createEventObject&&(i=a.createEventObject(),i=p(i,n),e.fireEvent("on"+t,i))},v=function(e){return e.month<0&&(e.year-=Math.ceil(Math.abs(e.month)/12),e.month+=12),e.month>11&&(e.year+=Math.floor(Math.abs(e.month)/12),e.month-=12),e},g={field:null,bound:void 0,position:"bottom left",reposition:!0,format:"YYYY-MM-DD",toString:null,parse:null,defaultDate:null,setDefaultDate:!1,firstDay:0,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,pickWholeWeek:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,enableSelectionDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,blurFieldOnSelect:!0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null},b=function(e,t,n){for(t+=e.firstDay;t>=7;)t-=7;return n?e.i18n.weekdaysShort[t]:e.i18n.weekdays[t]},w=function(e){var t=[],n="false";if(e.isEmpty){if(!e.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';t.push("is-outside-current-month"),e.enableSelectionDaysInNextAndPreviousMonths||t.push("is-selection-disabled")}return e.isDisabled&&t.push("is-disabled"),e.isToday&&t.push("is-today"),e.isSelected&&(t.push("is-selected"),n="true"),e.hasEvent&&t.push("has-event"),e.isInRange&&t.push("is-inrange"),e.isStartRange&&t.push("is-startrange"),e.isEndRange&&t.push("is-endrange"),'<td data-day="'+e.day+'" class="'+t.join(" ")+'" aria-selected="'+n+'"><button class="pika-button pika-day" type="button" data-pika-year="'+e.year+'" data-pika-month="'+e.month+'" data-pika-day="'+e.day+'">'+e.day+"</button></td>"},y=function(e,t,n,a){return'<tr class="pika-row'+(n?" pick-whole-week":"")+(a?" is-selected":"")+'">'+(t?e.reverse():e).join("")+"</tr>"},k=function(e,t,n,a,i,s){var r,o,u,d,c,h=e._o,f=n===h.minYear,p=n===h.maxYear,m='<div id="'+s+'" class="pika-title" role="heading" aria-live="assertive">',v=!0,g=!0;for(u=[],r=0;r<12;r++)u.push('<option value="'+(n===i?r-t:12+r-t)+'"'+(r===a?' selected="selected"':"")+(f&&r<h.minMonth||p&&r>h.maxMonth?'disabled="disabled"':"")+">"+h.i18n.months[r]+"</option>");for(d='<div class="pika-label">'+h.i18n.months[a]+'<select class="pika-select pika-select-month" tabindex="-1">'+u.join("")+"</select></div>",l(h.yearRange)?(r=h.yearRange[0],o=h.yearRange[1]+1):(r=n-h.yearRange,o=1+n+h.yearRange),u=[];r<o&&r<=h.maxYear;r++)r>=h.minYear&&u.push('<option value="'+r+'"'+(r===n?' selected="selected"':"")+">"+r+"</option>");return c='<div class="pika-label">'+n+h.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+u.join("")+"</select></div>",h.showMonthAfterYear?m+=c+d:m+=d+c,f&&(0===a||h.minMonth>=a)&&(v=!1),p&&(11===a||h.maxMonth<=a)&&(g=!1),0===t&&(m+='<button class="pika-prev'+(v?"":" is-disabled")+'" type="button">'+h.i18n.previousMonth+"</button>"),t===e._o.numberOfMonths-1&&(m+='<button class="pika-next'+(g?"":" is-disabled")+'" type="button">'+h.i18n.nextMonth+"</button>"),m+="</div>"},_=function(r){var l=this,d=l.config(r);l._onMouseDown=function(e){if(l._v){var t=(e=e||window.event).target||e.srcElement;if(t)if(o(t,"is-disabled")||(!o(t,"pika-button")||o(t,"is-empty")||o(t.parentNode,"is-disabled")?o(t,"pika-prev")?l.prevMonth():o(t,"pika-next")&&l.nextMonth():(l.setDate(new Date(t.getAttribute("data-pika-year"),t.getAttribute("data-pika-month"),t.getAttribute("data-pika-day"))),d.bound&&i(function(){l.hide(),d.blurFieldOnSelect&&d.field&&d.field.blur()},100))),o(t,"pika-select"))l._c=!0;else{if(!e.preventDefault)return e.returnValue=!1,!1;e.preventDefault()}}},l._onChange=function(e){var t=(e=e||window.event).target||e.srcElement;t&&(o(t,"pika-select-month")?l.gotoMonth(t.value):o(t,"pika-select-year")&&l.gotoYear(t.value))},l._onKeyChange=function(e){if(e=e||window.event,l.isVisible())switch(e.keyCode){case 13:case 27:d.field&&d.field.blur();break;case 37:e.preventDefault(),l.adjustDate("subtract",1);break;case 38:l.adjustDate("subtract",7);break;case 39:l.adjustDate("add",1);break;case 40:l.adjustDate("add",7)}},l._onInputChange=function(n){var a;n.firedBy!==l&&(a=d.parse?d.parse(d.field.value,d.format):t?(a=e(d.field.value,d.format,d.formatStrict))&&a.isValid()?a.toDate():null:new Date(Date.parse(d.field.value)),u(a)&&l.setDate(a),l._v||l.show())},l._onInputFocus=function(){l.show()},l._onInputClick=function(){l.show()},l._onInputBlur=function(){var e=a.activeElement;do{if(o(e,"pika-single"))return}while(e=e.parentNode);l._c||(l._b=i(function(){l.hide()},50)),l._c=!1},l._onClick=function(e){var t=(e=e||window.event).target||e.srcElement,a=t;if(t){!n&&o(t,"pika-select")&&(t.onchange||(t.setAttribute("onchange","return;"),s(t,"change",l._onChange)));do{if(o(a,"pika-single")||a===d.trigger)return}while(a=a.parentNode);l._v&&t!==d.trigger&&a!==d.trigger&&l.hide()}},l.el=a.createElement("div"),l.el.className="pika-single"+(d.isRTL?" is-rtl":"")+(d.theme?" "+d.theme:""),s(l.el,"mousedown",l._onMouseDown,!0),s(l.el,"touchend",l._onMouseDown,!0),s(l.el,"change",l._onChange),s(a,"keydown",l._onKeyChange),d.field&&(d.container?d.container.appendChild(l.el):d.bound?a.body.appendChild(l.el):d.field.parentNode.insertBefore(l.el,d.field.nextSibling),s(d.field,"change",l._onInputChange),d.defaultDate||(t&&d.field.value?d.defaultDate=e(d.field.value,d.format).toDate():d.defaultDate=new Date(Date.parse(d.field.value)),d.setDefaultDate=!0));var c=d.defaultDate;u(c)?d.setDefaultDate?l.setDate(c,!0):l.gotoDate(c):l.gotoDate(new Date),d.bound?(this.hide(),l.el.className+=" is-bound",s(d.trigger,"click",l._onInputClick),s(d.trigger,"focus",l._onInputFocus),s(d.trigger,"blur",l._onInputBlur)):this.show()};return _.prototype={config:function(e){this._o||(this._o=p({},g,!0));var t=p(this._o,e,!0);t.isRTL=!!t.isRTL,t.field=t.field&&t.field.nodeName?t.field:null,t.theme="string"==typeof t.theme&&t.theme?t.theme:null,t.bound=!!(void 0!==t.bound?t.field&&t.bound:t.field),t.trigger=t.trigger&&t.trigger.nodeName?t.trigger:t.field,t.disableWeekends=!!t.disableWeekends,t.disableDayFn="function"==typeof t.disableDayFn?t.disableDayFn:null;var n=parseInt(t.numberOfMonths,10)||1;if(t.numberOfMonths=n>4?4:n,u(t.minDate)||(t.minDate=!1),u(t.maxDate)||(t.maxDate=!1),t.minDate&&t.maxDate&&t.maxDate<t.minDate&&(t.maxDate=t.minDate=!1),t.minDate&&this.setMinDate(t.minDate),t.maxDate&&this.setMaxDate(t.maxDate),l(t.yearRange)){var a=(new Date).getFullYear()-10;t.yearRange[0]=parseInt(t.yearRange[0],10)||a,t.yearRange[1]=parseInt(t.yearRange[1],10)||a}else t.yearRange=Math.abs(parseInt(t.yearRange,10))||g.yearRange,t.yearRange>100&&(t.yearRange=100);return t},toString:function(n){return n=n||this._o.format,u(this._d)?this._o.toString?this._o.toString(this._d,n):t?e(this._d).format(n):this._d.toDateString():""},getMoment:function(){return t?e(this._d):null},setMoment:function(n,a){t&&e.isMoment(n)&&this.setDate(n.toDate(),a)},getDate:function(){return u(this._d)?new Date(this._d.getTime()):null},setDate:function(e,t){if(!e)return this._d=null,this._o.field&&(this._o.field.value="",m(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof e&&(e=new Date(Date.parse(e))),u(e)){var n=this._o.minDate,a=this._o.maxDate;u(n)&&e<n?e=n:u(a)&&e>a&&(e=a),this._d=new Date(e.getTime()),h(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),m(this._o.field,"change",{firedBy:this})),t||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},gotoDate:function(e){var t=!0;if(u(e)){if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),a=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),i=e.getTime();a.setMonth(a.getMonth()+1),a.setDate(a.getDate()-1),t=i<n.getTime()||a.getTime()<i}t&&(this.calendars=[{month:e.getMonth(),year:e.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustDate:function(e,t){var n,a=this.getDate()||new Date,i=24*parseInt(t)*60*60*1e3;"add"===e?n=new Date(a.valueOf()+i):"subtract"===e&&(n=new Date(a.valueOf()-i)),this.setDate(n)},adjustCalendars:function(){this.calendars[0]=v(this.calendars[0]);for(var e=1;e<this._o.numberOfMonths;e++)this.calendars[e]=v({month:this.calendars[0].month+e,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(e){isNaN(e)||(this.calendars[0].month=parseInt(e,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(e){isNaN(e)||(this.calendars[0].year=parseInt(e,10),this.adjustCalendars())},setMinDate:function(e){e instanceof Date?(h(e),this._o.minDate=e,this._o.minYear=e.getFullYear(),this._o.minMonth=e.getMonth()):(this._o.minDate=g.minDate,this._o.minYear=g.minYear,this._o.minMonth=g.minMonth,this._o.startRange=g.startRange),this.draw()},setMaxDate:function(e){e instanceof Date?(h(e),this._o.maxDate=e,this._o.maxYear=e.getFullYear(),this._o.maxMonth=e.getMonth()):(this._o.maxDate=g.maxDate,this._o.maxYear=g.maxYear,this._o.maxMonth=g.maxMonth,this._o.endRange=g.endRange),this.draw()},setStartRange:function(e){this._o.startRange=e},setEndRange:function(e){this._o.endRange=e},draw:function(e){if(this._v||e){var t,n=this._o,a=n.minYear,s=n.maxYear,r=n.minMonth,o=n.maxMonth,l="";this._y<=a&&(this._y=a,!isNaN(r)&&this._m<r&&(this._m=r)),this._y>=s&&(this._y=s,!isNaN(o)&&this._m>o&&(this._m=o)),t="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var u=0;u<n.numberOfMonths;u++)l+='<div class="pika-lendar">'+k(this,u,this.calendars[u].year,this.calendars[u].month,this.calendars[0].year,t)+this.render(this.calendars[u].year,this.calendars[u].month,t)+"</div>";this.el.innerHTML=l,n.bound&&"hidden"!==n.field.type&&i(function(){n.trigger.focus()},1),"function"==typeof this._o.onDraw&&this._o.onDraw(this),n.bound&&n.field.setAttribute("aria-label","Use the arrow keys to pick a date")}},adjustPosition:function(){var e,t,n,i,s,r,o,l,u,d;if(!this._o.container){if(this.el.style.position="absolute",t=e=this._o.trigger,n=this.el.offsetWidth,i=this.el.offsetHeight,s=window.innerWidth||a.documentElement.clientWidth,r=window.innerHeight||a.documentElement.clientHeight,o=window.pageYOffset||a.body.scrollTop||a.documentElement.scrollTop,"function"==typeof e.getBoundingClientRect)l=(d=e.getBoundingClientRect()).left+window.pageXOffset,u=d.bottom+window.pageYOffset;else for(l=t.offsetLeft,u=t.offsetTop+t.offsetHeight;t=t.offsetParent;)l+=t.offsetLeft,u+=t.offsetTop;(this._o.reposition&&l+n>s||this._o.position.indexOf("right")>-1&&l-n+e.offsetWidth>0)&&(l=l-n+e.offsetWidth),(this._o.reposition&&u+i>r+o||this._o.position.indexOf("top")>-1&&u-i-e.offsetHeight>0)&&(u=u-i-e.offsetHeight),this.el.style.left=l+"px",this.el.style.top=u+"px"}},render:function(e,t,n){var a=this._o,i=new Date,s=c(e,t),r=new Date(e,t,1).getDay(),o=[],l=[];h(i),a.firstDay>0&&(r-=a.firstDay)<0&&(r+=7);for(var p=0===t?11:t-1,m=11===t?0:t+1,v=0===t?e-1:e,g=11===t?e+1:e,k=c(v,p),_=s+r,D=_;D>7;)D-=7;_+=7-D;for(var C,x,j,S,E=!1,I=0,O=0;I<_;I++){var M=new Date(e,t,I-r+1),F=!!u(this._d)&&f(M,this._d),L=f(M,i),$=-1!==a.events.indexOf(M.toDateString()),T=I<r||I>=s+r,A=I-r+1,N=t,R=e,P=a.startRange&&f(a.startRange,M),U=a.endRange&&f(a.endRange,M),z=a.startRange&&a.endRange&&a.startRange<M&&M<a.endRange,B=a.minDate&&M<a.minDate||a.maxDate&&M>a.maxDate||a.disableWeekends&&d(M)||a.disableDayFn&&a.disableDayFn(M);T&&(I<r?(A=k+A,N=p,R=v):(A-=s,N=m,R=g));var W={day:A,month:N,year:R,hasEvent:$,isSelected:F,isToday:L,isDisabled:B,isEmpty:T,isStartRange:P,isEndRange:U,isInRange:z,showDaysInNextAndPreviousMonths:a.showDaysInNextAndPreviousMonths,enableSelectionDaysInNextAndPreviousMonths:a.enableSelectionDaysInNextAndPreviousMonths};a.pickWholeWeek&&F&&(E=!0),l.push(w(W)),7==++O&&(a.showWeekNumber&&l.unshift((C=I-r,x=t,j=e,S=void 0,S=new Date(j,0,1),'<td class="pika-week">'+Math.ceil(((new Date(j,x,C)-S)/864e5+S.getDay()+1)/7)+"</td>")),o.push(y(l,a.isRTL,a.pickWholeWeek,E)),l=[],O=0,E=!1)}return function(e,t,n){return'<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+n+'">'+function(e){var t,n=[];for(e.showWeekNumber&&n.push("<th></th>"),t=0;t<7;t++)n.push('<th scope="col"><abbr title="'+b(e,t)+'">'+b(e,t,!0)+"</abbr></th>");return"<thead><tr>"+(e.isRTL?n.reverse():n).join("")+"</tr></thead>"}(e)+("<tbody>"+t.join("")+"</tbody>")+"</table>"}(a,o,n)},isVisible:function(){return this._v},show:function(){var e,t,n;this.isVisible()||(this._v=!0,this.draw(),e=this.el,t="is-hidden",e.className=(n=(" "+e.className+" ").replace(" "+t+" "," ")).trim?n.trim():n.replace(/^\s+|\s+$/g,""),this._o.bound&&(s(a,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var e,t,n=this._v;!1!==n&&(this._o.bound&&r(a,"click",this._onClick),this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto",e=this.el,o(e,t="is-hidden")||(e.className=""===e.className?t:e.className+" "+t),this._v=!1,void 0!==n&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){this.hide(),r(this.el,"mousedown",this._onMouseDown,!0),r(this.el,"touchend",this._onMouseDown,!0),r(this.el,"change",this._onChange),r(a,"keydown",this._onKeyChange),this._o.field&&(r(this._o.field,"change",this._onInputChange),this._o.bound&&(r(this._o.trigger,"click",this._onInputClick),r(this._o.trigger,"focus",this._onInputFocus),r(this._o.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},_}(i)}()},79:function(e,t,n){"use strict";var a=n(0),i=n.n(a),s=n(3),r=n.n(s),o=n(5),l=n(7);t.a={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.container,e.form),n=e.issues,a=e.prefixId;this.prefixId=a||"issue_",this.form=t||this.getElement(".bulk-update"),this.$labelDropdown=this.form.find(".js-label-select"),this.issues=n||this.getElement(".issues-list .issue"),this.willUpdateLabels=!1,this.bindEvents()},bindEvents:function(){return this.form.off("submit").on("submit",this.onFormSubmit.bind(this))},onFormSubmit:function(e){return e.preventDefault(),this.submit()},submit:function(){var e=this;o.a[this.form.attr("method")](this.form.attr("action"),this.getFormDataAsObject()).then(function(){return window.location.reload()}).catch(function(){return e.onFormSubmitFailure()})},onFormSubmitFailure:function(){return this.form.find('[type="submit"]').enable(),new l.a("Issue update failed")},getSelectedIssues:function(){return this.issues.has(".selected_issue:checked")},getLabelsFromSelection:function(){var e=[];return this.getSelectedIssues().map(function(){var t=i()(this).data("labels");if(t)return t.map(function(t){if(-1===e.indexOf(t))return e.push(t)})}),e},getUnmarkedIndeterminedLabels:function(){var e=[],t=this.$labelDropdown.data("indeterminate");return this.getLabelsFromSelection().forEach(function(n){-1===t.indexOf(n)&&e.push(n)}),e},getFormDataAsObject:function(){var e={update:{state_event:this.form.find('input[name="update[state_event]"]').val(),assignee_id:this.form.find('input[name="update[assignee_id]"]').val(),assignee_ids:[this.form.find('input[name="update[assignee_ids][]"]').val()],milestone_id:this.form.find('input[name="update[milestone_id]"]').val(),issuable_ids:this.form.find('input[name="update[issuable_ids]"]').val(),subscription_event:this.form.find('input[name="update[subscription_event]"]').val(),add_label_ids:[],remove_label_ids:[]}};return this.willUpdateLabels&&(e.update.add_label_ids=this.$labelDropdown.data("marked"),e.update.remove_label_ids=this.$labelDropdown.data("unmarked")),e},setOriginalDropdownData:function(){var e=i()(".bulk-update .js-label-select");e.data("common",this.getOriginalCommonIds()),e.data("marked",this.getOriginalMarkedIds()),e.data("indeterminate",this.getOriginalIndeterminateIds())},getOriginalCommonIds:function(){var e=this,t=[];return this.getElement(".selected_issue:checked").each(function(n,a){t.push(e.getElement("#"+e.prefixId+a.dataset.id).data("labels"))}),r.a.intersection.apply(this,t)},getOriginalMarkedIds:function(){var e=this,t=[];return this.getElement(".selected_issue:checked").each(function(n,a){t.push(e.getElement("#"+e.prefixId+a.dataset.id).data("labels"))}),r.a.intersection.apply(this,t)},getOriginalIndeterminateIds:function(){var e=this,t=[],n=[],a=[];return this.getElement(".selected_issue:checked").each(function(i,s){(a=e.getElement("#"+e.prefixId+s.dataset.id).data("labels")).forEach(function(e){-1===t.indexOf(e)&&t.push(e)}),n.push(a)}),n.unshift(t),r.a.difference(t,r.a.intersection.apply(this,n))},getElement:function(e){return this.scopeEl=this.scopeEl||i()(".content"),this.scopeEl.find(e)}}},81:function(e,t,n){"use strict";var a=n(0),i=n.n(a),s=n(3),r=n.n(s),o=n(5),l=n(1),u=n(47),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function c(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.users=this.users.bind(this),this.user=this.user.bind(this),this.usersPath="/autocomplete/users.json",this.userPath="/autocomplete/users/:id.json",null!=e&&("object"===(void 0===e?"undefined":d(e))?this.currentUser=e:this.currentUser=JSON.parse(e));var s,c=a.handleClick;n=i()(t),t||(n=i()(".js-user-search")),n.each((s=this,function(e,t){var n,a,d,h,f,p,m,v,g,b,w,y,k,_,D,C,x,j,S,E={};d=i()(t),E.projectId=d.data("projectId"),E.groupId=d.data("groupId"),E.showCurrentUser=d.data("currentUser"),E.todoFilter=d.data("todoFilter"),E.todoStateFilter=d.data("todoStateFilter"),j=d.data("nullUser"),y=d.data("nullUserDefault"),S=d.data("showMenuAbove"),x=d.data("anyUser"),k=d.data("firstUser"),E.authorId=d.data("authorId"),w=d.data("defaultLabel"),_=d.data("issueUpdate"),f=d.closest(".selectbox"),n=f.closest(".block"),m=d.data("abilityName"),p=n.find(".value"),a=n.find(".sidebar-collapsed-user"),h=n.find(".block-loading").fadeOut(),C=y&&j?0:null,void 0===(D=d.data("selected"))&&(D=C);var I=function(){var e=d.closest(".selectbox").find("input[name='"+d.data("fieldName")+"'][value=0]");e&&e.remove();var t=document.createElement("input");t.type="hidden",t.name=d.data("fieldName");var n=d.data("currentUserInfo");n?(t.value=n.id,t.dataset.meta=r.a.escape(n.name)):s.currentUser&&(t.value=s.currentUser.id),f?d.parent().before(t):d.after(t)};n[0]&&n[0].addEventListener("assignYourself",I);var O=function(){return f.find('input[name="'+d.data("fieldName")+'"]')},M=function(){return O().map(function(e,t){return parseInt(t.value,10)}).get()},F=function(){var e=d.data("maxSelect");if(e){var t=M();if(t.length>e){var n=t[0];d.closest(".selectbox").find("input[name='"+d.data("fieldName")+"'][value="+n+"]").remove(),emitSidebarEvent("sidebar.removeAssignee",{id:n})}}},L=function(e,t){var n=M().filter(function(e){return 0!==e}),a=O().map(function(e,t){return{name:t.dataset.meta,value:parseInt(t.value,10)}}).filter(function(e){return 0!==e.id}).get(0);if(0===n.length)return"Unassigned";if(1===n.length)return a.name;if(t){var i=n.filter(function(t){return t!==e.id});return e.name+" + "+i.length+" more"}return a.name+" + "+(n.length-1)+" more"};return i()(".assign-to-me-link").on("click",function(e){if(e.preventDefault(),i()(e.currentTarget).hide(),d.data("multiSelect")){I(),F();var t=d.data("currentUserInfo");d.find(".dropdown-toggle-text").text(L(t)).removeClass("is-default")}else{var n=i()('input[name="'+d.data("fieldName")+'"]');n.val(gon.current_user_id),D=n.val(),d.find(".dropdown-toggle-text").text(gon.current_user_fullname).removeClass("is-default")}}),n.on("click",".js-assign-yourself",function(e){return e.preventDefault(),v(s.currentUser.id)}),v=function(e){var t;return(t={})[m]={},t[m].assignee_id=null!=e?e:null,h.removeClass("hidden").fadeIn(),d.trigger("loading.gl.dropdown"),o.a.put(_,t).then(function(e){var t,n,i=e.data;return d.trigger("loaded.gl.dropdown"),h.fadeOut(),i.assignee?(t={name:i.assignee.name,username:i.assignee.username,avatar:i.assignee.avatar_url},n=r.a.escape(t.name)):(t={name:"Unassigned",username:"",avatar:""},n=Object(l.a)("Assignee")),p.html(g(t)),a.attr("title",n).tooltip("_fixTitle"),a.html(b(t))})},b=r.a.template('<% if( avatar ) { %> <a class="author-link" href="/<%- username %>"> <img width="24" class="avatar avatar-inline s24" alt="" src="<%- avatar %>"> </a> <% } else { %> <i class="fa fa-user"></i> <% } %>'),g=r.a.template('<% if (username) { %> <a class="author-link bold" href="/<%- username %>"> <% if( avatar ) { %> <img width="32" class="avatar avatar-inline s32" alt="" src="<%- avatar %>"> <% } %> <span class="author"><%- name %></span> <span class="username"> @<%- username %> </span> </a> <% } else { %> <span class="no-value assign-yourself"> No assignee - <a href="#" class="js-assign-yourself"> assign yourself </a> </span> <% } %>'),d.glDropdown({showMenuAbove:S,data:function(e,t){return s.users(e,E,function(n){(this.instance||this.options.instance).options.processData(e,n,t)}.bind(this))},processData:function(e,t,n){var a=t;if(d.hasClass("js-multiselect")&&0===e.length){var i=O(),s=r.a.uniq(i,!1,function(e){return e.value}).filter(function(e){var t=parseInt(e.value,10);return!a.find(function(e){return e.id===t})&&0!==t}).map(function(e){var t=parseInt(e.value,10),n=e.dataset,a=n.avatarUrl,i=n.avatar_url,s=n.name,r=n.username;return{avatar_url:a||i,id:t,name:s,username:r}});a=t.concat(s)}var o=void 0,l=void 0,u=void 0,c=void 0,h=void 0,f=void 0;if(0===e.length){if(f=0,k)for(l=0,u=a.length;l<u;l+=1)if((h=a[l]).username===k){a.splice(l,1),a.unshift(h);break}if(j&&(f+=1,a.unshift({beforeDivider:!0,name:"Unassigned",id:0})),x&&(f+=1,!0===(c=x)&&(c="Any User"),o={beforeDivider:!0,name:c,id:null},a.unshift(o)),f&&a.splice(f,0,"divider"),d.hasClass("js-multiselect")){var p=M().filter(function(e){return 0!==e});if(p.length>0){d.data("dropdownHeader")&&(f+=1,a.splice(f,0,{header:d.data("dropdownHeader")}));var m=a.filter(function(e){return-1!==p.indexOf(e.id)}).sort(function(e,t){return e.name>t.name});a=a.filter(function(e){return-1===p.indexOf(e.id)}),m.forEach(function(e){f+=1,a.splice(f,0,e)}),a.splice(f+1,0,"divider")}}}n(a),S&&d.data("glDropdown").positionMenuAbove()},filterable:!0,filterRemote:!0,search:{fields:["name","username"]},selectable:!0,fieldName:d.data("fieldName"),toggleLabel:function(e,t,n){var a=n.filterInput.val();if(this.multiSelect&&""===a){var s=n.filteredFullData(),r=n.parseData.bind(n);this.processData(a,s,r)}return this.multiSelect?L(e,i()(t).hasClass("is-active")):e&&"id"in e&&i()(t).hasClass("is-active")?(d.find(".dropdown-toggle-text").removeClass("is-default"),e.text?e.text:e.name):(d.find(".dropdown-toggle-text").addClass("is-default"),w)},defaultLabel:w,hidden:function(e){d.hasClass("js-multiselect")&&emitSidebarEvent("sidebar.saveAssignees"),d.data("alwaysShowSelectbox")||(f.hide(),n=f.closest(".block"),(p=n.find(".value")).css("display",""))},multiSelect:d.hasClass("js-multiselect"),inputMeta:d.data("inputMeta"),clicked:function(e){var t,n,a,s,r=e.$el,o=e.e,l=e.isMarking,h=e.selectedObj;if(d.hasClass("js-multiselect")){var f=r.hasClass("is-active"),p=d.closest(".selectbox").find("input[name='"+d.data("fieldName")+"'][value!=0]");if(F(),h.beforeDivider&&"unassigned"===h.name.toLowerCase())p.each(function(e,t){parseInt(t.value,10),t.remove()}),emitSidebarEvent("sidebar.removeAllAssignees");else if(f){emitSidebarEvent("sidebar.addAssignee",h);var m=d.closest(".selectbox").find("input[name='"+d.data("fieldName")+"'][value=0]");m&&m.remove()}else 0===p.length&&this.addInput(d.data("fieldName"),0,{}),emitSidebarEvent("sidebar.removeAssignee",h);M().find(function(e){return e===gon.current_user_id})?i()(".assign-to-me-link").hide():i()(".assign-to-me-link").show()}if(t="projects:issues:index"===(a=i()("body").attr("data-page")),n=a==a&&"projects:merge_requests:index"===a,d.hasClass("js-filter-bulk-update")||d.hasClass("js-issuable-form-dropdown")){o.preventDefault();var g=h.id!==D;(D=g?h.id:C)===gon.current_user_id?i()(".assign-to-me-link").hide():i()(".assign-to-me-link").show()}else{if(r.closest(".add-issues-modal").length)u.a.store.filter[d.data("fieldName")]=h.id;else if(c)o.preventDefault(),c(h,l);else{if(d.hasClass("js-filter-submit")&&(t||n))return Issuable.filterResults(d.closest("form"));if(d.hasClass("js-filter-submit"))return d.closest("form").submit();if(!d.hasClass("js-multiselect"))return s=d.closest(".selectbox").find("input[name='"+d.data("fieldName")+"']").val(),v(s)}d.data("maxSelect")&&M().length===d.data("maxSelect")&&d.dropdown("toggle")}},id:function(e){return e.id},opened:function(e){var t=i()(e.currentTarget),n=M();function a(e){t.find('li[data-user-id="'+e+'"] .dropdown-menu-user-link').addClass("is-active")}d.hasClass("js-issue-board-sidebar")&&0===n.length&&this.addInput(d.data("fieldName"),0,{}),t.find(".is-active").removeClass("is-active"),n.length>0?M().forEach(function(e){return a(e)}):d.hasClass("js-issue-board-sidebar")?a(0):a(D)},updateLabel:d.data("dropdownTitle"),renderRow:function(e){var t,n,a;a=e.username?"@"+e.username:"",t=e.avatar_url?e.avatar_url:gon.default_avatar_url;var i=!1;if(this.multiSelect){i=M().find(function(t){return e.id===t});var s=this.fieldName;d.closest(".selectbox").find("input[name='"+s+"'][value='"+e.id+"']").length&&(i=!0)}else i=e.id===D;return n="",null!=e.beforeDivider?r.a.escape(e.name):n="<img src='"+t+"' class='avatar avatar-inline' width='32' />","\n            <li data-user-id="+e.id+">\n              <a href='#' class='dropdown-menu-user-link "+(!0===i?"is-active":"")+"'>\n                "+n+"\n                <strong class='dropdown-menu-user-full-name'>\n                  "+r.a.escape(e.name)+"\n                </strong>\n                "+(a?"<span class='dropdown-menu-user-username'>"+a+"</span>":"")+"\n              </a>\n            </li>\n          "}})})),i()(".ajax-users-select").each(function(e){return function(t,n){var a,s,r,o,l={};return l.skipLdap=i()(n).hasClass("skip_ldap"),l.projectId=i()(n).data("projectId"),l.groupId=i()(n).data("groupId"),l.showCurrentUser=i()(n).data("currentUser"),l.authorId=i()(n).data("authorId"),l.skipUsers=i()(n).data("skipUsers"),o=i()(n).data("nullUser"),s=i()(n).data("anyUser"),r=i()(n).data("emailUser"),a=i()(n).data("firstUser"),i()(n).select2({placeholder:"Search for a user",multiple:i()(n).hasClass("multiselect"),minimumInputLength:0,query:function(t){return e.users(t.term,l,function(e){var n,i,l,u,d,c,h,f,p;if(i={results:e},0===t.term.length){if(a)for(u=0,d=(p=i.results).length;u<d;u+=1)if((f=p[u]).username===a){i.results.splice(u,1),i.results.unshift(f);break}o&&(h={name:"Unassigned",id:0},i.results.unshift(h)),s&&(!0===(c=s)&&(c="Any User"),n={name:c,id:null},i.results.unshift(n))}if(r&&0===i.results.length&&t.term.match(/^[^@]+@[^@]+$/)){var m=t.term.trim();l={name:'Invite "'+t.term+'" by email',username:m,id:m,invite:!0},i.results.unshift(l)}return t.callback(i)})},initSelection:function(){var t;return t=1<=arguments.length?[].slice.call(arguments,0):[],e.initSelection.apply(e,t)},formatResult:function(){var t;return t=1<=arguments.length?[].slice.call(arguments,0):[],e.formatResult.apply(e,t)},formatSelection:function(){var t;return t=1<=arguments.length?[].slice.call(arguments,0):[],e.formatSelection.apply(e,t)},dropdownCssClass:"ajax-users-dropdown",escapeMarkup:function(e){return e}})}}(this))}window.emitSidebarEvent=window.emitSidebarEvent||i.a.noop,c.prototype.initSelection=function(e,t){var n;return"0"===(n=i()(e).val())?t({name:"Unassigned"}):""!==n?this.user(n,t):void 0},c.prototype.formatResult=function(e){var t;return t=e.avatar_url?e.avatar_url:gon.default_avatar_url,"<div class='user-result "+(e.username?void 0:"no-username")+"'> <div class='user-image'><img class='avatar avatar-inline s32' src='"+t+"'></div> <div class='user-name dropdown-menu-user-full-name'>"+r.a.escape(e.name)+"</div> <div class='user-username dropdown-menu-user-username'>"+(e.invite?"":"@"+r.a.escape(e.username))+"</div> </div>"},c.prototype.formatSelection=function(e){return r.a.escape(e.name)},c.prototype.user=function(e,t){return!!/^\d+$/.test(e)&&(n=(n=this.buildUrl(this.userPath)).replace(":id",e),o.a.get(n).then(function(e){var n=e.data;t(n)}));var n},c.prototype.users=function(e,t,n){var a=this.buildUrl(this.usersPath),i={search:e,active:!0,project_id:t.projectId||null,group_id:t.groupId||null,skip_ldap:t.skipLdap||null,todo_filter:t.todoFilter||null,todo_state_filter:t.todoStateFilter||null,current_user:t.showCurrentUser||null,author_id:t.authorId||null,skip_users:t.skipUsers||null};return o.a.get(a,{params:i}).then(function(e){var t=e.data;n(t)})},c.prototype.buildUrl=function(e){return null!=gon.relative_url_root&&(e=gon.relative_url_root.replace(/\/$/,"")+e),e},t.a=c},970:function(e,t,n){"use strict";n.r(t);var a=n(456);document.addEventListener("DOMContentLoaded",a.a)},971:function(e,t,n){n(31),n(57),e.exports=n(970)},98:function(e,t,n){"use strict";var a=n(76),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var s=function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.field=t,this.isLocalStorageAvailable=a.a.isLocalStorageAccessSafe(),null!=n.join&&(n=n.join("/")),this.key="autosave/"+n,this.field.data("autosave",this),this.restore(),this.field.on("input",function(){return i.save()})}return i(e,[{key:"restore",value:function(){if(this.isLocalStorageAvailable&&this.field.length){var e=window.localStorage.getItem(this.key);(null!=e?e.length:void 0)>0&&this.field.val(e),this.field.trigger("input");var t=new Event("change",{bubbles:!0,cancelable:!1}),n=this.field.get(0);n&&n.dispatchEvent(t)}}},{key:"save",value:function(){if(this.field.length){var e=this.field.val();return this.isLocalStorageAvailable&&(null!=e?e.length:void 0)>0?window.localStorage.setItem(this.key,e):this.reset()}}},{key:"reset",value:function(){if(this.isLocalStorageAvailable)return window.localStorage.removeItem(this.key)}},{key:"dispose",value:function(){this.field.off("input")}}]),e}();t.a=s},99:function(e,t){Mousetrap=function(e){var t=e,n=t.stopCallback,a=!0;return t.stopCallback=function(e,t,i){return!a||n(e,t,i)},t.pause=function(){a=!1},t.unpause=function(){a=!0},t}(Mousetrap)}},[[971,0,1,2,3]]]);
//# sourceMappingURL=pages.projects.issues.new.a712c240.chunk.js.map