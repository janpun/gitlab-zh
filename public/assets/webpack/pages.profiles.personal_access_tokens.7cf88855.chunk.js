(this.webpackJsonp=this.webpackJsonp||[]).push([[179],{103:function(e,t,a){"use strict";var i=a(0),n=a.n(i),s=a(73),d=a.n(s),o=a(111),l=a.n(o),r=a(1),u=a(5),c=a(38),h=a(36),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}();function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.$dropdown,i=t.$loading;f(this,e);var s=a.closest(".dropdown"),d=a.closest(".block");this.$loading=i,this.$dropdown=a,this.$dropdownParent=s,this.$datePicker=s.find(".js-due-date-calendar"),this.$block=d,this.$sidebarCollapsedValue=d.find(".sidebar-collapsed-icon"),this.$selectbox=a.closest(".selectbox"),this.$value=d.find(".value"),this.$valueContent=d.find(".value-content"),this.$sidebarValue=n()(".js-due-date-sidebar-value",d),this.fieldName=a.data("fieldName"),this.abilityName=a.data("abilityName"),this.issueUpdateURL=a.data("issueUpdate"),this.rawSelectedDate=null,this.displayedDate=null,this.datePayload=null,this.initGlDropdown(),this.initRemoveDueDate(),this.initDatePicker()}return p(e,[{key:"initGlDropdown",value:function(){var e=this;this.$dropdown.glDropdown({opened:function(){e.$datePicker.data("pikaday").show()},hidden:function(){e.$selectbox.hide(),e.$value.css("display","")}})}},{key:"initDatePicker",value:function(){var e=this,t=n()("input[name='"+this.fieldName+"']"),a=new d.a({field:t.get(0),theme:"gitlab-theme",format:"yyyy-mm-dd",parse:function(e){return Object(h.a)(e)},toString:function(e){return Object(h.b)(e)},onSelect:function(i){t.val(a.toString(i)),e.$dropdown.hasClass("js-issue-boards-due-date")?(gl.issueBoards.BoardsStore.detail.issue.dueDate=t.val(),e.updateIssueBoardIssue()):e.saveDueDate(!0)}});a.setDate(Object(h.a)(t.val())),this.$datePicker.append(a.el),this.$datePicker.data("pikaday",a)}},{key:"initRemoveDueDate",value:function(){var e=this;this.$block.on("click",".js-remove-due-date",function(t){var a=e.$datePicker.data("pikaday");t.preventDefault(),a.setDate(null),e.$dropdown.hasClass("js-issue-boards-due-date")?(gl.issueBoards.BoardsStore.detail.issue.dueDate="",e.updateIssueBoardIssue()):(n()("input[name='"+e.fieldName+"']").val(""),e.saveDueDate(!1))})}},{key:"saveDueDate",value:function(e){this.parseSelectedDate(),this.prepSelectedDate(),this.submitSelectedDate(e)}},{key:"parseSelectedDate",value:function(){if(this.rawSelectedDate=n()("input[name='"+this.fieldName+"']").val(),this.rawSelectedDate.length){var e=this.rawSelectedDate.split("-").map(function(e){return parseInt(e,10)}),t=new Date(e[0],e[1]-1,e[2]);this.displayedDate=l()(t,"mmm d, yyyy")}else this.displayedDate="No due date"}},{key:"prepSelectedDate",value:function(){var e={};e[this.abilityName]={},e[this.abilityName].due_date=this.rawSelectedDate,this.datePayload=e}},{key:"updateIssueBoardIssue",value:function(){var e=this;this.$loading.fadeIn(),this.$dropdown.trigger("loading.gl.dropdown"),this.$selectbox.hide(),this.$value.css("display","");var t=function(){e.$loading.fadeOut()};gl.issueBoards.BoardsStore.detail.issue.update(this.$dropdown.attr("data-issue-update")).then(t).catch(t)}},{key:"submitSelectedDate",value:function(e){var t=this,a=this.datePayload[this.abilityName].due_date,i="No due date"!==this.displayedDate,s=i?"bold":"no-value";return this.$loading.removeClass("hidden").fadeIn(),e&&(this.$dropdown.trigger("loading.gl.dropdown"),this.$selectbox.hide()),this.$value.css("display",""),this.$valueContent.html("<span class='"+s+"'>"+this.displayedDate+"</span>"),this.$sidebarValue.html(this.displayedDate),n()(".js-remove-due-date-holder").toggleClass("hidden",a.length),u.a.put(this.issueUpdateURL,this.datePayload).then(function(){var n=i?Object(r.a)("Due date")+"<br />"+a+" ("+Object(c.f)(a)+")":Object(r.a)("Due date");return e&&(t.$dropdown.trigger("loaded.gl.dropdown"),t.$dropdown.dropdown("toggle")),t.$sidebarCollapsedValue.attr("data-original-title",n),t.$loading.fadeOut()})}}]),e}(),b=function(){function e(){f(this,e),this.initMilestoneDatePicker(),this.initIssuableSelect()}return p(e,[{key:"initMilestoneDatePicker",value:function(){n()(".datepicker").each(function(){var e=n()(this),t=e.val(),a=new d.a({field:e.get(0),theme:"gitlab-theme animate-picker",format:"yyyy-mm-dd",container:e.parent().get(0),parse:function(e){return Object(h.a)(e)},toString:function(e){return Object(h.b)(e)},onSelect:function(t){e.val(a.toString(t))}});a.setDate(Object(h.a)(t)),e.data("pikaday",a)}),n()(".js-clear-due-date,.js-clear-start-date").on("click",function(e){e.preventDefault(),n()(e.target).siblings(".datepicker").data("pikaday").setDate(null)})}},{key:"initIssuableSelect",value:function(){var e=n()(".js-issuable-update .due_date").find(".block-loading").hide();n()(".js-due-date-select").each(function(t,a){var i=n()(a);new v({$dropdown:i,$loading:e})})}}]),e}();t.a=b},1064:function(e,t,a){"use strict";a.r(t);var i=a(103);document.addEventListener("DOMContentLoaded",function(){return new i.a})},1065:function(e,t,a){a(31),a(334),e.exports=a(1064)}},[[1065,0,1,4,5]]]);
//# sourceMappingURL=pages.profiles.personal_access_tokens.7cf88855.chunk.js.map