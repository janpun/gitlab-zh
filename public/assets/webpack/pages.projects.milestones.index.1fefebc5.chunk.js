(this.webpackJsonp=this.webpackJsonp||[]).push([[126],{134:function(e,t,o){"use strict";function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var s={name:"DeprecatedModal",props:{id:{type:String,required:!1},title:{type:String,required:!1},text:{type:String,required:!1},hideFooter:{type:Boolean,required:!1,default:!1},kind:{type:String,required:!1,default:"primary"},modalDialogClass:{type:String,required:!1,default:""},closeKind:{type:String,required:!1,default:"default"},closeButtonLabel:{type:String,required:!1,default:"Cancel"},primaryButtonLabel:{type:String,required:!1,default:""},secondaryButtonLabel:{type:String,required:!1,default:""},submitDisabled:{type:Boolean,required:!1,default:!1}},computed:{btnKindClass:function(){return n({},"btn-"+this.kind,!0)},btnCancelKindClass:function(){return n({},"btn-"+this.closeKind,!0)}},methods:{emitCancel:function(e){this.$emit("cancel",e)},emitSubmit:function(e){this.$emit("submit",e)}}},i=o(2),l=Object(i.a)(s,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"modal-open"},[o("div",{staticClass:"modal",class:e.id?"":"d-block",attrs:{id:e.id,role:"dialog",tabindex:"-1"}},[o("div",{staticClass:"modal-dialog",class:e.modalDialogClass,attrs:{role:"document"}},[o("div",{staticClass:"modal-content"},[o("div",{staticClass:"modal-header"},[e._t("header",[o("h4",{staticClass:"modal-title float-left"},[e._v("\n              "+e._s(e.title)+"\n            ")]),e._v(" "),o("button",{staticClass:"close float-right",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(t){e.emitCancel(t)}}},[o("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])])],2),e._v(" "),o("div",{staticClass:"modal-body"},[e._t("body",[o("p",[e._v(e._s(e.text))])],{text:e.text})],2),e._v(" "),e.hideFooter?e._e():o("div",{staticClass:"modal-footer"},[o("button",{staticClass:"btn",class:e.btnCancelKindClass,attrs:{type:"button","data-dismiss":"modal"},on:{click:function(t){e.emitCancel(t)}}},[e._v("\n            "+e._s(e.closeButtonLabel)+"\n          ")]),e._v(" "),e.secondaryButtonLabel?e._t("secondary-button",[e.secondaryButtonLabel?o("button",{staticClass:"btn",attrs:{type:"button","data-dismiss":"modal"}},[e._v("\n              "+e._s(e.secondaryButtonLabel)+"\n            ")]):e._e()]):e._e(),e._v(" "),e.primaryButtonLabel?o("button",{staticClass:"btn js-primary-button",class:e.btnKindClass,attrs:{disabled:e.submitDisabled,type:"button","data-dismiss":"modal"},on:{click:function(t){e.emitSubmit(t)}}},[e._v("\n            "+e._s(e.primaryButtonLabel)+"\n          ")]):e._e()],2)])])]),e._v(" "),e.id?e._e():o("div",{staticClass:"modal-backdrop fade show"})])},[],!1,null,null,null);t.a=l.exports},364:function(e,t,o){"use strict";o.r(t);var n=o(8),s=o(72),i=o(5),l=o(7),r=o(134),a=o(1),d=o(21),u=new n.default,m={components:{DeprecatedModal:r.a},props:{issueCount:{type:Number,required:!0},mergeRequestCount:{type:Number,required:!0},milestoneId:{type:Number,required:!0},milestoneTitle:{type:String,required:!0},milestoneUrl:{type:String,required:!0}},computed:{text:function(){var e=Object(a.f)("<strong>%{milestoneTitle}</strong>",{milestoneTitle:this.milestoneTitle});return 0===this.issueCount&&0===this.mergeRequestCount?Object(a.f)(Object(a.e)("Milestones|\nYou’re about to permanently delete the milestone %{milestoneTitle} from this project.\n%{milestoneTitle} is not currently used in any issues or merge requests."),{milestoneTitle:e},!1):Object(a.f)(Object(a.e)("Milestones|\nYou’re about to permanently delete the milestone %{milestoneTitle} from this project and remove it from %{issuesWithCount} and %{mergeRequestsWithCount}.\nOnce deleted, it cannot be undone or recovered."),{milestoneTitle:e,issuesWithCount:Object(a.d)("%d issue","%d issues",this.issueCount),mergeRequestsWithCount:Object(a.d)("%d merge request","%d merge requests",this.mergeRequestCount)},!1)},title:function(){return Object(a.f)(Object(a.e)("Milestones|Delete milestone %{milestoneTitle}?"),{milestoneTitle:this.milestoneTitle})}},methods:{onSubmit:function(){var e=this;return u.$emit("deleteMilestoneModal.requestStarted",this.milestoneUrl),i.a.delete(this.milestoneUrl).then(function(t){u.$emit("deleteMilestoneModal.requestFinished",{milestoneUrl:e.milestoneUrl,successful:!0}),Object(d.d)(t.request.responseURL)}).catch(function(t){throw u.$emit("deleteMilestoneModal.requestFinished",{milestoneUrl:e.milestoneUrl,successful:!1}),t.response&&404===t.response.status?Object(l.a)(Object(a.f)(Object(a.e)("Milestones|Milestone %{milestoneTitle} was not found"),{milestoneTitle:e.milestoneTitle})):Object(l.a)(Object(a.f)(Object(a.e)("Milestones|Failed to delete milestone %{milestoneTitle}"),{milestoneTitle:e.milestoneTitle})),t})}}},c=o(2),p=Object(c.a)(m,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("deprecated-modal",{attrs:{id:"delete-milestone-modal",title:e.title,text:e.text,"primary-button-label":e.s__("Milestones|Delete milestone"),kind:"danger"},on:{submit:e.onSubmit},scopedSlots:e._u([{key:"body",fn:function(t){return[o("p",{domProps:{innerHTML:e._s(t.text)}})]}}])})},[],!1,null,null,null).exports,f={components:{GlModal:o(95).a},props:{milestoneTitle:{type:String,required:!0},url:{type:String,required:!0},groupName:{type:String,required:!0}},computed:{title:function(){return Object(a.f)(Object(a.e)("Milestones|Promote %{milestoneTitle} to group milestone?"),{milestoneTitle:this.milestoneTitle})},text:function(){return Object(a.f)(Object(a.e)("Milestones|Promoting %{milestoneTitle} will make it available for all projects inside %{groupName}.\n      Existing project milestones with the same title will be merged.\n      This action cannot be reversed."),{milestoneTitle:this.milestoneTitle,groupName:this.groupName})}},methods:{onSubmit:function(){var e=this;return u.$emit("promoteMilestoneModal.requestStarted",this.url),i.a.post(this.url,{params:{format:"json"}}).then(function(t){u.$emit("promoteMilestoneModal.requestFinished",{milestoneUrl:e.url,successful:!0}),Object(d.g)(t.data.url)}).catch(function(t){u.$emit("promoteMilestoneModal.requestFinished",{milestoneUrl:e.url,successful:!1}),Object(l.a)(t)})}}},b=Object(c.a)(f,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("gl-modal",{attrs:{id:"promote-milestone-modal","footer-primary-button-text":e.s__("Milestones|Promote Milestone"),"footer-primary-button-variant":"warning"},on:{submit:e.onSubmit}},[o("template",{slot:"title"},[e._v("\n    "+e._s(e.title)+"\n  ")]),e._v("\n  "+e._s(e.text)+"\n")],2)},[],!1,null,null,null).exports;n.default.use(s.a);t.default=function(){!function(){n.default.use(s.a);var e=function(e){var t=e.milestoneUrl,o=e.successful,n=document.querySelector('.js-delete-milestone-button[data-milestone-url="'+t+'"]');o||n.removeAttribute("disabled"),n.querySelector(".js-loading-icon").classList.add("hidden")},t=function(t){var o=document.querySelector('.js-delete-milestone-button[data-milestone-url="'+t+'"]');o.setAttribute("disabled",""),o.querySelector(".js-loading-icon").classList.remove("hidden"),u.$once("deleteMilestoneModal.requestFinished",e)},o=function(e){var o=e.currentTarget,n={milestoneId:parseInt(o.dataset.milestoneId,10),milestoneTitle:o.dataset.milestoneTitle,milestoneUrl:o.dataset.milestoneUrl,issueCount:parseInt(o.dataset.milestoneIssueCount,10),mergeRequestCount:parseInt(o.dataset.milestoneMergeRequestCount,10)};u.$once("deleteMilestoneModal.requestStarted",t),u.$emit("deleteMilestoneModal.props",n)},i=document.querySelectorAll(".js-delete-milestone-button");i.forEach(function(e){e.addEventListener("click",o)}),u.$once("deleteMilestoneModal.mounted",function(){i.forEach(function(e){e.removeAttribute("disabled")})}),new n.default({el:"#delete-milestone-modal",components:{deleteMilestoneModal:p},data:function(){return{modalProps:{milestoneId:-1,milestoneTitle:"",milestoneUrl:"",issueCount:-1,mergeRequestCount:-1}}},mounted:function(){u.$on("deleteMilestoneModal.props",this.setModalProps),u.$emit("deleteMilestoneModal.mounted")},beforeDestroy:function(){u.$off("deleteMilestoneModal.props",this.setModalProps)},methods:{setModalProps:function(e){this.modalProps=e}},render:function(e){return e(p,{props:this.modalProps})}})}(),function(){var e=function(e){var t=e.milestoneUrl,o=e.successful,n=document.querySelector('.js-promote-project-milestone-button[data-url="'+t+'"]');o||n.removeAttribute("disabled")},t=function(t){document.querySelector('.js-promote-project-milestone-button[data-url="'+t+'"]').setAttribute("disabled",""),u.$once("promoteMilestoneModal.requestFinished",e)},o=function(e){var o=e.currentTarget,n={milestoneTitle:o.dataset.milestoneTitle,url:o.dataset.url,groupName:o.dataset.groupName};u.$once("promoteMilestoneModal.requestStarted",t),u.$emit("promoteMilestoneModal.props",n)},s=document.querySelectorAll(".js-promote-project-milestone-button");s.forEach(function(e){e.addEventListener("click",o)}),u.$once("promoteMilestoneModal.mounted",function(){s.forEach(function(e){e.removeAttribute("disabled")})});var i=document.getElementById("promote-milestone-modal"),l=void 0;i&&(l=new n.default({el:i,components:{PromoteMilestoneModal:b},data:function(){return{modalProps:{milestoneTitle:"",groupName:"",url:""}}},mounted:function(){u.$on("promoteMilestoneModal.props",this.setModalProps),u.$emit("promoteMilestoneModal.mounted")},beforeDestroy:function(){u.$off("promoteMilestoneModal.props",this.setModalProps)},methods:{setModalProps:function(e){this.modalProps=e}},render:function(e){return e("promote-milestone-modal",{props:this.modalProps})}}))}()}},949:function(e,t,o){"use strict";o.r(t);var n=o(364);document.addEventListener("DOMContentLoaded",n.default)},95:function(e,t,o){"use strict";var n=o(0),s=o.n(n),i=["danger","primary","success","warning"],l=["sm","md","lg","xl"],r={name:"GlModal",props:{id:{type:String,required:!1,default:null},modalSize:{type:String,required:!1,default:"md",validator:function(e){return l.includes(e)}},headerTitleText:{type:String,required:!1,default:""},footerPrimaryButtonVariant:{type:String,required:!1,default:"primary",validator:function(e){return i.includes(e)}},footerPrimaryButtonText:{type:String,required:!1,default:""}},computed:{modalSizeClass:function(){return"md"===this.modalSize?"":"modal-"+this.modalSize}},mounted:function(){s()(this.$el).on("shown.bs.modal",this.opened).on("hidden.bs.modal",this.closed)},beforeDestroy:function(){s()(this.$el).off("shown.bs.modal",this.opened).off("hidden.bs.modal",this.closed)},methods:{emitCancel:function(e){this.$emit("cancel",e)},emitSubmit:function(e){this.$emit("submit",e)},opened:function(){this.$emit("open")},closed:function(){this.$emit("closed")}}},a=o(2),d=Object(a.a)(r,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"modal fade",attrs:{id:e.id,tabindex:"-1",role:"dialog"}},[o("div",{staticClass:"modal-dialog",class:e.modalSizeClass,attrs:{role:"document"}},[o("div",{staticClass:"modal-content"},[o("div",{staticClass:"modal-header"},[e._t("header",[o("h4",{staticClass:"modal-title"},[e._t("title",[e._v("\n              "+e._s(e.headerTitleText)+"\n            ")])],2),e._v(" "),o("button",{staticClass:"close js-modal-close-action",attrs:{"aria-label":e.s__("Modal|Close"),type:"button","data-dismiss":"modal"},on:{click:function(t){e.emitCancel(t)}}},[o("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])])],2),e._v(" "),o("div",{staticClass:"modal-body"},[e._t("default")],2),e._v(" "),o("div",{staticClass:"modal-footer"},[e._t("footer",[o("button",{staticClass:"btn js-modal-cancel-action",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(t){e.emitCancel(t)}}},[e._v("\n            "+e._s(e.s__("Modal|Cancel"))+"\n          ")]),e._v(" "),o("button",{staticClass:"btn js-modal-primary-action",class:"btn-"+e.footerPrimaryButtonVariant,attrs:{type:"button","data-dismiss":"modal"},on:{click:function(t){e.emitSubmit(t)}}},[e._v("\n            "+e._s(e.footerPrimaryButtonText)+"\n          ")])])],2)])])])},[],!1,null,null,null);t.a=d.exports},950:function(e,t,o){o(31),o(57),e.exports=o(949)}},[[950,0,1,2]]]);
//# sourceMappingURL=pages.projects.milestones.index.1fefebc5.chunk.js.map