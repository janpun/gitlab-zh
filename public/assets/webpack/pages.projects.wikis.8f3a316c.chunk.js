(this.webpackJsonp=this.webpackJsonp||[]).push([[95],{65:function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(50),o=n.n(r),s=n(53),l=n(24),d=n.n(l),u=n(3),c=n.n(u),f=(n(157),n(66)),p=n(5);function h(e){var t=e.find(".button-attach-file"),n=e.find(".attaching-file-message"),i=e.find(".button-cancel-uploading-files"),r=e.find(".retry-uploading-link"),o=e.find(".uploading-progress"),s=e.find(".uploading-error-container"),l=e.find(".uploading-error-message"),u=e.find(".uploading-progress-container"),h=window.uploads_path||null,m=gon.max_file_size||10,v=e.find(".js-gfm-input"),g=void 0,b=void 0,y=void 0,k=void 0,w=void 0,C=void 0,x=void 0;v.wrap('<div class="div-dropzone"></div>'),v.on("paste",function(e){return g(e)});var _=v.closest(".md-area");e.setupMarkdownPreview();var z=e.find(".div-dropzone");if(z.parent().addClass("div-dropzone-wrapper"),z.append('<div class="div-dropzone-hover"></div>'),z.find(".div-dropzone-hover").append('<i class="fa fa-paperclip div-dropzone-icon"></i>'),h){var S=z.dropzone({url:h,dictDefaultMessage:"",clickable:!0,paramName:"file",maxFilesize:m,uploadMultiple:!1,headers:f.a.headers,previewContainer:!1,processing:function(){return a()(".div-dropzone-alert").alert("close")},dragover:function(){_.addClass("is-dropzone-hover"),e.find(".div-dropzone-hover").css("opacity",.7)},dragleave:function(){_.removeClass("is-dropzone-hover"),e.find(".div-dropzone-hover").css("opacity",0)},drop:function(){_.removeClass("is-dropzone-hover"),e.find(".div-dropzone-hover").css("opacity",0),v.focus()},success:function(e,n){var i=this.getQueuedFiles().length+this.getUploadingFiles().length,a=i>=1;b(n.link.markdown,a),i||t.removeClass("hide"),y(n.link.url)},error:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Attaching the file failed.",a=arguments[2],r=a?a.responseText:n;s.removeClass("hide"),l.html(r),t.addClass("hide"),i.addClass("hide")},totaluploadprogress:function(e){k(this.files,n),o.text(Math.round(e)+"%")},sending:function(){t.addClass("hide"),s.addClass("hide"),u.removeClass("hide"),i.removeClass("hide")},removedfile:function(){t.removeClass("hide"),i.addClass("hide"),u.addClass("hide"),s.addClass("hide")},queuecomplete:function(){a()(".dz-preview").remove(),a()(".markdown-area").trigger("input"),u.addClass("hide"),i.addClass("hide")}}),j=a()(S[0]).children("textarea");i.on("click",function(e){e.preventDefault(),e.stopPropagation(),d.a.forElement(z.get(0)).removeAllFiles(!0)}),r.on("click",function(e){var t=d.a.forElement(e.target.closest(".js-main-target-form").querySelector(".div-dropzone")),n=t.files;e.preventDefault(),t.removeAllFiles(!0),n.map(function(e){var n=e;return n.status===d.a.ERROR&&(n.status=void 0,n.accepted=void 0),t.addFile(n)})}),g=function(e){var t=e.originalEvent;if(t.clipboardData&&t.clipboardData.items){var n=w(t);if(n){e.preventDefault();var i=C(t)||"image.png";return b("{{"+i+"}}"),x(n.getAsFile(),i)}}},w=function(e){for(var t=0;t<e.clipboardData.items.length;){var n=e.clipboardData.items[t];if(-1!==n.type.indexOf("image"))return n;t+=1}return!1},b=function(e,t){var n=e;t&&(n+="\n\n");var i=j.get(0),r=i.selectionStart,o=i.selectionEnd,s=a()(j).val().length,l=a()(j).val().substring(0,r),d=a()(j).val().substring(o,s);return a()(j).val(l+n+d),i.setSelectionRange(r+n.length,o+n.length),i.style.height=i.scrollHeight+"px",v.get(0).dispatchEvent(new Event("input")),v.trigger("input")},y=function(t){a()(e).append('<input type="hidden" name="files[]" value="'+c.a.escape(t)+'">')},C=function(e){var t=void 0;return window.clipboardData&&window.clipboardData.getData?t=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData&&(t=e.clipboardData.getData("text/plain")),(t=t.split("\r"))[0]};var E=function(){return u.addClass("hide")};x=function(t,n){var i=new FormData;i.append("file",t,n),u.removeClass("hide"),e.find(".div-dropzone-alert").alert("close"),p.a.post(h,i).then(function(e){var t=e.data.link.markdown;!function(e,t){var n=a()(j);n.val(function(n,i){return i.replace("{{"+e+"}}",t)}),n.trigger("change")}(n,t),E()}).catch(function(e){var t;t=e.response.data.message,s.removeClass("hide"),l.html(t),E()})},k=function(e,t){var n=void 0,i=e.filter(function(e){return"uploading"===e.status||"queued"===e.status}).length;n=i>1?"Attaching "+i+" files -":"Attaching a file -",t.text(n)},e.find(".markdown-selector").click(function(e){e.preventDefault(),a()(this).closest(".gfm-form").find(".div-dropzone").click(),v.focus()})}else z.addClass("js-invalid-dropzone")}d.a.autoDiscover=!1;var m=n(11);function v(e,t,n,i){var r,o,s;return e=(r=a()(e)).get(0),o=function(e,t){return e.substring(t.selectionStart,t.selectionEnd)}(s=r.val(),e),r.focus(),function(e,t,n,i,a,r){var o,s,l,d,u,c,f;return d=!1,u=!1,c=!1,0===a.indexOf("\n")&&(u=!0,a=a.replace(/\n+/,"")),e.selectionEnd-e.selectionStart>a.replace(/\n$/,"").length&&(d=!0,a=a.replace(/\n$/,"")),s=a.split("\n"),r||(f=e.value.substr(0,e.selectionStart).lastIndexOf("\n"),/^\s*$/.test(e.value.substring(f,e.selectionStart))&&(c=!0)),l=!r&&!c&&e.selectionStart>0?"\n":"",o=s.length>1&&(!r||null!=i&&""!==i)?null!=i&&""!==i?function(e,t,n,i){var a=function(e,t){var n;return(n=e.substring(0,t.selectionStart).trim().split("\n"))[n.length-1]}(e,t),r=function(e,t){return e.substring(t.selectionEnd).trim().split("\n")[0]}(e,t);return a===n&&r===n?(null!=n&&(t.selectionStart=t.selectionStart-(n.length+1),t.selectionEnd=t.selectionEnd+(n.length+1)),i):n+"\n"+i+"\n"+n}(t,e,i,a):s.map(function(e){return 0===e.indexOf(n)?""+e.replace(n,""):""+n+e}).join("\n"):""+l+n+a+(r?n:" "),u&&(o="\n"+o),d&&(o+="\n"),Object(m.p)(e,o),function(e,t,n,i){var a;if(e.setSelectionRange)return e.selectionStart===e.selectionEnd?(a=n?e.selectionStart-t.length:e.selectionStart,i&&(a-=1),e.setSelectionRange(a,a)):void 0}(e,n,r,d)}(e,s,t,n,o,i)}var g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var b=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.form=t,this.textarea=this.form.find("textarea.js-gfm-input"),this.enableGFM=Object.assign({},s.b,i);var a=gl.GfmAutoComplete&&gl.GfmAutoComplete.dataSources||{};Object.keys(this.enableGFM).forEach(function(e){"emojis"!==e&&(n.enableGFM[e]=!!a[e])}),this.destroy(),this.setupForm(),this.form.data("glForm",this)}return g(e,[{key:"destroy",value:function(){this.clearEventListeners(),this.autoComplete&&this.autoComplete.destroy(),this.form.data("glForm",null)}},{key:"setupForm",value:function(){var e,t=this.form.is(":not(.gfm-form)");this.form.removeClass("js-new-note-form"),t&&(this.form.find(".div-dropzone").remove(),this.form.addClass("gfm-form"),gl.utils.disableButtonIfEmptyField(this.form.find(".js-note-text"),this.form.find(".js-comment-button, .js-note-new-discussion")),this.autoComplete=new s.a(gl.GfmAutoComplete&&gl.GfmAutoComplete.dataSources),this.autoComplete.setup(this.form.find(".js-gfm-input"),this.enableGFM),h(this.form),o()(this.textarea)),this.addEventListeners(),e=this.form,a()(".js-md",e).off("click").on("click",function(){var e=a()(this);return v(e.closest(".md-area").find("textarea"),e.data("mdTag"),e.data("mdBlock"),!e.data("mdPrepend"))}),this.form.find(".js-note-discard").hide(),this.form.show(),this.isAutosizeable&&this.setupAutosize()}},{key:"setupAutosize",value:function(){var e=this;this.textarea.off("autosize:resized").on("autosize:resized",this.setHeightData.bind(this)),this.textarea.off("mouseup.autosize").on("mouseup.autosize",this.destroyAutosize.bind(this)),setTimeout(function(){o()(e.textarea),e.textarea.css("resize","vertical")},0)}},{key:"setHeightData",value:function(){this.textarea.data("height",this.textarea.outerHeight())}},{key:"destroyAutosize",value:function(){var e=this.textarea.outerHeight();this.textarea.data("height")!==e&&(o.a.destroy(this.textarea),this.textarea.data("height",e),this.textarea.outerHeight(e),this.textarea.css("max-height",window.outerHeight))}},{key:"clearEventListeners",value:function(){var e;this.textarea.off("focus"),this.textarea.off("blur"),e=this.form,a()(".js-md",e).off("click")}},{key:"addEventListeners",value:function(){this.textarea.on("focus",function(){a()(this).closest(".md-area").addClass("is-focused")}),this.textarea.on("blur",function(){a()(this).closest(".md-area").removeClass("is-focused")})}}]),e}();t.a=b},71:function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=(n(158),n(24)),o=n.n(r),s=n(29),l=n.n(s),d=(n(99),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}());o.a.autoDiscover=!1;var u=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.active_backdrop=null,this.active_textarea=null,a()(document).on("click",".js-zen-enter",function(e){return e.preventDefault(),a()(e.currentTarget).trigger("zen_mode:enter")}),a()(document).on("click",".js-zen-leave",function(e){return e.preventDefault(),a()(e.currentTarget).trigger("zen_mode:leave")}),a()(document).on("zen_mode:enter",(t=this,function(e){return t.enter(a()(e.target).closest(".md-area").find(".zen-backdrop"))})),a()(document).on("zen_mode:leave",function(e){return function(t){return e.exit()}}(this)),a()(document).on("keydown",function(e){if(27===e.keyCode)return e.preventDefault(),a()(document).trigger("zen_mode:leave")})}return d(e,[{key:"enter",value:function(e){l.a.pause(),this.active_backdrop=a()(e),this.active_backdrop.addClass("fullscreen"),this.active_textarea=this.active_backdrop.find("textarea"),this.active_textarea.removeAttr("style"),this.active_textarea.focus()}},{key:"exit",value:function(){if(this.active_textarea){l.a.unpause(),this.active_textarea.closest(".zen-backdrop").removeClass("fullscreen"),this.scrollTo(this.active_textarea),this.active_textarea=null,this.active_backdrop=null;var e=a()(".div-dropzone");e&&!e.hasClass("js-invalid-dropzone")&&o.a.forElement(".div-dropzone").enable()}}},{key:"scrollTo",value:function(e){return a.a.scrollTo(e,0,{offset:-150})}}]),e}();t.a=u},871:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),r=n(8),o=n(72),s=n(66),l=n(91),d=n(45),u=n(11),c=n(21),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var p=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sidebarEl=document.querySelector(".js-wiki-sidebar"),this.sidebarExpanded=!1;for(var n=document.querySelectorAll(".js-sidebar-wiki-toggle"),i=0;i<n.length;i+=1)n[i].addEventListener("click",function(e){return t.handleToggleSidebar(e)});this.newWikiForm=document.querySelector("form.new-wiki-page"),this.newWikiForm&&this.newWikiForm.addEventListener("submit",function(e){return t.handleNewWikiSubmit(e)}),window.addEventListener("resize",function(){return t.renderSidebar()}),this.renderSidebar()}return f(e,[{key:"handleNewWikiSubmit",value:function(e){if(this.newWikiForm){var t=this.newWikiForm.querySelector("#new_wiki_path"),n=Object(d.j)(t.value);if(n.length>0){var i=t.getAttribute("data-wikis-path"),a=Object(u.C)(window.location.search.substr(1)),r=Object(c.c)(a,i+"/"+n);Object(c.d)(r),e.preventDefault()}}}},{key:"handleToggleSidebar",value:function(e){e.preventDefault(),this.sidebarExpanded=!this.sidebarExpanded,this.renderSidebar()}},{key:"renderSidebar",value:function(){if(this.sidebarEl){var t=this.sidebarEl.classList;this.sidebarExpanded||!e.sidebarCanCollapse()?t.contains("right-sidebar-expanded")||(t.remove("right-sidebar-collapsed"),t.add("right-sidebar-expanded")):t.contains("right-sidebar-expanded")&&(t.add("right-sidebar-collapsed"),t.remove("right-sidebar-expanded"))}}}],[{key:"sidebarCanCollapse",value:function(){return"xs"===l.a.getBreakpointSize()}}]),e}(),h=n(29),m=n.n(h),v=n(87),g=n(75),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var y=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return m.a.bind("e",t.editWiki),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,v["a"]),b(t,null,[{key:"editWiki",value:function(){Object(g.a)(".js-wiki-edit")}}]),t}(),k=n(71),w=n(65),C=n(3),x=n.n(C),_=n(95),z=n(1),S={components:{GlModal:_.a},props:{deleteWikiUrl:{type:String,required:!0,default:""},pageTitle:{type:String,required:!0,default:""},csrfToken:{type:String,required:!0,default:""}},computed:{message:function(){return Object(z.e)("WikiPageConfirmDelete|Are you sure you want to delete this page?")},title:function(){return Object(z.f)(Object(z.e)("WikiPageConfirmDelete|Delete page %{pageTitle}?"),{pageTitle:x.a.escape(this.pageTitle)},!1)}},methods:{onSubmit:function(){this.$refs.form.submit()}}},j=n(2),E=Object(j.a)(S,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("gl-modal",{attrs:{id:"delete-wiki-modal","header-title-text":e.title,"footer-primary-button-text":e.s__("WikiPageConfirmDelete|Delete page"),"footer-primary-button-variant":"danger"},on:{submit:e.onSubmit}},[e._v("\n  "+e._s(e.message)+"\n  "),n("form",{ref:"form",staticClass:"js-requires-input",attrs:{action:e.deleteWikiUrl,method:"post"}},[n("input",{ref:"method",attrs:{type:"hidden",name:"_method",value:"delete"}}),e._v(" "),n("input",{attrs:{type:"hidden",name:"authenticity_token"},domProps:{value:e.csrfToken}})])])},[],!1,null,null,null).exports;document.addEventListener("DOMContentLoaded",function(){new p,new y,new k.a,new w.a(a()(".wiki-form"));var e=document.getElementById("delete-wiki-button");if(e){r.default.use(o.a);var t=e.dataset,n=t.deleteWikiUrl,i=t.pageTitle,l=document.getElementById("delete-wiki-modal");new r.default({el:l,data:{deleteWikiUrl:""},render:function(e){return e(E,{props:{pageTitle:i,deleteWikiUrl:n,csrfToken:s.a.token}})}})}})},898:function(e,t,n){n(31),n(57),e.exports=n(871)},95:function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=["danger","primary","success","warning"],o=["sm","md","lg","xl"],s={name:"GlModal",props:{id:{type:String,required:!1,default:null},modalSize:{type:String,required:!1,default:"md",validator:function(e){return o.includes(e)}},headerTitleText:{type:String,required:!1,default:""},footerPrimaryButtonVariant:{type:String,required:!1,default:"primary",validator:function(e){return r.includes(e)}},footerPrimaryButtonText:{type:String,required:!1,default:""}},computed:{modalSizeClass:function(){return"md"===this.modalSize?"":"modal-"+this.modalSize}},mounted:function(){a()(this.$el).on("shown.bs.modal",this.opened).on("hidden.bs.modal",this.closed)},beforeDestroy:function(){a()(this.$el).off("shown.bs.modal",this.opened).off("hidden.bs.modal",this.closed)},methods:{emitCancel:function(e){this.$emit("cancel",e)},emitSubmit:function(e){this.$emit("submit",e)},opened:function(){this.$emit("open")},closed:function(){this.$emit("closed")}}},l=n(2),d=Object(l.a)(s,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal fade",attrs:{id:e.id,tabindex:"-1",role:"dialog"}},[n("div",{staticClass:"modal-dialog",class:e.modalSizeClass,attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[e._t("header",[n("h4",{staticClass:"modal-title"},[e._t("title",[e._v("\n              "+e._s(e.headerTitleText)+"\n            ")])],2),e._v(" "),n("button",{staticClass:"close js-modal-close-action",attrs:{"aria-label":e.s__("Modal|Close"),type:"button","data-dismiss":"modal"},on:{click:function(t){e.emitCancel(t)}}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])])],2),e._v(" "),n("div",{staticClass:"modal-body"},[e._t("default")],2),e._v(" "),n("div",{staticClass:"modal-footer"},[e._t("footer",[n("button",{staticClass:"btn js-modal-cancel-action",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(t){e.emitCancel(t)}}},[e._v("\n            "+e._s(e.s__("Modal|Cancel"))+"\n          ")]),e._v(" "),n("button",{staticClass:"btn js-modal-primary-action",class:"btn-"+e.footerPrimaryButtonVariant,attrs:{type:"button","data-dismiss":"modal"},on:{click:function(t){e.emitSubmit(t)}}},[e._v("\n            "+e._s(e.footerPrimaryButtonText)+"\n          ")])])],2)])])])},[],!1,null,null,null);t.a=d.exports},99:function(e,t){Mousetrap=function(e){var t=e,n=t.stopCallback,i=!0;return t.stopCallback=function(e,t,a){return!i||n(e,t,a)},t.pause=function(){i=!1},t.unpause=function(){i=!0},t}(Mousetrap)}},[[898,0,1,2,3]]]);
//# sourceMappingURL=pages.projects.wikis.8f3a316c.chunk.js.map