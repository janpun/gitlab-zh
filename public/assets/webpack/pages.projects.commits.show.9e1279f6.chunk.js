(this.webpackJsonp=this.webpackJsonp||[]).push([[157],{1026:function(t,e,i){i(31),i(57),t.exports=i(839)},160:function(t,e,i){"use strict";var n=i(0),a=i.n(n),r=i(11),o=i(5),s=i(21);e.a={init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.a.noop,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.a.noop;this.url=a()(".content_list").data("href")||Object(s.f)(["limit","offset"]),this.limit=t,this.offset=parseInt(Object(r.j)("offset"),10)||this.limit,this.disable=i,this.prepareData=n,this.callback=o,this.loading=a()(".loading").first(),e&&(this.offset=0,this.getOld()),this.initLoadMore()},getOld:function(){var t=this;this.loading.show(),o.a.get(this.url,{params:{limit:this.limit,offset:this.offset}}).then(function(e){var i=e.data;t.append(i.count,t.prepareData(i.html)),t.callback(),t.disable||t.isScrollable()?t.loading.hide():t.getOld()}).catch(function(){return t.loading.hide()})},append:function(t,e){a()(".content_list").append(e),t>0?this.offset+=t:this.disable=!0},isScrollable:function(){var t=a()(window);return a()(document).height()>t.height()+t.scrollTop()+400},initLoadMore:function(){var t=this;a()(document).off("scroll"),a()(document).endlessScroll({bottomPixels:400,fireDelay:1e3,fireOnce:!0,ceaseFire:function(){return!0===t.disable},callback:function(){t.loading.is(":visible")||(t.loading.show(),t.getOld())}})}}},229:function(t,e,i){"use strict";var n=i(0),a=i.n(n),r=i(11),o=i(5),s=i(7),c=i(1),l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return l(t,null,[{key:"fetch",value:function(){var t=a()(".js-signature-container");if(0===t.length)return Promise.resolve();var e=a()(".js-loading-gpg-badge");e.html('<i class="fa fa-spinner fa-spin"></i>');var i=function(){return Object(s.a)(Object(c.a)("An error occurred while loading commit signatures"))},n=t.data("signaturesPath");if(!n)return i(),Promise.reject(new Error("Missing commit signatures endpoint!"));var l=Object(r.C)(t.serialize());return o.a.get(n,{params:l}).then(function(t){t.data.signatures.forEach(function(t){e.filter('[data-commit-sha="'+t.commit_sha+'"]').replaceWith(t.html)})}).catch(i)}}]),t}();e.a=u},839:function(t,e,i){"use strict";i.r(e);var n=i(0),a=i.n(n),r=i(45),o=i(38),s=i(160),c=i(5),l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.timer=null,this.$contentList=a()(".content_list"),s.a.init(parseInt(e,10),!1,!1,this.processCommits.bind(this)),this.content=a()("#commits-list"),this.searchField=a()("#commits-search"),this.lastSearch=this.searchField.val(),this.initSearch()}return l(t,[{key:"initSearch",value:function(){var t=this;this.timer=null,this.searchField.on("keyup",function(){clearTimeout(t.timer),t.timer=setTimeout(t.filterResults.bind(t),500)})}},{key:"filterResults",value:function(){var t=this,e=a()(".commits-search-form"),i=this.searchField.val();if(i===this.lastSearch)return Promise.resolve();var n=e.attr("action")+"?"+e.serialize();this.content.fadeTo("fast",.5);var r=e.serializeArray().reduce(function(t,e){return Object.assign(t,function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},e.name,e.value))},{});return c.a.get(e.attr("action"),{params:r}).then(function(e){var a=e.data;t.lastSearch=i,t.content.html(a.html),t.content.fadeTo("fast",1),window.history.replaceState({page:n},document.title,n)}).catch(function(){t.content.fadeTo("fast",1),t.lastSearch=null})}},{key:"processCommits",value:function(t){var e=t,i=a()(e),n=this.$contentList.find("li.js-commit-header").last(),s=n.data("day"),c=i.filter("li.js-commit-header").first().data("day"),l=void 0;return s===c&&(l=n.nextUntil("li.js-commit-header").find("li.commit").length,e=i.not("li.js-commit-header[data-day='"+c+"']"),l+=Number(a()(e).nextUntil("li.js-commit-header").first().find("li.commit").length),n.find("span.commits-count").text(l+" "+Object(r.i)("commit",l))),Object(o.e)(i.find(".js-timeago")),e}}]),t}(),h=i(229),f=i(87);document.addEventListener("DOMContentLoaded",function(){new u(document.querySelector(".js-project-commits-show").dataset.commitsLimit),new f.a,h.a.fetch()})}},[[1026,0,1,2]]]);
//# sourceMappingURL=pages.projects.commits.show.9e1279f6.chunk.js.map