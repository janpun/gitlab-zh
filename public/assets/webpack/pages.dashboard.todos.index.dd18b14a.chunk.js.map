{"version":3,"sources":["webpack:///./users_select.js","webpack:///./pages/dashboard/todos/index/todos.js","webpack:///./pages/dashboard/todos/index/index.js"],"names":["UsersSelect","currentUser","els","$els","options","arguments","length","undefined","this","users","bind","user","usersPath","userPath","_typeof","JSON","parse","_this","handleClick","jquery__WEBPACK_IMPORTED_MODULE_0___default","each","i","dropdown","$block","$collapsedSidebar","$dropdown","$loading","$selectbox","$value","abilityName","assignTo","assigneeTemplate","collapsedAssigneeTemplate","defaultLabel","defaultNullUser","firstUser","issueURL","selectedId","selectedIdDefault","showAnyUser","showNullUser","showMenuAbove","projectId","data","groupId","showCurrentUser","todoFilter","todoStateFilter","authorId","closest","find","fadeOut","assignYourself","unassignedSelected","remove","input","document","createElement","type","name","currentUserInfo","value","id","dataset","meta","underscore__WEBPACK_IMPORTED_MODULE_1___default","a","escape","parent","before","after","addEventListener","getSelectedUserInputs","getSelected","map","index","parseInt","get","checkMaxSelect","maxSelect","selected","firstSelectedId","emitSidebarEvent","getMultiSelectDropdownTitle","selectedUser","isSelected","selectedUsers","filter","u","otherSelected","s","on","e","preventDefault","currentTarget","hide","text","removeClass","$input","$","val","gon","current_user_id","current_user_fullname","assignee_id","fadeIn","trigger","_lib_utils_axios_utils__WEBPACK_IMPORTED_MODULE_2__","put","then","_ref","tooltipTitle","assignee","username","avatar","avatar_url","Object","_locale__WEBPACK_IMPORTED_MODULE_3__","html","attr","tooltip","template","glDropdown","term","callback","instance","processData","hasClass","selectedInputs","uniq","userId","_input$dataset","avatarUrl","concat","anyUser","len","obj","showDivider","splice","unshift","beforeDivider","header","indexOf","sort","b","forEach","positionMenuAbove","filterable","filterRemote","search","fields","selectable","fieldName","toggleLabel","el","inputValue","filterInput","multiSelect","filteredFullData","parseData","addClass","hidden","css","inputMeta","clicked","isIssueIndex","isMRIndex","page","$el","isMarking","selectedObj","isActive","previouslySelected","toLowerCase","element","addInput","show","isSelecting","_boards_stores_modal_store__WEBPACK_IMPORTED_MODULE_4__","store","Issuable","filterResults","submit","opened","highlightSelected","updateLabel","renderRow","img","default_avatar_url","select","showEmailUser","skipLdap","skipUsers","select2","placeholder","multiple","minimumInputLength","query","emailUser","nullUser","ref","results","match","trimmed","trim","invite","initSelection","args","slice","call","apply","formatResult","formatSelection","dropdownCssClass","escapeMarkup","m","window","noop","prototype","user_id","test","url","buildUrl","replace","_ref2","params","active","project_id","group_id","skip_ldap","todo_filter","todo_state_filter","current_user","author_id","skip_users","_ref3","relative_url_root","__webpack_exports__","Todos","_classCallCheck","initFilters","bindEvents","todo_ids","cleanupWrapper","cleanup","unbindEvents","removeEventListener","jquery_default","off","updateRowStateClickedWrapper","updateallStateClickedWrapper","goToTodoUrl","updateRowStateClicked","updateAllStateClickedWrapper","updateAllStateClicked","initFilterDropdown","users_select","searchFields","$formEl","stopPropagation","target","setAttribute","classList","add","axios_utils","method","href","updateRowState","updateBadges","catch","flash","locale","row","restoreBtn","querySelector","doneBtn","removeAttribute","parentNode","removeChild","_this2","ids","updateAllState","markAllDoneBtn","undoAllBtn","todoListContainer","nothingHereContainer","updated_ids","toggle","count","innerHTML","done_count","todoLink","tagName","common_utils","open","url_utility","todos"],"mappings":"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","file":"pages.dashboard.todos.index.dd18b14a.chunk.js","sourcesContent":["/* eslint-disable func-names, one-var, no-var, prefer-rest-params, quotes, max-len, one-var-declaration-per-line, vars-on-top, prefer-arrow-callback, consistent-return, comma-dangle, object-shorthand, no-shadow, no-unused-vars, no-else-return, no-self-compare, prefer-template, no-unused-expressions, yoda, prefer-spread, no-void, camelcase, no-param-reassign */\n/* global Issuable */\n/* global emitSidebarEvent */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport axios from './lib/utils/axios_utils';\nimport { __ } from './locale';\nimport ModalStore from './boards/stores/modal_store';\n\n// TODO: remove eventHub hack after code splitting refactor\nwindow.emitSidebarEvent = window.emitSidebarEvent || $.noop;\n\nfunction UsersSelect(currentUser, els, options = {}) {\n  var $els;\n  this.users = this.users.bind(this);\n  this.user = this.user.bind(this);\n  this.usersPath = \"/autocomplete/users.json\";\n  this.userPath = \"/autocomplete/users/:id.json\";\n  if (currentUser != null) {\n    if (typeof currentUser === 'object') {\n      this.currentUser = currentUser;\n    } else {\n      this.currentUser = JSON.parse(currentUser);\n    }\n  }\n\n  const { handleClick } = options;\n\n  $els = $(els);\n\n  if (!els) {\n    $els = $('.js-user-search');\n  }\n\n  $els.each((function(_this) {\n    return function(i, dropdown) {\n      var options = {};\n      var $block, $collapsedSidebar, $dropdown, $loading, $selectbox, $value, abilityName, assignTo, assigneeTemplate, collapsedAssigneeTemplate, defaultLabel, defaultNullUser, firstUser, issueURL, selectedId, selectedIdDefault, showAnyUser, showNullUser, showMenuAbove;\n      $dropdown = $(dropdown);\n      options.projectId = $dropdown.data('projectId');\n      options.groupId = $dropdown.data('groupId');\n      options.showCurrentUser = $dropdown.data('currentUser');\n      options.todoFilter = $dropdown.data('todoFilter');\n      options.todoStateFilter = $dropdown.data('todoStateFilter');\n      showNullUser = $dropdown.data('nullUser');\n      defaultNullUser = $dropdown.data('nullUserDefault');\n      showMenuAbove = $dropdown.data('showMenuAbove');\n      showAnyUser = $dropdown.data('anyUser');\n      firstUser = $dropdown.data('firstUser');\n      options.authorId = $dropdown.data('authorId');\n      defaultLabel = $dropdown.data('defaultLabel');\n      issueURL = $dropdown.data('issueUpdate');\n      $selectbox = $dropdown.closest('.selectbox');\n      $block = $selectbox.closest('.block');\n      abilityName = $dropdown.data('abilityName');\n      $value = $block.find('.value');\n      $collapsedSidebar = $block.find('.sidebar-collapsed-user');\n      $loading = $block.find('.block-loading').fadeOut();\n      selectedIdDefault = (defaultNullUser && showNullUser) ? 0 : null;\n      selectedId = $dropdown.data('selected');\n\n      if (selectedId === undefined) {\n        selectedId = selectedIdDefault;\n      }\n\n      const assignYourself = function () {\n        const unassignedSelected = $dropdown.closest('.selectbox')\n          .find(`input[name='${$dropdown.data('fieldName')}'][value=0]`);\n\n        if (unassignedSelected) {\n          unassignedSelected.remove();\n        }\n\n        // Save current selected user to the DOM\n        const input = document.createElement('input');\n        input.type = 'hidden';\n        input.name = $dropdown.data('fieldName');\n\n        const currentUserInfo = $dropdown.data('currentUserInfo');\n\n        if (currentUserInfo) {\n          input.value = currentUserInfo.id;\n          input.dataset.meta = _.escape(currentUserInfo.name);\n        } else if (_this.currentUser) {\n          input.value = _this.currentUser.id;\n        }\n\n        if ($selectbox) {\n          $dropdown.parent().before(input);\n        } else {\n          $dropdown.after(input);\n        }\n      };\n\n      if ($block[0]) {\n        $block[0].addEventListener('assignYourself', assignYourself);\n      }\n\n      const getSelectedUserInputs = function() {\n        return $selectbox\n          .find(`input[name=\"${$dropdown.data('fieldName')}\"]`);\n      };\n\n      const getSelected = function() {\n        return getSelectedUserInputs()\n          .map((index, input) => parseInt(input.value, 10))\n          .get();\n      };\n\n      const checkMaxSelect = function() {\n        const maxSelect = $dropdown.data('maxSelect');\n        if (maxSelect) {\n          const selected = getSelected();\n\n          if (selected.length > maxSelect) {\n            const firstSelectedId = selected[0];\n            const firstSelected = $dropdown.closest('.selectbox')\n              .find(`input[name='${$dropdown.data('fieldName')}'][value=${firstSelectedId}]`);\n\n            firstSelected.remove();\n            emitSidebarEvent('sidebar.removeAssignee', {\n              id: firstSelectedId,\n            });\n          }\n        }\n      };\n\n      const getMultiSelectDropdownTitle = function(selectedUser, isSelected) {\n        const selectedUsers = getSelected()\n          .filter(u => u !== 0);\n\n        const firstUser = getSelectedUserInputs()\n          .map((index, input) => ({\n            name: input.dataset.meta,\n            value: parseInt(input.value, 10),\n          }))\n          .filter(u => u.id !== 0)\n          .get(0);\n\n        if (selectedUsers.length === 0) {\n          return 'Unassigned';\n        } else if (selectedUsers.length === 1) {\n          return firstUser.name;\n        } else if (isSelected) {\n          const otherSelected = selectedUsers.filter(s => s !== selectedUser.id);\n          return `${selectedUser.name} + ${otherSelected.length} more`;\n        } else {\n          return `${firstUser.name} + ${selectedUsers.length - 1} more`;\n        }\n      };\n\n      $('.assign-to-me-link').on('click', (e) => {\n        e.preventDefault();\n        $(e.currentTarget).hide();\n\n        if ($dropdown.data('multiSelect')) {\n          assignYourself();\n          checkMaxSelect();\n\n          const currentUserInfo = $dropdown.data('currentUserInfo');\n          $dropdown.find('.dropdown-toggle-text').text(getMultiSelectDropdownTitle(currentUserInfo)).removeClass('is-default');\n        } else {\n          const $input = $(`input[name=\"${$dropdown.data('fieldName')}\"]`);\n          $input.val(gon.current_user_id);\n          selectedId = $input.val();\n          $dropdown.find('.dropdown-toggle-text').text(gon.current_user_fullname).removeClass('is-default');\n        }\n      });\n\n      $block.on('click', '.js-assign-yourself', (e) => {\n        e.preventDefault();\n        return assignTo(_this.currentUser.id);\n      });\n\n      assignTo = function(selected) {\n        var data;\n        data = {};\n        data[abilityName] = {};\n        data[abilityName].assignee_id = selected != null ? selected : null;\n        $loading.removeClass('hidden').fadeIn();\n        $dropdown.trigger('loading.gl.dropdown');\n\n        return axios.put(issueURL, data)\n          .then(({ data }) => {\n            var user, tooltipTitle;\n            $dropdown.trigger('loaded.gl.dropdown');\n            $loading.fadeOut();\n            if (data.assignee) {\n              user = {\n                name: data.assignee.name,\n                username: data.assignee.username,\n                avatar: data.assignee.avatar_url\n              };\n              tooltipTitle = _.escape(user.name);\n            } else {\n              user = {\n                name: 'Unassigned',\n                username: '',\n                avatar: ''\n              };\n              tooltipTitle = __('Assignee');\n            }\n            $value.html(assigneeTemplate(user));\n            $collapsedSidebar.attr('title', tooltipTitle).tooltip('_fixTitle');\n            return $collapsedSidebar.html(collapsedAssigneeTemplate(user));\n          });\n      };\n      collapsedAssigneeTemplate = _.template('<% if( avatar ) { %> <a class=\"author-link\" href=\"/<%- username %>\"> <img width=\"24\" class=\"avatar avatar-inline s24\" alt=\"\" src=\"<%- avatar %>\"> </a> <% } else { %> <i class=\"fa fa-user\"></i> <% } %>');\n      assigneeTemplate = _.template('<% if (username) { %> <a class=\"author-link bold\" href=\"/<%- username %>\"> <% if( avatar ) { %> <img width=\"32\" class=\"avatar avatar-inline s32\" alt=\"\" src=\"<%- avatar %>\"> <% } %> <span class=\"author\"><%- name %></span> <span class=\"username\"> @<%- username %> </span> </a> <% } else { %> <span class=\"no-value assign-yourself\"> No assignee - <a href=\"#\" class=\"js-assign-yourself\"> assign yourself </a> </span> <% } %>');\n      return $dropdown.glDropdown({\n        showMenuAbove: showMenuAbove,\n        data: function(term, callback) {\n          return _this.users(term, options, function(users) {\n            // GitLabDropdownFilter returns this.instance\n            // GitLabDropdownRemote returns this.options.instance\n            const glDropdown = this.instance || this.options.instance;\n            glDropdown.options.processData(term, users, callback);\n          }.bind(this));\n        },\n        processData: function(term, data, callback) {\n          let users = data;\n\n          // Only show assigned user list when there is no search term\n          if ($dropdown.hasClass('js-multiselect') && term.length === 0) {\n            const selectedInputs = getSelectedUserInputs();\n\n            // Potential duplicate entries when dealing with issue board\n            // because issue board is also managed by vue\n            const selectedUsers = _.uniq(selectedInputs, false, a => a.value)\n              .filter((input) => {\n                const userId = parseInt(input.value, 10);\n                const inUsersArray = users.find(u => u.id === userId);\n\n                return !inUsersArray && userId !== 0;\n              })\n              .map((input) => {\n                const userId = parseInt(input.value, 10);\n                const { avatarUrl, avatar_url, name, username } = input.dataset;\n                return {\n                  avatar_url: avatarUrl || avatar_url,\n                  id: userId,\n                  name,\n                  username,\n                };\n              });\n\n            users = data.concat(selectedUsers);\n          }\n\n          let anyUser;\n          let index;\n          let len;\n          let name;\n          let obj;\n          let showDivider;\n          if (term.length === 0) {\n            showDivider = 0;\n            if (firstUser) {\n              // Move current user to the front of the list\n              for (index = 0, len = users.length; index < len; index += 1) {\n                obj = users[index];\n                if (obj.username === firstUser) {\n                  users.splice(index, 1);\n                  users.unshift(obj);\n                  break;\n                }\n              }\n            }\n            if (showNullUser) {\n              showDivider += 1;\n              users.unshift({\n                beforeDivider: true,\n                name: 'Unassigned',\n                id: 0\n              });\n            }\n            if (showAnyUser) {\n              showDivider += 1;\n              name = showAnyUser;\n              if (name === true) {\n                name = 'Any User';\n              }\n              anyUser = {\n                beforeDivider: true,\n                name: name,\n                id: null\n              };\n              users.unshift(anyUser);\n            }\n\n            if (showDivider) {\n              users.splice(showDivider, 0, 'divider');\n            }\n\n            if ($dropdown.hasClass('js-multiselect')) {\n              const selected = getSelected().filter(i => i !== 0);\n\n              if (selected.length > 0) {\n                if ($dropdown.data('dropdownHeader')) {\n                  showDivider += 1;\n                  users.splice(showDivider, 0, {\n                    header: $dropdown.data('dropdownHeader'),\n                  });\n                }\n\n                const selectedUsers = users\n                  .filter(u => selected.indexOf(u.id) !== -1)\n                  .sort((a, b) => a.name > b.name);\n\n                users = users.filter(u => selected.indexOf(u.id) === -1);\n\n                selectedUsers.forEach((selectedUser) => {\n                  showDivider += 1;\n                  users.splice(showDivider, 0, selectedUser);\n                });\n\n                users.splice(showDivider + 1, 0, 'divider');\n              }\n            }\n          }\n\n          callback(users);\n          if (showMenuAbove) {\n            $dropdown.data('glDropdown').positionMenuAbove();\n          }\n        },\n        filterable: true,\n        filterRemote: true,\n        search: {\n          fields: ['name', 'username']\n        },\n        selectable: true,\n        fieldName: $dropdown.data('fieldName'),\n        toggleLabel: function(selected, el, glDropdown) {\n          const inputValue = glDropdown.filterInput.val();\n\n          if (this.multiSelect && inputValue === '') {\n            // Remove non-users from the fullData array\n            const users = glDropdown.filteredFullData();\n            const callback = glDropdown.parseData.bind(glDropdown);\n\n            // Update the data model\n            this.processData(inputValue, users, callback);\n          }\n\n          if (this.multiSelect) {\n            return getMultiSelectDropdownTitle(selected, $(el).hasClass('is-active'));\n          }\n\n          if (selected && 'id' in selected && $(el).hasClass('is-active')) {\n            $dropdown.find('.dropdown-toggle-text').removeClass('is-default');\n            if (selected.text) {\n              return selected.text;\n            } else {\n              return selected.name;\n            }\n          } else {\n            $dropdown.find('.dropdown-toggle-text').addClass('is-default');\n            return defaultLabel;\n          }\n        },\n        defaultLabel: defaultLabel,\n        hidden: function(e) {\n          if ($dropdown.hasClass('js-multiselect')) {\n            emitSidebarEvent('sidebar.saveAssignees');\n          }\n\n          if (!$dropdown.data('alwaysShowSelectbox')) {\n            $selectbox.hide();\n\n            // Recalculate where .value is because vue might have changed it\n            $block = $selectbox.closest('.block');\n            $value = $block.find('.value');\n            // display:block overrides the hide-collapse rule\n            $value.css('display', '');\n          }\n        },\n        multiSelect: $dropdown.hasClass('js-multiselect'),\n        inputMeta: $dropdown.data('inputMeta'),\n        clicked: function(options) {\n          const { $el, e, isMarking } = options;\n          const user = options.selectedObj;\n\n          if ($dropdown.hasClass('js-multiselect')) {\n            const isActive = $el.hasClass('is-active');\n            const previouslySelected = $dropdown.closest('.selectbox')\n                .find(\"input[name='\" + ($dropdown.data('fieldName')) + \"'][value!=0]\");\n\n            // Enables support for limiting the number of users selected\n            // Automatically removes the first on the list if more users are selected\n            checkMaxSelect();\n\n            if (user.beforeDivider && user.name.toLowerCase() === 'unassigned') {\n              // Unassigned selected\n              previouslySelected.each((index, element) => {\n                const id = parseInt(element.value, 10);\n                element.remove();\n              });\n              emitSidebarEvent('sidebar.removeAllAssignees');\n            } else if (isActive) {\n              // user selected\n              emitSidebarEvent('sidebar.addAssignee', user);\n\n              // Remove unassigned selection (if it was previously selected)\n              const unassignedSelected = $dropdown.closest('.selectbox')\n                .find(\"input[name='\" + ($dropdown.data('fieldName')) + \"'][value=0]\");\n\n              if (unassignedSelected) {\n                unassignedSelected.remove();\n              }\n            } else {\n              if (previouslySelected.length === 0) {\n              // Select unassigned because there is no more selected users\n                this.addInput($dropdown.data('fieldName'), 0, {});\n              }\n\n              // User unselected\n              emitSidebarEvent('sidebar.removeAssignee', user);\n            }\n\n            if (getSelected().find(u => u === gon.current_user_id)) {\n              $('.assign-to-me-link').hide();\n            } else {\n              $('.assign-to-me-link').show();\n            }\n          }\n\n          var isIssueIndex, isMRIndex, page, selected;\n          page = $('body').attr('data-page');\n          isIssueIndex = page === 'projects:issues:index';\n          isMRIndex = (page === page && page === 'projects:merge_requests:index');\n          if ($dropdown.hasClass('js-filter-bulk-update') || $dropdown.hasClass('js-issuable-form-dropdown')) {\n            e.preventDefault();\n\n            const isSelecting = (user.id !== selectedId);\n            selectedId = isSelecting ? user.id : selectedIdDefault;\n\n            if (selectedId === gon.current_user_id) {\n              $('.assign-to-me-link').hide();\n            } else {\n              $('.assign-to-me-link').show();\n            }\n            return;\n          }\n          if ($el.closest('.add-issues-modal').length) {\n            ModalStore.store.filter[$dropdown.data('fieldName')] = user.id;\n          } else if (handleClick) {\n            e.preventDefault();\n            handleClick(user, isMarking);\n          } else if ($dropdown.hasClass('js-filter-submit') && (isIssueIndex || isMRIndex)) {\n            return Issuable.filterResults($dropdown.closest('form'));\n          } else if ($dropdown.hasClass('js-filter-submit')) {\n            return $dropdown.closest('form').submit();\n          } else if (!$dropdown.hasClass('js-multiselect')) {\n            selected = $dropdown.closest('.selectbox').find(\"input[name='\" + ($dropdown.data('fieldName')) + \"']\").val();\n            return assignTo(selected);\n          }\n\n          // Automatically close dropdown after assignee is selected\n          // since CE has no multiple assignees\n          // EE does not have a max-select\n          if ($dropdown.data('maxSelect') &&\n              getSelected().length === $dropdown.data('maxSelect')) {\n            // Close the dropdown\n            $dropdown.dropdown('toggle');\n          }\n        },\n        id: function (user) {\n          return user.id;\n        },\n        opened: function(e) {\n          const $el = $(e.currentTarget);\n          const selected = getSelected();\n          if ($dropdown.hasClass('js-issue-board-sidebar') && selected.length === 0) {\n            this.addInput($dropdown.data('fieldName'), 0, {});\n          }\n          $el.find('.is-active').removeClass('is-active');\n\n          function highlightSelected(id) {\n            $el.find(`li[data-user-id=\"${id}\"] .dropdown-menu-user-link`).addClass('is-active');\n          }\n\n          if (selected.length > 0) {\n            getSelected().forEach(selectedId => highlightSelected(selectedId));\n          } else if ($dropdown.hasClass('js-issue-board-sidebar')) {\n            highlightSelected(0);\n          } else {\n            highlightSelected(selectedId);\n          }\n        },\n        updateLabel: $dropdown.data('dropdownTitle'),\n        renderRow: function(user) {\n          var avatar, img, listClosingTags, listWithName, listWithUserName, username;\n          username = user.username ? \"@\" + user.username : \"\";\n          avatar = user.avatar_url ? user.avatar_url : gon.default_avatar_url;\n\n          let selected = false;\n\n          if (this.multiSelect) {\n            selected = getSelected().find(u => user.id === u);\n\n            const { fieldName } = this;\n            const field = $dropdown.closest('.selectbox').find(\"input[name='\" + fieldName + \"'][value='\" + user.id + \"']\");\n\n            if (field.length) {\n              selected = true;\n            }\n          } else {\n            selected = user.id === selectedId;\n          }\n\n          img = \"\";\n          if (user.beforeDivider != null) {\n            `<li><a href='#' class='${selected === true ? 'is-active' : ''}'>${_.escape(user.name)}</a></li>`;\n          } else {\n            img = \"<img src='\" + avatar + \"' class='avatar avatar-inline' width='32' />\";\n          }\n\n          return `\n            <li data-user-id=${user.id}>\n              <a href='#' class='dropdown-menu-user-link ${selected === true ? 'is-active' : ''}'>\n                ${img}\n                <strong class='dropdown-menu-user-full-name'>\n                  ${_.escape(user.name)}\n                </strong>\n                ${username ? `<span class='dropdown-menu-user-username'>${username}</span>` : ''}\n              </a>\n            </li>\n          `;\n        }\n      });\n    };\n  })(this));\n  $('.ajax-users-select').each((function(_this) {\n    return function(i, select) {\n      var firstUser, showAnyUser, showEmailUser, showNullUser;\n      var options = {};\n      options.skipLdap = $(select).hasClass('skip_ldap');\n      options.projectId = $(select).data('projectId');\n      options.groupId = $(select).data('groupId');\n      options.showCurrentUser = $(select).data('currentUser');\n      options.authorId = $(select).data('authorId');\n      options.skipUsers = $(select).data('skipUsers');\n      showNullUser = $(select).data('nullUser');\n      showAnyUser = $(select).data('anyUser');\n      showEmailUser = $(select).data('emailUser');\n      firstUser = $(select).data('firstUser');\n      return $(select).select2({\n        placeholder: \"Search for a user\",\n        multiple: $(select).hasClass('multiselect'),\n        minimumInputLength: 0,\n        query: function(query) {\n          return _this.users(query.term, options, function(users) {\n            var anyUser, data, emailUser, index, len, name, nullUser, obj, ref;\n            data = {\n              results: users\n            };\n            if (query.term.length === 0) {\n              if (firstUser) {\n                // Move current user to the front of the list\n                ref = data.results;\n\n                for (index = 0, len = ref.length; index < len; index += 1) {\n                  obj = ref[index];\n                  if (obj.username === firstUser) {\n                    data.results.splice(index, 1);\n                    data.results.unshift(obj);\n                    break;\n                  }\n                }\n              }\n              if (showNullUser) {\n                nullUser = {\n                  name: 'Unassigned',\n                  id: 0\n                };\n                data.results.unshift(nullUser);\n              }\n              if (showAnyUser) {\n                name = showAnyUser;\n                if (name === true) {\n                  name = 'Any User';\n                }\n                anyUser = {\n                  name: name,\n                  id: null\n                };\n                data.results.unshift(anyUser);\n              }\n            }\n            if (showEmailUser && data.results.length === 0 && query.term.match(/^[^@]+@[^@]+$/)) {\n              var trimmed = query.term.trim();\n              emailUser = {\n                name: \"Invite \\\"\" + query.term + \"\\\" by email\",\n                username: trimmed,\n                id: trimmed,\n                invite: true\n              };\n              data.results.unshift(emailUser);\n            }\n            return query.callback(data);\n          });\n        },\n        initSelection: function() {\n          var args;\n          args = 1 <= arguments.length ? [].slice.call(arguments, 0) : [];\n          return _this.initSelection.apply(_this, args);\n        },\n        formatResult: function() {\n          var args;\n          args = 1 <= arguments.length ? [].slice.call(arguments, 0) : [];\n          return _this.formatResult.apply(_this, args);\n        },\n        formatSelection: function() {\n          var args;\n          args = 1 <= arguments.length ? [].slice.call(arguments, 0) : [];\n          return _this.formatSelection.apply(_this, args);\n        },\n        dropdownCssClass: \"ajax-users-dropdown\",\n        // we do not want to escape markup since we are displaying html in results\n        escapeMarkup: function(m) {\n          return m;\n        }\n      });\n    };\n  })(this));\n}\n\nUsersSelect.prototype.initSelection = function(element, callback) {\n  var id, nullUser;\n  id = $(element).val();\n  if (id === \"0\") {\n    nullUser = {\n      name: 'Unassigned'\n    };\n    return callback(nullUser);\n  } else if (id !== \"\") {\n    return this.user(id, callback);\n  }\n};\n\nUsersSelect.prototype.formatResult = function(user) {\n  var avatar;\n  if (user.avatar_url) {\n    avatar = user.avatar_url;\n  } else {\n    avatar = gon.default_avatar_url;\n  }\n  return \"<div class='user-result \" + (!user.username ? 'no-username' : void 0) + \"'> <div class='user-image'><img class='avatar avatar-inline s32' src='\" + avatar + \"'></div> <div class='user-name dropdown-menu-user-full-name'>\" + _.escape(user.name) + \"</div> <div class='user-username dropdown-menu-user-username'>\" + (!user.invite ? \"@\" + _.escape(user.username) : \"\") + \"</div> </div>\";\n};\n\nUsersSelect.prototype.formatSelection = function(user) {\n  return _.escape(user.name);\n};\n\nUsersSelect.prototype.user = function(user_id, callback) {\n  if (!/^\\d+$/.test(user_id)) {\n    return false;\n  }\n\n  var url;\n  url = this.buildUrl(this.userPath);\n  url = url.replace(':id', user_id);\n  return axios.get(url)\n    .then(({ data }) => {\n      callback(data);\n    });\n};\n\n// Return users list. Filtered by query\n// Only active users retrieved\nUsersSelect.prototype.users = function(query, options, callback) {\n  const url = this.buildUrl(this.usersPath);\n  const params = {\n    search: query,\n    active: true,\n    project_id: options.projectId || null,\n    group_id: options.groupId || null,\n    skip_ldap: options.skipLdap || null,\n    todo_filter: options.todoFilter || null,\n    todo_state_filter: options.todoStateFilter || null,\n    current_user: options.showCurrentUser || null,\n    author_id: options.authorId || null,\n    skip_users: options.skipUsers || null\n  };\n  return axios.get(url, { params })\n    .then(({ data }) => {\n      callback(data);\n    });\n};\n\nUsersSelect.prototype.buildUrl = function(url) {\n  if (gon.relative_url_root != null) {\n    url = gon.relative_url_root.replace(/\\/$/, '') + url;\n  }\n  return url;\n};\n\nexport default UsersSelect;\n","/* eslint-disable class-methods-use-this, no-unneeded-ternary */\n\nimport $ from 'jquery';\nimport { visitUrl } from '~/lib/utils/url_utility';\nimport UsersSelect from '~/users_select';\nimport { isMetaClick } from '~/lib/utils/common_utils';\nimport { __ } from '~/locale';\nimport flash from '~/flash';\nimport axios from '~/lib/utils/axios_utils';\n\nexport default class Todos {\n  constructor() {\n    this.initFilters();\n    this.bindEvents();\n    this.todo_ids = [];\n\n    this.cleanupWrapper = this.cleanup.bind(this);\n    document.addEventListener('beforeunload', this.cleanupWrapper);\n  }\n\n  cleanup() {\n    this.unbindEvents();\n    document.removeEventListener('beforeunload', this.cleanupWrapper);\n  }\n\n  unbindEvents() {\n    $('.js-done-todo, .js-undo-todo, .js-add-todo').off('click', this.updateRowStateClickedWrapper);\n    $('.js-todos-mark-all', '.js-todos-undo-all').off('click', this.updateallStateClickedWrapper);\n    $('.todo').off('click', this.goToTodoUrl);\n  }\n\n  bindEvents() {\n    this.updateRowStateClickedWrapper = this.updateRowStateClicked.bind(this);\n    this.updateAllStateClickedWrapper = this.updateAllStateClicked.bind(this);\n\n    $('.js-done-todo, .js-undo-todo, .js-add-todo').on('click', this.updateRowStateClickedWrapper);\n    $('.js-todos-mark-all, .js-todos-undo-all').on('click', this.updateAllStateClickedWrapper);\n    $('.todo').on('click', this.goToTodoUrl);\n  }\n\n  initFilters() {\n    this.initFilterDropdown($('.js-group-search'), 'group_id', ['text']);\n    this.initFilterDropdown($('.js-project-search'), 'project_id', ['text']);\n    this.initFilterDropdown($('.js-type-search'), 'type');\n    this.initFilterDropdown($('.js-action-search'), 'action_id');\n\n    return new UsersSelect();\n  }\n\n  initFilterDropdown($dropdown, fieldName, searchFields) {\n    $dropdown.glDropdown({\n      fieldName,\n      selectable: true,\n      filterable: searchFields ? true : false,\n      search: { fields: searchFields },\n      data: $dropdown.data('data'),\n      clicked: () => {\n        const $formEl = $dropdown.closest('form.filter-form');\n        const mutexDropdowns = {\n          group_id: 'project_id',\n          project_id: 'group_id',\n        };\n\n        $formEl.find(`input[name=\"${mutexDropdowns[fieldName]}\"]`).remove();\n        $formEl.submit();\n      },\n    });\n  }\n\n  updateRowStateClicked(e) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    const { target } = e;\n    target.setAttribute('disabled', true);\n    target.classList.add('disabled');\n\n    axios[target.dataset.method](target.dataset.href)\n      .then(({ data }) => {\n        this.updateRowState(target);\n        this.updateBadges(data);\n      }).catch(() => flash(__('Error updating todo status.')));\n  }\n\n  updateRowState(target) {\n    const row = target.closest('li');\n    const restoreBtn = row.querySelector('.js-undo-todo');\n    const doneBtn = row.querySelector('.js-done-todo');\n\n    target.classList.add('hidden');\n    target.removeAttribute('disabled');\n    target.classList.remove('disabled');\n\n    if (target === doneBtn) {\n      row.classList.add('done-reversible');\n      restoreBtn.classList.remove('hidden');\n    } else if (target === restoreBtn) {\n      row.classList.remove('done-reversible');\n      doneBtn.classList.remove('hidden');\n    } else {\n      row.parentNode.removeChild(row);\n    }\n  }\n\n  updateAllStateClicked(e) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    const target = e.currentTarget;\n    target.setAttribute('disabled', true);\n    target.classList.add('disabled');\n\n    axios[target.dataset.method](target.dataset.href, {\n      ids: this.todo_ids,\n    }).then(({ data }) => {\n      this.updateAllState(target, data);\n      this.updateBadges(data);\n    }).catch(() => flash(__('Error updating status for all todos.')));\n  }\n\n  updateAllState(target, data) {\n    const markAllDoneBtn = document.querySelector('.js-todos-mark-all');\n    const undoAllBtn = document.querySelector('.js-todos-undo-all');\n    const todoListContainer = document.querySelector('.js-todos-list-container');\n    const nothingHereContainer = document.querySelector('.js-nothing-here-container');\n\n    target.removeAttribute('disabled');\n    target.classList.remove('disabled');\n\n    this.todo_ids = (target === markAllDoneBtn) ? data.updated_ids : [];\n    undoAllBtn.classList.toggle('hidden');\n    markAllDoneBtn.classList.toggle('hidden');\n    todoListContainer.classList.toggle('hidden');\n    nothingHereContainer.classList.toggle('hidden');\n  }\n\n  updateBadges(data) {\n    $(document).trigger('todo:toggle', data.count);\n    document.querySelector('.todos-pending .badge').innerHTML = data.count;\n    document.querySelector('.todos-done .badge').innerHTML = data.done_count;\n  }\n\n  goToTodoUrl(e) {\n    const todoLink = this.dataset.url;\n\n    if (!todoLink || e.target.tagName === 'A' || e.target.tagName === 'IMG') {\n      return;\n    }\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    if (isMetaClick(e)) {\n      const windowTarget = '_blank';\n\n      window.open(todoLink, windowTarget);\n    } else {\n      visitUrl(todoLink);\n    }\n  }\n}\n","import Todos from './todos';\n\ndocument.addEventListener('DOMContentLoaded', () => new Todos());\n"],"sourceRoot":""}