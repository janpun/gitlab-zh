{"version":3,"sources":["webpack:///./due_date_select.js","webpack:///./pages/groups/milestones/new/index.js","webpack:///./shared/milestones/form.js","webpack:///./dropzone_input.js","webpack:///./lib/utils/text_markdown.js","webpack:///./gl_form.js","webpack:///./zen_mode.js","webpack:////var/cache/omnibus/src/gitlab-rails/node_modules/mousetrap/plugins/pause/mousetrap-pause.js"],"names":["DueDateSelect","_ref","arguments","length","undefined","$dropdown","$loading","_classCallCheck","this","$dropdownParent","closest","$block","$datePicker","find","$sidebarCollapsedValue","$selectbox","$value","$valueContent","$sidebarValue","jquery__WEBPACK_IMPORTED_MODULE_0___default","fieldName","data","abilityName","issueUpdateURL","rawSelectedDate","displayedDate","datePayload","initGlDropdown","initRemoveDueDate","initDatePicker","_this","glDropdown","opened","show","hidden","hide","css","_this2","$dueDateInput","$","calendar","pikaday__WEBPACK_IMPORTED_MODULE_1___default","a","field","get","theme","format","parse","dateString","Object","_lib_utils_datefix__WEBPACK_IMPORTED_MODULE_6__","toString","date","onSelect","dateText","val","hasClass","gl","issueBoards","BoardsStore","detail","issue","dueDate","updateIssueBoardIssue","saveDueDate","setDate","append","el","_this3","on","e","preventDefault","isDropdown","parseSelectedDate","prepSelectedDate","submitSelectedDate","dateArray","split","map","v","parseInt","dateObj","Date","dateformat__WEBPACK_IMPORTED_MODULE_2___default","due_date","_this4","fadeIn","trigger","fadeOutLoader","fadeOut","update","attr","then","catch","_this5","selectedDateValue","hasDueDate","displayedDateStyle","removeClass","html","toggleClass","_lib_utils_axios_utils__WEBPACK_IMPORTED_MODULE_4__","put","tooltipText","_locale__WEBPACK_IMPORTED_MODULE_3__","_lib_utils_datetime_utility__WEBPACK_IMPORTED_MODULE_5__","dropdown","DueDateSelectors","initMilestoneDatePicker","initIssuableSelect","each","datePickerVal","container","parent","target","siblings","i","document","addEventListener","_shared_milestones_form__WEBPACK_IMPORTED_MODULE_0__","__webpack_exports__","initGFM","_zen_mode__WEBPACK_IMPORTED_MODULE_1__","_due_date_select__WEBPACK_IMPORTED_MODULE_2__","_gl_form__WEBPACK_IMPORTED_MODULE_3__","emojis","members","issues","mergeRequests","epics","milestones","labels","dropzoneInput","form","$attachButton","$attachingFileMessage","$cancelButton","$retryLink","$uploadProgress","$uploadingErrorContainer","$uploadingErrorMessage","$uploadingProgressContainer","uploadsPath","window","uploads_path","maxFileSize","gon","max_file_size","formTextarea","handlePaste","pasteText","addFileToForm","updateAttachingMessage","isImage","getFilename","uploadFile","wrap","event","$mdArea","setupMarkdownPreview","$formDropzone","addClass","dropzone","url","dictDefaultMessage","clickable","paramName","maxFilesize","uploadMultiple","headers","csrf","previewContainer","processing","jquery_default","alert","dragover","dragleave","drop","focus","success","header","response","processingFileCount","getQueuedFiles","getUploadingFiles","shouldPad","link","markdown","error","file","errorMessage","xhr","message","responseText","totaluploadprogress","totalUploadProgress","files","text","Math","round","sending","removedfile","queuecomplete","remove","child","children","stopPropagation","dropzone_default","forElement","removeAllFiles","dropzoneInstance","querySelector","failedFiles","failedFile","status","ERROR","accepted","addFile","pasteEvent","originalEvent","clipboardData","items","image","filename","getAsFile","item","type","indexOf","formattedText","textarea","caretStart","selectionStart","caretEnd","selectionEnd","textEnd","beforeSelection","substring","afterSelection","setSelectionRange","style","height","scrollHeight","dispatchEvent","Event","path","underscore_default","escape","value","getData","closeSpinner","formData","FormData","axios_utils","post","md","$child","index","replace","insertToTextArea","messageContainer","attachingMessage","filesCount","filter","click","autoDiscover","updateText","textArea","tag","blockTag","$textArea","selected","selectedText","textToInsert","selectedSplit","startChar","removedLastNewLine","removedFirstNewLine","currentLineEmpty","lastNewLine","substr","lastIndexOf","test","before","trim","lineBefore","after","lineAfter","blockTagText","join","common_utils","wrapped","pos","moveCursor","insertMarkdownText","gl_form_GLForm","GLForm","enableGFM","assign","gfm_auto_complete","dataSources","GfmAutoComplete","keys","forEach","destroy","setupForm","clearEventListeners","autoComplete","isNewForm","is","utils","disableButtonIfEmptyField","setup","autosize_default","addEventListeners","off","$this","isAutosizeable","setupAutosize","setHeightData","bind","destroyAutosize","setTimeout","outerHeight","dropzone__WEBPACK_IMPORTED_MODULE_2___default","ZenMode","active_backdrop","active_textarea","currentTarget","enter","exit","keyCode","backdrop","mousetrap__WEBPACK_IMPORTED_MODULE_3___default","pause","removeAttr","unpause","scrollTo","$dropzone","enable","zen_area","offset","Mousetrap","self","_originalStopCallback","stopCallback","enabled","element","combo"],"mappings":"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","file":"pages.groups.milestones.new.2f877e61.chunk.js","sourcesContent":["import $ from 'jquery';\nimport Pikaday from 'pikaday';\nimport dateFormat from 'dateformat';\nimport { __ } from '~/locale';\nimport axios from './lib/utils/axios_utils';\nimport { timeFor } from './lib/utils/datetime_utility';\nimport { parsePikadayDate, pikadayToString } from './lib/utils/datefix';\n\nclass DueDateSelect {\n  constructor({ $dropdown, $loading } = {}) {\n    const $dropdownParent = $dropdown.closest('.dropdown');\n    const $block = $dropdown.closest('.block');\n    this.$loading = $loading;\n    this.$dropdown = $dropdown;\n    this.$dropdownParent = $dropdownParent;\n    this.$datePicker = $dropdownParent.find('.js-due-date-calendar');\n    this.$block = $block;\n    this.$sidebarCollapsedValue = $block.find('.sidebar-collapsed-icon');\n    this.$selectbox = $dropdown.closest('.selectbox');\n    this.$value = $block.find('.value');\n    this.$valueContent = $block.find('.value-content');\n    this.$sidebarValue = $('.js-due-date-sidebar-value', $block);\n    this.fieldName = $dropdown.data('fieldName');\n    this.abilityName = $dropdown.data('abilityName');\n    this.issueUpdateURL = $dropdown.data('issueUpdate');\n\n    this.rawSelectedDate = null;\n    this.displayedDate = null;\n    this.datePayload = null;\n\n    this.initGlDropdown();\n    this.initRemoveDueDate();\n    this.initDatePicker();\n  }\n\n  initGlDropdown() {\n    this.$dropdown.glDropdown({\n      opened: () => {\n        const calendar = this.$datePicker.data('pikaday');\n        calendar.show();\n      },\n      hidden: () => {\n        this.$selectbox.hide();\n        this.$value.css('display', '');\n      },\n    });\n  }\n\n  initDatePicker() {\n    const $dueDateInput = $(`input[name='${this.fieldName}']`);\n    const calendar = new Pikaday({\n      field: $dueDateInput.get(0),\n      theme: 'gitlab-theme',\n      format: 'yyyy-mm-dd',\n      parse: dateString => parsePikadayDate(dateString),\n      toString: date => pikadayToString(date),\n      onSelect: dateText => {\n        $dueDateInput.val(calendar.toString(dateText));\n\n        if (this.$dropdown.hasClass('js-issue-boards-due-date')) {\n          gl.issueBoards.BoardsStore.detail.issue.dueDate = $dueDateInput.val();\n          this.updateIssueBoardIssue();\n        } else {\n          this.saveDueDate(true);\n        }\n      },\n    });\n\n    calendar.setDate(parsePikadayDate($dueDateInput.val()));\n    this.$datePicker.append(calendar.el);\n    this.$datePicker.data('pikaday', calendar);\n  }\n\n  initRemoveDueDate() {\n    this.$block.on('click', '.js-remove-due-date', e => {\n      const calendar = this.$datePicker.data('pikaday');\n      e.preventDefault();\n\n      calendar.setDate(null);\n\n      if (this.$dropdown.hasClass('js-issue-boards-due-date')) {\n        gl.issueBoards.BoardsStore.detail.issue.dueDate = '';\n        this.updateIssueBoardIssue();\n      } else {\n        $(`input[name='${this.fieldName}']`).val('');\n        this.saveDueDate(false);\n      }\n    });\n  }\n\n  saveDueDate(isDropdown) {\n    this.parseSelectedDate();\n    this.prepSelectedDate();\n    this.submitSelectedDate(isDropdown);\n  }\n\n  parseSelectedDate() {\n    this.rawSelectedDate = $(`input[name='${this.fieldName}']`).val();\n\n    if (this.rawSelectedDate.length) {\n      // Construct Date object manually to avoid buggy dateString support within Date constructor\n      const dateArray = this.rawSelectedDate.split('-').map(v => parseInt(v, 10));\n      const dateObj = new Date(dateArray[0], dateArray[1] - 1, dateArray[2]);\n      this.displayedDate = dateFormat(dateObj, 'mmm d, yyyy');\n    } else {\n      this.displayedDate = 'No due date';\n    }\n  }\n\n  prepSelectedDate() {\n    const datePayload = {};\n    datePayload[this.abilityName] = {};\n    datePayload[this.abilityName].due_date = this.rawSelectedDate;\n    this.datePayload = datePayload;\n  }\n\n  updateIssueBoardIssue() {\n    this.$loading.fadeIn();\n    this.$dropdown.trigger('loading.gl.dropdown');\n    this.$selectbox.hide();\n    this.$value.css('display', '');\n    const fadeOutLoader = () => {\n      this.$loading.fadeOut();\n    };\n\n    gl.issueBoards.BoardsStore.detail.issue\n      .update(this.$dropdown.attr('data-issue-update'))\n      .then(fadeOutLoader)\n      .catch(fadeOutLoader);\n  }\n\n  submitSelectedDate(isDropdown) {\n    const selectedDateValue = this.datePayload[this.abilityName].due_date;\n    const hasDueDate = this.displayedDate !== 'No due date';\n    const displayedDateStyle = hasDueDate ? 'bold' : 'no-value';\n\n    this.$loading.removeClass('hidden').fadeIn();\n\n    if (isDropdown) {\n      this.$dropdown.trigger('loading.gl.dropdown');\n      this.$selectbox.hide();\n    }\n\n    this.$value.css('display', '');\n    this.$valueContent.html(`<span class='${displayedDateStyle}'>${this.displayedDate}</span>`);\n    this.$sidebarValue.html(this.displayedDate);\n\n    $('.js-remove-due-date-holder').toggleClass('hidden', selectedDateValue.length);\n\n    return axios.put(this.issueUpdateURL, this.datePayload).then(() => {\n      const tooltipText = hasDueDate\n        ? `${__('Due date')}<br />${selectedDateValue} (${timeFor(selectedDateValue)})`\n        : __('Due date');\n      if (isDropdown) {\n        this.$dropdown.trigger('loaded.gl.dropdown');\n        this.$dropdown.dropdown('toggle');\n      }\n      this.$sidebarCollapsedValue.attr('data-original-title', tooltipText);\n\n      return this.$loading.fadeOut();\n    });\n  }\n}\n\nexport default class DueDateSelectors {\n  constructor() {\n    this.initMilestoneDatePicker();\n    this.initIssuableSelect();\n  }\n  // eslint-disable-next-line class-methods-use-this\n  initMilestoneDatePicker() {\n    $('.datepicker').each(function initPikadayMilestone() {\n      const $datePicker = $(this);\n      const datePickerVal = $datePicker.val();\n\n      const calendar = new Pikaday({\n        field: $datePicker.get(0),\n        theme: 'gitlab-theme animate-picker',\n        format: 'yyyy-mm-dd',\n        container: $datePicker.parent().get(0),\n        parse: dateString => parsePikadayDate(dateString),\n        toString: date => pikadayToString(date),\n        onSelect(dateText) {\n          $datePicker.val(calendar.toString(dateText));\n        },\n      });\n\n      calendar.setDate(parsePikadayDate(datePickerVal));\n\n      $datePicker.data('pikaday', calendar);\n    });\n\n    $('.js-clear-due-date,.js-clear-start-date').on('click', e => {\n      e.preventDefault();\n      const calendar = $(e.target)\n        .siblings('.datepicker')\n        .data('pikaday');\n      calendar.setDate(null);\n    });\n  }\n  // eslint-disable-next-line class-methods-use-this\n  initIssuableSelect() {\n    const $loading = $('.js-issuable-update .due_date')\n      .find('.block-loading')\n      .hide();\n\n    $('.js-due-date-select').each((i, dropdown) => {\n      const $dropdown = $(dropdown);\n      // eslint-disable-next-line no-new\n      new DueDateSelect({\n        $dropdown,\n        $loading,\n      });\n    });\n  }\n}\n","import initForm from '../../../../shared/milestones/form';\n\ndocument.addEventListener('DOMContentLoaded', () => initForm(false));\n","import $ from 'jquery';\nimport ZenMode from '../../zen_mode';\nimport DueDateSelectors from '../../due_date_select';\nimport GLForm from '../../gl_form';\n\nexport default (initGFM = true) => {\n  new ZenMode(); // eslint-disable-line no-new\n  new DueDateSelectors(); // eslint-disable-line no-new\n  // eslint-disable-next-line no-new\n  new GLForm($('.milestone-form'), {\n    emojis: true,\n    members: initGFM,\n    issues: initGFM,\n    mergeRequests: initGFM,\n    epics: initGFM,\n    milestones: initGFM,\n    labels: initGFM,\n  });\n};\n","import $ from 'jquery';\nimport Dropzone from 'dropzone';\nimport _ from 'underscore';\nimport './preview_markdown';\nimport csrf from './lib/utils/csrf';\nimport axios from './lib/utils/axios_utils';\n\nDropzone.autoDiscover = false;\n\nexport default function dropzoneInput(form) {\n  const divHover = '<div class=\"div-dropzone-hover\"></div>';\n  const iconPaperclip = '<i class=\"fa fa-paperclip div-dropzone-icon\"></i>';\n  const $attachButton = form.find('.button-attach-file');\n  const $attachingFileMessage = form.find('.attaching-file-message');\n  const $cancelButton = form.find('.button-cancel-uploading-files');\n  const $retryLink = form.find('.retry-uploading-link');\n  const $uploadProgress = form.find('.uploading-progress');\n  const $uploadingErrorContainer = form.find('.uploading-error-container');\n  const $uploadingErrorMessage = form.find('.uploading-error-message');\n  const $uploadingProgressContainer = form.find('.uploading-progress-container');\n  const uploadsPath = window.uploads_path || null;\n  const maxFileSize = gon.max_file_size || 10;\n  const formTextarea = form.find('.js-gfm-input');\n  let handlePaste;\n  let pasteText;\n  let addFileToForm;\n  let updateAttachingMessage;\n  let isImage;\n  let getFilename;\n  let uploadFile;\n\n  formTextarea.wrap('<div class=\"div-dropzone\"></div>');\n  formTextarea.on('paste', event => handlePaste(event));\n\n  // Add dropzone area to the form.\n  const $mdArea = formTextarea.closest('.md-area');\n  form.setupMarkdownPreview();\n  const $formDropzone = form.find('.div-dropzone');\n  $formDropzone.parent().addClass('div-dropzone-wrapper');\n  $formDropzone.append(divHover);\n  $formDropzone.find('.div-dropzone-hover').append(iconPaperclip);\n\n  if (!uploadsPath) {\n    $formDropzone.addClass('js-invalid-dropzone');\n    return;\n  }\n\n  const dropzone = $formDropzone.dropzone({\n    url: uploadsPath,\n    dictDefaultMessage: '',\n    clickable: true,\n    paramName: 'file',\n    maxFilesize: maxFileSize,\n    uploadMultiple: false,\n    headers: csrf.headers,\n    previewContainer: false,\n    processing: () => $('.div-dropzone-alert').alert('close'),\n    dragover: () => {\n      $mdArea.addClass('is-dropzone-hover');\n      form.find('.div-dropzone-hover').css('opacity', 0.7);\n    },\n    dragleave: () => {\n      $mdArea.removeClass('is-dropzone-hover');\n      form.find('.div-dropzone-hover').css('opacity', 0);\n    },\n    drop: () => {\n      $mdArea.removeClass('is-dropzone-hover');\n      form.find('.div-dropzone-hover').css('opacity', 0);\n      formTextarea.focus();\n    },\n    success(header, response) {\n      const processingFileCount = this.getQueuedFiles().length + this.getUploadingFiles().length;\n      const shouldPad = processingFileCount >= 1;\n\n      pasteText(response.link.markdown, shouldPad);\n      // Show 'Attach a file' link only when all files have been uploaded.\n      if (!processingFileCount) $attachButton.removeClass('hide');\n      addFileToForm(response.link.url);\n    },\n    error: (file, errorMessage = 'Attaching the file failed.', xhr) => {\n      // If 'error' event is fired by dropzone, the second parameter is error message.\n      // If the 'errorMessage' parameter is empty, the default error message is set.\n      // If the 'error' event is fired by backend (xhr) error response, the third parameter is\n      // xhr object (xhr.responseText is error message).\n      // On error we hide the 'Attach' and 'Cancel' buttons\n      // and show an error.\n\n      // If there's xhr error message, let's show it instead of dropzone's one.\n      const message = xhr ? xhr.responseText : errorMessage;\n\n      $uploadingErrorContainer.removeClass('hide');\n      $uploadingErrorMessage.html(message);\n      $attachButton.addClass('hide');\n      $cancelButton.addClass('hide');\n    },\n    totaluploadprogress(totalUploadProgress) {\n      updateAttachingMessage(this.files, $attachingFileMessage);\n      $uploadProgress.text(`${Math.round(totalUploadProgress)}%`);\n    },\n    sending: () => {\n      // DOM elements already exist.\n      // Instead of dynamically generating them,\n      // we just either hide or show them.\n      $attachButton.addClass('hide');\n      $uploadingErrorContainer.addClass('hide');\n      $uploadingProgressContainer.removeClass('hide');\n      $cancelButton.removeClass('hide');\n    },\n    removedfile: () => {\n      $attachButton.removeClass('hide');\n      $cancelButton.addClass('hide');\n      $uploadingProgressContainer.addClass('hide');\n      $uploadingErrorContainer.addClass('hide');\n    },\n    queuecomplete: () => {\n      $('.dz-preview').remove();\n      $('.markdown-area').trigger('input');\n\n      $uploadingProgressContainer.addClass('hide');\n      $cancelButton.addClass('hide');\n    },\n  });\n\n  const child = $(dropzone[0]).children('textarea');\n\n  // removeAllFiles(true) stops uploading files (if any)\n  // and remove them from dropzone files queue.\n  $cancelButton.on('click', (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    Dropzone.forElement($formDropzone.get(0)).removeAllFiles(true);\n  });\n\n  // If 'error' event is fired, we store a failed files,\n  // clear dropzone files queue, change status of failed files to undefined,\n  // and add that files to the dropzone files queue again.\n  // addFile() adds file to dropzone files queue and upload it.\n  $retryLink.on('click', (e) => {\n    const dropzoneInstance = Dropzone.forElement(e.target.closest('.js-main-target-form').querySelector('.div-dropzone'));\n    const failedFiles = dropzoneInstance.files;\n\n    e.preventDefault();\n\n    // 'true' parameter of removeAllFiles() cancels\n    // uploading of files that are being uploaded at the moment.\n    dropzoneInstance.removeAllFiles(true);\n\n    failedFiles.map((failedFile) => {\n      const file = failedFile;\n\n      if (file.status === Dropzone.ERROR) {\n        file.status = undefined;\n        file.accepted = undefined;\n      }\n\n      return dropzoneInstance.addFile(file);\n    });\n  });\n  // eslint-disable-next-line consistent-return\n  handlePaste = (event) => {\n    const pasteEvent = event.originalEvent;\n    if (pasteEvent.clipboardData && pasteEvent.clipboardData.items) {\n      const image = isImage(pasteEvent);\n      if (image) {\n        event.preventDefault();\n        const filename = getFilename(pasteEvent) || 'image.png';\n        const text = `{{${filename}}}`;\n        pasteText(text);\n        return uploadFile(image.getAsFile(), filename);\n      }\n    }\n  };\n\n  isImage = (data) => {\n    let i = 0;\n    while (i < data.clipboardData.items.length) {\n      const item = data.clipboardData.items[i];\n      if (item.type.indexOf('image') !== -1) {\n        return item;\n      }\n      i += 1;\n    }\n    return false;\n  };\n\n  pasteText = (text, shouldPad) => {\n    let formattedText = text;\n    if (shouldPad) {\n      formattedText += '\\n\\n';\n    }\n    const textarea = child.get(0);\n    const caretStart = textarea.selectionStart;\n    const caretEnd = textarea.selectionEnd;\n    const textEnd = $(child).val().length;\n    const beforeSelection = $(child).val().substring(0, caretStart);\n    const afterSelection = $(child).val().substring(caretEnd, textEnd);\n    $(child).val(beforeSelection + formattedText + afterSelection);\n    textarea.setSelectionRange(caretStart + formattedText.length, caretEnd + formattedText.length);\n    textarea.style.height = `${textarea.scrollHeight}px`;\n    formTextarea.get(0).dispatchEvent(new Event('input'));\n    return formTextarea.trigger('input');\n  };\n\n  addFileToForm = (path) => {\n    $(form).append(`<input type=\"hidden\" name=\"files[]\" value=\"${_.escape(path)}\">`);\n  };\n\n  getFilename = (e) => {\n    let value;\n    if (window.clipboardData && window.clipboardData.getData) {\n      value = window.clipboardData.getData('Text');\n    } else if (e.clipboardData && e.clipboardData.getData) {\n      value = e.clipboardData.getData('text/plain');\n    }\n    value = value.split('\\r');\n    return value[0];\n  };\n\n  const showSpinner = () => $uploadingProgressContainer.removeClass('hide');\n\n  const closeSpinner = () => $uploadingProgressContainer.addClass('hide');\n\n  const showError = (message) => {\n    $uploadingErrorContainer.removeClass('hide');\n    $uploadingErrorMessage.html(message);\n  };\n\n  const closeAlertMessage = () => form.find('.div-dropzone-alert').alert('close');\n\n  const insertToTextArea = (filename, url) => {\n    const $child = $(child);\n    $child.val((index, val) => val.replace(`{{${filename}}}`, url));\n\n    $child.trigger('change');\n  };\n\n  uploadFile = (item, filename) => {\n    const formData = new FormData();\n    formData.append('file', item, filename);\n\n    showSpinner();\n    closeAlertMessage();\n\n    axios.post(uploadsPath, formData)\n      .then(({ data }) => {\n        const md = data.link.markdown;\n\n        insertToTextArea(filename, md);\n        closeSpinner();\n      })\n      .catch((e) => {\n        showError(e.response.data.message);\n        closeSpinner();\n      });\n  };\n\n  updateAttachingMessage = (files, messageContainer) => {\n    let attachingMessage;\n    const filesCount = files.filter(file => file.status === 'uploading' || file.status === 'queued').length;\n\n    // Dinamycally change uploading files text depending on files number in\n    // dropzone files queue.\n    if (filesCount > 1) {\n      attachingMessage = `Attaching ${filesCount} files -`;\n    } else {\n      attachingMessage = 'Attaching a file -';\n    }\n\n    messageContainer.text(attachingMessage);\n  };\n\n  form.find('.markdown-selector').click(function onMarkdownClick(e) {\n    e.preventDefault();\n    $(this).closest('.gfm-form').find('.div-dropzone').click();\n    formTextarea.focus();\n  });\n}\n","/* eslint-disable func-names, no-var, no-param-reassign, quotes, one-var, one-var-declaration-per-line, operator-assignment, no-else-return, prefer-template, prefer-arrow-callback, max-len, consistent-return, no-unused-vars, max-len */\nimport $ from 'jquery';\nimport { insertText } from '~/lib/utils/common_utils';\n\nfunction selectedText(text, textarea) {\n  return text.substring(textarea.selectionStart, textarea.selectionEnd);\n}\n\nfunction lineBefore(text, textarea) {\n  var split;\n  split = text.substring(0, textarea.selectionStart).trim().split('\\n');\n  return split[split.length - 1];\n}\n\nfunction lineAfter(text, textarea) {\n  return text.substring(textarea.selectionEnd).trim().split('\\n')[0];\n}\n\nfunction blockTagText(text, textArea, blockTag, selected) {\n  const before = lineBefore(text, textArea);\n  const after = lineAfter(text, textArea);\n  if (before === blockTag && after === blockTag) {\n    // To remove the block tag we have to select the line before & after\n    if (blockTag != null) {\n      textArea.selectionStart = textArea.selectionStart - (blockTag.length + 1);\n      textArea.selectionEnd = textArea.selectionEnd + (blockTag.length + 1);\n    }\n    return selected;\n  } else {\n    return blockTag + \"\\n\" + selected + \"\\n\" + blockTag;\n  }\n}\n\nfunction moveCursor(textArea, tag, wrapped, removedLastNewLine) {\n  var pos;\n  if (!textArea.setSelectionRange) {\n    return;\n  }\n  if (textArea.selectionStart === textArea.selectionEnd) {\n    if (wrapped) {\n      pos = textArea.selectionStart - tag.length;\n    } else {\n      pos = textArea.selectionStart;\n    }\n\n    if (removedLastNewLine) {\n      pos -= 1;\n    }\n\n    return textArea.setSelectionRange(pos, pos);\n  }\n}\n\nexport function insertMarkdownText(textArea, text, tag, blockTag, selected, wrap) {\n  var textToInsert, inserted, selectedSplit, startChar, removedLastNewLine, removedFirstNewLine, currentLineEmpty, lastNewLine;\n  removedLastNewLine = false;\n  removedFirstNewLine = false;\n  currentLineEmpty = false;\n\n  // Remove the first newline\n  if (selected.indexOf('\\n') === 0) {\n    removedFirstNewLine = true;\n    selected = selected.replace(/\\n+/, '');\n  }\n\n  // Remove the last newline\n  if (textArea.selectionEnd - textArea.selectionStart > selected.replace(/\\n$/, '').length) {\n    removedLastNewLine = true;\n    selected = selected.replace(/\\n$/, '');\n  }\n\n  selectedSplit = selected.split('\\n');\n\n  if (!wrap) {\n    lastNewLine = textArea.value.substr(0, textArea.selectionStart).lastIndexOf('\\n');\n\n    // Check whether the current line is empty or consists only of spaces(=handle as empty)\n    if (/^\\s*$/.test(textArea.value.substring(lastNewLine, textArea.selectionStart))) {\n      currentLineEmpty = true;\n    }\n  }\n\n  startChar = !wrap && !currentLineEmpty && textArea.selectionStart > 0 ? '\\n' : '';\n\n  if (selectedSplit.length > 1 && (!wrap || (blockTag != null && blockTag !== ''))) {\n    if (blockTag != null && blockTag !== '') {\n      textToInsert = blockTagText(text, textArea, blockTag, selected);\n    } else {\n      textToInsert = selectedSplit.map(function(val) {\n        if (val.indexOf(tag) === 0) {\n          return \"\" + (val.replace(tag, ''));\n        } else {\n          return \"\" + tag + val;\n        }\n      }).join('\\n');\n    }\n  } else {\n    textToInsert = \"\" + startChar + tag + selected + (wrap ? tag : ' ');\n  }\n\n  if (removedFirstNewLine) {\n    textToInsert = '\\n' + textToInsert;\n  }\n\n  if (removedLastNewLine) {\n    textToInsert += '\\n';\n  }\n\n  insertText(textArea, textToInsert);\n  return moveCursor(textArea, tag, wrap, removedLastNewLine);\n}\n\nfunction updateText(textArea, tag, blockTag, wrap) {\n  var $textArea, selected, text;\n  $textArea = $(textArea);\n  textArea = $textArea.get(0);\n  text = $textArea.val();\n  selected = selectedText(text, textArea);\n  $textArea.focus();\n  return insertMarkdownText(textArea, text, tag, blockTag, selected, wrap);\n}\n\nfunction replaceRange(s, start, end, substitute) {\n  return s.substring(0, start) + substitute + s.substring(end);\n}\n\nexport function addMarkdownListeners(form) {\n  return $('.js-md', form).off('click').on('click', function() {\n    const $this = $(this);\n    return updateText($this.closest('.md-area').find('textarea'), $this.data('mdTag'), $this.data('mdBlock'), !$this.data('mdPrepend'));\n  });\n}\n\nexport function removeMarkdownListeners(form) {\n  return $('.js-md', form).off('click');\n}\n","import $ from 'jquery';\nimport autosize from 'autosize';\nimport GfmAutoComplete, * as GFMConfig from './gfm_auto_complete';\nimport dropzoneInput from './dropzone_input';\nimport { addMarkdownListeners, removeMarkdownListeners } from './lib/utils/text_markdown';\n\nexport default class GLForm {\n  constructor(form, enableGFM = {}) {\n    this.form = form;\n    this.textarea = this.form.find('textarea.js-gfm-input');\n    this.enableGFM = Object.assign({}, GFMConfig.defaultAutocompleteConfig, enableGFM);\n    // Disable autocomplete for keywords which do not have dataSources available\n    const dataSources = (gl.GfmAutoComplete && gl.GfmAutoComplete.dataSources) || {};\n    Object.keys(this.enableGFM).forEach(item => {\n      if (item !== 'emojis') {\n        this.enableGFM[item] = !!dataSources[item];\n      }\n    });\n    // Before we start, we should clean up any previous data for this form\n    this.destroy();\n    // Setup the form\n    this.setupForm();\n    this.form.data('glForm', this);\n  }\n\n  destroy() {\n    // Clean form listeners\n    this.clearEventListeners();\n    if (this.autoComplete) {\n      this.autoComplete.destroy();\n    }\n    this.form.data('glForm', null);\n  }\n\n  setupForm() {\n    const isNewForm = this.form.is(':not(.gfm-form)');\n    this.form.removeClass('js-new-note-form');\n    if (isNewForm) {\n      this.form.find('.div-dropzone').remove();\n      this.form.addClass('gfm-form');\n      // remove notify commit author checkbox for non-commit notes\n      gl.utils.disableButtonIfEmptyField(this.form.find('.js-note-text'), this.form.find('.js-comment-button, .js-note-new-discussion'));\n      this.autoComplete = new GfmAutoComplete(gl.GfmAutoComplete && gl.GfmAutoComplete.dataSources);\n      this.autoComplete.setup(this.form.find('.js-gfm-input'), this.enableGFM);\n      dropzoneInput(this.form);\n      autosize(this.textarea);\n    }\n    // form and textarea event listeners\n    this.addEventListeners();\n    addMarkdownListeners(this.form);\n    // hide discard button\n    this.form.find('.js-note-discard').hide();\n    this.form.show();\n    if (this.isAutosizeable) this.setupAutosize();\n  }\n\n  setupAutosize() {\n    this.textarea.off('autosize:resized')\n      .on('autosize:resized', this.setHeightData.bind(this));\n\n    this.textarea.off('mouseup.autosize')\n      .on('mouseup.autosize', this.destroyAutosize.bind(this));\n\n    setTimeout(() => {\n      autosize(this.textarea);\n      this.textarea.css('resize', 'vertical');\n    }, 0);\n  }\n\n  setHeightData() {\n    this.textarea.data('height', this.textarea.outerHeight());\n  }\n\n  destroyAutosize() {\n    const outerHeight = this.textarea.outerHeight();\n\n    if (this.textarea.data('height') === outerHeight) return;\n\n    autosize.destroy(this.textarea);\n\n    this.textarea.data('height', outerHeight);\n    this.textarea.outerHeight(outerHeight);\n    this.textarea.css('max-height', window.outerHeight);\n  }\n\n  clearEventListeners() {\n    this.textarea.off('focus');\n    this.textarea.off('blur');\n    removeMarkdownListeners(this.form);\n  }\n\n  addEventListeners() {\n    this.textarea.on('focus', function focusTextArea() {\n      $(this).closest('.md-area').addClass('is-focused');\n    });\n    this.textarea.on('blur', function blurTextArea() {\n      $(this).closest('.md-area').removeClass('is-focused');\n    });\n  }\n}\n","/* eslint-disable func-names, wrap-iife, prefer-arrow-callback, no-unused-vars, consistent-return, camelcase, comma-dangle, max-len, class-methods-use-this */\n\n// Zen Mode (full screen) textarea\n//\n/*= provides zen_mode:enter */\n/*= provides zen_mode:leave */\n\nimport $ from 'jquery';\nimport 'vendor/jquery.scrollTo';\nimport Dropzone from 'dropzone';\nimport Mousetrap from 'mousetrap';\nimport 'mousetrap/plugins/pause/mousetrap-pause';\n\nDropzone.autoDiscover = false;\n\n//\n// ### Events\n//\n// `zen_mode:enter`\n//\n// Fired when the \"Edit in fullscreen\" link is clicked.\n//\n// **Synchronicity** Sync\n// **Bubbles** Yes\n// **Cancelable** No\n// **Target** a.js-zen-enter\n//\n// `zen_mode:leave`\n//\n// Fired when the \"Leave Fullscreen\" link is clicked.\n//\n// **Synchronicity** Sync\n// **Bubbles** Yes\n// **Cancelable** No\n// **Target** a.js-zen-leave\n//\n\nexport default class ZenMode {\n  constructor() {\n    this.active_backdrop = null;\n    this.active_textarea = null;\n    $(document).on('click', '.js-zen-enter', function(e) {\n      e.preventDefault();\n      return $(e.currentTarget).trigger('zen_mode:enter');\n    });\n    $(document).on('click', '.js-zen-leave', function(e) {\n      e.preventDefault();\n      return $(e.currentTarget).trigger('zen_mode:leave');\n    });\n    $(document).on('zen_mode:enter', (function(_this) {\n      return function(e) {\n        return _this.enter($(e.target).closest('.md-area').find('.zen-backdrop'));\n      };\n    })(this));\n    $(document).on('zen_mode:leave', (function(_this) {\n      return function(e) {\n        return _this.exit();\n      };\n    })(this));\n    $(document).on('keydown', function(e) {\n      // Esc\n      if (e.keyCode === 27) {\n        e.preventDefault();\n        return $(document).trigger('zen_mode:leave');\n      }\n    });\n  }\n\n  enter(backdrop) {\n    Mousetrap.pause();\n    this.active_backdrop = $(backdrop);\n    this.active_backdrop.addClass('fullscreen');\n    this.active_textarea = this.active_backdrop.find('textarea');\n    // Prevent a user-resized textarea from persisting to fullscreen\n    this.active_textarea.removeAttr('style');\n    this.active_textarea.focus();\n  }\n\n  exit() {\n    if (this.active_textarea) {\n      Mousetrap.unpause();\n      this.active_textarea.closest('.zen-backdrop').removeClass('fullscreen');\n      this.scrollTo(this.active_textarea);\n      this.active_textarea = null;\n      this.active_backdrop = null;\n\n      const $dropzone = $('.div-dropzone');\n      if ($dropzone && !$dropzone.hasClass('js-invalid-dropzone')) {\n        Dropzone.forElement('.div-dropzone').enable();\n      }\n    }\n  }\n\n  scrollTo(zen_area) {\n    return $.scrollTo(zen_area, 0, {\n      offset: -150\n    });\n  }\n}\n","/**\n * adds a pause and unpause method to Mousetrap\n * this allows you to enable or disable keyboard shortcuts\n * without having to reset Mousetrap and rebind everything\n */\n/* global Mousetrap:true */\nMousetrap = (function(Mousetrap) {\n    var self = Mousetrap,\n        _originalStopCallback = self.stopCallback,\n        enabled = true;\n\n    self.stopCallback = function(e, element, combo) {\n        if (!enabled) {\n            return true;\n        }\n\n        return _originalStopCallback(e, element, combo);\n    };\n\n    self.pause = function() {\n        enabled = false;\n    };\n\n    self.unpause = function() {\n        enabled = true;\n    };\n\n    return self;\n}) (Mousetrap);\n"],"sourceRoot":""}