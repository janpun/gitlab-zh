(this.webpackJsonp=this.webpackJsonp||[]).push([[133,7],{103:function(e,t,i){"use strict";var n=i(0),a=i.n(n),s=i(73),r=i.n(s),o=i(111),l=i.n(o),c=i(1),u=i(5),d=i(38),h=i(36),f=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.$dropdown,n=t.$loading;p(this,e);var s=i.closest(".dropdown"),r=i.closest(".block");this.$loading=n,this.$dropdown=i,this.$dropdownParent=s,this.$datePicker=s.find(".js-due-date-calendar"),this.$block=r,this.$sidebarCollapsedValue=r.find(".sidebar-collapsed-icon"),this.$selectbox=i.closest(".selectbox"),this.$value=r.find(".value"),this.$valueContent=r.find(".value-content"),this.$sidebarValue=a()(".js-due-date-sidebar-value",r),this.fieldName=i.data("fieldName"),this.abilityName=i.data("abilityName"),this.issueUpdateURL=i.data("issueUpdate"),this.rawSelectedDate=null,this.displayedDate=null,this.datePayload=null,this.initGlDropdown(),this.initRemoveDueDate(),this.initDatePicker()}return f(e,[{key:"initGlDropdown",value:function(){var e=this;this.$dropdown.glDropdown({opened:function(){e.$datePicker.data("pikaday").show()},hidden:function(){e.$selectbox.hide(),e.$value.css("display","")}})}},{key:"initDatePicker",value:function(){var e=this,t=a()("input[name='"+this.fieldName+"']"),i=new r.a({field:t.get(0),theme:"gitlab-theme",format:"yyyy-mm-dd",parse:function(e){return Object(h.a)(e)},toString:function(e){return Object(h.b)(e)},onSelect:function(n){t.val(i.toString(n)),e.$dropdown.hasClass("js-issue-boards-due-date")?(gl.issueBoards.BoardsStore.detail.issue.dueDate=t.val(),e.updateIssueBoardIssue()):e.saveDueDate(!0)}});i.setDate(Object(h.a)(t.val())),this.$datePicker.append(i.el),this.$datePicker.data("pikaday",i)}},{key:"initRemoveDueDate",value:function(){var e=this;this.$block.on("click",".js-remove-due-date",function(t){var i=e.$datePicker.data("pikaday");t.preventDefault(),i.setDate(null),e.$dropdown.hasClass("js-issue-boards-due-date")?(gl.issueBoards.BoardsStore.detail.issue.dueDate="",e.updateIssueBoardIssue()):(a()("input[name='"+e.fieldName+"']").val(""),e.saveDueDate(!1))})}},{key:"saveDueDate",value:function(e){this.parseSelectedDate(),this.prepSelectedDate(),this.submitSelectedDate(e)}},{key:"parseSelectedDate",value:function(){if(this.rawSelectedDate=a()("input[name='"+this.fieldName+"']").val(),this.rawSelectedDate.length){var e=this.rawSelectedDate.split("-").map(function(e){return parseInt(e,10)}),t=new Date(e[0],e[1]-1,e[2]);this.displayedDate=l()(t,"mmm d, yyyy")}else this.displayedDate="No due date"}},{key:"prepSelectedDate",value:function(){var e={};e[this.abilityName]={},e[this.abilityName].due_date=this.rawSelectedDate,this.datePayload=e}},{key:"updateIssueBoardIssue",value:function(){var e=this;this.$loading.fadeIn(),this.$dropdown.trigger("loading.gl.dropdown"),this.$selectbox.hide(),this.$value.css("display","");var t=function(){e.$loading.fadeOut()};gl.issueBoards.BoardsStore.detail.issue.update(this.$dropdown.attr("data-issue-update")).then(t).catch(t)}},{key:"submitSelectedDate",value:function(e){var t=this,i=this.datePayload[this.abilityName].due_date,n="No due date"!==this.displayedDate,s=n?"bold":"no-value";return this.$loading.removeClass("hidden").fadeIn(),e&&(this.$dropdown.trigger("loading.gl.dropdown"),this.$selectbox.hide()),this.$value.css("display",""),this.$valueContent.html("<span class='"+s+"'>"+this.displayedDate+"</span>"),this.$sidebarValue.html(this.displayedDate),a()(".js-remove-due-date-holder").toggleClass("hidden",i.length),u.a.put(this.issueUpdateURL,this.datePayload).then(function(){var a=n?Object(c.a)("Due date")+"<br />"+i+" ("+Object(d.f)(i)+")":Object(c.a)("Due date");return e&&(t.$dropdown.trigger("loaded.gl.dropdown"),t.$dropdown.dropdown("toggle")),t.$sidebarCollapsedValue.attr("data-original-title",a),t.$loading.fadeOut()})}}]),e}(),g=function(){function e(){p(this,e),this.initMilestoneDatePicker(),this.initIssuableSelect()}return f(e,[{key:"initMilestoneDatePicker",value:function(){a()(".datepicker").each(function(){var e=a()(this),t=e.val(),i=new r.a({field:e.get(0),theme:"gitlab-theme animate-picker",format:"yyyy-mm-dd",container:e.parent().get(0),parse:function(e){return Object(h.a)(e)},toString:function(e){return Object(h.b)(e)},onSelect:function(t){e.val(i.toString(t))}});i.setDate(Object(h.a)(t)),e.data("pikaday",i)}),a()(".js-clear-due-date,.js-clear-start-date").on("click",function(e){e.preventDefault(),a()(e.target).siblings(".datepicker").data("pikaday").setDate(null)})}},{key:"initIssuableSelect",value:function(){var e=a()(".js-issuable-update .due_date").find(".block-loading").hide();a()(".js-due-date-select").each(function(t,i){var n=a()(i);new m({$dropdown:n,$loading:e})})}}]),e}();t.a=g},107:function(e,t,i){"use strict";var n=i(0),a=i.n(n),s=i(3),r=i.n(s),o=i(1),l=i(5),c=i(79),u=i(64),d=i(117),h=i(7),f=i(47),p=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,a=!1,s=void 0;try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(e){a=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var g=function(){function e(t){var i,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,n=a()(t),t||(n=a()(".js-label-select")),n.each(function(t,n){var c,m,g,b,v,y,w,C,_,k,S,j,T,L,O,E,x,D,A,I,$,P;P=(m=a()(n)).closest(".labels-filter"),m.find(".dropdown-toggle-text"),j=m.data("namespacePath"),T=m.data("projectPath"),S=m.data("labels"),k=m.data("issueUpdate"),null==(O=m.data("selected"))||m.hasClass("js-multiselect")||(O=O.split(",")),x=m.data("showNo"),E=m.data("showAny"),$=m.data("showMenuAbove"),_=m.data("defaultLabel")||"Label",C=m.data("abilityName"),c=(v=m.closest(".selectbox")).closest(".block"),g=m.closest("form, .js-issuable-update"),y=c.find(".sidebar-collapsed-icon span"),D=c.find(".js-sidebar-labels-tooltip"),w=c.find(".value"),b=c.find(".block-loading").fadeOut(),I=m.data("fieldName"),m.is(".js-issuable-form-dropdown, .js-filter-bulk-update, .js-label-sidebar-dropdown"),A=v.find('input[name="'+m.data("fieldName")+'"]').map(function(){return this.value}).get();var F=s.handleClick;D.tooltip(),m.closest(".dropdown").find(".dropdown-new-label").length&&new d.a(m.closest(".dropdown").find(".dropdown-new-label"),j,T),L=function(){var t,i;i=m.closest(".selectbox").find("input[name='"+I+"']").map(function(){return this.value}).get(),r.a.isEqual(A,i)||(A=i,(t={})[C]={},t[C].label_ids=i,i.length||(t[C].label_ids=[""]),b.removeClass("hidden").fadeIn(),m.trigger("loading.gl.dropdown"),l.a.put(k,t).then(function(t){var i,n,s,r,l=t.data;b.fadeOut(),m.trigger("loaded.gl.dropdown"),v.hide(),l.issueUpdateURL=k,i=0,l.labels.length&&k?(n=e.getLabelTemplate({labels:l.labels,issueUpdateURL:k}),i=l.labels.length):n='<span class="no-value">None</span>',w.removeAttr("style").html(n),y.text(i),l.labels.length?((r=l.labels.map(function(e){return e.title})).length>5&&(r=r.slice(0,5)).push("and "+(l.labels.length-5)+" more"),s=r.join(", ")):s=Object(o.a)("Labels"),D.attr("title",s).tooltip("_fixTitle"),a()(".has-tooltip",w).tooltip({container:"body"})}).catch(function(){return Object(h.a)(Object(o.a)("Error saving label update."))}))},m.glDropdown({showMenuAbove:$,data:function(e,t){l.a.get(S).then(function(e){var i=r.a.chain(e.data).groupBy(function(e){return e.title}).map(function(e){var t;return t=r.a.map(e,function(e){return e.color}),{id:e[0].id,title:e[0].title,color:t,duplicate:t.length>1}}).value();if(m.hasClass("js-extra-options")){var n=[];x&&n.unshift({id:0,title:"No Label"}),E&&n.unshift({isAny:!0,title:"Any Label"}),n.length&&(n.push("divider"),i=n.concat(i))}t(i),$&&m.data("glDropdown").positionMenuAbove()}).catch(function(){return Object(h.a)(Object(o.a)("Error fetching labels."))})},renderRow:function(e,t){var i,n,s,o,l,c,d,h,f,b,v;(n=a()("<li>"),i=a()('<a href="#">'),d=[],c=e.id<=0||null==e.id,m.hasClass("js-filter-bulk-update")?(l=m.data("indeterminate")||[],f=m.data("marked")||[],-1!==l.indexOf(e.id)&&d.push("is-indeterminate"),-1!==f.indexOf(e.id)&&(-1!==(h=d.indexOf("is-indeterminate"))&&d.splice(h,1),d.push("is-active"))):(this.id(e)&&(b=m.data("fieldName"),v=this.id(e).toString().replace(/'/g,"\\'"),g.find("input[type='hidden'][name='"+b+"'][value='"+v+"']").length&&d.push("is-active")),m.hasClass("js-multiselect")&&c&&d.push("dropdown-clear-active")),e.duplicate)?s=u.a.duplicateLabelColor(e.color):null!=e.color&&(s=p(e.color,1)[0]);return o=s?"<span class='dropdown-label-box' style='background: "+s+"'></span>":"",e.id&&(d.push("label-item"),i.attr("data-label-id",e.id)),i.addClass(d.join(" ")).html(o+" "+r.a.escape(e.title)),n.html(i).prop("outerHTML")},search:{fields:["title"]},selectable:!0,filterable:!0,selected:m.data("selected")||[],toggleLabel:function(e,t){var i=m.parent(),n=i.find(".dropdown-input-field"),a=null!==t&&t.hasClass("is-active"),s=e?e.title:null,r=this.selected;if(n.length&&n.val().length&&i.find(".dropdown-input-clear").trigger("click"),e&&0===e.id)return this.selected=[],"No Label";if(a)this.selected.push(s);else if(!a&&s){var o=this.selected.indexOf(s);this.selected.splice(o,1)}return 1===r.length?r:r.length?r[0]+" +"+(r.length-1)+" more":_},fieldName:m.data("fieldName"),id:function(e){return e.id<=0?e.title:m.hasClass("js-issuable-form-dropdown")?e.id:m.hasClass("js-filter-submit")&&null==e.isAny?e.title:e.id},hidden:function(){var e,t,i;e="projects:issues:index"===(i=a()("body").attr("data-page")),t="projects:merge_requests:index"===i,v.hide(),w.removeAttr("style"),m.hasClass("js-issuable-form-dropdown")||a()("html").hasClass("issue-boards-page")||m.hasClass("js-multiselect")&&(m.hasClass("js-filter-submit")&&(e||t)?(m.closest("form").find("input:hidden[name='"+m.data("fieldName")+"']"),Issuable.filterResults(m.closest("form"))):m.hasClass("js-filter-submit")?m.closest("form").submit():m.hasClass("js-filter-bulk-update")||L())},multiSelect:m.hasClass("js-multiselect"),vue:m.hasClass("js-issue-board-sidebar"),clicked:function(e){var t,n,s,r,o=e.$el,l=e.e,c=e.isMarking,u=e.selectedObj,d=function(){b.fadeOut()};if(t="projects:issues:index"===(s=a()("body").attr("data-page")),n="projects:merge_requests:index"===s,m.parent().find(".is-active:not(.dropdown-clear-active)").length&&m.parent().find(".dropdown-clear-active").removeClass("is-active"),!m.hasClass("js-issuable-form-dropdown")){if(m.hasClass("js-filter-bulk-update"))return i.enableBulkLabelDropdown(),void i.setDropdownData(m,c,u.id);if(m.closest(".add-issues-modal").length&&(r=f.a.store.filter),r)return u.isAny?r.label_name=[]:o.hasClass("is-active")&&r.label_name.push(u.title),void l.preventDefault();if(m.hasClass("js-filter-submit")&&(t||n)){if(!m.hasClass("js-multiselect"))return O=u.title,Issuable.filterResults(m.closest("form"))}else{if(m.hasClass("js-filter-submit"))return m.closest("form").submit();if(m.hasClass("js-issue-board-sidebar")){if(o.hasClass("is-active"))gl.issueBoards.BoardsStore.detail.issue.labels.push(new ListLabel({id:u.id,title:u.title,color:u.color[0],textColor:"#fff"}));else{var h=gl.issueBoards.BoardsStore.detail.issue.labels;h=h.filter(function(e){return e.id!==u.id}),gl.issueBoards.BoardsStore.detail.issue.labels=h}b.fadeIn(),gl.issueBoards.BoardsStore.detail.issue.update(m.attr("data-issue-update")).then(d).catch(d)}else if(F)l.preventDefault(),F(u);else if(!m.hasClass("js-multiselect"))return L()}}},opened:function(e){if(m.hasClass("js-issue-board-sidebar")){var t=m.attr("data-selected");this.selected=t?t.split(","):[],m.data("glDropdown").updateLabel()}},preserveContext:!0}),i.setOriginalDropdownData(P,m)}),this.bindEvents()}return m(e,[{key:"bindEvents",value:function(){return a()("body").on("change",".selected_issue",this.onSelectCheckboxIssue)}},{key:"onSelectCheckboxIssue",value:function(){if(!a()(".selected_issue:checked").length)return a()(".issues-bulk-update .labels-filter .dropdown-toggle-text").text("Label")}},{key:"enableBulkLabelDropdown",value:function(){c.a.willUpdateLabels=!0}},{key:"setDropdownData",value:function(e,t,i){var n,a,s,r;a=e.data("marked")||[],s=e.data("unmarked")||[],r=e.data("indeterminate")||[],t?(a.push(i),(n=r.indexOf(i))>-1&&r.splice(n,1),(n=s.indexOf(i))>-1&&s.splice(n,1)):((n=a.indexOf(i))>-1&&a.splice(n,1),c.a.getOriginalIndeterminateIds().indexOf(i)>-1&&s.push(i),c.a.getOriginalCommonIds().indexOf(i)>-1&&s.push(i)),e.data("marked",a),e.data("unmarked",s),e.data("indeterminate",r)}},{key:"setOriginalDropdownData",value:function(e,t){var i=[];e.find('[name="label_name[]"]').map(function(){return i.push(this.value)}),t.data("marked",i)}}],[{key:"getLabelTemplate",value:function(e){return r.a.template(["<% _.each(labels, function(label){ %>",'<a href="<%- issueUpdateURL.slice(0, issueUpdateURL.lastIndexOf("/")) %>?label_name[]=<%- encodeURIComponent(label.title) %>">','<span class="badge label has-tooltip color-label" title="<%- label.description %>" style="background-color: <%- label.color %>; color: <%- label.text_color %>;">',"<%- label.title %>","</span>","</a>","<% }); %>"].join(""))(e)}}]),e}();t.a=g},117:function(e,t,i){"use strict";var n=i(0),a=i.n(n),s=i(33),r=i(45),o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var l=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$el=t,this.namespacePath=i,this.projectPath=n,this.$dropdownBack=a()(".dropdown-menu-back",this.$el.closest(".dropdown")),this.$cancelButton=a()(".js-cancel-label-btn",this.$el),this.$newLabelField=a()("#new_label_name",this.$el),this.$newColorField=a()("#new_label_color",this.$el),this.$colorPreview=a()(".js-dropdown-label-color-preview",this.$el),this.$newLabelError=a()(".js-label-error",this.$el),this.$newLabelCreateButton=a()(".js-new-label-btn",this.$el),this.$colorSuggestions=a()(".suggest-colors-dropdown a",this.$el),this.$newLabelError.hide(),this.$newLabelCreateButton.disable(),this.cleanBinding(),this.addBinding()}return o(e,[{key:"cleanBinding",value:function(){this.$colorSuggestions.off("click"),this.$newLabelField.off("keyup change"),this.$newColorField.off("keyup change"),this.$dropdownBack.off("click"),this.$cancelButton.off("click"),this.$newLabelCreateButton.off("click")}},{key:"addBinding",value:function(){var e=this;this.$colorSuggestions.on("click",function(t){var i=a()(this);e.addColorValue(t,i)}),this.$newLabelField.on("keyup change",this.enableLabelCreateButton.bind(this)),this.$newColorField.on("keyup change",this.enableLabelCreateButton.bind(this)),this.$dropdownBack.on("click",this.resetForm.bind(this)),this.$cancelButton.on("click",function(t){t.preventDefault(),t.stopPropagation(),e.resetForm(),e.$dropdownBack.trigger("click")}),this.$newLabelCreateButton.on("click",this.saveLabel.bind(this))}},{key:"addColorValue",value:function(e,t){e.preventDefault(),e.stopPropagation(),this.$newColorField.val(t.data("color")).trigger("change"),this.$colorPreview.css("background-color",t.data("color")).parent().addClass("is-active")}},{key:"enableLabelCreateButton",value:function(){""!==this.$newLabelField.val()&&""!==this.$newColorField.val()?(this.$newLabelError.hide(),this.$newLabelCreateButton.enable()):this.$newLabelCreateButton.disable()}},{key:"resetForm",value:function(){this.$newLabelField.val("").trigger("change"),this.$newColorField.val("").trigger("change"),this.$colorPreview.css("background-color","").parent().removeClass("is-active")}},{key:"saveLabel",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),s.a.newLabel(this.namespacePath,this.projectPath,{title:this.$newLabelField.val(),color:this.$newColorField.val()},function(e){if(t.$newLabelCreateButton.enable(),e.message){var i=void 0;i="string"==typeof e.message?e.message:Object.keys(e.message).map(function(t){return Object(r.h)(t)+" "+e.message[t].join(", ")}).join("<br/>"),t.$newLabelError.html(i).show()}else t.$dropdownBack.trigger("click"),a()(document).trigger("created.label",e)})}}]),e}();t.a=l},12:function(e,t,i){"use strict";var n=i(0),a=i.n(n);t.a={bind:function(e){a()(e).tooltip({trigger:"hover"})},componentUpdated:function(e){a()(e).tooltip("_fixTitle")},unbind:function(e){a()(e).tooltip("dispose")}}},145:function(e,t,i){"use strict";var n=i(0),a=i.n(n),s=i(3),r=i.n(s),o=i(39),l=i.n(o),c=i(7),u=i(5),d=i(1);function h(e){this.toggleTodo=this.toggleTodo.bind(this),this.sidebar=a()("aside"),this.removeListeners(),this.addEventListeners()}h.initialize=function(e){this.instance||(this.instance=new h(e))},h.prototype.removeListeners=function(){this.sidebar.off("click",".sidebar-collapsed-icon"),this.sidebar.off("hidden.gl.dropdown"),a()(".dropdown").off("loading.gl.dropdown"),a()(".dropdown").off("loaded.gl.dropdown"),a()(document).off("click",".js-sidebar-toggle")},h.prototype.addEventListeners=function(){var e=a()(document);return this.sidebar.on("click",".sidebar-collapsed-icon",this,this.sidebarCollapseClicked),this.sidebar.on("hidden.gl.dropdown",this,this.onSidebarDropdownHidden),a()(".dropdown").on("loading.gl.dropdown",this.sidebarDropdownLoading),a()(".dropdown").on("loaded.gl.dropdown",this.sidebarDropdownLoaded),e.on("click",".js-sidebar-toggle",this.sidebarToggleClicked),a()(document).off("click",".js-issuable-todo").on("click",".js-issuable-todo",this.toggleTodo)},h.prototype.sidebarToggleClicked=function(e,t){var i,n,s,r;e.preventDefault(),r=(s=(n=a()(this)).find("i").hasClass("fa-angle-double-right"))?Object(d.a)("Expand sidebar"):Object(d.a)("Collapse sidebar"),i=a()(".js-sidebar-toggle i"),s?(i.removeClass("fa-angle-double-right").addClass("fa-angle-double-left"),a()("aside.right-sidebar").removeClass("right-sidebar-expanded").addClass("right-sidebar-collapsed"),a()(".layout-page").removeClass("right-sidebar-expanded").addClass("right-sidebar-collapsed")):(i.removeClass("fa-angle-double-left").addClass("fa-angle-double-right"),a()("aside.right-sidebar").removeClass("right-sidebar-collapsed").addClass("right-sidebar-expanded"),a()(".layout-page").removeClass("right-sidebar-collapsed").addClass("right-sidebar-expanded"),gl.lazyLoader&&gl.lazyLoader.loadCheck()),n.attr("data-original-title",r),t||l.a.set("collapsed_gutter",a()(".right-sidebar").hasClass("right-sidebar-collapsed"))},h.prototype.toggleTodo=function(e){var t,i,n,s=this;t=a()(e.currentTarget),i=t.attr("data-delete-path")?"delete":"post",n=t.attr("data-delete-path")?""+t.attr("data-delete-path"):""+t.data("url"),t.tooltip("hide"),a()(".js-issuable-todo").disable().addClass("is-loading"),u.a[i](n,{issuable_id:t.data("issuableId"),issuable_type:t.data("issuableType")}).then(function(e){var t=e.data;s.todoUpdateDone(t)}).catch(function(){return Object(c.a)("There was an error "+("post"===i?"adding a":"deleting the")+" todo.")})},h.prototype.todoUpdateDone=function(e){var t=e.delete_path?e.delete_path:null,i=t?"mark":"todo",n=a()(".js-issuable-todo");a()(document).trigger("todo:toggle",e.count),n.each(function(e,n){var s=a()(n),r=s.find(".js-issuable-todo-inner");s.removeClass("is-loading").enable().attr("aria-label",s.data(i+"Text")).attr("data-delete-path",t).attr("title",s.data(i+"Text")),s.hasClass("has-tooltip")&&s.tooltip("_fixTitle"),s.data(i+"Icon")?r.html(s.data(i+"Icon")):r.text(s.data(i+"Text"))})},h.prototype.sidebarDropdownLoading=function(e){var t,i,n,s;return s=(i=a()(this).closest(".block").find(".sidebar-collapsed-icon")).find("img"),n=i.find("i"),t=a()('<i class="fa fa-spinner fa-spin"></i>'),s.length?(s.before(t),s.hide()):n.length?(n.before(t),n.hide()):void 0},h.prototype.sidebarDropdownLoaded=function(e){var t,i,n;return n=(t=a()(this).closest(".block").find(".sidebar-collapsed-icon")).find("img"),t.find("i.fa-spin").remove(),i=t.find("i"),n.length?n.show():i.show()},h.prototype.sidebarCollapseClicked=function(e){var t,i;if(!a()(e.currentTarget).hasClass("dont-change-state"))return i=e.data,e.preventDefault(),t=a()(this).closest(".block"),i.openDropdown(t)},h.prototype.openDropdown=function(e){var t;t=r.a.isString(e)?this.getBlock(e):e,this.isOpen()||(this.setCollapseAfterUpdate(t),this.toggleSidebar("open")),setTimeout(function(){t.find(".js-sidebar-dropdown-toggle").trigger("click")})},h.prototype.setCollapseAfterUpdate=function(e){return e.addClass("collapse-after-update"),a()(".layout-page").addClass("with-overlay")},h.prototype.onSidebarDropdownHidden=function(e){var t,i;return i=e.data,e.preventDefault(),t=a()(e.target).closest(".block"),i.sidebarDropdownHidden(t)},h.prototype.sidebarDropdownHidden=function(e){if(e.hasClass("collapse-after-update"))return e.removeClass("collapse-after-update"),a()(".layout-page").removeClass("with-overlay"),this.toggleSidebar("hide")},h.prototype.triggerOpenSidebar=function(){return this.sidebar.find(".js-sidebar-toggle").trigger("click")},h.prototype.toggleSidebar=function(e){if(null==e&&(e="toggle"),"toggle"===e&&this.triggerOpenSidebar(),"open"===e&&(this.isOpen()||this.triggerOpenSidebar()),"hide"===e&&this.isOpen())return this.triggerOpenSidebar()},h.prototype.isOpen=function(){return this.sidebar.is(".right-sidebar-expanded")},h.prototype.getBlock=function(e){return this.sidebar.find(".block."+e)},t.a=h},15:function(e,t,i){"use strict";var n=[8,10,12,16,18,24,32,48,72],a={props:{name:{type:String,required:!0,validator:function(){return!0}},size:{type:Number,required:!1,default:16,validator:function(e){return n.includes(e)}},cssClasses:{type:String,required:!1,default:""},width:{type:Number,required:!1,default:null},height:{type:Number,required:!1,default:null},y:{type:Number,required:!1,default:null},x:{type:Number,required:!1,default:null},tabIndex:{type:String,required:!1,default:null}},computed:{spriteHref:function(){return gon.sprite_icons+"#"+this.name},iconTestClass:function(){return"ic-"+this.name},iconSizeClass:function(){return this.size?"s"+this.size:""}}},s=i(2),r=Object(s.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("svg",{class:[e.iconSizeClass,e.iconTestClass,e.cssClasses],attrs:{width:e.width,height:e.height,x:e.x,y:e.y,tabindex:e.tabIndex}},[i("use",e._b({},"use",{"xlink:href":e.spriteHref},!1))])},[],!1,null,null,null);t.a=r.exports},177:function(e,t,i){"use strict";var n=i(1),a=i(15),s=i(27),r=Object(n.e)("ToggleButton|Toggle Status: ON"),o=Object(n.e)("ToggleButton|Toggle Status: OFF"),l={components:{icon:a.a,loadingIcon:s.a},model:{prop:"value",event:"change"},props:{name:{type:String,required:!1,default:null},value:{type:Boolean,required:!1,default:null},disabledInput:{type:Boolean,required:!1,default:!1},isLoading:{type:Boolean,required:!1,default:!1}},computed:{toggleIcon:function(){return this.value?"status_success_borderless":"status_failed_borderless"},ariaLabel:function(){return this.value?r:o}},methods:{toggleFeature:function(){this.disabledInput||this.$emit("change",!this.value)}}},c=i(2),u=Object(c.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{staticClass:"toggle-wrapper"},[e.name?i("input",{attrs:{name:e.name,type:"hidden"},domProps:{value:e.value}}):e._e(),e._v(" "),i("button",{staticClass:"project-feature-toggle",class:{"is-checked":e.value,"is-disabled":e.disabledInput,"is-loading":e.isLoading},attrs:{"aria-label":e.ariaLabel,type:"button"},on:{click:e.toggleFeature}},[i("loadingIcon",{staticClass:"loading-icon"}),e._v(" "),i("span",{staticClass:"toggle-icon"},[i("icon",{attrs:{name:e.toggleIcon,"css-classes":"toggle-icon-svg"}})],1)],1)])},[],!1,null,null,null);t.a=u.exports},189:function(e,t,i){"use strict";t.a={props:{issuableType:{required:!0,type:String}},computed:{issuableDisplayName:function(){return this.issuableType.replace(/_/g," ")}}}},224:function(e,t,i){"use strict";var n={name:"AssigneeTitle",props:{loading:{type:Boolean,required:!1,default:!1},numberOfAssignees:{type:Number,required:!0},editable:{type:Boolean,required:!0},showToggle:{type:Boolean,required:!1,default:!1}},computed:{assigneeTitle:function(){var e=this.numberOfAssignees;return e>1?e+" Assignees":"Assignee"}}},a=i(2),s=Object(a.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"title hide-collapsed"},[e._v("\n  "+e._s(e.assigneeTitle)+"\n  "),e.loading?i("i",{staticClass:"fa fa-spinner fa-spin block-loading",attrs:{"aria-hidden":"true"}}):e._e(),e._v(" "),e.editable?i("a",{staticClass:"js-sidebar-dropdown-toggle edit-link float-right",attrs:{href:"#"}},[e._v("\n    "+e._s(e.__("Edit"))+"\n  ")]):e._e(),e._v(" "),e.showToggle?i("a",{staticClass:"gutter-toggle float-right js-sidebar-toggle",attrs:{"aria-label":"Toggle sidebar",href:"#",role:"button"}},[i("i",{staticClass:"fa fa-angle-double-right",attrs:{"aria-hidden":"true","data-hidden":"true"}})]):e._e()])},[],!1,null,null,null);t.a=s.exports},225:function(e,t,i){"use strict";var n=i(1),a=i(15),s=i(177),r=i(12),o=i(43),l=Object(n.a)("Notifications on"),c=Object(n.a)("Notifications off"),u={directives:{tooltip:r.a},components:{icon:a.a,toggleButton:s.a},props:{loading:{type:Boolean,required:!1,default:!1},subscribed:{type:Boolean,required:!1,default:null},id:{type:Number,required:!1,default:null}},computed:{showLoadingState:function(){return null===this.subscribed},notificationIcon:function(){return this.subscribed?"notifications":"notifications-off"},notificationTooltip:function(){return this.subscribed?l:c}},methods:{toggleSubscription:function(){o.a.$emit("toggleSubscription",this.id),this.$emit("toggleSubscription",this.id)},onClickCollapsedIcon:function(){this.$emit("toggleSidebar")}}},d=i(2),h=Object(d.a)(u,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"sidebar-collapsed-icon",on:{click:e.onClickCollapsedIcon}},[i("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],attrs:{title:e.notificationTooltip,"data-container":"body","data-placement":"left","data-boundary":"viewport"}},[i("icon",{staticClass:"sidebar-item-icon is-active",attrs:{name:e.notificationIcon,size:16,"aria-hidden":"true"}})],1)]),e._v(" "),i("span",{staticClass:"issuable-header-text hide-collapsed float-left"},[e._v("\n    "+e._s(e.__("Notifications"))+"\n  ")]),e._v(" "),i("toggle-button",{ref:"toggleButton",staticClass:"float-right hide-collapsed js-issuable-subscribe-button",attrs:{"is-loading":e.showLoadingState,value:e.subscribed},on:{change:e.toggleSubscription}})],1)},[],!1,null,null,null);t.a=h.exports},227:function(e,t,i){"use strict";var n=i(1),a={name:"Assignees",directives:{tooltip:i(12).a},props:{rootPath:{type:String,required:!0},users:{type:Array,required:!0},editable:{type:Boolean,required:!0},issuableType:{type:String,require:!0,default:"issue"}},data:function(){return{defaultRenderCount:5,defaultMaxCounter:99,showLess:!0}},computed:{firstUser:function(){return this.users[0]},hasMoreThanTwoAssignees:function(){return this.users.length>2},hasMoreThanOneAssignee:function(){return this.users.length>1},hasAssignees:function(){return this.users.length>0},hasNoUsers:function(){return!this.users.length},hasOneUser:function(){return 1===this.users.length},renderShowMoreSection:function(){return this.users.length>this.defaultRenderCount},numberOfHiddenAssignees:function(){return this.users.length-this.defaultRenderCount},isHiddenAssignees:function(){return this.numberOfHiddenAssignees>0},hiddenAssigneesLabel:function(){return"+ "+this.numberOfHiddenAssignees+" more"},collapsedTooltipTitle:function(){var e=Math.min(this.defaultRenderCount,this.users.length),t=this.users.slice(0,e).map(function(e){return e.name});if(this.users.length>e&&t.push("+ "+(this.users.length-e)+" more"),!this.users.length){var i="issue"===this.issuableType?Object(n.a)("Assignee(s)"):Object(n.a)("Assignee");t.push(i)}return t.join(", ")},sidebarAvatarCounter:function(){var e="+"+(this.users.length-1);return this.users.length>this.defaultMaxCounter&&(e=this.defaultMaxCounter+"+"),e}},methods:{assignSelf:function(){this.$emit("assign-self")},toggleShowLess:function(){this.showLess=!this.showLess},renderAssignee:function(e){return!this.showLess||e<this.defaultRenderCount&&this.showLess},avatarUrl:function(e){return e.avatar||e.avatar_url||gon.default_avatar_url},assigneeUrl:function(e){return""+this.rootPath+e.username},assigneeAlt:function(e){return e.name+"'s avatar"},assigneeUsername:function(e){return"@"+e.username},shouldRenderCollapsedAssignee:function(e){var t=this.users.length<=2&&e<=2;return 0===e||t}}},s=i(2),r=Object(s.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"sidebar-collapsed-icon sidebar-collapsed-user",class:{"multiple-users":e.hasMoreThanOneAssignee},attrs:{title:e.collapsedTooltipTitle,"data-container":"body","data-placement":"left","data-boundary":"viewport"}},[e.hasNoUsers?i("i",{staticClass:"fa fa-user",attrs:{"aria-label":"No Assignee"}}):e._e(),e._v(" "),e._l(e.users,function(t,n){return e.shouldRenderCollapsedAssignee(n)?i("button",{key:t.id,staticClass:"btn-link",attrs:{type:"button"}},[i("img",{staticClass:"avatar avatar-inline s24",attrs:{alt:e.assigneeAlt(t),src:e.avatarUrl(t),width:"24"}}),e._v(" "),i("span",{staticClass:"author"},[e._v("\n        "+e._s(t.name)+"\n      ")])]):e._e()}),e._v(" "),e.hasMoreThanTwoAssignees?i("button",{staticClass:"btn-link",attrs:{type:"button"}},[i("span",{staticClass:"avatar-counter sidebar-avatar-counter"},[e._v("\n        "+e._s(e.sidebarAvatarCounter)+"\n      ")])]):e._e()],2),e._v(" "),i("div",{staticClass:"value hide-collapsed"},[e.hasNoUsers?[i("span",{staticClass:"assign-yourself no-value"},[e._v("\n        No assignee\n        "),e.editable?[e._v("\n          -\n          "),i("button",{staticClass:"btn-link",attrs:{type:"button"},on:{click:e.assignSelf}},[e._v("\n            assign yourself\n          ")])]:e._e()],2)]:e.hasOneUser?[i("a",{staticClass:"author-link bold",attrs:{href:e.assigneeUrl(e.firstUser)}},[i("img",{staticClass:"avatar avatar-inline s32",attrs:{alt:e.assigneeAlt(e.firstUser),src:e.avatarUrl(e.firstUser),width:"32"}}),e._v(" "),i("span",{staticClass:"author"},[e._v("\n          "+e._s(e.firstUser.name)+"\n        ")]),e._v(" "),i("span",{staticClass:"username"},[e._v("\n          "+e._s(e.assigneeUsername(e.firstUser))+"\n        ")])])]:[i("div",{staticClass:"user-list"},e._l(e.users,function(t,n){return e.renderAssignee(n)?i("div",{key:t.id,staticClass:"user-item"},[i("a",{staticClass:"user-link has-tooltip",attrs:{href:e.assigneeUrl(t),"data-title":t.name,"data-container":"body","data-placement":"bottom"}},[i("img",{staticClass:"avatar avatar-inline s32",attrs:{alt:e.assigneeAlt(t),src:e.avatarUrl(t),width:"32"}})])]):e._e()})),e._v(" "),e.renderShowMoreSection?i("div",{staticClass:"user-list-more"},[i("button",{staticClass:"btn-link",attrs:{type:"button"},on:{click:e.toggleShowLess}},[e.showLess?[e._v("\n            "+e._s(e.hiddenAssigneesLabel)+"\n          ")]:[e._v("\n            - show less\n          ")]],2)]):e._e()]],2)])},[],!1,null,null,null);t.a=r.exports},231:function(e,t,i){"use strict";var n=i(0),a=i.n(n),s=i(39),r=i.n(s),o=i(91),l=i(81);t.a=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userSelect=new l.a(t),a()("select.select2").select2({width:"resolve",dropdownAutoWidth:!0}),a()(".issuable-sidebar .inline-update").on("change","select",function(){return a()(this).submit()}),a()(".issuable-sidebar .inline-update").on("change",".js-assignee",function(){return a()(this).submit()}),a()(document).off("click",".issuable-sidebar .dropdown-content a").on("click",".issuable-sidebar .dropdown-content a",function(e){return e.preventDefault()}),a()(document).off("click",".edit-link").on("click",".edit-link",function(e){e.preventDefault();var t=a()(this).parents(".block"),i=t.find(".selectbox");i.is(":visible")?(i.hide(),t.find(".value:not(.dont-hide)").show()):(i.show(),t.find(".value:not(.dont-hide)").hide()),i.is(":visible")&&setTimeout(function(){return t.find(".dropdown-menu-toggle").trigger("click")},0)}),window.addEventListener("beforeunload",function(){var e=o.a.getBreakpointSize();"xs"!==e&&"sm"!==e||r.a.set("collapsed_gutter",!0)})}},274:function(e,t,i){"use strict";var n=i(1),a={name:"TimeTrackingHelpState",props:{rootPath:{type:String,required:!0}},computed:{href:function(){return this.rootPath+"help/workflow/time_tracking.md"},estimateText:function(){return Object(n.f)(Object(n.e)("estimateCommand|%{slash_command} will update the estimated time with the latest command."),{slash_command:"<code>/estimate</code>"},!1)},spendText:function(){return Object(n.f)(Object(n.e)("spendCommand|%{slash_command} will update the sum of the time spent."),{slash_command:"<code>/spend</code>"},!1)}}},s=i(2),r=Object(s.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"time-tracking-help-state"},[i("div",{staticClass:"time-tracking-info"},[i("h4",[e._v("\n      "+e._s(e.__("Track time with quick actions"))+"\n    ")]),e._v(" "),i("p",[e._v("\n      "+e._s(e.__("Quick actions can be used in the issues description and comment boxes."))+"\n    ")]),e._v(" "),i("p",{domProps:{innerHTML:e._s(e.estimateText)}}),e._v(" "),i("p",{domProps:{innerHTML:e._s(e.spendText)}}),e._v(" "),i("a",{staticClass:"btn btn-default learn-more-button",attrs:{href:e.href}},[e._v("\n      "+e._s(e.__("Learn more"))+"\n    ")])])])},[],!1,null,null,null).exports,o=i(3),l=i.n(o);var c=i(15),u=i(12),d={name:"TimeTrackingCollapsedState",components:{icon:c.a},directives:{tooltip:u.a},props:{showComparisonState:{type:Boolean,required:!0},showSpentOnlyState:{type:Boolean,required:!0},showEstimateOnlyState:{type:Boolean,required:!0},showNoTimeTrackingState:{type:Boolean,required:!0},timeSpentHumanReadable:{type:String,required:!1,default:""},timeEstimateHumanReadable:{type:String,required:!1,default:""}},computed:{timeSpent:function(){return this.abbreviateTime(this.timeSpentHumanReadable)},timeEstimate:function(){return this.abbreviateTime(this.timeEstimateHumanReadable)},divClass:function(){return this.showComparisonState?"compare":this.showEstimateOnlyState?"estimate-only":this.showSpentOnlyState?"spend-only":this.showNoTimeTrackingState?"no-tracking":""},spanClass:function(){return this.showComparisonState?"":this.showEstimateOnlyState||this.showSpentOnlyState?"bold":this.showNoTimeTrackingState?"no-value":""},text:function(){return this.showComparisonState?this.timeSpent+" / "+this.timeEstimate:this.showEstimateOnlyState?"-- / "+this.timeEstimate:this.showSpentOnlyState?this.timeSpent+" / --":this.showNoTimeTrackingState?"None":""},timeTrackedTooltipText:function(){var e=void 0;return this.showComparisonState?e=Object(n.a)("Time remaining"):this.showEstimateOnlyState?e=Object(n.a)("Estimated"):this.showSpentOnlyState&&(e=Object(n.a)("Time spent")),Object(n.f)("%{title}: %{text}",{title:e,text:this.text})},tooltipText:function(){return this.showNoTimeTrackingState?Object(n.a)("Time tracking"):this.timeTrackedTooltipText}},methods:{abbreviateTime:function(e){return function(e){return e.split(" ").filter(function(e){return"0"!==e.charAt(0)})[0]}(e)}}},h=Object(s.a)(d,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"sidebar-collapsed-icon",attrs:{title:this.tooltipText,"data-container":"body","data-placement":"left","data-boundary":"viewport"}},[t("icon",{attrs:{name:"timer"}}),this._v(" "),t("div",{staticClass:"time-tracking-collapsed-summary"},[t("div",{class:this.divClass},[t("span",{class:this.spanClass},[this._v("\n        "+this._s(this.text)+"\n      ")])])])],1)},[],!1,null,null,null).exports,f={name:"TimeTrackingSpentOnlyPane",props:{timeSpentHumanReadable:{type:String,required:!0}}},p=Object(s.a)(f,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"time-tracking-spend-only-pane"},[t("span",{staticClass:"bold"},[this._v("Spent:")]),this._v("\n  "+this._s(this.timeSpentHumanReadable)+"\n")])},[],!1,null,null,null).exports,m={name:"TimeTrackingNoTrackingPane"},g=Object(s.a)(m,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"time-tracking-no-tracking-pane"},[t("span",{staticClass:"no-value"},[this._v("\n    "+this._s(this.__("No estimate or time spent"))+"\n  ")])])},[],!1,null,null,null).exports,b={name:"TimeTrackingEstimateOnlyPane",props:{timeEstimateHumanReadable:{type:String,required:!0}}},v=Object(s.a)(b,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"time-tracking-estimate-only-pane"},[t("span",{staticClass:"bold"},[this._v("\n    "+this._s(this.s__("TimeTracking|Estimated:"))+"\n  ")]),this._v("\n  "+this._s(this.timeEstimateHumanReadable)+"\n")])},[],!1,null,null,null).exports,y={name:"TimeTrackingComparisonPane",directives:{tooltip:u.a},props:{timeSpent:{type:Number,required:!0},timeEstimate:{type:Number,required:!0},timeSpentHumanReadable:{type:String,required:!0},timeEstimateHumanReadable:{type:String,required:!0}},computed:{parsedTimeRemaining:function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.daysPerWeek,n=void 0===i?5:i,a=t.hoursPerDay,s=void 0===a?8:a,r={weeks:n*s*60,days:60*s,hours:60,minutes:1},o=Math.abs(e/60);return l.a.mapObject(r,function(e){var t=Math.floor(o/e);return o-=t*e,t})}(this.timeEstimate-this.timeSpent)},timeRemainingHumanReadable:function(){return e=this.parsedTimeRemaining,(t=l.a.reduce(e,function(e,t,i){return t?e+" "+t+i.charAt(0):e},"").trim()).length?t:"0m";var e,t},timeRemainingTooltip:function(){return(this.timeRemainingMinutes<0?"Over by":"Time remaining:")+" "+this.timeRemainingHumanReadable},timeRemainingMinutes:function(){return this.timeEstimate-this.timeSpent},timeRemainingPercent:function(){return Math.floor(this.timeSpent/this.timeEstimate*100)},timeRemainingStatusClass:function(){return this.timeEstimate>=this.timeSpent?"within_estimate":"over_estimate"},progressBarVariant:function(){return this.timeRemainingPercent>100?"danger":"primary"}}},w=Object(s.a)(y,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"time-tracking-comparison-pane"},[i("div",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"compare-meter",class:e.timeRemainingStatusClass,attrs:{title:e.timeRemainingTooltip,"data-toggle":"tooltip","data-placement":"top",role:"timeRemainingDisplay"}},[i("gl-progress-bar",{attrs:{value:e.timeRemainingPercent,variant:e.progressBarVariant}}),e._v(" "),i("div",{staticClass:"compare-display-container"},[i("div",{staticClass:"compare-display float-left"},[i("span",{staticClass:"compare-label"},[e._v("\n          "+e._s(e.s__("TimeTracking|Spent"))+"\n        ")]),e._v(" "),i("span",{staticClass:"compare-value spent"},[e._v("\n          "+e._s(e.timeSpentHumanReadable)+"\n        ")])]),e._v(" "),i("div",{staticClass:"compare-display estimated float-right"},[i("span",{staticClass:"compare-label"},[e._v("\n          "+e._s(e.s__("TimeTrackingEstimated|Est"))+"\n        ")]),e._v(" "),i("span",{staticClass:"compare-value"},[e._v("\n          "+e._s(e.timeEstimateHumanReadable)+"\n        ")])])])],1)])},[],!1,null,null,null).exports,C=i(43),_={name:"IssuableTimeTracker",components:{TimeTrackingCollapsedState:h,TimeTrackingEstimateOnlyPane:v,TimeTrackingSpentOnlyPane:p,TimeTrackingNoTrackingPane:g,TimeTrackingComparisonPane:w,TimeTrackingHelpState:r},props:{time_estimate:{type:Number,required:!0},time_spent:{type:Number,required:!0},human_time_estimate:{type:String,required:!1,default:""},human_time_spent:{type:String,required:!1,default:""},rootPath:{type:String,required:!0}},data:function(){return{showHelp:!1}},computed:{timeSpent:function(){return this.time_spent},timeEstimate:function(){return this.time_estimate},timeEstimateHumanReadable:function(){return this.human_time_estimate},timeSpentHumanReadable:function(){return this.human_time_spent},hasTimeSpent:function(){return!!this.timeSpent},hasTimeEstimate:function(){return!!this.timeEstimate},showComparisonState:function(){return this.hasTimeEstimate&&this.hasTimeSpent},showEstimateOnlyState:function(){return this.hasTimeEstimate&&!this.hasTimeSpent},showSpentOnlyState:function(){return this.hasTimeSpent&&!this.hasTimeEstimate},showNoTimeTrackingState:function(){return!this.hasTimeEstimate&&!this.hasTimeSpent},showHelpState:function(){return!!this.showHelp}},created:function(){C.a.$on("timeTracker:updateData",this.update)},methods:{toggleHelpState:function(e){this.showHelp=e},update:function(e){this.time_estimate=e.time_estimate,this.time_spent=e.time_spent,this.human_time_estimate=e.human_time_estimate,this.human_time_spent=e.human_time_spent}}},k=Object(s.a)(_,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"time_tracker time-tracking-component-wrap"},[i("time-tracking-collapsed-state",{attrs:{"show-comparison-state":e.showComparisonState,"show-no-time-tracking-state":e.showNoTimeTrackingState,"show-help-state":e.showHelpState,"show-spent-only-state":e.showSpentOnlyState,"show-estimate-only-state":e.showEstimateOnlyState,"time-spent-human-readable":e.timeSpentHumanReadable,"time-estimate-human-readable":e.timeEstimateHumanReadable}}),e._v(" "),i("div",{staticClass:"title hide-collapsed"},[e._v("\n    "+e._s(e.__("Time tracking"))+"\n    "),e.showHelpState?e._e():i("div",{staticClass:"help-button float-right",on:{click:function(t){e.toggleHelpState(!0)}}},[i("i",{staticClass:"fa fa-question-circle",attrs:{"aria-hidden":"true"}})]),e._v(" "),e.showHelpState?i("div",{staticClass:"close-help-button float-right",on:{click:function(t){e.toggleHelpState(!1)}}},[i("i",{staticClass:"fa fa-close",attrs:{"aria-hidden":"true"}})]):e._e()]),e._v(" "),i("div",{staticClass:"time-tracking-content hide-collapsed"},[e.showEstimateOnlyState?i("time-tracking-estimate-only-pane",{attrs:{"time-estimate-human-readable":e.timeEstimateHumanReadable}}):e._e(),e._v(" "),e.showSpentOnlyState?i("time-tracking-spent-only-pane",{attrs:{"time-spent-human-readable":e.timeSpentHumanReadable}}):e._e(),e._v(" "),e.showNoTimeTrackingState?i("time-tracking-no-tracking-pane"):e._e(),e._v(" "),e.showComparisonState?i("time-tracking-comparison-pane",{attrs:{"time-estimate":e.timeEstimate,"time-spent":e.timeSpent,"time-spent-human-readable":e.timeSpentHumanReadable,"time-estimate-human-readable":e.timeEstimateHumanReadable}}):e._e(),e._v(" "),i("transition",{attrs:{name:"help-state-toggle"}},[e.showHelpState?i("time-tracking-help-state",{attrs:{"root-path":e.rootPath}}):e._e()],1)],1)],1)},[],!1,null,null,null);t.a=k.exports},298:function(e,t,i){"use strict";var n=i(0),a=i.n(n),s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cfg={callback:t.callback,startingInterval:t.startingInterval,maxInterval:t.maxInterval,hiddenInterval:t.hiddenInterval,incrementByFactorOf:t.incrementByFactorOf,lazyStart:t.lazyStart,immediateExecution:t.immediateExecution},this.state={intervalId:null,currentInterval:this.cfg.startingInterval,pageVisibility:"visible"},this.initInterval()}return s(e,[{key:"start",value:function(){var e=this,t=this.cfg,i=this.state;t.immediateExecution&&!this.isLoading&&(t.immediateExecution=!1,this.triggerCallback()),i.intervalId=window.setInterval(function(){e.isLoading||(e.triggerCallback(),e.getCurrentInterval()!==t.maxInterval&&(e.incrementInterval(),e.resume()))},this.getCurrentInterval())}},{key:"cancel",value:function(){this.setCurrentInterval(this.cfg.startingInterval),this.stopTimer()}},{key:"onVisibilityHidden",value:function(){this.cfg.hiddenInterval?(this.setCurrentInterval(this.cfg.hiddenInterval),this.resume()):this.cancel()}},{key:"resume",value:function(){this.stopTimer(),this.start()}},{key:"onVisibilityVisible",value:function(){this.cancel(),this.start()}},{key:"destroy",value:function(){this.cancel(),document.removeEventListener("visibilitychange",this.handleVisibilityChange),a()(document).off("visibilitychange").off("beforeunload")}},{key:"initInterval",value:function(){this.cfg.lazyStart||this.start(),this.initVisibilityChangeHandling(),this.initPageUnloadHandling()}},{key:"triggerCallback",value:function(){var e=this;this.isLoading=!0,this.cfg.callback().then(function(){e.isLoading=!1}).catch(function(t){throw e.isLoading=!1,t})}},{key:"initVisibilityChangeHandling",value:function(){document.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this))}},{key:"initPageUnloadHandling",value:function(){var e=this;a()(document).on("beforeunload",function(){return e.cancel()})}},{key:"handleVisibilityChange",value:function(e){this.state.pageVisibility=e.target.visibilityState,(this.isPageVisible()?this.onVisibilityVisible:this.onVisibilityHidden).apply(this)}},{key:"getCurrentInterval",value:function(){return this.state.currentInterval}},{key:"setCurrentInterval",value:function(e){this.state.currentInterval=e}},{key:"incrementInterval",value:function(){var e=this.cfg,t=this.getCurrentInterval();if(!e.hiddenInterval||this.isPageVisible()){var i=t*e.incrementByFactorOf;i>e.maxInterval&&(i=e.maxInterval),this.setCurrentInterval(i)}}},{key:"isPageVisible",value:function(){return"visible"===this.state.pageVisibility}},{key:"stopTimer",value:function(){var e=this.state;e.intervalId=window.clearInterval(e.intervalId)}}]),e}();t.a=r},341:function(e,t,i){"use strict";var n=i(21),a=i(7),s=i(8),r=i(235),o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();s.default.use(r.a);var l=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.singleton||(this.endpoint=t.endpoint,this.toggleSubscriptionEndpoint=t.toggleSubscriptionEndpoint,this.moveIssueEndpoint=t.moveIssueEndpoint,this.projectsAutocompleteEndpoint=t.projectsAutocompleteEndpoint,e.singleton=this),e.singleton}return o(e,[{key:"get",value:function(){return s.default.http.get(this.endpoint)}},{key:"update",value:function(e,t){return s.default.http.put(this.endpoint,function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}({},e,t),{emulateJSON:!0})}},{key:"getProjectsAutocomplete",value:function(e){return s.default.http.get(this.projectsAutocompleteEndpoint,{params:{search:e}})}},{key:"toggleSubscription",value:function(){return s.default.http.post(this.toggleSubscriptionEndpoint)}},{key:"moveIssue",value:function(e){return s.default.http.post(this.moveIssueEndpoint,{move_to_project_id:e})}}]),e}(),c=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var u=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.singleton||this.initSingleton(t),e.singleton}return c(e,[{key:"initSingleton",value:function(t){var i=t.currentUser,n=t.rootPath,a=t.editable;this.currentUser=i,this.rootPath=n,this.editable=a,this.timeEstimate=0,this.totalTimeSpent=0,this.humanTimeEstimate="",this.humanTimeSpent="",this.assignees=[],this.isFetching={assignees:!0,participants:!0,subscriptions:!0},this.isLoading={},this.autocompleteProjects=[],this.moveToProjectId=0,this.isLockDialogOpen=!1,this.participants=[],this.subscribed=null,e.singleton=this}},{key:"setAssigneeData",value:function(e){this.isFetching.assignees=!1,e.assignees&&(this.assignees=e.assignees)}},{key:"setTimeTrackingData",value:function(e){this.timeEstimate=e.time_estimate,this.totalTimeSpent=e.total_time_spent,this.humanTimeEstimate=e.human_time_estimate,this.humanTotalTimeSpent=e.human_total_time_spent}},{key:"setParticipantsData",value:function(e){this.isFetching.participants=!1,this.participants=e.participants||[]}},{key:"setSubscriptionsData",value:function(e){this.isFetching.subscriptions=!1,this.subscribed=e.subscribed||!1}},{key:"setFetchingState",value:function(e,t){this.isFetching[e]=t}},{key:"setLoadingState",value:function(e,t){this.isLoading[e]=t}},{key:"addAssignee",value:function(e){this.findAssignee(e)||this.assignees.push(e)}},{key:"findAssignee",value:function(e){return this.assignees.filter(function(t){return t.id===e.id})[0]}},{key:"removeAssignee",value:function(e){e&&(this.assignees=this.assignees.filter(function(t){return t.id!==e.id}))}},{key:"removeAllAssignees",value:function(){this.assignees=[]}},{key:"setAutocompleteProjects",value:function(e){this.autocompleteProjects=e}},{key:"setSubscribedState",value:function(e){this.subscribed=e}},{key:"setMoveToProjectId",value:function(e){this.moveToProjectId=e}}]),e}(),d=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var h=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.singleton||this.initSingleton(t),e.singleton}return d(e,[{key:"initSingleton",value:function(t){this.store=new u(t),this.service=new l({endpoint:t.endpoint,toggleSubscriptionEndpoint:t.toggleSubscriptionEndpoint,moveIssueEndpoint:t.moveIssueEndpoint,projectsAutocompleteEndpoint:t.projectsAutocompleteEndpoint}),e.singleton=this}},{key:"assignYourself",value:function(){this.store.addAssignee(this.store.currentUser)}},{key:"saveAssignees",value:function(e){var t=this.store.assignees.map(function(e){return e.id});return this.service.update(e,0===t.length?[0]:t)}},{key:"setMoveToProjectId",value:function(e){this.store.setMoveToProjectId(e)}},{key:"fetch",value:function(){var e=this;return this.service.get().then(function(e){return e.json()}).then(function(t){e.processFetchedData(t)}).catch(function(){return new a.a("Error occurred when fetching sidebar data")})}},{key:"processFetchedData",value:function(e){this.store.setAssigneeData(e),this.store.setTimeTrackingData(e),this.store.setParticipantsData(e),this.store.setSubscriptionsData(e)}},{key:"toggleSubscription",value:function(){var e=this;return this.store.setFetchingState("subscriptions",!0),this.service.toggleSubscription().then(function(){e.store.setSubscribedState(!e.store.subscribed),e.store.setFetchingState("subscriptions",!1)}).catch(function(t){throw e.store.setFetchingState("subscriptions",!1),t})}},{key:"fetchAutocompleteProjects",value:function(e){var t=this;return this.service.getProjectsAutocomplete(e).then(function(e){return e.json()}).then(function(e){return t.store.setAutocompleteProjects(e),t.store.autocompleteProjects})}},{key:"moveIssue",value:function(){return this.service.moveIssue(this.store.moveToProjectId).then(function(e){return e.json()}).then(function(e){window.location.pathname!==e.web_url&&Object(n.g)(e.web_url)})}}]),e}(),f=i(0),p=i.n(f),m=i(3),g=i.n(m),b=(i(298),i(274)),v=i(43),y={components:{IssuableTimeTracker:b.a},data:function(){return{mediator:new h,store:new u}},mounted:function(){this.listenForQuickActions()},methods:{listenForQuickActions:function(){var e=this;p()(document).on("ajax:success",".gfm-form",this.quickActionListened),v.a.$on("timeTrackingUpdated",function(t){e.quickActionListened(null,t)})},quickActionListened:function(e,t){var i=void 0;(i=void 0!==t&&t.commands_changes?Object.keys(t.commands_changes):[])&&g.a.intersection(["spend_time","time_estimate"],i).length&&this.mediator.fetch()}}},w=i(2),C=Object(w.a)(y,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"block"},[t("issuable-time-tracker",{attrs:{time_estimate:this.store.timeEstimate,time_spent:this.store.totalTimeSpent,human_time_estimate:this.store.humanTimeEstimate,human_time_spent:this.store.humanTotalTimeSpent,"root-path":this.store.rootPath}})],1)},[],!1,null,null,null).exports,_=i(224),k=i(227),S={name:"SidebarAssignees",components:{AssigneeTitle:_.a,Assignees:k.a},props:{mediator:{type:Object,required:!0},field:{type:String,required:!0},signedIn:{type:Boolean,required:!1,default:!1},issuableType:{type:String,require:!0,default:"issue"}},data:function(){return{store:new u,loading:!1}},created:function(){this.removeAssignee=this.store.removeAssignee.bind(this.store),this.addAssignee=this.store.addAssignee.bind(this.store),this.removeAllAssignees=this.store.removeAllAssignees.bind(this.store),v.a.$on("sidebar.removeAssignee",this.removeAssignee),v.a.$on("sidebar.addAssignee",this.addAssignee),v.a.$on("sidebar.removeAllAssignees",this.removeAllAssignees),v.a.$on("sidebar.saveAssignees",this.saveAssignees)},beforeDestroy:function(){v.a.$off("sidebar.removeAssignee",this.removeAssignee),v.a.$off("sidebar.addAssignee",this.addAssignee),v.a.$off("sidebar.removeAllAssignees",this.removeAllAssignees),v.a.$off("sidebar.saveAssignees",this.saveAssignees)},methods:{assignSelf:function(){this.$el.parentElement.dispatchEvent(new Event("assignYourself")),this.mediator.assignYourself(),this.saveAssignees()},saveAssignees:function(){function e(){this.loading=!1}this.loading=!0,this.mediator.saveAssignees(this.field).then(e.bind(this)).catch(function(){return e(),new a.a("Error occurred when saving assignees")})}}},j=Object(w.a)(S,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("assignee-title",{attrs:{"number-of-assignees":e.store.assignees.length,loading:e.loading||e.store.isFetching.assignees,editable:e.store.editable,"show-toggle":!e.signedIn}}),e._v(" "),e.store.isFetching.assignees?e._e():i("assignees",{staticClass:"value",attrs:{"root-path":e.store.rootPath,users:e.store.assignees,editable:e.store.editable,"issuable-type":e.issuableType},on:{"assign-self":e.assignSelf}})],1)},[],!1,null,null,null).exports,T=i(1),L=i(12),O=i(15),E={props:{isConfidential:{required:!0,type:Boolean},updateConfidentialAttribute:{required:!0,type:Function}},computed:{toggleButtonText:function(){return this.isConfidential?"Turn Off":"Turn On"},updateConfidentialBool:function(){return!this.isConfidential}},methods:{closeForm:function(){v.a.$emit("closeConfidentialityForm"),p()(this.$el).trigger("hidden.gl.dropdown")},submitForm:function(){this.closeForm(),this.updateConfidentialAttribute(this.updateConfidentialBool)}}},x={components:{editFormButtons:Object(w.a)(E,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sidebar-item-warning-message-actions"},[i("button",{staticClass:"btn btn-default append-right-10",attrs:{type:"button"},on:{click:e.closeForm}},[e._v("\n    "+e._s(e.__("Cancel"))+"\n  ")]),e._v(" "),i("button",{staticClass:"btn btn-close",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.submitForm(t)}}},[e._v("\n    "+e._s(e.toggleButtonText)+"\n  ")])])},[],!1,null,null,null).exports},props:{isConfidential:{required:!0,type:Boolean},updateConfidentialAttribute:{required:!0,type:Function}},computed:{confidentialityOnWarning:function(){return Object(T.e)("confidentiality|You are going to turn on the confidentiality. This means that only team members with <strong>at least Reporter access</strong> are able to see and leave comments on the issue.")},confidentialityOffWarning:function(){return Object(T.e)("confidentiality|You are going to turn off the confidentiality. This means <strong>everyone</strong> will be able to see and leave a comment on this issue.")}}},D={components:{editForm:Object(w.a)(x,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"dropdown show"},[i("div",{staticClass:"dropdown-menu sidebar-item-warning-message"},[i("div",[e.isConfidential?i("p",{domProps:{innerHTML:e._s(e.confidentialityOffWarning)}}):i("p",{domProps:{innerHTML:e._s(e.confidentialityOnWarning)}}),e._v(" "),i("edit-form-buttons",{attrs:{"is-confidential":e.isConfidential,"update-confidential-attribute":e.updateConfidentialAttribute}})],1)])])},[],!1,null,null,null).exports,Icon:O.a},directives:{tooltip:L.a},props:{isConfidential:{required:!0,type:Boolean},isEditable:{required:!0,type:Boolean},service:{required:!0,type:Object}},data:function(){return{edit:!1}},computed:{confidentialityIcon:function(){return this.isConfidential?"eye-slash":"eye"},tooltipLabel:function(){return this.isConfidential?Object(T.a)("Confidential"):Object(T.a)("Not confidential")}},created:function(){v.a.$on("closeConfidentialityForm",this.toggleForm)},beforeDestroy:function(){v.a.$off("closeConfidentialityForm",this.toggleForm)},methods:{toggleForm:function(){this.edit=!this.edit},updateConfidentialAttribute:function(e){this.service.update("issue",{confidential:e}).then(function(){return window.location.reload()}).catch(function(){Object(a.a)(Object(T.a)("Something went wrong trying to change the confidentiality of this issue"))})}}},A=Object(w.a)(D,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"block issuable-sidebar-item confidentiality"},[i("div",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"sidebar-collapsed-icon",attrs:{title:e.tooltipLabel,"data-container":"body","data-placement":"left","data-boundary":"viewport"},on:{click:e.toggleForm}},[i("icon",{attrs:{name:e.confidentialityIcon,"aria-hidden":"true"}})],1),e._v(" "),i("div",{staticClass:"title hide-collapsed"},[e._v("\n    "+e._s(e.__("Confidentiality"))+"\n    "),e.isEditable?i("a",{staticClass:"float-right confidential-edit",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.toggleForm(t)}}},[e._v("\n      "+e._s(e.__("Edit"))+"\n    ")]):e._e()]),e._v(" "),i("div",{staticClass:"value sidebar-item-value hide-collapsed"},[e.edit?i("editForm",{attrs:{"is-confidential":e.isConfidential,"update-confidential-attribute":e.updateConfidentialAttribute}}):e._e(),e._v(" "),e.isConfidential?i("div",{staticClass:"value sidebar-item-value hide-collapsed"},[i("icon",{staticClass:"sidebar-item-icon inline is-active",attrs:{size:16,name:"eye-slash","aria-hidden":"true"}}),e._v("\n      "+e._s(e.__("This issue is confidential"))+"\n    ")],1):i("div",{staticClass:"no-value sidebar-item-value"},[i("icon",{staticClass:"sidebar-item-icon inline",attrs:{size:16,name:"eye","aria-hidden":"true"}}),e._v("\n      "+e._s(e.__("Not confidential"))+"\n    ")],1)],1)])},[],!1,null,null,null).exports,I=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function $(e){return e>0}var P=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediator=t,this.$dropdownToggle=p()(i),this.$confirmButton=p()(n),this.onConfirmClickedWrapper=this.onConfirmClicked.bind(this)}return I(e,[{key:"init",value:function(){this.initDropdown(),this.addEventListeners()}},{key:"destroy",value:function(){this.removeEventListeners()}},{key:"initDropdown",value:function(){var e=this;this.$dropdownToggle.glDropdown({search:{fields:["name_with_namespace"]},showMenuAbove:!0,selectable:!0,filterable:!0,filterRemote:!0,multiSelect:!1,shouldPropagate:!1,data:function(t,i){e.mediator.fetchAutocompleteProjects(t).then(i).catch(function(){return new window.Flash("An error occurred while fetching projects autocomplete.")})},renderRow:function(e){return'\n        <li>\n          <a href="#" class="js-move-issue-dropdown-item">\n            '+g.a.escape(e.name_with_namespace)+"\n          </a>\n        </li>\n      "},clicked:function(t){var i=t.selectedObj,n=t.isMarking?i.id:0;e.mediator.setMoveToProjectId(n),e.$confirmButton.prop("disabled",!$(n))}})}},{key:"addEventListeners",value:function(){this.$confirmButton.on("click",this.onConfirmClickedWrapper)}},{key:"removeEventListeners",value:function(){this.$confirmButton.off("click",this.onConfirmClickedWrapper)}},{key:"onConfirmClicked",value:function(){var e=this;$(this.mediator.store.moveToProjectId)&&(this.$confirmButton.disable().addClass("is-loading"),this.mediator.moveIssue().catch(function(){window.Flash("An error occurred while moving the issue."),e.$confirmButton.enable().removeClass("is-loading")}))}}]),e}(),F=i(189),U={props:{isLocked:{required:!0,type:Boolean},updateLockedAttribute:{required:!0,type:Function}},computed:{buttonText:function(){return this.isLocked?this.__("Unlock"):this.__("Lock")},toggleLock:function(){return!this.isLocked}},methods:{closeForm:function(){v.a.$emit("closeLockForm"),p()(this.$el).trigger("hidden.gl.dropdown")},submitForm:function(){this.closeForm(),this.updateLockedAttribute(this.toggleLock)}}},N={components:{editFormButtons:Object(w.a)(U,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sidebar-item-warning-message-actions"},[i("button",{staticClass:"btn btn-default append-right-10",attrs:{type:"button"},on:{click:e.closeForm}},[e._v("\n    "+e._s(e.__("Cancel"))+"\n  ")]),e._v(" "),i("button",{staticClass:"btn btn-close",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.submitForm(t)}}},[e._v("\n    "+e._s(e.buttonText)+"\n  ")])])},[],!1,null,null,null).exports},mixins:[F.a],props:{isLocked:{required:!0,type:Boolean},updateLockedAttribute:{required:!0,type:Function}},computed:{lockWarning:function(){return Object(T.f)(Object(T.a)("Lock this %{issuableDisplayName}? Only <strong>project members</strong> will be able to comment."),{issuableDisplayName:this.issuableDisplayName})},unlockWarning:function(){return Object(T.f)(Object(T.a)("Unlock this %{issuableDisplayName}? <strong>Everyone</strong> will be able to comment."),{issuableDisplayName:this.issuableDisplayName})}}},q={components:{editForm:Object(w.a)(N,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"dropdown show"},[i("div",{staticClass:"dropdown-menu sidebar-item-warning-message"},[e.isLocked?i("p",{staticClass:"text",domProps:{innerHTML:e._s(e.unlockWarning)}}):i("p",{staticClass:"text",domProps:{innerHTML:e._s(e.lockWarning)}}),e._v(" "),i("edit-form-buttons",{attrs:{"is-locked":e.isLocked,"update-locked-attribute":e.updateLockedAttribute}})],1)])},[],!1,null,null,null).exports,Icon:O.a},directives:{tooltip:L.a},mixins:[F.a],props:{isLocked:{required:!0,type:Boolean},isEditable:{required:!0,type:Boolean},mediator:{required:!0,type:Object,validator:function(e){return e.service&&e.service.update&&e.store}}},computed:{lockIcon:function(){return this.isLocked?"lock":"lock-open"},isLockDialogOpen:function(){return this.mediator.store.isLockDialogOpen},tooltipLabel:function(){return this.isLocked?Object(T.a)("Locked"):Object(T.a)("Unlocked")}},created:function(){v.a.$on("closeLockForm",this.toggleForm)},beforeDestroy:function(){v.a.$off("closeLockForm",this.toggleForm)},methods:{toggleForm:function(){this.mediator.store.isLockDialogOpen=!this.mediator.store.isLockDialogOpen},updateLockedAttribute:function(e){var t=this;this.mediator.service.update(this.issuableType,{discussion_locked:e}).then(function(){return window.location.reload()}).catch(function(){return Object(a.a)(t.__("Something went wrong trying to change the locked state of this "+t.issuableDisplayName))})}}},B=Object(w.a)(q,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"block issuable-sidebar-item lock"},[i("div",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"sidebar-collapsed-icon",attrs:{title:e.tooltipLabel,"data-container":"body","data-placement":"left","data-boundary":"viewport"},on:{click:e.toggleForm}},[i("icon",{staticClass:"sidebar-item-icon is-active",attrs:{name:e.lockIcon,"aria-hidden":"true"}})],1),e._v(" "),i("div",{staticClass:"title hide-collapsed"},[e._v("\n    "+e._s(e.sprintf(e.__("Lock %{issuableDisplayName}"),{issuableDisplayName:e.issuableDisplayName}))+"\n    "),e.isEditable?i("button",{staticClass:"float-right lock-edit",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.toggleForm(t)}}},[e._v("\n      "+e._s(e.__("Edit"))+"\n    ")]):e._e()]),e._v(" "),i("div",{staticClass:"value sidebar-item-value hide-collapsed"},[e.isLockDialogOpen?i("edit-form",{attrs:{"is-locked":e.isLocked,"update-locked-attribute":e.updateLockedAttribute,"issuable-type":e.issuableType}}):e._e(),e._v(" "),e.isLocked?i("div",{staticClass:"value sidebar-item-value"},[i("icon",{staticClass:"sidebar-item-icon inline is-active",attrs:{size:16,name:"lock","aria-hidden":"true"}}),e._v("\n      "+e._s(e.__("Locked"))+"\n    ")],1):i("div",{staticClass:"no-value sidebar-item-value hide-collapsed"},[i("icon",{staticClass:"sidebar-item-icon inline",attrs:{size:16,name:"lock-open","aria-hidden":"true"}}),e._v("\n      "+e._s(e.__("Unlocked"))+"\n    ")],1)],1)])},[],!1,null,null,null).exports,H=i(27),R=i(82),M={directives:{tooltip:L.a},components:{loadingIcon:H.a,userAvatarImage:R.a},props:{loading:{type:Boolean,required:!1,default:!1},participants:{type:Array,required:!1,default:function(){return[]}},numberOfLessParticipants:{type:Number,required:!1,default:7}},data:function(){return{isShowingMoreParticipants:!1}},computed:{lessParticipants:function(){return this.participants.slice(0,this.numberOfLessParticipants)},visibleParticipants:function(){return this.isShowingMoreParticipants?this.participants:this.lessParticipants},hasMoreParticipants:function(){return this.participants.length>this.numberOfLessParticipants},toggleLabel:function(){return this.isShowingMoreParticipants?Object(T.a)("- show less"):Object(T.f)(Object(T.a)("+ %{moreCount} more"),{moreCount:this.participants.length-this.numberOfLessParticipants})},participantLabel:function(){return Object(T.f)(Object(T.d)("%{count} participant","%{count} participants",this.participants.length),{count:this.loading?"":this.participantCount})},participantCount:function(){return this.participants.length}},methods:{toggleMoreParticipants:function(){this.isShowingMoreParticipants=!this.isShowingMoreParticipants},onClickCollapsedIcon:function(){this.$emit("toggleSidebar")}}},V={components:{participants:Object(w.a)(M,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"sidebar-collapsed-icon",attrs:{title:e.participantLabel,"data-container":"body","data-placement":"left","data-boundary":"viewport"},on:{click:e.onClickCollapsedIcon}},[i("i",{staticClass:"fa fa-users",attrs:{"aria-hidden":"true"}}),e._v(" "),e.loading?i("loading-icon",{staticClass:"js-participants-collapsed-loading-icon"}):i("span",{staticClass:"js-participants-collapsed-count"},[e._v("\n      "+e._s(e.participantCount)+"\n    ")])],1),e._v(" "),i("div",{staticClass:"title hide-collapsed"},[e.loading?i("loading-icon",{staticClass:"js-participants-expanded-loading-icon",attrs:{inline:!0}}):e._e(),e._v("\n    "+e._s(e.participantLabel)+"\n  ")],1),e._v(" "),i("div",{staticClass:"participants-list hide-collapsed"},e._l(e.visibleParticipants,function(e){return i("div",{key:e.id,staticClass:"participants-author js-participants-author"},[i("a",{staticClass:"author-link",attrs:{href:e.web_url}},[i("user-avatar-image",{attrs:{lazy:!0,"img-src":e.avatar_url,size:24,"tooltip-text":e.name,"css-classes":"avatar-inline","tooltip-placement":"bottom"}})],1)])})),e._v(" "),e.hasMoreParticipants?i("div",{staticClass:"participants-more hide-collapsed"},[i("button",{staticClass:"btn-transparent btn-blank js-toggle-participants-button",attrs:{type:"button"},on:{click:e.toggleMoreParticipants}},[e._v("\n      "+e._s(e.toggleLabel)+"\n    ")])]):e._e()])},[],!1,null,null,null).exports},props:{mediator:{type:Object,required:!0}},data:function(){return{store:new u}}},z=Object(w.a)(V,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"block participants"},[t("participants",{attrs:{loading:this.store.isFetching.participants,participants:this.store.participants,"number-of-less-participants":7}})],1)},[],!1,null,null,null).exports,W={components:{subscriptions:i(225).a},props:{mediator:{type:Object,required:!0}},data:function(){return{store:new u}},methods:{onToggleSubscription:function(){this.mediator.toggleSubscription().catch(function(){Object(a.a)(Object(T.a)("Error occurred when toggling the notification subscription"))})}}},Y=Object(w.a)(W,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"block subscriptions"},[t("subscriptions",{attrs:{loading:this.store.isFetching.subscriptions,subscribed:this.store.subscribed},on:{toggleSubscription:this.onToggleSubscription}})],1)},[],!1,null,null,null).exports,J=i(72);function Z(e){var t;!function(e){var t=document.getElementById("js-vue-sidebar-assignees");t&&new s.default({el:t,components:{SidebarAssignees:j},render:function(i){return i("sidebar-assignees",{props:{mediator:e,field:t.dataset.field,signedIn:t.hasAttribute("data-signed-in"),issuableType:gl.utils.isInIssuePage()?"issue":"merge_request"}})}})}(e),function(e){var t=document.getElementById("js-confidential-entry-point");if(t){var i=document.getElementById("js-confidential-issue-data"),n=JSON.parse(i.innerHTML);new(s.default.extend(A))({propsData:{isConfidential:n.is_confidential,isEditable:n.is_editable,service:e.service}}).$mount(t)}}(e),function(e){var t=document.getElementById("js-lock-entry-point");if(t){var i=document.getElementById("js-lock-issue-data"),n=JSON.parse(i.innerHTML);new(s.default.extend(B))({propsData:{isLocked:n.is_locked,isEditable:n.is_editable,mediator:e,issuableType:gl.utils.isInIssuePage()?"issue":"merge_request"}}).$mount(t)}}(e),function(e){var t=document.querySelector(".js-sidebar-participants-entry-point");t&&new s.default({el:t,components:{sidebarParticipants:z},render:function(t){return t("sidebar-participants",{props:{mediator:e}})}})}(e),function(e){var t=document.querySelector(".js-sidebar-subscriptions-entry-point");t&&new s.default({el:t,components:{sidebarSubscriptions:Y},render:function(t){return t("sidebar-subscriptions",{props:{mediator:e}})}})}(e),new P(e,p()(".js-move-issue"),p()(".js-move-issue-confirmation-button")).init(),(t=document.getElementById("issuable-time-tracker"))&&new s.default({el:t,components:{SidebarTimeTracking:C},render:function(e){return e("sidebar-time-tracking",{})}})}s.default.use(J.a);t.a=function(){var e=new h(JSON.parse(document.querySelector(".js-sidebar-options").innerHTML));e.fetch(),Z(e)}},344:function(e,t,i){"use strict";var n=i(132),a=i(107),s=i(231),r=i(145),o=i(103);t.a=function(){var e=JSON.parse(document.querySelector(".js-sidebar-options").innerHTML);new n.a({full_path:e.fullPath}),new a.a,new s.a(e.currentUser),new o.a,r.a.initialize()}},43:function(e,t,i){"use strict";var n=new(i(8).default);window.emitSidebarEvent=function(){return n.$emit.apply(n,arguments)},t.a=n},79:function(e,t,i){"use strict";var n=i(0),a=i.n(n),s=i(3),r=i.n(s),o=i(5),l=i(7);t.a={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.container,e.form),i=e.issues,n=e.prefixId;this.prefixId=n||"issue_",this.form=t||this.getElement(".bulk-update"),this.$labelDropdown=this.form.find(".js-label-select"),this.issues=i||this.getElement(".issues-list .issue"),this.willUpdateLabels=!1,this.bindEvents()},bindEvents:function(){return this.form.off("submit").on("submit",this.onFormSubmit.bind(this))},onFormSubmit:function(e){return e.preventDefault(),this.submit()},submit:function(){var e=this;o.a[this.form.attr("method")](this.form.attr("action"),this.getFormDataAsObject()).then(function(){return window.location.reload()}).catch(function(){return e.onFormSubmitFailure()})},onFormSubmitFailure:function(){return this.form.find('[type="submit"]').enable(),new l.a("Issue update failed")},getSelectedIssues:function(){return this.issues.has(".selected_issue:checked")},getLabelsFromSelection:function(){var e=[];return this.getSelectedIssues().map(function(){var t=a()(this).data("labels");if(t)return t.map(function(t){if(-1===e.indexOf(t))return e.push(t)})}),e},getUnmarkedIndeterminedLabels:function(){var e=[],t=this.$labelDropdown.data("indeterminate");return this.getLabelsFromSelection().forEach(function(i){-1===t.indexOf(i)&&e.push(i)}),e},getFormDataAsObject:function(){var e={update:{state_event:this.form.find('input[name="update[state_event]"]').val(),assignee_id:this.form.find('input[name="update[assignee_id]"]').val(),assignee_ids:[this.form.find('input[name="update[assignee_ids][]"]').val()],milestone_id:this.form.find('input[name="update[milestone_id]"]').val(),issuable_ids:this.form.find('input[name="update[issuable_ids]"]').val(),subscription_event:this.form.find('input[name="update[subscription_event]"]').val(),add_label_ids:[],remove_label_ids:[]}};return this.willUpdateLabels&&(e.update.add_label_ids=this.$labelDropdown.data("marked"),e.update.remove_label_ids=this.$labelDropdown.data("unmarked")),e},setOriginalDropdownData:function(){var e=a()(".bulk-update .js-label-select");e.data("common",this.getOriginalCommonIds()),e.data("marked",this.getOriginalMarkedIds()),e.data("indeterminate",this.getOriginalIndeterminateIds())},getOriginalCommonIds:function(){var e=this,t=[];return this.getElement(".selected_issue:checked").each(function(i,n){t.push(e.getElement("#"+e.prefixId+n.dataset.id).data("labels"))}),r.a.intersection.apply(this,t)},getOriginalMarkedIds:function(){var e=this,t=[];return this.getElement(".selected_issue:checked").each(function(i,n){t.push(e.getElement("#"+e.prefixId+n.dataset.id).data("labels"))}),r.a.intersection.apply(this,t)},getOriginalIndeterminateIds:function(){var e=this,t=[],i=[],n=[];return this.getElement(".selected_issue:checked").each(function(a,s){(n=e.getElement("#"+e.prefixId+s.dataset.id).data("labels")).forEach(function(e){-1===t.indexOf(e)&&t.push(e)}),i.push(n)}),i.unshift(t),r.a.difference(t,r.a.intersection.apply(this,i))},getElement:function(e){return this.scopeEl=this.scopeEl||a()(".content"),this.scopeEl.find(e)}}},81:function(e,t,i){"use strict";var n=i(0),a=i.n(n),s=i(3),r=i.n(s),o=i(5),l=i(1),c=i(47),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function d(e,t){var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.users=this.users.bind(this),this.user=this.user.bind(this),this.usersPath="/autocomplete/users.json",this.userPath="/autocomplete/users/:id.json",null!=e&&("object"===(void 0===e?"undefined":u(e))?this.currentUser=e:this.currentUser=JSON.parse(e));var s,d=n.handleClick;i=a()(t),t||(i=a()(".js-user-search")),i.each((s=this,function(e,t){var i,n,u,h,f,p,m,g,b,v,y,w,C,_,k,S,j,T,L,O={};u=a()(t),O.projectId=u.data("projectId"),O.groupId=u.data("groupId"),O.showCurrentUser=u.data("currentUser"),O.todoFilter=u.data("todoFilter"),O.todoStateFilter=u.data("todoStateFilter"),T=u.data("nullUser"),w=u.data("nullUserDefault"),L=u.data("showMenuAbove"),j=u.data("anyUser"),C=u.data("firstUser"),O.authorId=u.data("authorId"),y=u.data("defaultLabel"),_=u.data("issueUpdate"),f=u.closest(".selectbox"),i=f.closest(".block"),m=u.data("abilityName"),p=i.find(".value"),n=i.find(".sidebar-collapsed-user"),h=i.find(".block-loading").fadeOut(),S=w&&T?0:null,void 0===(k=u.data("selected"))&&(k=S);var E=function(){var e=u.closest(".selectbox").find("input[name='"+u.data("fieldName")+"'][value=0]");e&&e.remove();var t=document.createElement("input");t.type="hidden",t.name=u.data("fieldName");var i=u.data("currentUserInfo");i?(t.value=i.id,t.dataset.meta=r.a.escape(i.name)):s.currentUser&&(t.value=s.currentUser.id),f?u.parent().before(t):u.after(t)};i[0]&&i[0].addEventListener("assignYourself",E);var x=function(){return f.find('input[name="'+u.data("fieldName")+'"]')},D=function(){return x().map(function(e,t){return parseInt(t.value,10)}).get()},A=function(){var e=u.data("maxSelect");if(e){var t=D();if(t.length>e){var i=t[0];u.closest(".selectbox").find("input[name='"+u.data("fieldName")+"'][value="+i+"]").remove(),emitSidebarEvent("sidebar.removeAssignee",{id:i})}}},I=function(e,t){var i=D().filter(function(e){return 0!==e}),n=x().map(function(e,t){return{name:t.dataset.meta,value:parseInt(t.value,10)}}).filter(function(e){return 0!==e.id}).get(0);if(0===i.length)return"Unassigned";if(1===i.length)return n.name;if(t){var a=i.filter(function(t){return t!==e.id});return e.name+" + "+a.length+" more"}return n.name+" + "+(i.length-1)+" more"};return a()(".assign-to-me-link").on("click",function(e){if(e.preventDefault(),a()(e.currentTarget).hide(),u.data("multiSelect")){E(),A();var t=u.data("currentUserInfo");u.find(".dropdown-toggle-text").text(I(t)).removeClass("is-default")}else{var i=a()('input[name="'+u.data("fieldName")+'"]');i.val(gon.current_user_id),k=i.val(),u.find(".dropdown-toggle-text").text(gon.current_user_fullname).removeClass("is-default")}}),i.on("click",".js-assign-yourself",function(e){return e.preventDefault(),g(s.currentUser.id)}),g=function(e){var t;return(t={})[m]={},t[m].assignee_id=null!=e?e:null,h.removeClass("hidden").fadeIn(),u.trigger("loading.gl.dropdown"),o.a.put(_,t).then(function(e){var t,i,a=e.data;return u.trigger("loaded.gl.dropdown"),h.fadeOut(),a.assignee?(t={name:a.assignee.name,username:a.assignee.username,avatar:a.assignee.avatar_url},i=r.a.escape(t.name)):(t={name:"Unassigned",username:"",avatar:""},i=Object(l.a)("Assignee")),p.html(b(t)),n.attr("title",i).tooltip("_fixTitle"),n.html(v(t))})},v=r.a.template('<% if( avatar ) { %> <a class="author-link" href="/<%- username %>"> <img width="24" class="avatar avatar-inline s24" alt="" src="<%- avatar %>"> </a> <% } else { %> <i class="fa fa-user"></i> <% } %>'),b=r.a.template('<% if (username) { %> <a class="author-link bold" href="/<%- username %>"> <% if( avatar ) { %> <img width="32" class="avatar avatar-inline s32" alt="" src="<%- avatar %>"> <% } %> <span class="author"><%- name %></span> <span class="username"> @<%- username %> </span> </a> <% } else { %> <span class="no-value assign-yourself"> No assignee - <a href="#" class="js-assign-yourself"> assign yourself </a> </span> <% } %>'),u.glDropdown({showMenuAbove:L,data:function(e,t){return s.users(e,O,function(i){(this.instance||this.options.instance).options.processData(e,i,t)}.bind(this))},processData:function(e,t,i){var n=t;if(u.hasClass("js-multiselect")&&0===e.length){var a=x(),s=r.a.uniq(a,!1,function(e){return e.value}).filter(function(e){var t=parseInt(e.value,10);return!n.find(function(e){return e.id===t})&&0!==t}).map(function(e){var t=parseInt(e.value,10),i=e.dataset,n=i.avatarUrl,a=i.avatar_url,s=i.name,r=i.username;return{avatar_url:n||a,id:t,name:s,username:r}});n=t.concat(s)}var o=void 0,l=void 0,c=void 0,d=void 0,h=void 0,f=void 0;if(0===e.length){if(f=0,C)for(l=0,c=n.length;l<c;l+=1)if((h=n[l]).username===C){n.splice(l,1),n.unshift(h);break}if(T&&(f+=1,n.unshift({beforeDivider:!0,name:"Unassigned",id:0})),j&&(f+=1,!0===(d=j)&&(d="Any User"),o={beforeDivider:!0,name:d,id:null},n.unshift(o)),f&&n.splice(f,0,"divider"),u.hasClass("js-multiselect")){var p=D().filter(function(e){return 0!==e});if(p.length>0){u.data("dropdownHeader")&&(f+=1,n.splice(f,0,{header:u.data("dropdownHeader")}));var m=n.filter(function(e){return-1!==p.indexOf(e.id)}).sort(function(e,t){return e.name>t.name});n=n.filter(function(e){return-1===p.indexOf(e.id)}),m.forEach(function(e){f+=1,n.splice(f,0,e)}),n.splice(f+1,0,"divider")}}}i(n),L&&u.data("glDropdown").positionMenuAbove()},filterable:!0,filterRemote:!0,search:{fields:["name","username"]},selectable:!0,fieldName:u.data("fieldName"),toggleLabel:function(e,t,i){var n=i.filterInput.val();if(this.multiSelect&&""===n){var s=i.filteredFullData(),r=i.parseData.bind(i);this.processData(n,s,r)}return this.multiSelect?I(e,a()(t).hasClass("is-active")):e&&"id"in e&&a()(t).hasClass("is-active")?(u.find(".dropdown-toggle-text").removeClass("is-default"),e.text?e.text:e.name):(u.find(".dropdown-toggle-text").addClass("is-default"),y)},defaultLabel:y,hidden:function(e){u.hasClass("js-multiselect")&&emitSidebarEvent("sidebar.saveAssignees"),u.data("alwaysShowSelectbox")||(f.hide(),i=f.closest(".block"),(p=i.find(".value")).css("display",""))},multiSelect:u.hasClass("js-multiselect"),inputMeta:u.data("inputMeta"),clicked:function(e){var t,i,n,s,r=e.$el,o=e.e,l=e.isMarking,h=e.selectedObj;if(u.hasClass("js-multiselect")){var f=r.hasClass("is-active"),p=u.closest(".selectbox").find("input[name='"+u.data("fieldName")+"'][value!=0]");if(A(),h.beforeDivider&&"unassigned"===h.name.toLowerCase())p.each(function(e,t){parseInt(t.value,10),t.remove()}),emitSidebarEvent("sidebar.removeAllAssignees");else if(f){emitSidebarEvent("sidebar.addAssignee",h);var m=u.closest(".selectbox").find("input[name='"+u.data("fieldName")+"'][value=0]");m&&m.remove()}else 0===p.length&&this.addInput(u.data("fieldName"),0,{}),emitSidebarEvent("sidebar.removeAssignee",h);D().find(function(e){return e===gon.current_user_id})?a()(".assign-to-me-link").hide():a()(".assign-to-me-link").show()}if(t="projects:issues:index"===(n=a()("body").attr("data-page")),i=n==n&&"projects:merge_requests:index"===n,u.hasClass("js-filter-bulk-update")||u.hasClass("js-issuable-form-dropdown")){o.preventDefault();var b=h.id!==k;(k=b?h.id:S)===gon.current_user_id?a()(".assign-to-me-link").hide():a()(".assign-to-me-link").show()}else{if(r.closest(".add-issues-modal").length)c.a.store.filter[u.data("fieldName")]=h.id;else if(d)o.preventDefault(),d(h,l);else{if(u.hasClass("js-filter-submit")&&(t||i))return Issuable.filterResults(u.closest("form"));if(u.hasClass("js-filter-submit"))return u.closest("form").submit();if(!u.hasClass("js-multiselect"))return s=u.closest(".selectbox").find("input[name='"+u.data("fieldName")+"']").val(),g(s)}u.data("maxSelect")&&D().length===u.data("maxSelect")&&u.dropdown("toggle")}},id:function(e){return e.id},opened:function(e){var t=a()(e.currentTarget),i=D();function n(e){t.find('li[data-user-id="'+e+'"] .dropdown-menu-user-link').addClass("is-active")}u.hasClass("js-issue-board-sidebar")&&0===i.length&&this.addInput(u.data("fieldName"),0,{}),t.find(".is-active").removeClass("is-active"),i.length>0?D().forEach(function(e){return n(e)}):u.hasClass("js-issue-board-sidebar")?n(0):n(k)},updateLabel:u.data("dropdownTitle"),renderRow:function(e){var t,i,n;n=e.username?"@"+e.username:"",t=e.avatar_url?e.avatar_url:gon.default_avatar_url;var a=!1;if(this.multiSelect){a=D().find(function(t){return e.id===t});var s=this.fieldName;u.closest(".selectbox").find("input[name='"+s+"'][value='"+e.id+"']").length&&(a=!0)}else a=e.id===k;return i="",null!=e.beforeDivider?r.a.escape(e.name):i="<img src='"+t+"' class='avatar avatar-inline' width='32' />","\n            <li data-user-id="+e.id+">\n              <a href='#' class='dropdown-menu-user-link "+(!0===a?"is-active":"")+"'>\n                "+i+"\n                <strong class='dropdown-menu-user-full-name'>\n                  "+r.a.escape(e.name)+"\n                </strong>\n                "+(n?"<span class='dropdown-menu-user-username'>"+n+"</span>":"")+"\n              </a>\n            </li>\n          "}})})),a()(".ajax-users-select").each(function(e){return function(t,i){var n,s,r,o,l={};return l.skipLdap=a()(i).hasClass("skip_ldap"),l.projectId=a()(i).data("projectId"),l.groupId=a()(i).data("groupId"),l.showCurrentUser=a()(i).data("currentUser"),l.authorId=a()(i).data("authorId"),l.skipUsers=a()(i).data("skipUsers"),o=a()(i).data("nullUser"),s=a()(i).data("anyUser"),r=a()(i).data("emailUser"),n=a()(i).data("firstUser"),a()(i).select2({placeholder:"Search for a user",multiple:a()(i).hasClass("multiselect"),minimumInputLength:0,query:function(t){return e.users(t.term,l,function(e){var i,a,l,c,u,d,h,f,p;if(a={results:e},0===t.term.length){if(n)for(c=0,u=(p=a.results).length;c<u;c+=1)if((f=p[c]).username===n){a.results.splice(c,1),a.results.unshift(f);break}o&&(h={name:"Unassigned",id:0},a.results.unshift(h)),s&&(!0===(d=s)&&(d="Any User"),i={name:d,id:null},a.results.unshift(i))}if(r&&0===a.results.length&&t.term.match(/^[^@]+@[^@]+$/)){var m=t.term.trim();l={name:'Invite "'+t.term+'" by email',username:m,id:m,invite:!0},a.results.unshift(l)}return t.callback(a)})},initSelection:function(){var t;return t=1<=arguments.length?[].slice.call(arguments,0):[],e.initSelection.apply(e,t)},formatResult:function(){var t;return t=1<=arguments.length?[].slice.call(arguments,0):[],e.formatResult.apply(e,t)},formatSelection:function(){var t;return t=1<=arguments.length?[].slice.call(arguments,0):[],e.formatSelection.apply(e,t)},dropdownCssClass:"ajax-users-dropdown",escapeMarkup:function(e){return e}})}}(this))}window.emitSidebarEvent=window.emitSidebarEvent||a.a.noop,d.prototype.initSelection=function(e,t){var i;return"0"===(i=a()(e).val())?t({name:"Unassigned"}):""!==i?this.user(i,t):void 0},d.prototype.formatResult=function(e){var t;return t=e.avatar_url?e.avatar_url:gon.default_avatar_url,"<div class='user-result "+(e.username?void 0:"no-username")+"'> <div class='user-image'><img class='avatar avatar-inline s32' src='"+t+"'></div> <div class='user-name dropdown-menu-user-full-name'>"+r.a.escape(e.name)+"</div> <div class='user-username dropdown-menu-user-username'>"+(e.invite?"":"@"+r.a.escape(e.username))+"</div> </div>"},d.prototype.formatSelection=function(e){return r.a.escape(e.name)},d.prototype.user=function(e,t){return!!/^\d+$/.test(e)&&(i=(i=this.buildUrl(this.userPath)).replace(":id",e),o.a.get(i).then(function(e){var i=e.data;t(i)}));var i},d.prototype.users=function(e,t,i){var n=this.buildUrl(this.usersPath),a={search:e,active:!0,project_id:t.projectId||null,group_id:t.groupId||null,skip_ldap:t.skipLdap||null,todo_filter:t.todoFilter||null,todo_state_filter:t.todoStateFilter||null,current_user:t.showCurrentUser||null,author_id:t.authorId||null,skip_users:t.skipUsers||null};return o.a.get(n,{params:a}).then(function(e){var t=e.data;i(t)})},d.prototype.buildUrl=function(e){return null!=gon.relative_url_root&&(e=gon.relative_url_root.replace(/\/$/,"")+e),e},t.a=d},82:function(e,t,i){"use strict";var n=i(89),a=i.n(n),s=i(128),r={name:"UserAvatarImage",directives:{tooltip:i(12).a},props:{lazy:{type:Boolean,required:!1,default:!1},imgSrc:{type:String,required:!1,default:a.a},cssClasses:{type:String,required:!1,default:""},imgAlt:{type:String,required:!1,default:"user avatar"},size:{type:Number,required:!1,default:20},tooltipText:{type:String,required:!1,default:""},tooltipPlacement:{type:String,required:!1,default:"top"}},computed:{sanitizedSource:function(){var e=""===this.imgSrc||null===this.imgSrc?a.a:this.imgSrc;return-1===e.indexOf("?")&&(e+="?width="+this.size),e},resultantSrcAttribute:function(){return this.lazy?s.b:this.sanitizedSource},tooltipContainer:function(){return this.tooltipText?"body":null},avatarSizeClass:function(){return"s"+this.size}}},o=i(2),l=Object(o.a)(r,function(){var e,t=this,i=t.$createElement;return(t._self._c||i)("img",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"avatar",class:(e={lazy:t.lazy},e[t.avatarSizeClass]=!0,e[t.cssClasses]=!0,e),attrs:{src:t.resultantSrcAttribute,width:t.size,height:t.size,alt:t.imgAlt,"data-src":t.sanitizedSource,"data-container":t.tooltipContainer,"data-placement":t.tooltipPlacement,title:t.tooltipText,"data-boundary":"window"}})},[],!1,null,null,null);t.a=l.exports},872:function(e,t,i){"use strict";i.r(t);var n=i(341),a=i(0),s=i.n(a),r=i(8),o=i(7),l=i(344),c=i(39),u=i.n(c);!function(e){e.mergeConflicts=e.mergeConflicts||{};var t=u.a.get("diff_view"),i="parallel",n="text",a="text-editor";e.mergeConflicts.mergeConflictsStore={state:{isLoading:!0,hasError:!1,isSubmitting:!1,isParallel:t===i,diffViewType:t,conflictsData:{}},setConflictsData:function(e){this.decorateFiles(e.files),this.state.conflictsData={files:e.files,commitMessage:e.commit_message,sourceBranch:e.source_branch,targetBranch:e.target_branch,shortCommitSha:e.commit_sha.slice(0,7)}},decorateFiles:function(e){var t=this;e.forEach(function(e){e.content="",e.resolutionData={},e.promptDiscardConfirmation=!1,e.resolveMode="interactive",e.filePath=t.getFilePath(e),e.iconClass="fa-"+e.blob_icon,e.blobPath=e.blob_path,e.type===n?(e.showEditor=!1,e.loadEditor=!1,t.setInlineLine(e),t.setParallelLine(e)):e.type===a&&(e.showEditor=!0,e.loadEditor=!0)})},setInlineLine:function(e){var t=this;e.inlineLines=[],e.sections.forEach(function(i){var n="new",a=i.conflict,s=i.lines,r=i.id;a&&e.inlineLines.push(t.getHeadHeaderLine(r)),s.forEach(function(i){var s=i.type;"new"!==s&&"old"!==s||n===s||(n=s,e.inlineLines.push({lineType:"emptyLine",richText:""})),t.decorateLineForInlineView(i,r,a),e.inlineLines.push(i)}),a&&e.inlineLines.push(t.getOriginHeaderLine(r))})},setParallelLine:function(e){var t=this;e.parallelLines=[];var i={left:[],right:[]};e.sections.forEach(function(e){var n=e.conflict,a=e.lines,s=e.id;n&&(i.left.push(t.getOriginHeaderLine(s)),i.right.push(t.getHeadHeaderLine(s))),a.forEach(function(e){var a=e.type;if(n)"old"===a?i.left.push(t.getLineForParallelView(e,s,"conflict")):"new"===a&&i.right.push(t.getLineForParallelView(e,s,"conflict",!0));else{var r=a||"context";i.left.push(t.getLineForParallelView(e,s,r)),i.right.push(t.getLineForParallelView(e,s,r,!0))}}),t.checkLineLengths(i)});for(var n=0,a=i.left.length;n<a;n+=1)e.parallelLines.push([i.right[n],i.left[n]])},setLoadingState:function(e){this.state.isLoading=e},setErrorState:function(e){this.state.hasError=e},setFailedRequest:function(e){this.state.hasError=!0,this.state.conflictsData.errorMessage=e},getConflictsCount:function(){if(!this.state.conflictsData.files.length)return 0;var e=0;return this.state.conflictsData.files.forEach(function(t){t.type===n?t.sections.forEach(function(t){t.conflict&&(e+=1)}):e+=1}),e},getConflictsCountText:function(){var e=this.getConflictsCount();return e+" "+(e>1?"conflicts":"conflict")},setViewType:function(e){this.state.diffView=e,this.state.isParallel=e===i,u.a.set("diff_view",e)},getHeadHeaderLine:function(e){return{id:e,richText:"HEAD//our changes",buttonTitle:"Use ours",type:"new",section:"head",isHeader:!0,isHead:!0,isSelected:!1,isUnselected:!1}},decorateLineForInlineView:function(e,t,i){var n=e.type;e.id=t,e.hasConflict=i,e.isHead="new"===n,e.isOrigin="old"===n,e.hasMatch="match"===n,e.richText=e.rich_text,e.isSelected=!1,e.isUnselected=!1},getLineForParallelView:function(e,t,i,n){var a=e.old_line,s=e.new_line,r=e.rich_text,o="conflict"===i;return{id:t,lineType:i,hasConflict:o,isHead:o&&n,isOrigin:o&&!n,hasMatch:"match"===i,lineNumber:n?s:a,section:n?"head":"origin",richText:r,isSelected:!1,isUnselected:!1}},getOriginHeaderLine:function(e){return{id:e,richText:"origin//their changes",buttonTitle:"Use theirs",type:"old",section:"origin",isHeader:!0,isOrigin:!0,isSelected:!1,isUnselected:!1}},getFilePath:function(e){var t=e.old_path,i=e.new_path;return t===i?i:t+" → "+i},checkLineLengths:function(e){var t=e.left,i=e.right;if(t.length!==i.length)if(t.length>i.length)for(var n=t.length-i.length,a=0;a<n;a+=1)i.push({lineType:"emptyLine",richText:""});else for(var s=i.length-t.length,r=0;r<s;r+=1)t.push({lineType:"emptyLine",richText:""})},setPromptConfirmationState:function(e,t){e.promptDiscardConfirmation=t},setFileResolveMode:function(e,t){"interactive"===t?e.showEditor=!1:"edit"===t&&(e.showEditor=!0,e.loadEditor=!0,e.resolutionData={},this.restoreFileLinesState(e)),e.resolveMode=t},restoreFileLinesState:function(e){e.inlineLines.forEach(function(e){(e.hasConflict||e.isHeader)&&(e.isSelected=!1,e.isUnselected=!1)}),e.parallelLines.forEach(function(e){var t=e[0],i=e[1],n=t.hasConflict||t.isHeader,a=i.hasConflict||i.isHeader;(n||a)&&(t.isSelected=!1,t.isUnselected=!1,i.isSelected=!1,i.isUnselected=!1)})},isReadyToCommit:function(){for(var e=this.state.conflictsData.files,t=s.a.trim(this.state.conflictsData.commitMessage).length,i=0,a=0,r=e.length;a<r;a+=1){var o=e[a];if("interactive"===o.resolveMode){var l=0,c=Object.keys(o.resolutionData).length;if(o.type===n){for(var u=0,d=o.sections.length;u<d;u+=1)o.sections[u].conflict&&(l+=1);c!==l&&(i+=1)}}else if("edit"===o.resolveMode&&!o.content){i+=1;continue}}return!this.state.isSubmitting&&t&&!i},getCommitButtonText:function(){var e="Commit to source branch";return this.state&&this.state.isSubmitting?"Committing...":e},getCommitData:function(){var e={};return e={commit_message:this.state.conflictsData.commitMessage,files:[]},this.state.conflictsData.files.forEach(function(t){var i={old_path:t.old_path,new_path:t.new_path};t.type===n?"interactive"===t.resolveMode?i.sections=t.resolutionData:"edit"===t.resolveMode&&(i.content=t.content):t.type===a&&(i.content=t.content),e.files.push(i)}),e},handleSelected:function(e,t,i){var n=this;r.default.set(e.resolutionData,t,i),e.inlineLines.forEach(function(e){e.id===t&&(e.hasConflict||e.isHeader)&&n.markLine(e,i)}),e.parallelLines.forEach(function(e){var a=e[0],s=e[1],r=s.id===t||a.id===t,o=a.hasConflict||a.isHeader,l=s.hasConflict||s.isHeader;r&&(o||l)&&(n.markLine(a,i),n.markLine(s,i))})},markLine:function(e,t){"head"===t&&e.isHead?(e.isSelected=!0,e.isUnselected=!1):"origin"===t&&e.isOrigin?(e.isSelected=!0,e.isUnselected=!1):(e.isSelected=!1,e.isUnselected=!0)},setSubmitState:function(e){this.state.isSubmitting=e},fileTextTypePresent:function(){return this.state.conflictsData.files.some(function(e){return e.type===n})}}}(window.gl||(window.gl={}));var d=i(5),h=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var f,p,m,g,b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.conflictsPath=t.conflictsPath,this.resolveConflictsPath=t.resolveConflictsPath}return h(e,[{key:"fetchConflictsData",value:function(){return d.a.get(this.conflictsPath)}},{key:"submitResolveConflicts",value:function(e){return d.a.post(this.resolveConflictsPath,e)}}]),e}(),v=i(1);(f=window.gl||(window.gl={})).mergeConflicts=f.mergeConflicts||{},f.mergeConflicts.diffFileEditor=r.default.extend({props:{file:{type:Object,required:!0},onCancelDiscardConfirmation:{type:Function,required:!0},onAcceptDiscardConfirmation:{type:Function,required:!0}},data:function(){return{saved:!1,loading:!1,fileLoaded:!1,originalContent:""}},computed:{classObject:function(){return{saved:this.saved,"is-loading":this.loading}}},watch:(p={},m="file.showEditor",g=function(e){this.resetEditorContent(),!e||this.fileLoaded||this.loading||this.loadEditor()},m in p?Object.defineProperty(p,m,{value:g,enumerable:!0,configurable:!0,writable:!0}):p[m]=g,p),mounted:function(){this.file.loadEditor&&this.loadEditor()},methods:{loadEditor:function(){var e=this;this.loading=!0,d.a.get(this.file.content_path).then(function(t){var i=t.data,n=e.$el.querySelector("pre"),a=document.createTextNode(i.content);n.textContent=a.textContent,e.originalContent=i.content,e.fileLoaded=!0,e.editor=ace.edit(n),e.editor.$blockScrolling=1/0,e.editor.getSession().setMode("ace/mode/"+i.blob_ace_mode),e.editor.on("change",function(){e.saveDiffResolution()}),e.saveDiffResolution(),e.loading=!1}).catch(function(){Object(o.a)(Object(v.a)("An error occurred while loading the file")),e.loading=!1})},saveDiffResolution:function(){this.saved=!0,this.file.content=this.editor.getValue(),this.file.resolveEditChanged=this.file.content!==this.originalContent,this.file.promptDiscardConfirmation=!1},resetEditorContent:function(){this.fileLoaded&&this.editor.setValue(this.originalContent,-1)},cancelDiscardConfirmation:function(e){this.onCancelDiscardConfirmation(e)},acceptDiscardConfirmation:function(e){this.onAcceptDiscardConfirmation(e)}}});var y={methods:{handleSelected:function(e,t,i){gl.mergeConflicts.mergeConflictsStore.handleSelected(e,t,i)}}},w={methods:{lineCssClass:function(e){return{head:e.isHead,origin:e.isOrigin,match:e.hasMatch,selected:e.isSelected,unselected:e.isUnselected}}}};!function(e){e.mergeConflicts=e.mergeConflicts||{},e.mergeConflicts.inlineConflictLines=r.default.extend({mixins:[w,y],props:{file:{type:Object,required:!0}}})}(window.gl||(window.gl={})),function(e){e.mergeConflicts=e.mergeConflicts||{},e.mergeConflicts.parallelConflictLines=r.default.extend({mixins:[w,y],props:{file:{type:Object,required:!0}},template:'\n      <table>\n        <tr class="line_holder parallel" v-for="section in file.parallelLines">\n          <template v-for="line in section">\n            <td class="diff-line-num header" :class="lineCssClass(line)" v-if="line.isHeader"></td>\n            <td class="line_content header" :class="lineCssClass(line)" v-if="line.isHeader">\n              <strong>{{line.richText}}</strong>\n              <button class="btn" @click="handleSelected(file, line.id, line.section)">{{line.buttonTitle}}</button>\n            </td>\n            <td class="diff-line-num old_line" :class="lineCssClass(line)" v-if="!line.isHeader">{{line.lineNumber}}</td>\n            <td class="line_content parallel" :class="lineCssClass(line)" v-if="!line.isHeader" v-html="line.richText"></td>\n          </template>\n        </tr>\n      </table>\n    '})}(window.gl||(window.gl={}));var C=i(129);document.addEventListener("DOMContentLoaded",function(){var e,t,i;Object(n.a)(),e=document.querySelector("#conflicts"),t=gl.mergeConflicts.mergeConflictsStore,i=new b({conflictsPath:e.dataset.conflictsPath,resolveConflictsPath:e.dataset.resolveConflictsPath}),Object(l.a)(),gl.MergeConflictsResolverApp=new r.default({el:"#conflicts",components:{"diff-file-editor":gl.mergeConflicts.diffFileEditor,"inline-conflict-lines":gl.mergeConflicts.inlineConflictLines,"parallel-conflict-lines":gl.mergeConflicts.parallelConflictLines},data:t.state,computed:{conflictsCountText:function(){return t.getConflictsCountText()},readyToCommit:function(){return t.isReadyToCommit()},commitButtonText:function(){return t.getCommitButtonText()},showDiffViewTypeSwitcher:function(){return t.fileTextTypePresent()}},created:function(){var e=this;i.fetchConflictsData().then(function(i){var n=i.data;"error"===n.type?t.setFailedRequest(n.message):t.setConflictsData(n),t.setLoadingState(!1),e.$nextTick(function(){Object(C.a)(s()(".js-syntax-highlight"))})}).catch(function(){t.setLoadingState(!1),t.setFailedRequest()})},methods:{handleViewTypeChange:function(e){t.setViewType(e)},onClickResolveModeButton:function(e,i){"interactive"===i&&e.resolveEditChanged?t.setPromptConfirmationState(e,!0):t.setFileResolveMode(e,i)},acceptDiscardConfirmation:function(e){t.setPromptConfirmationState(e,!1),t.setFileResolveMode(e,"interactive")},cancelDiscardConfirmation:function(e){t.setPromptConfirmationState(e,!1)},commit:function(){t.setSubmitState(!0),i.submitResolveConflicts(t.getCommitData()).then(function(e){var t=e.data;window.location.href=t.redirect_to}).catch(function(){t.setSubmitState(!1),Object(o.a)("Failed to save merge conflicts resolutions. Please try again!")})}}})})},89:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAABLCAAAAAAdJSU2AAACNElEQVR4AdXYBa7jMBCA4b3/JZahzIkjp2qt+BWUWnG5ln2XxaJJb2b5F2ukL4wvzK/rP7bUcbf92u6oftLSe1ldk8efsfaVeEjusZZeC6e1RllaCk/yG6ag1lZ4WwPX69uyD6tAe/g2ipAlNMRS37awDLaFrpcMWxXQOi0jnWCWjFkSZomYJWDWKmatYNZyEWkJsvQimoZYah5NgdaLxagCtF6GRy0DshZPkeYwS/KIJWGWYjwYUzDLxCwDtJ54OKglimBLqHWahii2g1pmHLLGBmwVoRjcKlmgOdw65H5qKuGWCVi5Qlhs6m1sENZi4q3AWNvca5UYy2RjT/SAsiZey6CsIvc0wVlV5lJ0ibPMyLUGCmlxQq0IM0hLdWyro7CWEc3sXsqaK4O2zLxOsmtpfW5Q1u68ZrVmepaaNXEewawtI9X5Xl3U3n1qND6+rfPzvqoIWz/fklNCSLY153YV53J/XUxGCJnKZ1lajsn3/Ffegf6Y5pV2LUsSNL2UHzxUfh3TlYpZqqTpXZm0KZk9zJcqaEmaWPHDw0pxe05K7bWOLHFLWXVetqpYmrjle4+1y0aBaF4UOQ1NU+lYezJClkjLUnSEjqhH6zjAW4OjtY39Ibq+sawUb6W2RQfoqG0VeKuwrRJvlba17faRdbe2pTtYq6Nty/S7yAbGsQjWIq41wVoT1+IdZNy1djUcVdu5lklQWC0xHkt1X31qNEE1Pr3qKv/9XiSNj6Aaifj3/69+AYujsR/MvkpZAAAAAElFTkSuQmCC"},960:function(e,t,i){i(31),i(57),e.exports=i(872)}},[[960,0,1,2,4]]]);
//# sourceMappingURL=pages.projects.merge_requests.conflicts.5bf36fd0.chunk.js.map